import{m as b}from"./axios-379d51f3.js";import{_ as P,o as c,i as f,w as i,a as t,f as g,d as x,V as r,h,e as k,b as s,a4 as v}from"./main-a3c71a53.js";import{V as w}from"./VDialog-933a6d14.js";import{V as C}from"./VForm-5339eb09.js";import{V as j}from"./VRow-92069c94.js";import{V as F}from"./VSelect-031c71d9.js";import{V as u}from"./VTextField-fb911d1c.js";import{V as p}from"./VFileInput-276b6294.js";import{V as _}from"./VCheckbox-28b076fc.js";import{b as U,c as V}from"./VWindowItem-33f9aabe.js";import{d as y}from"./VMenu-855d48ee.js";import{V as q}from"./VCard-97c2ca78.js";const N={name:"InsertModal",props:{modelValue:Boolean,orderList:{type:Array,required:!0},statusCreditList:{type:Array,required:!0},closeModal:{type:Function,required:!0},getAllFiles:{type:Function,required:!1}},inject:["loading"],emits:["update:modelValue","insert"],data(){return{dataForm:{id:null,name:"",plafon:null,type:null,type_bussiness:null,desc_bussiness:null,nik_pemohon:null,nik_pasangan:null,name_pasangan:null,nik_jaminan:null,address:null,no_hp:null,order_source:null,status_kredit:null,file1:null,hasFile2:!1,file2:null,hasFile3:!1,file3:null,file4:null,file5:null,hasFile7:!1,file7:null,hasFile8:!1,file8:null,hasFile9:!1,file9:null,hasFile10:!1,file10:null,hasFile11:!1,file11:null,file12:null},uploadProgress:0,selectedPhoto:null,typeCreditList:[{value:1,title:"Reguler"},{value:2,title:"Restruktur"}]}},methods:{async insertData(){try{this.loading.show();const o=new FormData;o.append("name",this.dataForm.name),o.append("nik_pemohon",this.dataForm.nik_pemohon),o.append("address",this.dataForm.address),o.append("type",this.dataForm.type),o.append("no_hp",this.dataForm.no_hp),o.append("order_source",this.dataForm.order_source),o.append("status_kredit",this.dataForm.status_kredit),o.append("plafon",this.dataForm.plafon.replace(/\D/g,"")),o.append("type_bussiness",this.dataForm.type_bussiness),o.append("desc_bussiness",this.dataForm.desc_bussiness),this.dataForm.file2!=null&&(o.append("nik_pasangan",this.dataForm.nik_pasangan),o.append("name_pasangan",this.dataForm.name_pasangan)),this.dataForm.file3!=null&&o.append("nik_jaminan",this.dataForm.nik_jaminan);for(let m=1;m<=12;m++){if(m===6)continue;let l="file"+m,n="noteFile"+m,a="hasFile"+m;this.dataForm.hasOwnProperty(a)&&this.dataForm[a]||this.dataForm[l]?this.dataForm[l]&&(o.append(l,this.dataForm[l]),o.append(n,this.dataForm[n])):this.dataForm[l]&&o.append(l,this.dataForm[l])}o.append("_method","POST");const e={onUploadProgress:m=>{try{this.uploadProgress=Math.round(m.loaded*100/m.total)}catch(l){console.error("Error calculating progress:",l)}},headers:{"Content-Type":"multipart/form-data"}},d=await b.post("/user/credit",o,e);d.status===200?(this.loading.hide(),this.closeModal(1),this.getAllFiles(),this.uploadProgress=null,this.$showToast("success","Success",d.data.message)):(this.loading.hide(),this.uploadProgress=null,this.getAllFiles(),this.$showToast("error","Sorry",d.data.message))}catch(o){this.loading.hide(),this.uploadProgress=null,this.closeModal(1),this.getAllFiles(),this.$showToast("error","Sorry",o.response.data.message)}},handleFileChange(o,e){const d=o.target.files[0];d&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(d.type)?(this.dataForm[e]=d,e=="file1"?this.dataForm.noteFile1="KTP Pemohon":e=="file2"?this.dataForm.noteFile2="KTP Pasangan":e=="file3"?this.dataForm.noteFile3="KTP Atas Nama Jaminan":e=="file4"?this.dataForm.noteFile4="Kartu Keluarga":e=="file5"?this.dataForm.noteFile5="Buku Nikah":e=="file7"?this.dataForm.noteFile7="Jaminan SHM":e=="file8"?this.dataForm.noteFile8="Jaminan BPKB":e=="file9"?this.dataForm.noteFile9="Foto Detail Mesin":e=="file10"?this.dataForm.noteFile10="Foto Kunjungan":e=="file11"?this.dataForm.noteFile11="Foto WhatsApp":e=="file12"&&(this.dataForm.noteFile12="Form Permohonan SLIK")):(this.loading.hide(),this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, dan PDF, WORD yang diizinkan."),o.target.value=null)},resetFile(o){this.dataForm[o]=null},formatInputIn(o){let e=o.target.value;e=e.replace(/\D/g,""),e=e.replace(/\B(?=(\d{3})+(?!\d))/g,","),o.target.value=e},formatNumber(o){return o?o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):""}},computed:{rules(){return{required:o=>!!o||"Field ini harus diisi."}},formattedPlafon:{get(){return this.formatNumber(this.dataForm.plafon)},set(o){this.dataForm.plafon=o.replace(/\D/g,"")}},formattedMaxPlafon:{get(){return this.formatNumber(this.dataForm.plafon)},set(o){this.dataForm.plafon=o.replace(/\D/g,"")}}}},T=s("span",{style:{color:"red"}},"*",-1),A=s("span",{class:"subtitle-1 text-center"},"Pilih Jenis Kredit: ",-1),D=s("span",{style:{color:"red"}},"*",-1),I=s("span",{class:"subtitle-1 text-center"},"Nama Pemohon: ",-1),K=s("span",{style:{color:"red"}},"*",-1),B=s("span",{class:"subtitle-1 text-center"},"Jumlah Plafon: ",-1),S=s("span",{style:{color:"red"}},"*",-1),J=s("span",{class:"subtitle-1 text-center"},"NIK Pemohon: ",-1),M=s("span",{style:{color:"red"}},"*",-1),L=s("span",{class:"subtitle-1 text-center"},"Alamat Pemohon: ",-1),R=s("span",{style:{color:"red"}},"*",-1),W=s("span",{class:"subtitle-1 text-center"},"No. HP Pemohon: ",-1),G=s("span",{style:{color:"red"}},"*",-1),H=s("span",{class:"subtitle-1 text-center"},"KTP Pemohon : ",-1),O=s("span",{class:"subtitle-1 text-center"},"Nama Pasangan / Pendamping : ",-1),E=s("span",{class:"subtitle-1 text-center"},"NIK Pasangan / Pendamping : ",-1),z=s("span",{class:"subtitle-1 text-center"},"KTP Pasangan / Pendamping Pemohon : ",-1),Q=s("span",{class:"subtitle-1 text-center"},"Buku Nikah:",-1),X=s("span",{style:{color:"red"}},"*",-1),Y=s("span",{class:"subtitle-1 text-center"},"Kartu Keluarga : ",-1),Z=s("span",{style:{color:"red"}},"*",-1),$=s("span",{class:"subtitle-1 text-center"},"Pilih sumber order: ",-1),ee=s("span",{style:{color:"red"}},"*",-1),le=s("span",{class:"subtitle-1 text-center"},"Pilih status order: ",-1),ae=s("span",{style:{color:"red"}},"*",-1),te=s("span",{class:"subtitle-1 text-center"},"Pilih Jenis Bukti Kunjungan : ",-1),se=s("span",{style:{color:"red"}},"*",-1),oe=s("span",{class:"subtitle-1 text-center"},"Foto Kunjungan :",-1),ne=s("span",{style:{color:"red"}},"*",-1),ie=s("span",{class:"subtitle-1 text-center"},"Foto WhatsApp :",-1),re=s("span",{style:{color:"red"}},"*",-1),de=s("span",{class:"subtitle-1 text-center"},"KTP atas nama Jaminan : ",-1),me=s("span",{style:{color:"red"}},"*",-1),ue=s("span",{class:"subtitle-1 text-center"},"NIK Pemilik Jaminan: ",-1),pe=s("span",{style:{color:"red"}},"*",-1),ce=s("span",{class:"subtitle-1 text-center"},"Jenis Usaha: ",-1),fe=s("span",{style:{color:"red"}},"*",-1),he=s("span",{class:"subtitle-1 text-center"},"Deskripsi Usaha: ",-1),Fe=s("span",{style:{color:"red"}},"*",-1),ge=s("span",{class:"subtitle-1 text-center"},"Form Permohonan SLIK : ",-1);function _e(o,e,d,m,l,n){return c(),f(w,{"model-value":d.modelValue,"onUpdate:modelValue":e[28]||(e[28]=a=>o.$emit("update:modelValue",a)),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:i(()=>[t(q,null,{title:i(()=>[g("Tambah Data")]),text:i(()=>[t(C,{onSubmit:x(n.insertData,["prevent"])},{default:i(()=>[t(j,null,{default:i(()=>[t(r,{md:"12",cols:"12"},{default:i(()=>[T,A,t(F,{items:l.typeCreditList,autofocus:"",modelValue:l.dataForm.type,"onUpdate:modelValue":e[0]||(e[0]=a=>l.dataForm.type=a),"prepend-icon":"mdi-help-rhombus"},null,8,["items","modelValue"])]),_:1}),t(r,{md:"12",cols:"12"},{default:i(()=>[D,I,t(u,{class:"my-3",modelValue:l.dataForm.name,"onUpdate:modelValue":e[1]||(e[1]=a=>l.dataForm.name=a),rules:[n.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(r,{md:"12",cols:"12"},{default:i(()=>[K,B,t(u,{class:"my-3",modelValue:n.formattedPlafon,"onUpdate:modelValue":e[2]||(e[2]=a=>n.formattedPlafon=a),type:"text",onInput:n.formatInputIn},null,8,["modelValue","onInput"])]),_:1}),t(r,{md:"12",cols:"12"},{default:i(()=>[S,J,t(u,{class:"my-3",modelValue:l.dataForm.nik_pemohon,"onUpdate:modelValue":e[3]||(e[3]=a=>l.dataForm.nik_pemohon=a),type:"number",rules:[n.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(r,{md:"12",cols:"12"},{default:i(()=>[M,L,t(u,{class:"my-3",modelValue:l.dataForm.address,"onUpdate:modelValue":e[4]||(e[4]=a=>l.dataForm.address=a),rules:[n.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(r,{md:"12",cols:"12"},{default:i(()=>[R,W,t(u,{class:"my-3",modelValue:l.dataForm.no_hp,"onUpdate:modelValue":e[5]||(e[5]=a=>l.dataForm.no_hp=a),rules:[n.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(r,{md:"12",cols:"12"},{default:i(()=>[G,H,t(p,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[n.rules.required],onChange:e[6]||(e[6]=a=>n.handleFileChange(a,"file1"))},null,8,["rules"])]),_:1}),t(r,{md:"12",cols:"12"},{default:i(()=>[O,t(u,{class:"my-3",type:"text",modelValue:l.dataForm.name_pasangan,"onUpdate:modelValue":e[7]||(e[7]=a=>l.dataForm.name_pasangan=a)},null,8,["modelValue"])]),_:1}),t(r,{md:"12",cols:"12"},{default:i(()=>[E,t(u,{class:"my-3",type:"number",modelValue:l.dataForm.nik_pasangan,"onUpdate:modelValue":e[8]||(e[8]=a=>l.dataForm.nik_pasangan=a)},null,8,["modelValue"])]),_:1}),t(r,{md:"12",cols:"12"},{default:i(()=>[z,t(p,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[n.rules.required],onChange:e[9]||(e[9]=a=>n.handleFileChange(a,"file2"))},null,8,["rules"])]),_:1}),t(r,{cols:"12",md:"12"},{default:i(()=>[t(_,{modelValue:l.dataForm.hasFile2,"onUpdate:modelValue":e[10]||(e[10]=a=>l.dataForm.hasFile2=a),label:"Apakah pemohon sudah menikah?",onChange:e[11]||(e[11]=a=>n.resetFile("file5"))},null,8,["modelValue"])]),_:1}),l.dataForm.hasFile2?(c(),f(r,{key:0,md:"12",cols:"12"},{default:i(()=>[Q,t(p,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[n.rules.required],onChange:e[12]||(e[12]=a=>{n.handleFileChange(a,"file5"),n.resetFile("file7"),n.resetFile("file8")})},null,8,["rules"])]),_:1})):h("",!0),t(r,{md:"12",cols:"12"},{default:i(()=>[X,Y,t(p,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[n.rules.required],onChange:e[13]||(e[13]=a=>n.handleFileChange(a,"file4"))},null,8,["rules"])]),_:1}),t(r,{md:"12",cols:"12"},{default:i(()=>[Z,$,t(F,{items:d.orderList,autofocus:"",modelValue:l.dataForm.order_source,"onUpdate:modelValue":e[14]||(e[14]=a=>l.dataForm.order_source=a),"prepend-icon":"mdi-help-rhombus"},null,8,["items","modelValue"])]),_:1}),t(r,{md:"12",cols:"12"},{default:i(()=>[ee,le,t(F,{items:d.statusCreditList,autofocus:"",modelValue:l.dataForm.status_kredit,"onUpdate:modelValue":e[15]||(e[15]=a=>l.dataForm.status_kredit=a),"prepend-icon":"mdi-help-rhombus"},null,8,["items","modelValue"])]),_:1}),t(r,{md:"12",cols:"12"},{default:i(()=>[ae,te,t(U,{modelValue:l.selectedPhoto,"onUpdate:modelValue":e[16]||(e[16]=a=>l.selectedPhoto=a),mandatory:!0,row:""},{default:i(()=>[t(V,{label:"Foto Kunjungan",value:"fotoKunjungan"}),t(V,{label:"Foto WhatsApp",value:"fotoWhatsApp"})]),_:1},8,["modelValue"])]),_:1}),l.selectedPhoto==="fotoKunjungan"?(c(),f(r,{key:1,md:"12",cols:"12"},{default:i(()=>[se,oe,t(p,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[n.rules.required],onChange:e[17]||(e[17]=a=>{n.handleFileChange(a,"file10"),n.resetFile("file11")})},null,8,["rules"])]),_:1})):h("",!0),l.selectedPhoto==="fotoWhatsApp"?(c(),f(r,{key:2,md:"12",cols:"12"},{default:i(()=>[ne,ie,t(p,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[n.rules.required],onChange:e[18]||(e[18]=a=>{n.handleFileChange(a,"file11"),n.resetFile("file10")})},null,8,["rules"])]),_:1})):h("",!0),t(y,{thickness:5}),t(r,{cols:"12",md:"12"},{default:i(()=>[t(_,{modelValue:l.dataForm.hasFile3,"onUpdate:modelValue":e[19]||(e[19]=a=>l.dataForm.hasFile3=a),label:"Apakah agunan bukan atas nama pemohon?",onChange:e[20]||(e[20]=a=>(n.resetFile("file3"),l.dataForm.nik_jaminan=null))},null,8,["modelValue"])]),_:1}),l.dataForm.hasFile3?(c(),f(r,{key:3,md:"12",cols:"12"},{default:i(()=>[re,de,t(p,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[n.rules.required],onChange:e[21]||(e[21]=a=>n.handleFileChange(a,"file3"))},null,8,["rules"])]),_:1})):h("",!0),l.dataForm.hasFile3?(c(),f(r,{key:4,md:"12",cols:"12"},{default:i(()=>[me,ue,t(u,{class:"my-3",type:"number",modelValue:l.dataForm.nik_jaminan,"onUpdate:modelValue":e[22]||(e[22]=a=>l.dataForm.nik_jaminan=a),rules:[n.rules.required]},null,8,["modelValue","rules"])]),_:1})):h("",!0),t(y,{thickness:5}),t(r,{md:"12",cols:"12"},{default:i(()=>[pe,ce,t(u,{class:"my-3",modelValue:l.dataForm.type_bussiness,"onUpdate:modelValue":e[23]||(e[23]=a=>l.dataForm.type_bussiness=a),rules:[n.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(r,{md:"12",cols:"12"},{default:i(()=>[fe,he,t(u,{class:"my-3",modelValue:l.dataForm.desc_bussiness,"onUpdate:modelValue":e[24]||(e[24]=a=>l.dataForm.desc_bussiness=a),rules:[n.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(r,{md:"12",cols:"12"},{default:i(()=>[Fe,ge,t(p,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[n.rules.required],onChange:e[25]||(e[25]=a=>n.handleFileChange(a,"file12"))},null,8,["rules"])]),_:1}),t(r,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:i(()=>[t(k,{type:"submit",disabled:l.dataForm.name==null||l.dataForm.plafon==null||l.dataForm.type_bussiness==null||l.dataForm.desc_bussiness==null||l.dataForm.order_source==null||l.dataForm.status_kredit==null||l.dataForm.file1==null||l.dataForm.file4==null||l.dataForm.file10==null&&l.dataForm.file11==null||l.dataForm.file12==null},{default:i(()=>[g(" Simpan ")]),_:1},8,["disabled"]),s("button",{type:"button",class:"btn btn-blue",onClick:e[26]||(e[26]=a=>d.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:i(()=>[t(v,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[27]||(e[27]=a=>l.uploadProgress=a),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["model-value"])}const Ne=P(N,[["render",_e]]);export{Ne as I};
