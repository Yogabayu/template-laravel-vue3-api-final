import{m as V}from"./index-eb3b7684.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";import{c as P,d as m,e as j,V as A,b as L,g as ue}from"./VRow-07857da8.js";import{a as R,c as w,d as G,b as S,V as de}from"./VMenu-0856ce54.js";import{o as d,h as c,w as l,a as e,c as k,F as J,e as p,t as y,i as f,b as o,M as _,f as h,G as q,E as Z,d as M,V as I,a2 as z,r as Y,H as ne,I as oe}from"./main-766e1002.js";import{V as v}from"./VTooltip-58ad2623.js";import{V as $}from"./VOverlay-0dd306cf.js";import{V as N,a as D}from"./VTextField-f5685f4d.js";import{V as E,a as U}from"./VRadioGroup-13a5bf79.js";import{V as B}from"./VFileInput-4a300a2c.js";import{V as K}from"./VSelect-d7f4e3e7.js";import{V as C}from"./VDialog-4b294f25.js";import{V as O,a as pe}from"./VChip-1be13e21.js";import{V as Q}from"./VDivider-68e6e3ec.js";import{V as te,a as me,b as he,c as ce,d as X,e as fe,f as H}from"./VStepper-ecebad60.js";import{V as ge}from"./VSpacer-5840eed3.js";import"./VImg-f64b01ed.js";import"./dialog-transition-e7f55f8e.js";import"./VInput-d045cc55.js";import"./VCheckboxBtn-51d6b6af.js";import"./VWindowItem-8834c201.js";const ye={name:"AttachmentCard1",props:{data:{type:Object,required:!0},fileId:{type:Number,required:!0},filePath:{type:String,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},openModal:{type:Function,required:!0}}},_e=o("span",null,"Phase 1 (Pooling) 📄",-1),ke={class:"operation-wrapper"},be={class:"d-flex justify-space-between"},Ae=["href"],ve=["onClick"],Se=["onClick"],Fe={class:"operation-wrapper"},De={class:"d-flex justify-space-between"},Pe=["href"],xe=["onClick"],Ve=["onClick"];function Ie(a,t,i,g,s,u){return d(),c(A,{color:"warning"},{default:l(()=>[e(j,null,{default:l(()=>[e(P,{class:"d-flex justify-space-between"},{default:l(()=>[e(m,{cols:"12",sm:"6",md:"8"},{default:l(()=>[_e]),_:1})]),_:1})]),_:1}),(d(!0),k(q,null,J(i.data,(n,x)=>(d(),k("div",{key:x},[n.path!=null&&!parseInt(n.isSecret)?(d(),c(R,{key:0,density:"compact"},{default:l(()=>[e(S,null,{prepend:l(()=>[p(y(parseInt(n.isApprove)?"✅":"❌")+" ",1),e(f,{icon:"mdi-file"})]),append:l(()=>[o("div",ke,[o("div",be,[n.path!="null"?(d(),c(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[o("a",_(r,{href:i.filePath+"/"+i.fileId+"/"+n.path,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Ae)]),_:2},1024)):h("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(d(),c(v,{key:1,location:"top",text:"Edit File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>i.openModal(2,n)}),[e(f,{size:"20",icon:"bx-edit",color:"blue"})],16,ve)]),_:2},1024)):h("",!0),i.userAccess&&parseInt(i.userAccess.canDeleteData)?(d(),c(v,{key:2,location:"top",text:"Hapus File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>i.deleteAttachment(n.id)}),[e(f,{size:"20",icon:"bx-trash",color:"red"})],16,Se)]),_:2},1024)):h("",!0)])])]),default:l(()=>[e(w,null,{default:l(()=>[p(y(n.name),1)]),_:2},1024),n.note!=null?(d(),c(G,{key:0},{default:l(()=>[p(y(n.note),1)]),_:2},1024)):h("",!0)]),_:2},1024)]),_:2},1024)):(d(),c(R,{key:1,density:"compact"},{default:l(()=>[e(S,null,{prepend:l(()=>[p(y(parseInt(n.isApprove)?"✅":"❌")+" ",1),e(f,{icon:"mdi-file"})]),append:l(()=>[o("div",Fe,[o("div",De,[i.userAccess&&parseInt(i.userAccess.isSecret)&&n.path!="null"?(d(),c(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[o("a",_(r,{href:i.filePath+"/"+a.dataFile.id+"/"+n.path,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Pe)]),_:2},1024)):h("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(d(),c(v,{key:1,location:"top",text:"Edit File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>i.openModal(2,n)}),[e(f,{size:"20",icon:"bx-edit",color:"blue"})],16,xe)]),_:2},1024)):h("",!0),i.userAccess&&parseInt(i.userAccess.canDeleteData)?(d(),c(v,{key:2,location:"top",text:"Hapus File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>i.deleteAttachment(n.id)}),[e(f,{size:"20",icon:"bx-trash",color:"red"})],16,Ve)]),_:2},1024)):h("",!0)])])]),default:l(()=>[e(w,null,{default:l(()=>[p(y(n.name),1)]),_:2},1024),n.note!=null?(d(),c(G,{key:0},{default:l(()=>[p(y(n.note),1)]),_:2},1024)):h("",!0)]),_:2},1024)]),_:2},1024))]))),128))]),_:1})}const we=W(ye,[["render",Ie]]),Ue={props:{data:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0}},watch:{selectedOption(a){a==="file"?this.formDetailSlik.link=null:a==="link"&&(this.formDetailSlik.path=null)}},data(){return{overlay:!1,selectedOption:"",uploadProgress:null,rules:{required:a=>!!a||"Required"},isFormDetailSlik:!1,formDetailSlik:{id:null,name:null,note:null,path:null,link:null,file_id:this.fileId,isApprove:0,isSecret:0},isFormResumeSlik:!1,formResumeSlik:{id:null,name:null,path:null,note:null,link:null,file_id:this.fileId,isApprove:0,isSecret:0},isAppeal:!1,formAppeal:{id:null,file_id:this.fileId,phase:2,name:"File Banding",path:null,note:null,link:null,isApprove:0,isSecret:0},isAnalytic:!1,formAnalytic:{id:null,file_id:this.fileId,link:null,note:null,phase:2,name:"Analisa Awal Kredit AO",path:null,isApprove:0,isSecret:0}}},methods:{shouldDisplay(a){return!(a.name==="Analisa Awal Kredit AO"||a.name==="File Banding")},showAnalisaAwalCredit(){if(this.data.filter(t=>t.name.includes("SLIK")&&t.isApprove==1&&(t.path!="null"||t.link!=null)).length>0){let t=this.data.find(i=>i.name=="Analisa Awal Kredit AO");return t&&(this.formAnalytic.id=t.id,this.formAnalytic.isApprove=parseInt(t.isApprove),this.formAnalytic.isSecret=parseInt(t.isSecret),this.formAnalytic.path=t.path,this.formAnalytic.link=t.link),!0}return!1},showFileBanding(){const a=this.data.filter(i=>i.name.includes("SLIK")&&i.isApprove==0&&(i.path!=="null"||i.link!==null)),t=this.data.filter(i=>i.name=="File Banding"&&(i.path!=="null"||i.link!==null));if(a.length>0||t.length>0){let i=this.data.find(g=>g.name==="File Banding");return i&&(this.formAppeal.id=i.id,this.formAppeal.isApprove=parseInt(i.isApprove),this.formAppeal.isSecret=parseInt(i.isSecret),this.formAppeal.path=i.path),!0}return!1},handleFileChange(a){const t=a.target.files[0];t&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(t.type)?this.formDetailSlik.path=t:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),a.target.value=null)},handleAnalyticChange(a){const t=a.target.files[0];t&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(t.type)?this.formAnalytic.path=t:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),a.target.value=null)},handleAppealChange(a){const t=a.target.files[0];t&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(t.type)?this.formAppeal.path=t:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),a.target.value=null)},openModal(a,t=null){a==1?t.name=="Detail SLIK"?(this.selectedOption="",this.formDetailSlik.id=t.id,this.formDetailSlik.name=t.name,this.formDetailSlik.note=t.note,this.formDetailSlik.isSecret=parseInt(t.isSecret),this.formDetailSlik.isApprove=parseInt(t.isApprove),this.isFormDetailSlik=!0):t.name=="Resume SLIK"?(this.selectedOption="",this.formDetailSlik.id=t.id,this.formDetailSlik.name=t.name,this.formDetailSlik.note=t.note,this.formDetailSlik.isSecret=parseInt(t.isSecret),this.formDetailSlik.isApprove=parseInt(t.isApprove),this.isFormResumeSlik=!0):(this.formDetailSlik.id=t.id,this.formDetailSlik.name=t.name,this.formDetailSlik.note=t.note,this.formDetailSlik.isSecret=parseInt(t.isSecret),this.formDetailSlik.isApprove=parseInt(t.isApprove),this.isFormResumeSlik=!0):a==2?this.isAnalytic=!0:a==3&&(this.formAppeal.link=null,this.formAppeal.path=null,this.isAppeal=!0)},closeModal(a){a==1?(this.formDetailSlik.id=null,this.formDetailSlik.name=null,this.formDetailSlik.path=null,this.formDetailSlik.link=null,this.formDetailSlik.isSecret=0,this.formDetailSlik.isApprove=0,this.isFormDetailSlik=!1):a==2?(this.formDetailSlik.id=null,this.formDetailSlik.name=null,this.formDetailSlik.path=null,this.formDetailSlik.link=null,this.formDetailSlik.isSecret=0,this.formDetailSlik.isApprove=0,this.isFormResumeSlik=!1):a==3?(this.formAnalytic.id=null,this.formAnalytic.isSecret=0,this.formAnalytic.isApprove=0,this.formAnalytic.path=null,this.formAnalytic.link=null,this.isAnalytic=!1):a==4&&(this.formAppeal.id=null,this.formAppeal.isSecret=0,this.formAppeal.isApprove=0,this.formAppeal.link=null,this.isAppeal=!1)},async insertSlik(){try{this.overlay=!0;const a=new FormData;a.append("name",this.formDetailSlik.name),this.formDetailSlik.note!=null&&a.append("note",this.formDetailSlik.note),this.formDetailSlik.path!=null?a.append("path",this.formDetailSlik.path):this.formDetailSlik.link!=null&&a.append("link",this.formDetailSlik.link),a.append("isSecret",this.formDetailSlik.isSecret),a.append("isApprove",this.formDetailSlik.isApprove),a.append("file_id",this.formDetailSlik.file_id),a.append("_method","PUT");const t={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},i=await V.post(`/user/edit-attach/${this.formDetailSlik.id}`,a,t);i.status===200?(this.overlay=!1,this.closeModal(1),this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(a){this.overlay=!1,this.closeModal(1),this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async insertAnalytic(){try{this.overlay=!0;const a=new FormData;a.append("name",this.formAnalytic.name),a.append("note",this.formAnalytic.note),this.formAnalytic.path!="null"?a.append("path",this.formAnalytic.path):this.formAnalytic.link!=null&&a.append("link",this.formAnalytic.link),a.append("phase",this.formAnalytic.phase),a.append("isSecret",this.formAnalytic.isSecret),a.append("file_id",this.formAnalytic.file_id),a.append("isApprove",this.formAnalytic.isApprove),a.append("_method","PUT");const t={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},i=await V.post(`/user/edit-attach/${this.formAnalytic.id}`,a,t);i.status===200?(this.overlay=!1,this.closeModal(3),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(3),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(a){this.closeModal(3),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async insertAppeal(){try{this.overlay=!0;const a=new FormData;a.append("name",this.formAppeal.name),a.append("note",this.formAppeal.note),this.formAppeal.path!=null&&this.formAppeal.path!=""?a.append("path",this.formAppeal.path):this.formAppeal.link!=null&&this.formAppeal.link!=""&&a.append("link",this.formAppeal.link),a.append("phase",this.formAppeal.phase),a.append("isSecret",this.formAppeal.isSecret),a.append("file_id",this.formAppeal.file_id),a.append("isApprove",this.formAppeal.isApprove),a.append("_method","PUT");const t={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},i=await V.post(`/user/edit-attach/${this.formAppeal.id}`,a,t);i.status===200?(this.overlay=!1,this.closeModal(4),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(4),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(a){this.overlay=!1,this.closeModal(4),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}}},mounted(){}},Te=o("span",null,"Phase 2 (SLIK) 📄",-1),Ce={class:"operation-wrapper"},Ke={class:"d-flex justify-space-between"},Me=["href"],Ne=["href"],je=["href"],Oe=["href"],qe=["onClick"],Le=["onClick"],ze=["onClick"],Re={key:0},Be={class:"operation-wrapper"},He={class:"d-flex justify-space-between"},Ee=["href"],Ge=["href"],Je={key:1},Ye={class:"operation-wrapper"},We={class:"d-flex justify-space-between"},Xe=["href"],Qe=["href"],Ze=o("span",{style:{color:"red"}},"*",-1),$e=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),et=o("span",{class:"subtitle-1 text-center"},"Note: ",-1),tt=o("span",{style:{color:"red"}},"*",-1),lt=o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1),st=o("span",{style:{color:"red"}},"*",-1),at=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),it=o("span",{style:{color:"red"}},"*",-1),nt=o("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1),ot=o("span",{style:{color:"red"}},"*",-1),rt=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),ut=o("span",{style:{color:"red"}},"*",-1),dt=o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1),pt=o("span",{style:{color:"red"}},"*",-1),mt=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),ht=o("span",{style:{color:"red"}},"*",-1),ct=o("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1),ft=o("span",{style:{color:"red"}},"*",-1),gt=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),yt=o("span",{style:{color:"red"}},"*",-1),_t=o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1),kt=o("span",{style:{color:"red"}},"*",-1),bt=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),At=o("span",{style:{color:"red"}},"*",-1),vt=o("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1),St=o("span",{style:{color:"red"}},"*",-1),Ft=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),Dt=o("span",{style:{color:"red"}},"*",-1),Pt=o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1),xt=o("span",{style:{color:"red"}},"*",-1),Vt=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),It=o("span",{style:{color:"red"}},"*",-1),wt=o("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1);function Ut(a,t,i,g,s,u){return d(),k(q,null,[e($,{"model-value":s.overlay,class:"align-center justify-center"},{default:l(()=>[e(Z,{color:"blue-lighten-3",indeterminate:"",size:41,width:5}),p(" Loading... ")]),_:1},8,["model-value"]),e(A,{color:"warning"},{default:l(()=>[e(j,null,{default:l(()=>[e(P,{class:"d-flex justify-space-between"},{default:l(()=>[e(m,{cols:"12",sm:"6",md:"8"},{default:l(()=>[Te]),_:1})]),_:1})]),_:1}),(d(!0),k(q,null,J(i.data,(n,x)=>(d(),k("div",{key:x},[e(R,{density:"compact"},{default:l(()=>[u.shouldDisplay(n)?(d(),c(S,{key:0},{prepend:l(()=>[p(y(parseInt(n.isApprove)?"✅":"❌")+" ",1),e(f,{icon:"mdi-file"})]),append:l(()=>[o("div",Ce,[o("div",Ke,[(n.path!=="null"||n.link!==null)&&n.isSecret?(d(),c(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[n.path!=="null"&&i.userAccess&&parseInt(i.userAccess.isSecret)==1?(d(),k("a",_({key:0},r,{href:`${i.filePath}/${i.fileId}/${n.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Me)):h("",!0),n.link!==null&&i.userAccess&&parseInt(i.userAccess.isSecret)==1?(d(),k("a",_({key:1},r,{href:`${n.link}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Ne)):h("",!0)]),_:2},1024)):(d(),c(v,{key:1,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[n.path!=="null"?(d(),k("a",_({key:0},r,{href:`${i.filePath}/${i.fileId}/${n.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,je)):h("",!0),n.link!==null&&i.userAccess?(d(),k("a",_({key:1},r,{href:`${n.link}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Oe)):h("",!0)]),_:2},1024)),n.path==="null"&&n.link===null&&i.userAccess&&parseInt(i.userAccess.canInsertData)==1?(d(),c(v,{key:2,location:"top",text:"Upload File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>u.openModal(1,n)}),[e(f,{size:"20",icon:"bx-upload",color:"blue"})],16,qe)]),_:2},1024)):h("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(d(),c(v,{key:3,location:"top",text:"Edit File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>u.openModal(1,n)}),[e(f,{size:"20",icon:"bx-edit",color:"blue"})],16,Le)]),_:2},1024)):h("",!0),i.userAccess&&parseInt(i.userAccess.canDeleteData)?(d(),c(v,{key:4,location:"top",text:"Hapus File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>i.deleteAttachment(n.id)}),[e(f,{size:"20",icon:"bx-trash",color:"red"})],16,ze)]),_:2},1024)):h("",!0)])])]),default:l(()=>[e(w,null,{default:l(()=>[p(y(n.name),1)]),_:2},1024),n.note!="null"?(d(),c(G,{key:0},{default:l(()=>[p(y(n.note),1)]),_:2},1024)):h("",!0)]),_:2},1024)):h("",!0)]),_:2},1024)]))),128)),u.showAnalisaAwalCredit()?(d(),k("div",Re,[e(R,{density:"compact"},{default:l(()=>[e(S,null,{prepend:l(()=>[p(y(parseInt(s.formAnalytic.isApprove)?"✅":"❌")+" ",1),e(f,{icon:"mdi-file"})]),append:l(()=>[o("div",Be,[o("div",He,[s.formAnalytic.path!=="null"||s.formAnalytic.link!==null?(d(),c(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:n})=>[s.formAnalytic.path!=="null"?(d(),k("a",_({key:0},n,{href:`${i.filePath}/${i.fileId}/${s.formAnalytic.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Ee)):h("",!0),s.formAnalytic.link!==null?(d(),k("a",_({key:1},n,{href:`${s.formAnalytic.link}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Ge)):h("",!0)]),_:1})):h("",!0),s.formAnalytic.path==null&&s.formAnalytic.path=="null"&&s.formAnalytic.link==null&&i.userAccess&&parseInt(i.userAccess.canAppeal)==1?(d(),c(v,{key:1,location:"top",text:"Upload File / Link"},{activator:l(({props:n})=>[o("button",_(n,{onClick:t[0]||(t[0]=x=>u.openModal(2,s.formAnalytic))}),[e(f,{size:"20",icon:"bx-upload",color:"blue"})],16)]),_:1})):h("",!0),i.userAccess&&parseInt(i.userAccess.canAppeal)==1?(d(),c(v,{key:2,location:"top",text:"Edit File"},{activator:l(({props:n})=>[o("button",_(n,{onClick:t[1]||(t[1]=x=>u.openModal(2,s.formAnalytic))}),[e(f,{size:"20",icon:"bx-edit",color:"blue"})],16)]),_:1})):h("",!0)])])]),default:l(()=>[e(w,null,{default:l(()=>[p(y(s.formAnalytic.name),1)]),_:1}),s.formAnalytic.note!=null?(d(),c(G,{key:0},{default:l(()=>[p(y(s.formAnalytic.note),1)]),_:1})):h("",!0)]),_:1})]),_:1})])):h("",!0),u.showFileBanding()?(d(),k("div",Je,[e(R,{density:"compact"},{default:l(()=>[e(S,null,{prepend:l(()=>[p(y(parseInt(s.formAppeal.isApprove)?"✅":"❌")+" ",1),e(f,{icon:"mdi-file"})]),append:l(()=>[o("div",Ye,[o("div",We,[s.formAppeal.path!=="null"||s.formAppeal.link!==null?(d(),c(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:n})=>[s.formAppeal.path!=="null"?(d(),k("a",_({key:0},n,{href:`${i.filePath}/${i.fileId}/${s.formAppeal.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Xe)):h("",!0),s.formAppeal.link!==null?(d(),k("a",_({key:1},n,{href:`${s.formAppeal.link}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Qe)):h("",!0)]),_:1})):h("",!0),s.formAppeal.path==null&&s.formAppeal.path=="null"&&i.userAccess&&parseInt(i.userAccess.canAppeal)==1?(d(),c(v,{key:1,location:"top",text:"Upload File / Link"},{activator:l(({props:n})=>[o("button",_(n,{onClick:t[2]||(t[2]=x=>u.openModal(3))}),[e(f,{size:"20",icon:"bx-upload",color:"blue"})],16)]),_:1})):h("",!0),i.userAccess&&parseInt(i.userAccess.canAppeal)==1?(d(),c(v,{key:2,location:"top",text:"Edit File"},{activator:l(({props:n})=>[o("button",_(n,{onClick:t[3]||(t[3]=x=>u.openModal(3))}),[e(f,{size:"20",icon:"bx-edit",color:"blue"})],16)]),_:1})):h("",!0)])])]),default:l(()=>[e(w,null,{default:l(()=>[p(y(s.formAppeal.name),1)]),_:1})]),_:1})]),_:1})])):h("",!0)]),_:1}),e(C,{modelValue:s.isFormDetailSlik,"onUpdate:modelValue":t[13]||(t[13]=n=>s.isFormDetailSlik=n),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Attachment ")]),text:l(()=>[e(N,{onSubmit:M(u.insertSlik,["prevent"])},{default:l(()=>[e(P,null,{default:l(()=>[e(m,{md:"12",cols:"12"},{default:l(()=>[Ze,$e,e(D,{class:"my-3",modelValue:s.formDetailSlik.name,"onUpdate:modelValue":t[4]||(t[4]=n=>s.formDetailSlik.name=n),autofocus:"",disabled:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[et,e(D,{class:"my-3",modelValue:s.formDetailSlik.note,"onUpdate:modelValue":t[5]||(t[5]=n=>s.formDetailSlik.note=n),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[tt,lt,e(E,{modelValue:s.selectedOption,"onUpdate:modelValue":t[6]||(t[6]=n=>s.selectedOption=n),mandatory:!0,row:""},{default:l(()=>[e(U,{label:"File",value:"file"}),e(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),c(m,{key:0,md:"12",cols:"12"},{default:l(()=>[st,at,e(B,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:t[7]||(t[7]=n=>{u.handleFileChange(n),s.formDetailSlik.link=null})},null,8,["rules"])]),_:1})):h("",!0),s.selectedOption==="link"?(d(),c(m,{key:1,md:"12",cols:"12"},{default:l(()=>[it,nt,e(D,{class:"my-3",modelValue:s.formDetailSlik.link,"onUpdate:modelValue":t[8]||(t[8]=n=>s.formDetailSlik.link=n),type:"link",hint:"Pastikan menggunakan https://",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1})):h("",!0),e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formDetailSlik.isSecret,"onUpdate:modelValue":t[9]||(t[9]=n=>s.formDetailSlik.isSecret=n),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formDetailSlik.isApprove,"onUpdate:modelValue":t[10]||(t[10]=n=>s.formDetailSlik.isApprove=n),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(I,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:t[11]||(t[11]=n=>u.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(z,{modelValue:s.uploadProgress,"onUpdate:modelValue":t[12]||(t[12]=n=>s.uploadProgress=n),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(C,{modelValue:s.isFormResumeSlik,"onUpdate:modelValue":t[22]||(t[22]=n=>s.isFormResumeSlik=n),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Attachment ")]),text:l(()=>[e(N,{onSubmit:M(u.insertSlik,["prevent"])},{default:l(()=>[e(P,null,{default:l(()=>[e(m,{md:"12",cols:"12"},{default:l(()=>[ot,rt,e(D,{class:"my-3",modelValue:s.formDetailSlik.name,"onUpdate:modelValue":t[14]||(t[14]=n=>s.formDetailSlik.name=n),autofocus:"",disabled:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[ut,dt,e(E,{modelValue:s.selectedOption,"onUpdate:modelValue":t[15]||(t[15]=n=>s.selectedOption=n),mandatory:!0,row:""},{default:l(()=>[e(U,{label:"File",value:"file"}),e(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),c(m,{key:0,md:"12",cols:"12"},{default:l(()=>[pt,mt,e(B,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:t[16]||(t[16]=n=>{u.handleFileChange(n),s.formDetailSlik.link=null})},null,8,["rules"])]),_:1})):h("",!0),s.selectedOption==="link"?(d(),c(m,{key:1,md:"12",cols:"12"},{default:l(()=>[ht,ct,e(D,{class:"my-3",modelValue:s.formDetailSlik.link,"onUpdate:modelValue":t[17]||(t[17]=n=>s.formDetailSlik.link=n),type:"link",hint:"Pastikan menggunakan https://",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1})):h("",!0),e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formDetailSlik.isSecret,"onUpdate:modelValue":t[18]||(t[18]=n=>s.formDetailSlik.isSecret=n),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formDetailSlik.isApprove,"onUpdate:modelValue":t[19]||(t[19]=n=>s.formDetailSlik.isApprove=n),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(I,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:t[20]||(t[20]=n=>u.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(z,{modelValue:s.uploadProgress,"onUpdate:modelValue":t[21]||(t[21]=n=>s.uploadProgress=n),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(C,{modelValue:s.isAnalytic,"onUpdate:modelValue":t[30]||(t[30]=n=>s.isAnalytic=n),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Analisis AO ")]),text:l(()=>[e(N,{onSubmit:M(u.insertAnalytic,["prevent"])},{default:l(()=>[e(P,null,{default:l(()=>[e(m,{md:"12",cols:"12"},{default:l(()=>[ft,gt,e(D,{class:"my-3",modelValue:s.formAnalytic.name,"onUpdate:modelValue":t[23]||(t[23]=n=>s.formAnalytic.name=n),autofocus:"",disabled:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[yt,_t,e(E,{modelValue:s.selectedOption,"onUpdate:modelValue":t[24]||(t[24]=n=>s.selectedOption=n),mandatory:!0,row:""},{default:l(()=>[e(U,{label:"File",value:"file"}),e(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),c(m,{key:0,md:"12",cols:"12"},{default:l(()=>[kt,bt,e(B,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:t[25]||(t[25]=n=>{u.handleAnalyticChange(n),s.formAnalytic.link=null})},null,8,["rules"])]),_:1})):h("",!0),s.selectedOption==="link"?(d(),c(m,{key:1,md:"12",cols:"12"},{default:l(()=>[At,vt,e(D,{class:"my-3",modelValue:s.formAnalytic.link,"onUpdate:modelValue":t[26]||(t[26]=n=>s.formAnalytic.link=n),type:"link",hint:"Pastikan menggunakan https://",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1})):h("",!0),e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formAnalytic.isApprove,"onUpdate:modelValue":t[27]||(t[27]=n=>s.formAnalytic.isApprove=n),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(I,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:t[28]||(t[28]=n=>u.closeModal(3))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(z,{modelValue:s.uploadProgress,"onUpdate:modelValue":t[29]||(t[29]=n=>s.uploadProgress=n),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(C,{modelValue:s.isAppeal,"onUpdate:modelValue":t[39]||(t[39]=n=>s.isAppeal=n),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Banding AO ")]),text:l(()=>[e(N,{onSubmit:M(u.insertAppeal,["prevent"])},{default:l(()=>[e(P,null,{default:l(()=>[e(m,{md:"12",cols:"12"},{default:l(()=>[St,Ft,e(D,{class:"my-3",modelValue:s.formAppeal.name,"onUpdate:modelValue":t[31]||(t[31]=n=>s.formAppeal.name=n),autofocus:"",disabled:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[Dt,Pt,e(E,{modelValue:s.selectedOption,"onUpdate:modelValue":t[32]||(t[32]=n=>s.selectedOption=n),mandatory:!0,row:""},{default:l(()=>[e(U,{label:"File",value:"file"}),e(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),c(m,{key:0,md:"12",cols:"12"},{default:l(()=>[xt,Vt,e(B,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:t[33]||(t[33]=n=>{u.handleAppealChange(n),s.formAppeal.link=null})},null,8,["rules"])]),_:1})):h("",!0),s.selectedOption==="link"?(d(),c(m,{key:1,md:"12",cols:"12"},{default:l(()=>[It,wt,e(D,{class:"my-3",modelValue:s.formAppeal.link,"onUpdate:modelValue":t[34]||(t[34]=n=>s.formAppeal.link=n),type:"link",hint:"Pastikan menggunakan https://",rules:[s.rules.required],onChange:t[35]||(t[35]=n=>s.formAppeal.path=null)},null,8,["modelValue","rules"])]),_:1})):h("",!0),e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formAppeal.isApprove,"onUpdate:modelValue":t[36]||(t[36]=n=>s.formAppeal.isApprove=n),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(I,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:t[37]||(t[37]=n=>u.closeModal(4))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(z,{modelValue:s.uploadProgress,"onUpdate:modelValue":t[38]||(t[38]=n=>s.uploadProgress=n),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const Tt=W(Ue,[["render",Ut]]),Ct={name:"AttachmentCard3",props:{data:{type:Object,required:!0},submission:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0}},watch:{selectedOption(a){a==="file"?this.formAnalisaKredit.link=null:a==="link"&&(this.formAnalisaKredit.path=null)}},computed:{sortedSubmission(){return this.submission.slice().sort((a,t)=>a.type===2&&t.type!==2?-1:a.type!==2&&t.type===2?1:0)}},data(){return{selectedOption:"",overlay:!1,uploadProgress:null,rules:{required:a=>!!a||"Required"},isAnalisaKredit:!1,formAnalisaKredit:{id:null,name:"Analisa Kredit",file_id:this.fileId,path:"null",link:null,isApprove:0,isSecret:0},isSubmission:!1,isUpdateSubmission:!1,formSubmission:{id:null,file_id:null,phase:null,name:null,path:null,link:null,note:null,type:null}}},methods:{openModal(a,t=null){a==1?(this.formAnalisaKredit.id=t.id,this.formAnalisaKredit.name=t.name,this.formAnalisaKredit.link=t.link,this.formAnalisaKredit.path=t.path,this.formAnalisaKredit.isSecret=parseInt(t.isSecret),this.formAnalisaKredit.isApprove=parseInt(t.isApprove),this.isAnalisaKredit=!0):a==2?(this.formSubmission.file_id=this.fileId,this.formSubmission.phase=3,this.isSubmission=!0):a==3&&(this.formSubmission.id=t.id,this.formSubmission.file_id=this.fileId,this.formSubmission.phase=3,this.formSubmission.name=t.name,this.formSubmission.type=t.type,this.isUpdateSubmission=!0)},closeModal(a){a==1?(this.formAnalisaKredit.id=null,this.formAnalisaKredit.isSecret=0,this.formAnalisaKredit.isApprove=0,this.selectedOption="",this.isAnalisaKredit=!1):a==2?(this.formSubmission.id=null,this.formSubmission.file_id=null,this.formSubmission.phase=null,this.formSubmission.name=null,this.formSubmission.path=null,this.formSubmission.link=null,this.formSubmission.note=null,this.formSubmission.type=null,this.selectedOption="",this.isSubmission=!1):a==3&&(this.formSubmission.id=null,this.formSubmission.file_id=null,this.formSubmission.phase=null,this.formSubmission.name=null,this.formSubmission.path=null,this.formSubmission.link=null,this.formSubmission.note=null,this.formSubmission.type=null,this.selectedOption="",this.isUpdateSubmission=!1)},handleFileChange(a,t,i){const g=a.target.files[0];g&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(g.type)?t[i]=g:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),a.target.value=null)},async insertAnalisa(){try{this.overlay=!0;const a=new FormData;a.append("name",this.formAnalisaKredit.name),a.append("isSecret",this.formAnalisaKredit.isSecret),a.append("isApprove",this.formAnalisaKredit.isApprove),a.append("file_id",this.formAnalisaKredit.file_id),this.formAnalisaKredit.path!="null"&&this.formAnalisaKredit.path!=null?a.append("path",this.formAnalisaKredit.path):this.formAnalisaKredit.link!=null&&a.append("link",this.formAnalisaKredit.link),a.append("_method","PUT");const t={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},i=await V.post(`/user/edit-attach/${this.formAnalisaKredit.id}`,a,t);i.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(a){this.overlay=!1,this.uploadProgress=null,this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async insertSubmission(){try{if(this.overlay=!0,this.formSubmission.link==null&&this.formSubmission.path==null){this.isSubmission=!1,this.$showToast("error","Error","File / Link harus diisi"),this.overlay=!1;return}const a=new FormData;a.append("file_id",this.formSubmission.file_id),a.append("name",this.formSubmission.name),a.append("type",this.formSubmission.type),a.append("phase",this.formSubmission.phase),this.formSubmission.path!=null&&this.formSubmission.path!=null?a.append("path",this.formSubmission.path):this.formSubmission.link!=null&&a.append("link",this.formSubmission.link),a.append("_method","POST");const t={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},i=await V.post("/user/file-submission",a,t);i.status===200?(this.overlay=!1,this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(a){this.overlay=!1,this.uploadProgress=null,this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async deleteSubmission(a){try{if(!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;this.overlay=!0;const i=await V.delete(`/user/file-submission/${a}`);i.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",i.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry","Terjadi Kesalahan Silahkan Coba Lagi"))}catch(t){this.overlay=!1,this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}},async updateSubmission(){try{this.overlay=!0;const a=new FormData;a.append("file_id",this.formSubmission.file_id),a.append("name",this.formSubmission.name),a.append("type",this.formSubmission.type),a.append("phase",this.formSubmission.phase),this.formSubmission.path!=null&&this.formSubmission.path!=null?a.append("path",this.formSubmission.path):this.formSubmission.link!=null&&a.append("link",this.formSubmission.link),a.append("_method","PUT");const t={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},i=await V.post(`/user/file-submission/${this.formSubmission.id}`,a,t);i.status===200?(this.overlay=!1,this.closeModal(3),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(3),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(a){this.overlay=!1,this.uploadProgress=null,this.closeModal(3),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}}}},Kt=o("span",null,"Phase 3 (Analisa Kredit) 📄",-1),Mt={class:"operation-wrapper"},Nt={class:"d-flex justify-space-between"},jt=["href"],Ot=["href"],qt=["onClick"],Lt=["onClick"],zt=o("span",null,"Dokumen Penunjang Kredit / Jaminan 📄",-1),Rt={key:0},Bt={class:"operation-wrapper"},Ht={class:"d-flex justify-space-between"},Et=["href"],Gt=["href"],Jt=["onClick"],Yt=["onClick"],Wt=o("span",{style:{color:"red"}},"*",-1),Xt=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),Qt=o("span",{style:{color:"red"}},"*",-1),Zt=o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1),$t=o("span",{style:{color:"red"}},"*",-1),el=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),tl=o("span",{style:{color:"red"}},"*",-1),ll=o("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1),sl=o("span",{style:{color:"red"}},"*",-1),al=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),il=o("span",{style:{color:"red"}},"*",-1),nl=o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1),ol=o("span",{style:{color:"red"}},"*",-1),rl=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),ul=o("span",{style:{color:"red"}},"*",-1),dl=o("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1),pl=o("span",{style:{color:"red"}},"*",-1),ml=o("span",{class:"subtitle-1 text-center"},"Pilih Jenis Dokumen : ",-1),hl=o("span",{style:{color:"red"}},"*",-1),cl=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),fl=o("span",{style:{color:"red"}},"*",-1),gl=o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1),yl=o("span",{style:{color:"red"}},"*",-1),_l=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),kl=o("span",{style:{color:"red"}},"*",-1),bl=o("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1),Al=o("span",{style:{color:"red"}},"*",-1),vl=o("span",{class:"subtitle-1 text-center"},"Pilih Jenis Dokumen : ",-1);function Sl(a,t,i,g,s,u){return d(),k(q,null,[e($,{"model-value":s.overlay,class:"align-center justify-center"},{default:l(()=>[e(Z,{color:"blue-lighten-3",indeterminate:"",size:41,width:5}),p(" Loading... ")]),_:1},8,["model-value"]),e(A,{color:"warning"},{default:l(()=>[e(j,null,{default:l(()=>[e(P,{class:"d-flex justify-space-between"},{default:l(()=>[e(m,{cols:"12",sm:"6",md:"8"},{default:l(()=>[Kt]),_:1})]),_:1})]),_:1}),(d(!0),k(q,null,J(i.data,(n,x)=>(d(),k("div",{key:x},[e(R,{density:"compact"},{default:l(()=>[e(S,null,{prepend:l(()=>[p(y(parseInt(n.isApprove)?"✅":"❌")+" ",1),e(f,{icon:"mdi-file"})]),append:l(()=>[o("div",Mt,[o("div",Nt,[n.path!=="null"||n.link!==null?(d(),c(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[n.path!=="null"?(d(),k("a",_({key:0},r,{href:`${i.filePath}/${i.fileId}/${n.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,jt)):h("",!0),n.link!==null?(d(),k("a",_({key:1},r,{href:`${n.link}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Ot)):h("",!0)]),_:2},1024)):h("",!0),n.path=="null"&&n.link==null&&i.userAccess&&parseInt(i.userAccess.canInsertData)==1?(d(),c(v,{key:1,location:"top",text:"Upload File / Link"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>u.openModal(1,n)}),[e(f,{size:"20",icon:"bx-upload",color:"blue"})],16,qt)]),_:2},1024)):h("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(d(),c(v,{key:2,location:"top",text:"Edit File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>u.openModal(1,n)}),[e(f,{size:"20",icon:"bx-edit",color:"blue"})],16,Lt)]),_:2},1024)):h("",!0)])])]),default:l(()=>[e(w,null,{default:l(()=>[p(y(n.name),1)]),_:2},1024),n.note!=null?(d(),c(G,{key:0},{default:l(()=>[p(y(n.note),1)]),_:2},1024)):h("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1}),e(A,{color:"warning",class:"mt-2"},{default:l(()=>[e(j,null,{default:l(()=>[e(P,{class:"d-flex justify-space-between"},{default:l(()=>[e(m,{cols:"12",sm:"6",md:"8"},{default:l(()=>[zt]),_:1}),i.userAccess&&i.userAccess.canAppeal?(d(),c(m,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:l(()=>[o("span",null,[e(I,{color:"primary",size:"small",class:"my-3 mx-3",onClick:t[0]||(t[0]=n=>u.openModal(2))},{default:l(()=>[p(" Tambah Data Lain ")]),_:1})])]),_:1})):h("",!0)]),_:1})]),_:1}),i.submission.length==0?(d(),k("div",Rt,[e(R,null,{default:l(()=>[e(S,null,{default:l(()=>[p("Belum ada file")]),_:1})]),_:1})])):h("",!0),u.sortedSubmission.length>0?(d(!0),k(q,{key:1},J(u.sortedSubmission,(n,x)=>(d(),k("div",{key:x},[e(R,{density:"compact"},{default:l(()=>[e(S,null,{append:l(()=>[o("div",Bt,[o("div",Ht,[n.path!=="null"||n.link!==null?(d(),c(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[n.path!==null?(d(),k("a",_({key:0},r,{href:`${i.filePath}/${i.fileId}/${n.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Et)):h("",!0),n.link!==null?(d(),k("a",_({key:1},r,{href:`${n.link}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Gt)):h("",!0)]),_:2},1024)):h("",!0),i.userAccess&&parseInt(i.userAccess.canAppeal)?(d(),c(v,{key:1,location:"top",text:"Edit File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>u.openModal(3,n)}),[e(f,{size:"20",icon:"bx-edit",color:"blue"})],16,Jt)]),_:2},1024)):h("",!0),i.userAccess&&parseInt(i.userAccess.canAppeal)?(d(),c(v,{key:2,location:"top",text:"Hapus File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>u.deleteSubmission(n.id)}),[e(f,{size:"20",icon:"bx-trash",color:"red"})],16,Yt)]),_:2},1024)):h("",!0)])])]),default:l(()=>[e(w,null,{default:l(()=>[p(y(n.name),1)]),_:2},1024),n.type==1?(d(),c(G,{key:0},{default:l(()=>[p(" Dokumen Penunjang Kredit ")]),_:1})):h("",!0),n.type==2?(d(),c(G,{key:1},{default:l(()=>[p(" Dokumen Jaminan ")]),_:1})):h("",!0)]),_:2},1024)]),_:2},1024)]))),128)):h("",!0)]),_:1}),e(C,{modelValue:s.isAnalisaKredit,"onUpdate:modelValue":t[9]||(t[9]=n=>s.isAnalisaKredit=n),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Attachment ")]),text:l(()=>[e(N,{onSubmit:M(u.insertAnalisa,["prevent"])},{default:l(()=>[e(P,null,{default:l(()=>[e(m,{md:"12",cols:"12"},{default:l(()=>[Wt,Xt,e(D,{class:"my-3",modelValue:s.formAnalisaKredit.name,"onUpdate:modelValue":t[1]||(t[1]=n=>s.formAnalisaKredit.name=n),autofocus:"",disabled:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[Qt,Zt,e(E,{modelValue:s.selectedOption,"onUpdate:modelValue":t[2]||(t[2]=n=>s.selectedOption=n),mandatory:!0,row:""},{default:l(()=>[e(U,{label:"File",value:"file"}),e(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),c(m,{key:0,md:"12",cols:"12"},{default:l(()=>[$t,el,e(B,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:t[3]||(t[3]=n=>{u.handleFileChange(n,this.formAnalisaKredit,"path"),s.formAnalisaKredit.link=null})},null,8,["rules"])]),_:1})):h("",!0),s.selectedOption==="link"?(d(),c(m,{key:1,md:"12",cols:"12"},{default:l(()=>[tl,ll,e(D,{class:"my-3",modelValue:s.formAnalisaKredit.link,"onUpdate:modelValue":t[4]||(t[4]=n=>s.formAnalisaKredit.link=n),type:"link",hint:"Pastikan menggunakan https://",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1})):h("",!0),e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formAnalisaKredit.isSecret,"onUpdate:modelValue":t[5]||(t[5]=n=>s.formAnalisaKredit.isSecret=n),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formAnalisaKredit.isApprove,"onUpdate:modelValue":t[6]||(t[6]=n=>s.formAnalisaKredit.isApprove=n),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(I,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:t[7]||(t[7]=n=>u.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(z,{modelValue:s.uploadProgress,"onUpdate:modelValue":t[8]||(t[8]=n=>s.uploadProgress=n),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(C,{modelValue:s.isSubmission,"onUpdate:modelValue":t[17]||(t[17]=n=>s.isSubmission=n),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Tambah Data ")]),text:l(()=>[e(N,{onSubmit:M(u.insertSubmission,["prevent"])},{default:l(()=>[e(P,null,{default:l(()=>[e(m,{md:"12",cols:"12"},{default:l(()=>[sl,al,e(D,{class:"my-3",modelValue:s.formSubmission.name,"onUpdate:modelValue":t[10]||(t[10]=n=>s.formSubmission.name=n),autofocus:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[il,nl,e(E,{modelValue:s.selectedOption,"onUpdate:modelValue":t[11]||(t[11]=n=>s.selectedOption=n),mandatory:!0,row:""},{default:l(()=>[e(U,{label:"File",value:"file"}),e(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),c(m,{key:0,md:"12",cols:"12"},{default:l(()=>[ol,rl,e(B,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:t[12]||(t[12]=n=>{u.handleFileChange(n,this.formSubmission,"path"),s.formSubmission.link=null})},null,8,["rules"])]),_:1})):h("",!0),s.selectedOption==="link"?(d(),c(m,{key:1,md:"12",cols:"12"},{default:l(()=>[ul,dl,e(D,{class:"my-3",modelValue:s.formSubmission.link,"onUpdate:modelValue":t[13]||(t[13]=n=>s.formSubmission.link=n),type:"link",hint:"Pastikan menggunakan https://",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1})):h("",!0),e(m,{md:"12",cols:"12"},{default:l(()=>[pl,ml,e(E,{modelValue:s.formSubmission.type,"onUpdate:modelValue":t[14]||(t[14]=n=>s.formSubmission.type=n),mandatory:!0,row:""},{default:l(()=>[e(U,{label:"Dokumen Penunjang Kredit",value:"1"}),e(U,{label:"Dokumen Jaminan",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(I,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:t[15]||(t[15]=n=>u.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(z,{modelValue:s.uploadProgress,"onUpdate:modelValue":t[16]||(t[16]=n=>s.uploadProgress=n),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(C,{modelValue:s.isUpdateSubmission,"onUpdate:modelValue":t[25]||(t[25]=n=>s.isUpdateSubmission=n),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Update Data ")]),text:l(()=>[e(N,{onSubmit:M(u.updateSubmission,["prevent"])},{default:l(()=>[e(P,null,{default:l(()=>[e(m,{md:"12",cols:"12"},{default:l(()=>[hl,cl,e(D,{class:"my-3",modelValue:s.formSubmission.name,"onUpdate:modelValue":t[18]||(t[18]=n=>s.formSubmission.name=n),autofocus:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[fl,gl,e(E,{modelValue:s.selectedOption,"onUpdate:modelValue":t[19]||(t[19]=n=>s.selectedOption=n),mandatory:!0,row:""},{default:l(()=>[e(U,{label:"File",value:"file"}),e(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),c(m,{key:0,md:"12",cols:"12"},{default:l(()=>[yl,_l,e(B,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:t[20]||(t[20]=n=>{u.handleFileChange(n,this.formSubmission,"path"),s.formSubmission.link=null})},null,8,["rules"])]),_:1})):h("",!0),s.selectedOption==="link"?(d(),c(m,{key:1,md:"12",cols:"12"},{default:l(()=>[kl,bl,e(D,{class:"my-3",modelValue:s.formSubmission.link,"onUpdate:modelValue":t[21]||(t[21]=n=>s.formSubmission.link=n),type:"link",hint:"Pastikan menggunakan https://",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1})):h("",!0),e(m,{md:"12",cols:"12"},{default:l(()=>[Al,vl,e(E,{modelValue:s.formSubmission.type,"onUpdate:modelValue":t[22]||(t[22]=n=>s.formSubmission.type=n),mandatory:!0,row:""},{default:l(()=>[e(U,{label:"Dokumen Penunjang Kredit",value:1}),e(U,{label:"Dokumen Jaminan",value:2})]),_:1},8,["modelValue"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(I,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:t[23]||(t[23]=n=>u.closeModal(3))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(z,{modelValue:s.uploadProgress,"onUpdate:modelValue":t[24]||(t[24]=n=>s.uploadProgress=n),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const ae=W(Ct,[["render",Sl]]),Fl={name:"AttachmentCard4",props:{data:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0}},watch:{selectedOption(a){a==="file"?this.formAnalisaKredit.link=null:a==="link"&&(this.formAnalisaKredit.path=null)}},data(){return{selectedOption:"",overlay:!1,uploadProgress:null,rules:{required:a=>!!a||"Required"},isKomite:!1,formKomite:{id:null,name:"Analisa Kredit",file_id:this.fileId,path:"null",link:null,isApprove:0,isSecret:0}}},methods:{toSignature(a){if(a.path=="null"&&a.link==null){alert("Silahkan upload file terlebih dahulu");return}this.$router.push(`/a-pdfeditor/${a.id}`)},openModal(a,t=null){a==1&&(this.formKomite.id=t.id,this.formKomite.name=t.name,this.formKomite.link=t.link,this.formKomite.path=t.path,this.formKomite.isSecret=parseInt(t.isSecret),this.formKomite.isApprove=parseInt(t.isApprove),this.isKomite=!0)},closeModal(a){a==1&&(this.formKomite.id=null,this.formKomite.isSecret=0,this.formKomite.isApprove=0,this.isKomite=!1)},handleFileChange(a){const t=a.target.files[0];t&&["application/pdf"].includes(t.type)?this.formKomite.path=t:(this.isKomite=!1,this.$showToast("error","Error","Hanya file PDF yang diizinkan."),a.target.value=null)},async insertKomite(){try{this.overlay=!0;const a=new FormData;a.append("name",this.formKomite.name),a.append("isSecret",this.formKomite.isSecret),a.append("isApprove",this.formKomite.isApprove),a.append("file_id",this.formKomite.file_id),this.formKomite.path!="null"&&this.formKomite.path!=null?a.append("path",this.formKomite.path):this.formKomite.link!=null&&a.append("link",this.formKomite.link),a.append("_method","PUT");const t={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},i=await V.post(`/user/edit-attach/${this.formKomite.id}`,a,t);i.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(a){this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}}}},Dl=o("span",null,"Phase 4 (KOMITE) 📄",-1),Pl={class:"operation-wrapper"},xl={class:"d-flex justify-space-between"},Vl=["href"],Il=["href"],wl=["onClick"],Ul=["onClick"],Tl=["onClick"],Cl=["onClick"],Kl=o("span",{style:{color:"red"}},"*",-1),Ml=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),Nl=o("span",{style:{color:"red"}},"*",-1),jl=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1);function Ol(a,t,i,g,s,u){return d(),k(q,null,[e($,{"model-value":s.overlay,class:"align-center justify-center"},{default:l(()=>[e(Z,{color:"blue-lighten-3",indeterminate:"",size:41,width:5}),p(" Loading... ")]),_:1},8,["model-value"]),e(A,{color:"warning"},{default:l(()=>[e(j,null,{default:l(()=>[e(P,{class:"d-flex justify-space-between"},{default:l(()=>[e(m,{cols:"12",sm:"6",md:"8"},{default:l(()=>[Dl]),_:1})]),_:1})]),_:1}),(d(!0),k(q,null,J(i.data,(n,x)=>(d(),k("div",{key:x},[e(R,{density:"compact"},{default:l(()=>[e(S,null,{prepend:l(()=>[p(y(parseInt(n.isApprove)?"✅":"❌")+" ",1),e(f,{icon:"mdi-file"})]),append:l(()=>[o("div",Pl,[o("div",xl,[n.path!=="null"||n.link!==null?(d(),c(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[n.path!=="null"?(d(),k("a",_({key:0},r,{href:`${i.filePath}/${i.fileId}/${n.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Vl)):h("",!0),n.link!==null?(d(),k("a",_({key:1},r,{href:`${n.link}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Il)):h("",!0)]),_:2},1024)):h("",!0),n.path=="null"&&n.link==null&&i.userAccess&&parseInt(i.userAccess.canInsertData)==1?(d(),c(v,{key:1,location:"top",text:"Upload File / Link"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>u.openModal(1,n)}),[e(f,{size:"20",icon:"bx-upload",color:"blue"})],16,wl)]),_:2},1024)):h("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(d(),c(v,{key:2,location:"top",text:"Edit File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>u.openModal(1,n)}),[e(f,{size:"20",icon:"bx-edit",color:"blue"})],16,Ul)]),_:2},1024)):h("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(d(),c(v,{key:3,location:"top",text:"Tanda Tangan File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>u.toSignature(n)}),[e(f,{size:"20",icon:"bx-pen",color:"blue"})],16,Tl)]),_:2},1024)):h("",!0),i.userAccess&&parseInt(i.userAccess.canDeleteData)?(d(),c(v,{key:4,location:"top",text:"Hapus File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>i.deleteAttachment(n.id)}),[e(f,{size:"20",icon:"bx-trash",color:"red"})],16,Cl)]),_:2},1024)):h("",!0)])])]),default:l(()=>[e(w,null,{default:l(()=>[p(y(n.name),1)]),_:2},1024),n.note!=null?(d(),c(G,{key:0},{default:l(()=>[p(y(n.note),1)]),_:2},1024)):h("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1}),e(C,{modelValue:s.isKomite,"onUpdate:modelValue":t[6]||(t[6]=n=>s.isKomite=n),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Attachment ")]),text:l(()=>[e(N,{onSubmit:M(u.insertKomite,["prevent"])},{default:l(()=>[e(P,null,{default:l(()=>[e(m,{md:"12",cols:"12"},{default:l(()=>[Kl,Ml,e(D,{class:"my-3",modelValue:s.formKomite.name,"onUpdate:modelValue":t[0]||(t[0]=n=>s.formKomite.name=n),autofocus:"",disabled:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[Nl,jl,e(B,{class:"my-3",accept:"application/pdf",placeholder:"Pick an image",rules:[s.rules.required],onChange:t[1]||(t[1]=n=>u.handleFileChange(n))},null,8,["rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formKomite.isSecret,"onUpdate:modelValue":t[2]||(t[2]=n=>s.formKomite.isSecret=n),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formKomite.isApprove,"onUpdate:modelValue":t[3]||(t[3]=n=>s.formKomite.isApprove=n),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(I,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:t[4]||(t[4]=n=>u.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(z,{modelValue:s.uploadProgress,"onUpdate:modelValue":t[5]||(t[5]=n=>s.uploadProgress=n),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const ie=W(Fl,[["render",Ol]]),ql={name:"AttachmentOperation",props:{data:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0}},data(){return{overlay:!1,uploadProgress:null,rules:{required:a=>!!a||"Required"},isSp3k:!1,formsp3k:{id:null,name:"SP3K",file_id:this.fileId,path:null,isApprove:0,isSecret:0}}},methods:{openModal(a,t=null){a==1&&(this.formsp3k.id=t.id,this.formsp3k.name=t.name,this.formsp3k.isSecret=parseInt(t.isSecret),this.formsp3k.isApprove=parseInt(t.isApprove),this.isSp3k=!0)},closeModal(a){a==1&&(this.formsp3k.id=null,this.formsp3k.isSecret=0,this.formsp3k.path=null,this.formsp3k.isApprove=0,this.isSp3k=!1)},handleFileChange(a){const t=a.target.files[0];t&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(t.type)?this.formsp3k.path=t:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),a.target.value=null)},async insertSpk3k(){try{this.overlay=!0;const a=new FormData;a.append("name",this.formsp3k.name),a.append("path",this.formsp3k.path),a.append("isSecret",this.formsp3k.isSecret),a.append("isApprove",this.formsp3k.isApprove),a.append("file_id",this.formsp3k.file_id),a.append("_method","PUT");const t={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},i=await V.post(`/user/edit-attach/${this.formsp3k.id}`,a,t);i.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(a){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}}}},Ll=o("span",null,"Operation 📄",-1),zl={class:"operation-wrapper"},Rl={class:"d-flex justify-space-between"},Bl=["href"],Hl=["onClick"],El=["onClick"],Gl=["onClick"],Jl=o("span",{style:{color:"red"}},"*",-1),Yl=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),Wl=o("span",{style:{color:"red"}},"*",-1),Xl=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1);function Ql(a,t,i,g,s,u){return d(),k(q,null,[e($,{"model-value":s.overlay,class:"align-center justify-center"},{default:l(()=>[e(Z,{color:"blue-lighten-3",indeterminate:"",size:41,width:5}),p(" Loading... ")]),_:1},8,["model-value"]),e(A,{color:"warning"},{default:l(()=>[e(j,null,{default:l(()=>[e(P,{class:"d-flex justify-space-between"},{default:l(()=>[e(m,{cols:"12",sm:"6",md:"8"},{default:l(()=>[Ll]),_:1})]),_:1})]),_:1}),(d(!0),k(q,null,J(i.data,(n,x)=>(d(),k("div",{key:x},[e(R,{density:"compact"},{default:l(()=>[e(S,null,{prepend:l(()=>[p(y(parseInt(n.isApprove)?"✅":"❌")+" ",1),e(f,{icon:"mdi-file"})]),append:l(()=>[o("div",zl,[o("div",Rl,[n.path!=="null"?(d(),c(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[o("a",_(r,{href:`${i.filePath}/${i.fileId}/${n.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[e(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Bl)]),_:2},1024)):h("",!0),n.path==="null"&&i.userAccess&&parseInt(i.userAccess.canInsertData)==1?(d(),c(v,{key:1,location:"top",text:"Upload File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>u.openModal(1,n)}),[e(f,{size:"20",icon:"bx-upload",color:"blue"})],16,Hl)]),_:2},1024)):h("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(d(),c(v,{key:2,location:"top",text:"Edit File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>u.openModal(1,n)}),[e(f,{size:"20",icon:"bx-edit",color:"blue"})],16,El)]),_:2},1024)):h("",!0),i.userAccess&&parseInt(i.userAccess.canDeleteData)?(d(),c(v,{key:3,location:"top",text:"Hapus File"},{activator:l(({props:r})=>[o("button",_(r,{onClick:T=>i.deleteAttachment(n.id)}),[e(f,{size:"20",icon:"bx-trash",color:"red"})],16,Gl)]),_:2},1024)):h("",!0)])])]),default:l(()=>[e(w,null,{default:l(()=>[p(y(n.name),1)]),_:2},1024),n.note!=null?(d(),c(G,{key:0},{default:l(()=>[p(y(n.note),1)]),_:2},1024)):h("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1}),e(C,{modelValue:s.isSp3k,"onUpdate:modelValue":t[6]||(t[6]=n=>s.isSp3k=n),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Attachment ")]),text:l(()=>[e(N,{onSubmit:M(u.insertSpk3k,["prevent"])},{default:l(()=>[e(P,null,{default:l(()=>[e(m,{md:"12",cols:"12"},{default:l(()=>[Jl,Yl,e(D,{class:"my-3",modelValue:s.formsp3k.name,"onUpdate:modelValue":t[0]||(t[0]=n=>s.formsp3k.name=n),autofocus:"",disabled:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[Wl,Xl,e(B,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:t[1]||(t[1]=n=>u.handleFileChange(n))},null,8,["rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formsp3k.isSecret,"onUpdate:modelValue":t[2]||(t[2]=n=>s.formsp3k.isSecret=n),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formsp3k.isApprove,"onUpdate:modelValue":t[3]||(t[3]=n=>s.formsp3k.isApprove=n),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(I,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:t[4]||(t[4]=n=>u.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(z,{modelValue:s.uploadProgress,"onUpdate:modelValue":t[5]||(t[5]=n=>s.uploadProgress=n),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const Zl=W(ql,[["render",Ql]]);const $l={components:{AttachmentCard1:we,AttachmentCard2:Tt,AttachmentCard3:ae,attachmentCard3:ae,AttachmentCard4:ie,attachmentCard4:ie,attachmentOperation:Zl},name:"Phase",props:{phase1Attachments:{type:Object,required:!0},phase2Attachments:{type:Object,required:!0},phase3Attachments:{type:Object,required:!0},phase4Attachments:{type:Object,required:!0},phase5Attachments:{type:Object,required:!0},userAccess:{type:Object,required:!0},dataFile:{type:Object,required:!0},userData:{type:Object,required:!0},dataNote:{type:Object,required:!0},updateDataNote:{type:Object,required:!0},insertNote:{type:Function,required:!0},changeApproval:{type:Function,required:!0},formatDate:{type:Function,required:!0},openModal:{type:Function,required:!0},deleteAttachment:{type:Function,required:!0},deleteNote:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},step:{type:Function,required:!0},fileId:{type:String,required:!0},resetNote:{type:Function,required:!0},notePhase1:{type:Object,required:!0},notePhase2:{type:Object,required:!0},notePhase3:{type:Object,required:!0},notePhase4:{type:Object,required:!0},modalNote:{type:Function,required:!0},submissions:{type:Object,required:!0}},data(){return{filePath:this.$filePath,isUpdateNote:!1,currentPage:1,itemsPerPage:10}},computed:{paginatedNotes(){const a=(this.currentPage-1)*this.itemsPerPage,t=a+this.itemsPerPage;return this.dataFile.notes.slice(a,t)}},methods:{onPageChange(a){this.currentPage=a},formatInput(a){return a=a.replace(/\D/g,""),a=a.replace(/\B(?=(\d{3})+(?!\d))/g,","),a}}},se=a=>(ne("data-v-ab4968b8"),a=a(),oe(),a),es=se(()=>o("span",null,"Informasi Umum ℹ️",-1)),ts=se(()=>o("span",null,"Dokumen Pendukung 📄",-1)),ls={class:"mb-5"},ss={class:"mb-5"},as={class:"mb-5"},is={class:"mb-5"},ns={class:"mb-5"},os={key:0},rs=se(()=>o("span",null,"Catatan 📃",-1)),us={class:"comment-content"};function ds(a,t,i,g,s,u){const n=Y("AttachmentCard1"),x=Y("AttachmentCard2"),r=Y("attachmentCard3"),T=Y("attachmentCard4"),re=Y("attachmentOperation");return d(),c(A,{color:"backgroundCard"},{default:l(()=>[["Account Officer","AO","ao","account officer","Account Officer Executive","account officer executive","Account Officer / Executive AO","AO / RO"].includes(i.userData.position.name)?(d(),c(j,{key:1,class:"text-2xl font-weight-bold d-flex justify-center"},{default:l(()=>[p(" Detail "),parseInt(i.dataFile.isApproved)==1?(d(),c(O,{key:0,color:"success"},{default:l(()=>[p("Approved")]),_:1})):h("",!0),parseInt(i.dataFile.isApproved)==2?(d(),c(O,{key:1,color:"warning"},{default:l(()=>[p("Pending")]),_:1})):h("",!0),parseInt(i.dataFile.isApproved)==3?(d(),c(O,{key:2,color:"error"},{default:l(()=>[p("Rejected")]),_:1})):h("",!0)]),_:1})):(d(),c(j,{key:0,class:"text-2xl font-weight-bold d-flex justify-center"},{default:l(()=>[p(" Detail "),parseInt(i.dataFile.isApproved)==1?(d(),c(O,{key:0,color:"success",onClick:t[0]||(t[0]=F=>i.openModal(9))},{default:l(()=>[p("Approved")]),_:1})):h("",!0),parseInt(i.dataFile.isApproved)==2?(d(),c(O,{key:1,color:"warning",onClick:t[1]||(t[1]=F=>i.openModal(9))},{default:l(()=>[p("Pending")]),_:1})):h("",!0),parseInt(i.dataFile.isApproved)==3?(d(),c(O,{key:2,color:"error",onClick:t[2]||(t[2]=F=>i.openModal(9))},{default:l(()=>[p("Rejected")]),_:1})):h("",!0)]),_:1})),i.dataFile.reasonRejected!=null?(d(),c(L,{key:2},{default:l(()=>[e(A,null,{default:l(()=>[e(j,null,{default:l(()=>[p(" Alasan Ditolak 🔹 ")]),_:1}),e(L,null,{default:l(()=>[o("div",null,[o("span",null,y(i.dataFile&&i.dataFile.reasonRejected),1)])]),_:1})]),_:1})]),_:1})):h("",!0),e(L,null,{default:l(()=>[e(A,{class:"mb-5"},{default:l(()=>[e(j,null,{default:l(()=>[e(P,{class:"d-flex justify-space-between"},{default:l(()=>[e(m,{cols:"12",sm:"6",md:"8"},{default:l(()=>[es]),_:1}),i.userAccess&&i.userAccess.canUpdateData?(d(),c(m,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:l(()=>[o("span",null,[e(I,{color:"primary",size:"small",class:"my-3 mx-3",onClick:t[3]||(t[3]=F=>i.openModal(4))},{default:l(()=>[p(" Edit Data ")]),_:1})])]),_:1})):h("",!0)]),_:1})]),_:1}),e(L,null,{default:l(()=>[e(R,{density:"compact",lines:"two"},{default:l(()=>[e(S,null,{prepend:l(()=>[e(f,{icon:"mdi-person",size:"x-small"})]),default:l(()=>[e(w,null,{default:l(()=>[p(" Nama Pemohon ")]),_:1}),e(S,null,{default:l(()=>[o("strong",null,y(i.dataFile.name),1)]),_:1})]),_:1}),e(S,null,{prepend:l(()=>[e(f,{icon:"mdi-person",size:"x-small"})]),default:l(()=>[e(w,null,{default:l(()=>[p(" NIK Pemohon ")]),_:1}),e(S,null,{default:l(()=>[o("strong",null,y(i.dataFile.nik_pemohon),1)]),_:1})]),_:1}),e(S,null,{prepend:l(()=>[e(f,{icon:"mdi-map-marker",size:"x-small"})]),default:l(()=>[e(w,null,{default:l(()=>[p(" Alamat Pemohon ")]),_:1}),e(S,null,{default:l(()=>[o("strong",null,y(i.dataFile.address),1)]),_:1})]),_:1}),e(S,null,{prepend:l(()=>[e(f,{icon:"mdi-phone",size:"x-small"})]),default:l(()=>[e(w,null,{default:l(()=>[p(" No. HP Pemohon")]),_:1}),e(S,null,{default:l(()=>[o("strong",null,y(i.dataFile.no_hp),1)]),_:1})]),_:1}),e(S,null,{prepend:l(()=>[e(f,{icon:"mdi-cash",size:"x-small"})]),default:l(()=>[e(w,null,{default:l(()=>[p(" Jumlah Plafon")]),_:1}),e(S,null,{default:l(()=>[o("strong",null," Rp "+y(u.formatInput(i.dataFile.plafon)),1)]),_:1})]),_:1}),i.dataFile.nik_pasangan!=null&&i.dataFile.nik_pasangan!=""&&i.dataFile.nik_pasangan!="null"?(d(),c(S,{key:0},{prepend:l(()=>[e(f,{icon:"mdi-code-greater-than",size:"x-small"})]),default:l(()=>[e(w,null,{default:l(()=>[p(" NIK Pasangan")]),_:1}),e(S,null,{default:l(()=>[o("strong",null,y(i.dataFile.nik_pasangan),1)]),_:1})]),_:1})):h("",!0),i.dataFile.nik_jaminan!=null&&i.dataFile.nik_jaminan!=""&&i.dataFile.nik_jaminan!="null"?(d(),c(S,{key:1},{prepend:l(()=>[e(f,{icon:"mdi-code-greater-than",size:"x-small"})]),default:l(()=>[e(w,null,{default:l(()=>[p(" NIK atas nama Jaminan")]),_:1}),e(S,null,{default:l(()=>[o("strong",null,y(i.dataFile.nik_jaminan),1)]),_:1})]),_:1})):h("",!0),e(S,null,{prepend:l(()=>[e(f,{icon:"mdi-office-building",size:"x-small"})]),default:l(()=>[e(w,null,{default:l(()=>[p(" Jenis Usaha")]),_:1}),e(S,null,{default:l(()=>[o("strong",null,y(i.dataFile.type_bussiness),1)]),_:1})]),_:1}),e(S,null,{prepend:l(()=>[e(f,{icon:"mdi-office-building",size:"x-small"})]),default:l(()=>[e(w,null,{default:l(()=>[p(" Deskripsi Usaha")]),_:1}),e(S,null,{default:l(()=>[o("strong",null,y(i.dataFile.desc_bussiness),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(A,null,{default:l(()=>[e(j,null,{default:l(()=>[e(P,{class:"d-flex justify-space-between"},{default:l(()=>[e(m,{cols:"12",sm:"6",md:"8"},{default:l(()=>[ts]),_:1}),i.userAccess&&i.userAccess.canInsertData?(d(),c(m,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:l(()=>[o("span",null,[e(I,{color:"primary",size:"small",class:"my-3 mx-3",onClick:t[4]||(t[4]=F=>i.openModal(1))},{default:l(()=>[p(" Tambah Data Lain ")]),_:1})])]),_:1})):h("",!0)]),_:1})]),_:1}),e(L,null,{default:l(()=>[o("div",ls,[e(n,{data:i.phase1Attachments,fileId:parseInt(i.dataFile.id),filePath:s.filePath,userAccess:i.userAccess,deleteAttachment:i.deleteAttachment,openModal:i.openModal},null,8,["data","fileId","filePath","userAccess","deleteAttachment","openModal"])]),o("div",ss,[parseInt(i.dataFile.phase)>1?(d(),c(x,{key:0,data:i.phase2Attachments,fileId:parseInt(i.dataFile.id),filePath:s.filePath,userAccess:i.userAccess,deleteAttachment:i.deleteAttachment,getDetailFile:i.getDetailFile},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile"])):h("",!0)]),o("div",as,[parseInt(i.dataFile.phase)>2?(d(),c(r,{key:0,data:i.phase3Attachments,fileId:parseInt(i.dataFile.id),filePath:s.filePath,userAccess:i.userAccess,deleteAttachment:i.deleteAttachment,getDetailFile:i.getDetailFile,submission:i.submissions},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile","submission"])):h("",!0)]),o("div",is,[parseInt(i.dataFile.phase)>3?(d(),c(T,{key:0,data:i.phase4Attachments,fileId:parseInt(i.dataFile.id),filePath:s.filePath,userAccess:i.userAccess,deleteAttachment:i.deleteAttachment,getDetailFile:i.getDetailFile},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile"])):h("",!0)]),o("div",ns,[parseInt(i.dataFile.phase)>4?(d(),c(re,{key:0,data:i.phase5Attachments,fileId:parseInt(i.dataFile.id),filePath:s.filePath,userAccess:i.userAccess,deleteAttachment:i.deleteAttachment,getDetailFile:i.getDetailFile},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile"])):h("",!0)])]),_:1})]),_:1})]),_:1}),i.dataFile&&parseInt(i.dataFile.phase)<6?(d(),c(L,{key:3},{default:l(()=>[e(A,null,{default:l(()=>[e(j,null,{default:l(()=>[p(" Status Approval Phase ✅ ")]),_:1}),e(L,null,{default:l(()=>[i.dataFile&&i.dataFile.approvals&&i.dataFile.approvals.length?(d(),k("div",os,[(d(!0),k(q,null,J(i.dataFile.approvals,(F,le)=>(d(),k(q,{key:le},[i.dataFile.phase==F.phase?(d(),c(O,{key:0,color:F.approved==1?"success":"error",class:"mr-2 mb-2",onClick:ee=>i.changeApproval(F.id)},{default:l(()=>[p(y(F.user.name)+" - "+y(F.user.position.name),1)]),_:2},1032,["color","onClick"])):h("",!0)],64))),128))])):h("",!0)]),_:1})]),_:1})]),_:1})):h("",!0),e(L,null,{default:l(()=>[e(A,null,{default:l(()=>[e(j,null,{default:l(()=>[p(" Lain - lain 🔹 ")]),_:1}),e(L,null,{default:l(()=>[o("div",null,[e(pe,null,{default:l(()=>[e(O,{color:"success",onClick:t[5]||(t[5]=F=>i.openModal(6))},{default:l(()=>[p(" Data Durasi Waktu ")]),_:1}),e(O,{color:"success",onClick:t[6]||(t[6]=F=>i.openModal(7))},{default:l(()=>[p(" Data Aktivitas")]),_:1}),e(O,{color:"success",onClick:t[7]||(t[7]=F=>i.openModal(8))},{default:l(()=>[p(" Data Riwayat Persetujuan")]),_:1}),e(O,{color:"success",onClick:t[8]||(t[8]=F=>i.openModal(10))},{default:l(()=>[p(" Data Riwayat Dokumen Pendukung")]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),e(Q),e(L,null,{default:l(()=>[e(A,null,{default:l(()=>[e(j,null,{default:l(()=>[e(P,{class:"d-flex justify-space-between"},{default:l(()=>[e(m,{cols:"12",sm:"6",md:"8"},{default:l(()=>[rs]),_:1}),e(m,{cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"})]),_:1}),e(N,{onSubmit:M(i.insertNote,["prevent"])},{default:l(()=>[e(P,{align:"center",justify:"center"},{default:l(()=>[e(m,{cols:"12",sm:"8",md:"10"},{default:l(()=>[e(te,{outlined:"",rows:"2",placeholder:"Tambahkan catatan disini",modelValue:i.dataNote.note,"onUpdate:modelValue":t[9]||(t[9]=F=>i.dataNote.note=F)},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",sm:"4",md:"2"},{default:l(()=>[e(I,{color:"primary",icon:"",type:"submit"},{default:l(()=>[e(f,null,{default:l(()=>[p("mdi-note-plus")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(L,null,{default:l(()=>[o("div",null,[(d(!0),k(q,null,J(u.paginatedNotes,(F,le)=>(d(),k("div",{key:le,class:"user-comment"},[o("div",us,[o("p",null,y(F.note),1),e(P,{class:"justify-space-between mx-2 mb-2"},{default:l(()=>[o("small",null,[o("strong",null,y(F.user.name)+" - "+y(F.user.position.name),1)]),o("small",null,y(i.formatDate(F.created_at)),1)]),_:2},1024)]),i.userData.id==F.user_id?(d(),c(de,{key:0,transition:"scale-transition"},{activator:l(({props:ee})=>[e(f,_(ee,{class:"ellipsis-icon"}),{default:l(()=>[p("mdi-dots-vertical")]),_:2},1040)]),default:l(()=>[e(R,null,{default:l(()=>[e(S,{color:"primary",onClick:ee=>i.openModal(3,F)},{prepend:l(()=>[e(f,{icon:"mdi-edit"})]),default:l(()=>[e(w,null,{default:l(()=>[p(" edit")]),_:1})]),_:2},1032,["onClick"]),e(S,{color:"primary",onClick:ee=>i.deleteNote(F.id)},{prepend:l(()=>[e(f,{icon:"mdi-trash"})]),default:l(()=>[e(w,null,{default:l(()=>[p(" hapus")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):h("",!0)]))),128)),e(me,{modelValue:s.currentPage,"onUpdate:modelValue":t[10]||(t[10]=F=>s.currentPage=F),length:Math.ceil(i.dataFile.notes.length/s.itemsPerPage),onInput:u.onPageChange},null,8,["modelValue","length","onInput"])])]),_:1})]),_:1})]),_:1}),i.userAccess&&parseInt(i.userAccess.canApprove)?(d(),c(ue,{key:4},{default:l(()=>[e(m,{class:"d-flex justify-space-beetwen"},{default:l(()=>[i.dataFile&&parseInt(i.dataFile.phase)>1?(d(),c(I,{key:0,color:"info",text:"Prev Phase",variant:"tonal",onClick:t[11]||(t[11]=F=>i.step(i.fileId,"-"))})):h("",!0),e(ge),i.dataFile&&parseInt(i.dataFile.phase)<5?(d(),c(I,{key:1,color:"info",text:"Next Phase",variant:"tonal",onClick:t[12]||(t[12]=F=>i.step(i.fileId,"next"))})):h("",!0),i.dataFile&&parseInt(i.dataFile.phase)==5?(d(),c(I,{key:2,color:"success",text:"Setujui",variant:"tonal",onClick:t[13]||(t[13]=F=>i.step(i.fileId,"next"))})):h("",!0)]),_:1})]),_:1})):h("",!0)]),_:1})}const ps=W($l,[["render",ds],["__scopeId","data-v-ab4968b8"]]),ms={components:{phase:ps},data(){return{selectedOption:"",overlay:!1,isMobile:!1,userData:null,userAccess:{},fileId:this.$route.params.fileId,isShowPhase4:!1,isShowPhase5:!1,isShowTimers:!1,isShowHistory:!1,isShowApprovals:!1,isChangeStatusCredit:!1,isShowAttachment:!1,nameFileList:[{value:"KTP Pemohon",title:"KTP Pemohon"},{value:"Kartu Keluarga",title:"Kartu Keluarga"},{value:"Jaminan SHM",title:"Jaminan SHM"},{value:"Foto Kunjungan",title:"Foto Kunjungan"},{value:"Foto WhatsApp",title:"Foto WhatsApp"},{value:"Buku Nikah",title:"Buku Nikah"},{value:"SHM",title:"Jaminan SHM"},{value:"BPKB",title:"Jaminan BPKB"},{value:"KTP Pasangan",title:"KTP Pasangan"},{value:"KTP Atas Nama Jaminan",title:"KTP Atas Nama Jaminan"},{value:"Resume SLIK",title:"Resume SLIK"},{value:"Detail SLIK",title:"Detail SLIK"},{value:"Detail SLIK Pasangan",title:"Detail SLIK Pasangan"},{value:"Detail SLIK Atas Nama jaminan",title:"Detail SLIK Atas Nama jaminan"},{value:"File Banding",title:"File Banding"},{value:"Analisa Awal Kredit AO",title:"Analisa Awal Kredit AO"},{value:"Analisa Kredit",title:"Analisa Kredit"},{value:"Lembar Pengesahan",title:"Lembar Pengesahan"},{value:"Rekomendasi Kepatuhan",title:"Rekomendasi Kepatuhan"},{value:"SP3K",title:"SP3K"},{value:"Notaris",title:"Notaris"},{value:"Lain-lain",title:"Lain-lain"}],changeStatus:{id:null,status:null,reasonRejected:null},stepperModel:0,isUpdateGeneralInfo:!1,generalInfo:{id:null,name:null,type_bussiness:null,desc_bussiness:null,plafon:null,nik_pemohon:null,nik_pasangan:null,nik_jaminan:null,address:null,no_hp:null},dataFile:{id:this.$route.params.fileId,user_id:null,phase:1,name:"",type_bussiness:"",desc_bussiness:"",nik_pemohon:null,nik_pasangan:null,nik_jaminan:null,address:null,no_hp:null,plafon:"0",surveyResult:"-",otsResult:"-",cekLingResult:"-",verTelResult:"-",creditScoring:"-",attachments:[],notes:[],approvals:[],phase_times:[],file_activities:[],reasonRejected:""},filePath:this.$filePath,timerHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Waktu Mulai",value:"startTime",sortable:!0},{text:"Waktu Selesai",value:"endTime",sortable:!0},{text:"Rentang Waktu",value:"timeDiff",sortable:!0}],attachmentHeaders:[{text:"Nama",value:"name",sortable:!0},{text:"Phase",value:"phase",sortable:!0},{text:"Waktu",value:"startTime",sortable:!0}],historyHeaders:[{text:"User",value:"user.name",sortable:!0},{text:"Aktivitas",value:"activity",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],approvalHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Nama",value:"user.name",sortable:!0},{text:"Status",value:"approved",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],isUpdateNote:!1,dataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},updateDataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},phaseNote:[],notesByPhase:{},isModalPhase:!1,insertAttch:!1,updateAttch:!1,rules:{required:a=>!!a||"Required"},uploadProgress:null,attachFile:{id:null,file_id:this.$route.params.fileId,phase:null,name:null,path:null,note:null,link:null,isSecret:0,isApprove:1},notePhase1:[],notePhase2:[],notePhase3:[],notePhase4:[],currentPage:1,itemsPerPage:10,isDataPhase3:!1,dataPhase3:{surveyResult:""},attachments:[],fileSubmissions:[],dataAttachPhase1:[],dataAttachPhase2:[],dataAttachPhase3:[],dataAttachPhase4:[],dataAttachPhase5:[]}},computed:{paginatedNotes(){const a=(this.currentPage-1)*this.itemsPerPage,t=a+this.itemsPerPage;return this.dataFile.notes.slice(a,t)}},methods:{async updateStatusCredit(){try{this.overlay=!0;const a=new FormData;if(a.append("id",this.fileId),a.append("status",this.changeStatus.status),this.changeStatus.status=="3"){if(this.changeStatus.reasonRejected==null){this.overlay=!1,this.closeModal(9),this.$showToast("error","Sorry","Alasan Penolakan wajib diisi");return}a.append("reasonRejected",this.changeStatus.reasonRejected)}const t=await V.post("/user/change-status",a);t.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.closeModal(9),this.$showToast("success","Success",t.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.closeModal(9),this.$showToast("error","Sorry",t.data.message))}catch(a){this.overlay=!1,this.closeModal(9),this.$showToast("error","Sorry",a.response.data.message)}},calculateTimeDiff(a,t){let i=new Date(a),s=(t?new Date(t):new Date).valueOf()-i.valueOf(),u=Math.floor(s/1e3/60),n=Math.floor(u/60),x=u%60;return`${n} jam ${x} menit`},formatFileId(a){return Array.isArray(a)?a.join(", "):a},async updatePhase3(){try{this.overlay=!0;const a=new FormData;a.append("surveyResult",this.dataPhase3.surveyResult),a.append("_method","PUT");const t=await V.post(`/user/survey-credit/${this.fileId}`,a);t.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("success","Success",t.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("error","Sorry",t.data.message))}catch(a){this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},onPageChange(a){this.currentPage=a},formatInputPlafon(a){let t=a.target.value;t=t.replace(/\D/g,""),t=t.replace(/\B(?=(\d{3})+(?!\d))/g,","),a.target.value=t},formatDate(a){return new Date(a).toLocaleString("id-ID")},resetNote(){this.dataNote={file_id:this.$route.params.fileId,user_id:null,phase:null,note:null,isRead:null}},checkMobile(){this.isMobile=window.innerWidth<728},formatInput(a){return a=a.replace(/\D/g,""),a=a.replace(/\B(?=(\d{3})+(?!\d))/g,","),a},async step(a,t){try{if(t=="next"){if(this.dataFile.phase===3&&this.fileSubmissions.length===0){if(!window.confirm("Tidak ada file Pendukung yang diajukan. Apakah Anda yakin melanjutkan ke tahap selanjutnya?"))return}else if(!window.confirm("Apakah Anda yakin melanjutkan ke tahap selanjutnya"))return;this.overlay=!0;const i=new FormData;i.append("id",a),i.append("type",t),i.append("_method","POST");const g=await V.post("/user/change-phase-approve",i);g.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",g.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",g.data.data.message))}else{if(!window.confirm("Apakah Anda yakin Kembali ke phase sebelumnya"))return;this.overlay=!0;const g=new FormData;g.append("id",a),g.append("type",t),g.append("_method","POST");const s=await V.post("/user/change-phase-approve",g);s.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",s.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.data.message))}}catch(i){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.response.data.message)}},async getDetailFile(a){try{this.overlay=!0;const t=await V.get(`/user/credit/${a}`);if(t.status===200){this.dataFile=t.data.data.file,this.attachments=this.dataFile.attachments.filter(i=>i.path&&i.path!=="null"||i.link&&i.link!=="null"),this.fileSubmissions=this.dataFile.filesubmissions,this.userAccess=t.data.data.userAccess,this.dataAttachPhase1=t.data.data.file.attachments.filter(i=>i.phase==1),this.dataAttachPhase2=t.data.data.file.attachments.filter(i=>i.phase==2),this.dataAttachPhase3=t.data.data.file.attachments.filter(i=>i.phase==3),this.dataAttachPhase4=t.data.data.file.attachments.filter(i=>i.phase==4),this.dataAttachPhase5=t.data.data.file.attachments.filter(i=>i.phase==5),this.dataFile.phase=parseInt(this.dataFile.phase),this.isShowPhase4=!(parseInt(this.dataFile.plafon)<25e6),this.dataFile.phase==5&&(this.isShowPhase5=!0),parseInt(this.dataFile.phase)==5?this.stepperModel=parseInt(this.dataFile.phase)-1:this.stepperModel=parseInt(this.dataFile.phase)-1,this.generalInfo.id=this.dataFile.id,this.generalInfo.name=this.dataFile.name,this.generalInfo.type_bussiness=this.dataFile.type_bussiness,this.generalInfo.desc_bussiness=this.dataFile.desc_bussiness,this.generalInfo.plafon=this.dataFile.plafon,this.generalInfo.nik_pemohon=this.dataFile.nik_pemohon,this.generalInfo.nik_pasangan=this.dataFile.nik_pasangan,this.generalInfo.nik_jaminan=this.dataFile.nik_jaminan,this.generalInfo.address=this.dataFile.address,this.generalInfo.no_hp=this.dataFile.no_hp;for(let i=0;i<5;i++)this.separateNotesByPhase(this.dataFile,i);this.overlay=!1}else this.$showToast("error","Sorry",t.data.data.message),this.overlay=!1}catch(t){this.overlay=!1,this.$showToast("error","Sorry",t.response.data.message)}},getUserData(){const a=localStorage.getItem("userData");a&&(this.userData=JSON.parse(a))},openModal(a,t=null){a==1?this.insertAttch=!0:a==2?(this.attachFile.id=t.id,this.attachFile.file_id=t.file_id,this.attachFile.name=t.name,this.attachFile.isSecret=parseInt(t.isSecret),this.attachFile.isApprove=parseInt(t.isApprove),this.attachFile.link=t.link,this.updateAttch=!0):a==3?(this.updateDataNote.id=t.id,this.updateDataNote.file_id=t.file_id,this.updateDataNote.note=t.note,this.isUpdateNote=!0):a==4?this.isUpdateGeneralInfo=!0:a==5?(this.dataPhase3.surveyResult=this.dataFile.surveyResult,this.isDataPhase3=!0):a==6?this.isShowTimers=!0:a==7?this.isShowHistory=!0:a==8?this.isShowApprovals=!0:a==9?this.isChangeStatusCredit=!0:a==10&&(this.isShowAttachment=!0)},closeModal(a){a===1?(this.resetAttch(),this.insertAttch=!1):a===2?this.updateAttch=!1:a===3?(this.resetNote(),this.updateNote=!1):a==4?this.isUpdateGeneralInfo=!1:a==5?(this.dataPhase3.surveyResult="",this.isDataPhase3=!1):a==9&&(this.isChangeStatusCredit=!1,this.changeStatus.id=null,this.changeStatus.status=null,this.changeStatus.reasonRejected=null)},async updateGeneralInfo(){try{this.overlay=!0;const a=new FormData;a.append("name",this.generalInfo.name),a.append("plafon",this.generalInfo.plafon.replace(/\D/g,"")),a.append("type_bussiness",this.generalInfo.type_bussiness),a.append("desc_bussiness",this.generalInfo.desc_bussiness),this.generalInfo.nik_pemohon!=""&&a.append("nik_pemohon",this.generalInfo.nik_pemohon),this.generalInfo.nik_pasangan!=""&&a.append("nik_pasangan",this.generalInfo.nik_pasangan),this.generalInfo.nik_jaminan!=""&&a.append("nik_jaminan",this.generalInfo.nik_jaminan),this.generalInfo.address!=""&&a.append("address",this.generalInfo.address),this.generalInfo.no_hp!=""&&a.append("no_hp",this.generalInfo.no_hp),a.append("_method","PUT");const t=await V.post(`/user/edit-general-info/${this.generalInfo.id}`,a);t.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("success","Success",t.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("error","Sorry",t.data.message))}catch(a){this.isUpdateGeneralInfo=!1,this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async insertNote(){try{if(this.overlay=!0,this.dataNote.note==null){this.$showToast("error","Sorry","Note cannot be empty"),this.overlay=!1;return}const a=new FormData;a.append("file_id",this.dataNote.file_id),a.append("note",this.dataNote.note),a.append("_method","POST");const t=await V.post("/user/note",a);t.status===200?(this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",t.data.message)):(this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.data.message))}catch(a){this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async updateNote(){try{this.overlay=!0;const a=new FormData;a.append("file_id",this.updateDataNote.file_id),a.append("note",this.updateDataNote.note),a.append("_method","PUT");const t=await V.post(`/user/note/${this.updateDataNote.id}`,a);t.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("success","Success",t.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("error","Sorry",t.data.message))}catch(a){this.isUpdateNote=!1,this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async deleteNote(a){try{if(this.overlay=!0,!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;const i=await V.delete(`/user/note/${a}`);i.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",i.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(t){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}},separateNotesByPhase(a,t){a.notes.forEach(i=>{if(i.phase==t)switch(t){case 1:this.notePhase1.push(i);break;case 2:this.notePhase2.push(i);break;case 3:this.notePhase3.push(i);break;case 4:this.notePhase4.push(i);break;default:console.log("Invalid phase")}})},modalNote(){this.isModalPhase=!this.isModalPhase},async changeApproval(a){try{this.overlay=!0;const t=await V.get(`/user/change-phase-approve/${a}`);t.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",t.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.data.message))}catch(t){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}},handleFileChange(a){const t=a.target.files[0];t&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(t.type)?this.attachFile.path=t:(this.closeModal(1),this.closeModal(2),this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, DOCX, XLS, dan XLSX yang diizinkan."),a.target.value=null)},resetAttch(){this.attachFile={id:null,file_id:this.$route.params.fileId,name:null,path:null,note:null,link:null,isSecret:!1}},async insertAttachment(){try{this.overlay=!0;const a=new FormData;a.append("file_id",this.attachFile.file_id),a.append("phase",this.dataFile.phase),a.append("name",this.attachFile.name),this.attachFile.path!=null&&a.append("path",this.attachFile.path),this.attachFile.link!=null&&a.append("link",this.attachFile.link),a.append("note",this.attachFile.note),a.append("isApprove",this.attachFile.isApprove),this.dataFile.phase>=2&&(this.attachFile.isSecret===!1?a.append("isSecret","0"):a.append("isSecret",String(this.attachFile.isSecret))),a.append("_method","POST");const t={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},i=await V.post("/user/add-attach",a,t);i.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(a){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async editAttachment(){try{this.overlay=!0;const a=new FormData;a.append("file_id",this.attachFile.file_id),a.append("name",this.attachFile.name),a.append("path",this.attachFile.path),a.append("phase",this.dataFile.phase),a.append("isApprove",this.attachFile.isApprove),this.attachFile.path!=null&&a.append("path",this.attachFile.path),a.append("isSecret",this.attachFile.isSecret),a.append("_method","PUT");const t={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},i=await V.post(`/user/edit-attach/${this.attachFile.id}`,a,t);i.status===200?(this.overlay=!1,this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(a){this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async deleteAttachment(a){try{if(!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;this.overlay=!0;const i=await V.delete(`/user/delete-attach/${a}`);i.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",i.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry","Terjadi Kesalahan Silahkan Coba Lagi"))}catch{this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry","Terjadi Kesalahan Silahkan Coba Lagi")}}},mounted(){this.checkMobile(),this.getUserData(),this.getDetailFile(this.fileId)}};const b=a=>(ne("data-v-5d08de80"),a=a(),oe(),a),hs=b(()=>o("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),cs=b(()=>o("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),fs=b(()=>o("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),gs=b(()=>o("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),ys=b(()=>o("span",{style:{color:"red"}},"*",-1)),_s=b(()=>o("span",{class:"subtitle-1 text-center"},"Note: ",-1)),ks=b(()=>o("span",{style:{color:"red"}},"*",-1)),bs=b(()=>o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1)),As=b(()=>o("span",{style:{color:"red"}},"*",-1)),vs=b(()=>o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),Ss=b(()=>o("span",{style:{color:"red"}},"*",-1)),Fs=b(()=>o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),Ds=b(()=>o("span",{style:{color:"red"}},"*",-1)),Ps=b(()=>o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),xs=b(()=>o("span",{style:{color:"red"}},"*",-1)),Vs=b(()=>o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),Is=b(()=>o("span",{style:{color:"red"}},"*",-1)),ws=b(()=>o("span",{class:"subtitle-1 text-center"},"Nama Pemohon: ",-1)),Us=b(()=>o("span",{style:{color:"red"}},"*",-1)),Ts=b(()=>o("span",{class:"subtitle-1 text-center"},"Jumlah Plafon: ",-1)),Cs=b(()=>o("span",{style:{color:"red"}},"*",-1)),Ks=b(()=>o("span",{class:"subtitle-1 text-center"},"Jenis Usaha: ",-1)),Ms=b(()=>o("span",{style:{color:"red"}},"*",-1)),Ns=b(()=>o("span",{class:"subtitle-1 text-center"},"Deskripsi Usaha: ",-1)),js=b(()=>o("span",{style:{color:"red"}},"*",-1)),Os=b(()=>o("span",{class:"subtitle-1 text-center"},"NIK Pemohon: ",-1)),qs=b(()=>o("span",{style:{color:"red"}},"*",-1)),Ls=b(()=>o("span",{class:"subtitle-1 text-center"},"Alamat Pemohon: ",-1)),zs=b(()=>o("span",{class:"subtitle-1 text-center"},"NIK Pasangan: ",-1)),Rs=b(()=>o("span",{class:"subtitle-1 text-center"},"NIK Pemilik Jaminan: ",-1)),Bs=b(()=>o("span",{class:"subtitle-1 text-center"},"No. HP: ",-1)),Hs=b(()=>o("span",{style:{color:"red"}},"*",-1)),Es=b(()=>o("span",{class:"subtitle-1 text-center"},"Hasil Survei: ",-1)),Gs=b(()=>o("span",{style:{color:"red"}},"*",-1)),Js=b(()=>o("span",{class:"subtitle-1 text-center"},"Alasan: ",-1));function Ys(a,t,i,g,s,u){const n=Y("phase"),x=Y("EasyDataTable");return d(),k("div",null,[e($,{"model-value":s.overlay,class:"align-center justify-center"},{default:l(()=>[e(Z,{color:"blue-lighten-3",indeterminate:"",size:41,width:5}),p(" Loading... ")]),_:1},8,["model-value"]),e(A,null,{default:l(()=>[e(j,{class:"text-2xl font-weight-bold d-flex justify-left"},{default:l(()=>[p(" Credit ")]),_:1}),e(L,null,{default:l(()=>[e(he,{"model-value":s.stepperModel,mobile:s.isMobile},{default:l(()=>[e(ce,null,{default:l(()=>[e(X,{title:"Phase 1 (Pooling)",value:"1",complete:s.stepperModel>1},null,8,["complete"]),e(Q),e(X,{title:"Phase 2 (SLIK)",value:"2",complete:s.stepperModel>2},null,8,["complete"]),e(Q),e(X,{title:"Phase 3 (Survei)",value:"3",complete:s.stepperModel>3},null,8,["complete"]),e(Q),e(X,{title:"Phase 4 (Komite)",value:"4",complete:s.stepperModel>4},null,8,["complete"]),e(Q),e(X,{title:"Operation",value:"5",complete:s.stepperModel>5},null,8,["complete"]),e(Q),e(X,{title:"Approved",value:"6",complete:s.stepperModel>6},null,8,["complete"])]),_:1}),e(fe,null,{default:l(()=>[s.userData&&s.userData.position.role.isPhase1Access==1?(d(),c(H,{key:0,value:"1"},{default:l(()=>[e(n,{dataFile:s.dataFile,userData:s.userData,"insert-note":u.insertNote,"change-approval":u.changeApproval,"format-date":u.formatDate,"open-modal":u.openModal,"delete-attachment":u.deleteAttachment,"delete-note":u.deleteNote,"get-detail-file":u.getDetailFile,step:u.step,"file-id":u.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":u.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":u.modalNote,phase1Attachments:s.dataAttachPhase1,phase2Attachments:s.dataAttachPhase2,phase3Attachments:s.dataAttachPhase3,phase4Attachments:s.dataAttachPhase4,phase5Attachments:s.dataAttachPhase5,submissions:s.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1})):(d(),c(H,{key:1,value:"1"},{default:l(()=>[hs]),_:1})),s.userData&&s.userData.position.role.isPhase2Access==1?(d(),c(H,{key:2,value:"2"},{default:l(()=>[e(n,{dataFile:s.dataFile,userData:s.userData,"insert-note":u.insertNote,"change-approval":u.changeApproval,"format-date":u.formatDate,"open-modal":u.openModal,"delete-attachment":u.deleteAttachment,"delete-note":u.deleteNote,"get-detail-file":u.getDetailFile,step:u.step,"file-id":u.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":u.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":u.modalNote,phase1Attachments:s.dataAttachPhase1,phase2Attachments:s.dataAttachPhase2,phase3Attachments:s.dataAttachPhase3,phase4Attachments:s.dataAttachPhase4,phase5Attachments:s.dataAttachPhase5,submissions:s.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1})):(d(),c(H,{key:3,value:"2"},{default:l(()=>[cs]),_:1})),s.userData&&s.userData.position.role.isPhase3Access==1?(d(),c(H,{key:4,value:"3"},{default:l(()=>[e(n,{dataFile:s.dataFile,userData:s.userData,"insert-note":u.insertNote,"change-approval":u.changeApproval,"format-date":u.formatDate,"open-modal":u.openModal,"delete-attachment":u.deleteAttachment,"delete-note":u.deleteNote,"get-detail-file":u.getDetailFile,step:u.step,"file-id":u.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":u.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":u.modalNote,phase1Attachments:s.dataAttachPhase1,phase2Attachments:s.dataAttachPhase2,phase3Attachments:s.dataAttachPhase3,phase4Attachments:s.dataAttachPhase4,phase5Attachments:s.dataAttachPhase5,submissions:s.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1})):(d(),c(H,{key:5,value:"3"},{default:l(()=>[fs]),_:1})),s.userData&&s.userData.position.role.isPhase4Access==1?(d(),c(H,{key:6,value:"4"},{default:l(()=>[e(n,{dataFile:s.dataFile,userData:s.userData,"insert-note":u.insertNote,"change-approval":u.changeApproval,"format-date":u.formatDate,"open-modal":u.openModal,"delete-attachment":u.deleteAttachment,"delete-note":u.deleteNote,"get-detail-file":u.getDetailFile,step:u.step,"file-id":u.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":u.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":u.modalNote,phase1Attachments:s.dataAttachPhase1,phase2Attachments:s.dataAttachPhase2,phase3Attachments:s.dataAttachPhase3,phase4Attachments:s.dataAttachPhase4,phase5Attachments:s.dataAttachPhase5,submissions:s.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1})):(d(),c(H,{key:7,value:"4"},{default:l(()=>[gs]),_:1})),e(H,{value:"5"},{default:l(()=>[e(n,{dataFile:s.dataFile,userData:s.userData,"insert-note":u.insertNote,"change-approval":u.changeApproval,"format-date":u.formatDate,"open-modal":u.openModal,"delete-attachment":u.deleteAttachment,"delete-note":u.deleteNote,"get-detail-file":u.getDetailFile,step:u.step,"file-id":u.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":u.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":u.modalNote,phase1Attachments:s.dataAttachPhase1,phase2Attachments:s.dataAttachPhase2,phase3Attachments:s.dataAttachPhase3,phase4Attachments:s.dataAttachPhase4,phase5Attachments:s.dataAttachPhase5,submissions:s.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1}),e(H,{value:"6"},{default:l(()=>[e(n,{dataFile:s.dataFile,userData:s.userData,"insert-note":u.insertNote,"change-approval":u.changeApproval,"format-date":u.formatDate,"open-modal":u.openModal,"delete-attachment":u.deleteAttachment,"delete-note":u.deleteNote,"get-detail-file":u.getDetailFile,step:u.step,"file-id":u.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":u.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":u.modalNote,phase1Attachments:s.dataAttachPhase1,phase2Attachments:s.dataAttachPhase2,phase3Attachments:s.dataAttachPhase3,phase4Attachments:s.dataAttachPhase4,phase5Attachments:s.dataAttachPhase5,submissions:s.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1})]),_:1})]),_:1},8,["model-value","mobile"])]),_:1})]),_:1}),e(C,{modelValue:s.insertAttch,"onUpdate:modelValue":t[9]||(t[9]=r=>s.insertAttch=r),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Tambah Data ")]),text:l(()=>[e(N,{onSubmit:M(u.insertAttachment,["prevent"])},{default:l(()=>[e(P,null,{default:l(()=>[e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Pilih Keterangan File",items:s.nameFileList,autofocus:"",modelValue:s.attachFile.name,"onUpdate:modelValue":t[0]||(t[0]=r=>s.attachFile.name=r),"prepend-icon":"mdi-help-rhombus"},null,8,["items","modelValue"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[ys,_s,e(D,{class:"my-3",modelValue:s.attachFile.note,"onUpdate:modelValue":t[1]||(t[1]=r=>s.attachFile.note=r),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[ks,bs,e(E,{modelValue:s.selectedOption,"onUpdate:modelValue":t[2]||(t[2]=r=>s.selectedOption=r),mandatory:!0,row:""},{default:l(()=>[e(U,{label:"File",value:"file"}),e(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),c(m,{key:0,md:"12",cols:"12"},{default:l(()=>[As,vs,e(B,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:t[3]||(t[3]=r=>u.handleFileChange(r))},null,8,["rules"])]),_:1})):h("",!0),s.selectedOption==="link"?(d(),c(m,{key:1,md:"12",cols:"12"},{default:l(()=>[Ss,Fs,e(D,{class:"my-3",modelValue:s.attachFile.link,"onUpdate:modelValue":t[4]||(t[4]=r=>s.attachFile.link=r),autofocus:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1})):h("",!0),s.dataFile.phase>=2?(d(),c(m,{key:2,md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.attachFile.isSecret,"onUpdate:modelValue":t[5]||(t[5]=r=>s.attachFile.isSecret=r),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):h("",!0),e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.attachFile.isApprove,"onUpdate:modelValue":t[6]||(t[6]=r=>s.attachFile.isApprove=r),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(I,{type:"submit",disabled:!(s.attachFile.name&&(s.attachFile.path||s.attachFile.link)&&s.attachFile.isApprove===1&&s.attachFile.note!==null)},{default:l(()=>[p(" Simpan ")]),_:1},8,["disabled"]),o("button",{type:"button",class:"btn btn-blue",onClick:t[7]||(t[7]=r=>u.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(z,{modelValue:s.uploadProgress,"onUpdate:modelValue":t[8]||(t[8]=r=>s.uploadProgress=r),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(C,{modelValue:s.updateAttch,"onUpdate:modelValue":t[16]||(t[16]=r=>s.updateAttch=r),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Edit Data ")]),text:l(()=>[e(N,{onSubmit:M(u.editAttachment,["prevent"])},{default:l(()=>[e(P,null,{default:l(()=>[e(m,{md:"12",cols:"12"},{default:l(()=>[Ds,Ps,e(D,{class:"my-3",modelValue:s.attachFile.name,"onUpdate:modelValue":t[10]||(t[10]=r=>s.attachFile.name=r),autofocus:"",rules:[s.rules.required],disabled:""},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[xs,Vs,e(B,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:t[11]||(t[11]=r=>u.handleFileChange(r))},null,8,["rules"])]),_:1}),s.dataFile.phase==2?(d(),c(m,{key:0,md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Termasuk File Rahasia ? (SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.attachFile.isSecret,"onUpdate:modelValue":t[12]||(t[12]=r=>s.attachFile.isSecret=r),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):h("",!0),e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.attachFile.isApprove,"onUpdate:modelValue":t[13]||(t[13]=r=>s.attachFile.isApprove=r),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(I,{type:"submit"},{default:l(()=>[p(" Update ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:t[14]||(t[14]=r=>u.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(z,{modelValue:s.uploadProgress,"onUpdate:modelValue":t[15]||(t[15]=r=>s.uploadProgress=r),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(C,{modelValue:s.isUpdateGeneralInfo,"onUpdate:modelValue":t[28]||(t[28]=r=>s.isUpdateGeneralInfo=r),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Edit Informasi Umum ")]),text:l(()=>[e(N,{onSubmit:M(u.updateGeneralInfo,["prevent"])},{default:l(()=>[e(P,null,{default:l(()=>[e(m,{md:"12",cols:"12"},{default:l(()=>[Is,ws,e(D,{class:"my-3",modelValue:s.generalInfo.name,"onUpdate:modelValue":t[17]||(t[17]=r=>s.generalInfo.name=r),autofocus:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[Us,Ts,e(D,{class:"my-3",modelValue:s.generalInfo.plafon,"onUpdate:modelValue":t[18]||(t[18]=r=>s.generalInfo.plafon=r),type:"text",onInput:u.formatInputPlafon},null,8,["modelValue","onInput"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[Cs,Ks,e(D,{class:"my-3",modelValue:s.generalInfo.type_bussiness,"onUpdate:modelValue":t[19]||(t[19]=r=>s.generalInfo.type_bussiness=r),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[Ms,Ns,e(D,{class:"my-3",modelValue:s.generalInfo.desc_bussiness,"onUpdate:modelValue":t[20]||(t[20]=r=>s.generalInfo.desc_bussiness=r),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[js,Os,e(D,{class:"my-3",modelValue:s.generalInfo.nik_pemohon,"onUpdate:modelValue":t[21]||(t[21]=r=>s.generalInfo.nik_pemohon=r),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[qs,Ls,e(D,{class:"my-3",modelValue:s.generalInfo.address,"onUpdate:modelValue":t[22]||(t[22]=r=>s.generalInfo.address=r),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[zs,e(D,{class:"my-3",modelValue:s.generalInfo.nik_pasangan,"onUpdate:modelValue":t[23]||(t[23]=r=>s.generalInfo.nik_pasangan=r)},null,8,["modelValue"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[Rs,e(D,{class:"my-3",modelValue:s.generalInfo.nik_jaminan,"onUpdate:modelValue":t[24]||(t[24]=r=>s.generalInfo.nik_jaminan=r)},null,8,["modelValue"])]),_:1}),e(m,{md:"12",cols:"12"},{default:l(()=>[Bs,e(D,{class:"my-3",modelValue:s.generalInfo.no_hp,"onUpdate:modelValue":t[25]||(t[25]=r=>s.generalInfo.no_hp=r),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(I,{type:"submit"},{default:l(()=>[p(" Update ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:t[26]||(t[26]=r=>u.closeModal(4))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(z,{modelValue:s.uploadProgress,"onUpdate:modelValue":t[27]||(t[27]=r=>s.uploadProgress=r),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(C,{modelValue:s.isUpdateNote,"onUpdate:modelValue":t[30]||(t[30]=r=>s.isUpdateNote=r),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Update Note ")]),text:l(()=>[e(N,{onSubmit:M(u.updateNote,["prevent"])},{default:l(()=>[e(P,{align:"center",justify:"center"},{default:l(()=>[e(m,{md:"10",cols:"10"},{default:l(()=>[e(te,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:s.updateDataNote.note,"onUpdate:modelValue":t[29]||(t[29]=r=>s.updateDataNote.note=r),rows:"2"},null,8,["modelValue"])]),_:1}),e(m,{md:"2",cols:"2"},{default:l(()=>[e(I,{density:"compact",icon:"mdi-note-plus",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),e(C,{modelValue:s.isDataPhase3,"onUpdate:modelValue":t[33]||(t[33]=r=>s.isDataPhase3=r),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Hasil Survey ")]),text:l(()=>[e(N,{onSubmit:M(u.updatePhase3,["prevent"])},{default:l(()=>[e(P,null,{default:l(()=>[e(m,{md:"12",cols:"12"},{default:l(()=>[Hs,Es,e(te,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:s.dataPhase3.surveyResult,"onUpdate:modelValue":t[31]||(t[31]=r=>s.dataPhase3.surveyResult=r),rows:"3"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(I,{type:"submit"},{default:l(()=>[p("Update")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:t[32]||(t[32]=r=>u.closeModal(5))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),e(C,{modelValue:s.isShowTimers,"onUpdate:modelValue":t[34]||(t[34]=r=>s.isShowTimers=r),width:"auto",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Waktu ")]),text:l(()=>[e(x,{headers:s.timerHeaders,items:s.dataFile.phase_times},{"item-timeDiff":l(r=>[p(y(u.calculateTimeDiff(r.startTime,r.endTime)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),e(C,{modelValue:s.isShowAttachment,"onUpdate:modelValue":t[35]||(t[35]=r=>s.isShowAttachment=r),width:"auto",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Waktu ")]),text:l(()=>[e(x,{headers:s.attachmentHeaders,items:s.attachments},null,8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),e(C,{modelValue:s.isShowHistory,"onUpdate:modelValue":t[36]||(t[36]=r=>s.isShowHistory=r),width:"auto",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Riwayat ")]),text:l(()=>[e(x,{"show-index":"",headers:s.historyHeaders,items:s.dataFile.file_activities},{"item-created_at":l(r=>[p(y(u.formatDate(r.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),e(C,{modelValue:s.isShowApprovals,"onUpdate:modelValue":t[37]||(t[37]=r=>s.isShowApprovals=r),width:"auto",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Riwayat Persetujuan ")]),text:l(()=>[e(x,{headers:s.approvalHeaders,items:s.dataFile.approvals},{"item-approved":l(r=>[parseInt(r.approved)==1?(d(),c(O,{key:0,color:"success"},{default:l(()=>[p(" Disetujui ")]),_:1})):(d(),c(O,{key:1,color:"error"},{default:l(()=>[p(" Belum disetujui ")]),_:1}))]),"item-created_at":l(r=>[p(y(u.formatDate(r.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),e(C,{modelValue:s.isChangeStatusCredit,"onUpdate:modelValue":t[41]||(t[41]=r=>s.isChangeStatusCredit=r),width:"auto",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Ubah Status File ")]),text:l(()=>[e(N,{onSubmit:M(u.updateStatusCredit,["prevent"])},{default:l(()=>[e(P,null,{default:l(()=>[e(m,{md:"12",cols:"12"},{default:l(()=>[e(K,{label:"Ubah Status File",items:[{value:1,title:"Approved"},{value:2,title:"Pending"},{value:3,title:"Rejected"}],modelValue:s.changeStatus.status,"onUpdate:modelValue":t[38]||(t[38]=r=>s.changeStatus.status=r)},null,8,["modelValue"])]),_:1}),s.changeStatus.status==3?(d(),c(m,{key:0,md:"12",cols:"12"},{default:l(()=>[Gs,Js,e(te,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:s.changeStatus.reasonRejected,"onUpdate:modelValue":t[39]||(t[39]=r=>s.changeStatus.reasonRejected=r),rows:"2"},null,8,["modelValue"])]),_:1})):h("",!0),e(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(I,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:t[40]||(t[40]=r=>u.closeModal(9))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}const ga=W(ms,[["render",Ys],["__scopeId","data-v-5d08de80"]]);export{ga as default};
