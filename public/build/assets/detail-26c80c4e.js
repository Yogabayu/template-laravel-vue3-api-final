import{m as w}from"./index-ce65fae0.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";import{c as b,d as h,e as C,V as v,b as K,g as se}from"./VRow-572c6eef.js";import{a as q,c as x,d as E,b as U,V as ie}from"./VMenu-67e85c50.js";import{o as u,h as c,w as t,a,c as D,F as H,e as p,t as y,i as g,b as n,K as F,f as m,G as R,d as N,V as P,a0 as B,r as G,H as ae,I as le,E as oe}from"./main-2d870a4f.js";import{V as S}from"./VTooltip-992a17fa.js";import{V as M,a as j}from"./VTextField-b26969d8.js";import{b as z}from"./VWindowItem-6d0a304f.js";import{V}from"./VSelect-ed95fa0e.js";import{V as I}from"./VDialog-c6e1eb93.js";import{V as T,a as ne}from"./VChip-99b7f6cd.js";import{V as W}from"./VDivider-8ee8bee7.js";import{V as Q,a as re,b as de,c as ue,d as Y,e as pe,f as L}from"./VStepper-15408bf2.js";import{V as ee}from"./VSpacer-6b5d3e8a.js";import{V as ce}from"./VOverlay-6d2e6dab.js";import"./VImg-750160b0.js";import"./dialog-transition-5e1da3ef.js";import"./VCheckboxBtn-edb42a40.js";const he={name:"AttachmentCard1",props:{data:{type:Object,required:!0},fileId:{type:Number,required:!0},filePath:{type:String,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},openModal:{type:Function,required:!0}}},me=n("span",null,"Phase 1 (Pooling) ðŸ“„",-1),fe={class:"operation-wrapper"},ge={class:"d-flex justify-space-between"},ye=["href"],Ae=["onClick"],ve={class:"operation-wrapper"},_e={class:"d-flex justify-space-between"},be=["href"],ke=["onClick"];function Fe(s,e,i,f,l,r){return u(),c(v,{color:"warning"},{default:t(()=>[a(C,null,{default:t(()=>[a(b,{class:"d-flex justify-space-between"},{default:t(()=>[a(h,{cols:"12",sm:"6",md:"8"},{default:t(()=>[me]),_:1})]),_:1})]),_:1}),(u(!0),D(R,null,H(i.data,(o,k)=>(u(),D("div",{key:k},[o.path!=null&&!parseInt(o.isSecret)?(u(),c(q,{key:0,density:"compact"},{default:t(()=>[a(U,null,{prepend:t(()=>[p(y(o.isApprove?"âœ…":"âŒ")+" ",1),a(g,{icon:"mdi-file"})]),append:t(()=>[n("div",fe,[n("div",ge,[o.path!="null"?(u(),c(S,{key:0,location:"top",text:"Lihat File"},{activator:t(({props:d})=>[n("a",F(d,{href:i.filePath+"/"+i.fileId+"/"+o.path,target:"_blank",rel:"noopener noreferrer"}),[n("button",null,[a(g,{size:"20",icon:"bx-link-external",color:"blue"})])],16,ye)]),_:2},1024)):m("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(u(),c(S,{key:1,location:"top",text:"Edit File"},{activator:t(({props:d})=>[n("button",F(d,{onClick:O=>i.openModal(2,o)}),[a(g,{size:"20",icon:"bx-edit",color:"blue"})],16,Ae)]),_:2},1024)):m("",!0)])])]),default:t(()=>[a(x,null,{default:t(()=>[p(y(o.name),1)]),_:2},1024),o.note!=null?(u(),c(E,{key:0},{default:t(()=>[p(y(o.note),1)]),_:2},1024)):m("",!0)]),_:2},1024)]),_:2},1024)):(u(),c(q,{key:1,density:"compact"},{default:t(()=>[a(U,null,{prepend:t(()=>[p(y(o.isApprove?"âœ…":"âŒ")+" ",1),a(g,{icon:"mdi-file"})]),append:t(()=>[n("div",ve,[n("div",_e,[i.userAccess&&parseInt(i.userAccess.isSecret)&&o.path!="null"?(u(),c(S,{key:0,location:"top",text:"Lihat File"},{activator:t(({props:d})=>[n("a",F(d,{href:i.filePath+"/"+s.dataFile.id+"/"+o.path,target:"_blank",rel:"noopener noreferrer"}),[n("button",null,[a(g,{size:"20",icon:"bx-link-external",color:"blue"})])],16,be)]),_:2},1024)):m("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(u(),c(S,{key:1,location:"top",text:"Edit File"},{activator:t(({props:d})=>[n("button",F(d,{onClick:O=>i.openModal(2,o)}),[a(g,{size:"20",icon:"bx-edit",color:"blue"})],16,ke)]),_:2},1024)):m("",!0)])])]),default:t(()=>[a(x,null,{default:t(()=>[p(y(o.name),1)]),_:2},1024),o.note!=null?(u(),c(E,{key:0},{default:t(()=>[p(y(o.note),1)]),_:2},1024)):m("",!0)]),_:2},1024)]),_:2},1024))]))),128))]),_:1})}const Se=J(he,[["render",Fe]]),Pe={props:{data:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0}},data(){return{uploadProgress:null,rules:{required:s=>!!s||"Required"},isFormDetailSlik:!1,formDetailSlik:{id:null,name:null,path:null,file_id:this.fileId,isApprove:0,isSecret:0},isFormResumeSlik:!1,formResumeSlik:{id:null,name:null,path:null,file_id:this.fileId,isApprove:0,isSecret:0},isAppeal:!1,formAppeal:{id:null,file_id:this.fileId,phase:2,name:"File Banding",path:null,isApprove:0,isSecret:0},isAnalytic:!1,formAnalytic:{id:null,file_id:this.fileId,phase:2,name:"Analisa Awal Kredit AO",path:null,isApprove:0,isSecret:0}}},methods:{shouldDisplay(s){return s.name==="Detail SLIK"&&parseInt(this.userAccess.isSecret)==1||s.name==="Resume SLIK"},showAnalisaAwalCredit(){const s=this.data.find(i=>i.name==="Detail SLIK"&&i.isApprove==1),e=this.data.find(i=>i.name==="Resume SLIK"&&i.isApprove==1);if(s&&e){let i=this.data.find(f=>f.name=="Analisa Awal Kredit AO");i&&(this.formAnalytic.id=i.id,this.formAnalytic.isApprove=i.isApprove,this.formAnalytic.isSecret=i.isSecret,this.formAnalytic.path=i.path)}return s&&e},showFileBanding(){const s=this.data.find(l=>l.name=="Detail SLIK"&&l.isApprove!=1),e=this.data.find(l=>l.name=="Resume SLIK"&&l.isApprove!=1),i=this.data.find(l=>l.name==="File Banding"&&l.path!="null"),f=this.data.find(l=>l.name==="Analisa Awal Kredit AO"&&l.path!="null");if(s&&e||i&&f){let l=this.data.find(r=>r.name==="File Banding");return l&&(this.formAppeal.id=l.id,this.formAppeal.isApprove=l.isApprove,this.formAppeal.isSecret=l.isSecret,this.formAppeal.path=l.path),!0}return!1},handleFileChange(s){const e=s.target.files[0];e&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(e.type)?this.formDetailSlik.path=e:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),s.target.value=null)},handleAnalyticChange(s){const e=s.target.files[0];e&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(e.type)?this.formAnalytic.path=e:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),s.target.value=null)},handleAppealChange(s){const e=s.target.files[0];e&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(e.type)?this.formAppeal.path=e:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),s.target.value=null)},openModal(s,e=null){s==1?e.name=="Detail SLIK"?(this.formDetailSlik.id=e.id,this.formDetailSlik.name=e.name,this.formDetailSlik.isSecret=e.isSecret,this.formDetailSlik.isApprove=e.isApprove,this.isFormDetailSlik=!0):e.name=="Resume SLIK"&&(this.formDetailSlik.id=e.id,this.formDetailSlik.name=e.name,this.formDetailSlik.isSecret=e.isSecret,this.formDetailSlik.isApprove=e.isApprove,this.isFormResumeSlik=!0):s==2?this.isAnalytic=!0:s==3&&(this.isAppeal=!0)},closeModal(s){s==1?(this.formDetailSlik.id=null,this.formDetailSlik.name=null,this.formDetailSlik.isSecret=null,this.formDetailSlik.isApprove=null,this.isFormDetailSlik=!1):s==2?(this.formDetailSlik.id=null,this.formDetailSlik.name=null,this.formDetailSlik.isSecret=null,this.formDetailSlik.isApprove=null,this.isFormResumeSlik=!1):s==3?(this.formAnalytic.id=null,this.formAnalytic.isSecret=null,this.formAnalytic.isApprove=null,this.formAnalytic.path=null,this.isAnalytic=!1):s==4&&(this.formAppeal.id=null,this.formAppeal.isSecret=null,this.formAppeal.isApprove=null,this.formAppeal.path=null,this.isAppeal=!1)},async insertSlik(){try{this.overlay=!0;const s=new FormData;s.append("name",this.formDetailSlik.name),s.append("path",this.formDetailSlik.path),s.append("isSecret",this.formDetailSlik.isSecret),s.append("isApprove",this.formDetailSlik.isApprove),s.append("file_id",this.formDetailSlik.file_id),s.append("_method","PUT");const e={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(l){console.error("Error calculating progress:",l)}},headers:{"Content-Type":"multipart/form-data"}},i=await w.post(`/user/edit-attach/${this.formDetailSlik.id}`,s,e);i.status===200?(this.overlay=!1,this.closeModal(1),this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},async insertAnalytic(){try{this.overlay=!0;const s=new FormData;s.append("name",this.formAnalytic.name),s.append("path",this.formAnalytic.path),s.append("phase",this.formAnalytic.phase),s.append("isSecret",this.formAnalytic.isSecret),s.append("file_id",this.formAnalytic.file_id),s.append("isApprove",this.formAnalytic.isApprove),s.append("_method","PUT");const e={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(l){console.error("Error calculating progress:",l)}},headers:{"Content-Type":"multipart/form-data"}},i=await w.post(`/user/edit-attach/${this.formAnalytic.id}`,s,e);i.status===200?(this.overlay=!1,this.closeModal(3),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(3),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.closeModal(3),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},async insertAppeal(){try{this.overlay=!0;const s=new FormData;s.append("name",this.formAppeal.name),s.append("path",this.formAppeal.path),s.append("phase",this.formAppeal.phase),s.append("isSecret",this.formAppeal.isSecret),s.append("file_id",this.formAppeal.file_id),s.append("isApprove",this.formAppeal.isApprove),s.append("_method","PUT");const e={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(l){console.error("Error calculating progress:",l)}},headers:{"Content-Type":"multipart/form-data"}},i=await w.post(`/user/edit-attach/${this.formAppeal.id}`,s,e);i.status===200?(this.overlay=!1,this.closeModal(4),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(4),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.closeModal(4),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}}}},De=n("span",null,"Phase 2 (SLIK) ðŸ“„",-1),we={class:"operation-wrapper"},xe={class:"d-flex justify-space-between"},Ie=["href"],Ve=["onClick"],Te=["onClick"],Ce={key:0},Ue={class:"operation-wrapper"},Ne={class:"d-flex justify-space-between"},Me=["href"],Ke={key:1},je={class:"operation-wrapper"},qe={class:"d-flex justify-space-between"},Re=["href"],Oe=n("span",{style:{color:"red"}},"*",-1),Le=n("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),Be=n("span",{style:{color:"red"}},"*",-1),ze=n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),Ge=n("span",{style:{color:"red"}},"*",-1),Ee=n("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),He=n("span",{style:{color:"red"}},"*",-1),Je=n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),Ye=n("span",{style:{color:"red"}},"*",-1),We=n("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),Xe=n("span",{style:{color:"red"}},"*",-1),Qe=n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),Ze=n("span",{style:{color:"red"}},"*",-1),$e=n("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),et=n("span",{style:{color:"red"}},"*",-1),tt=n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1);function at(s,e,i,f,l,r){return u(),D(R,null,[a(v,{color:"warning"},{default:t(()=>[a(C,null,{default:t(()=>[a(b,{class:"d-flex justify-space-between"},{default:t(()=>[a(h,{cols:"12",sm:"6",md:"8"},{default:t(()=>[De]),_:1})]),_:1})]),_:1}),(u(!0),D(R,null,H(i.data,(o,k)=>(u(),D("div",{key:k},[a(q,{density:"compact"},{default:t(()=>[r.shouldDisplay(o)?(u(),c(U,{key:0},{prepend:t(()=>[p(y(o.isApprove?"âœ…":"âŒ")+" ",1),a(g,{icon:"mdi-file"})]),append:t(()=>[n("div",we,[n("div",xe,[o.path!=="null"?(u(),c(S,{key:0,location:"top",text:"Lihat File"},{activator:t(({props:d})=>[n("a",F(d,{href:`${i.filePath}/${i.fileId}/${o.path}`,target:"_blank",rel:"noopener noreferrer"}),[n("button",null,[a(g,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Ie)]),_:2},1024)):m("",!0),o.path==="null"&&i.userAccess&&parseInt(i.userAccess.canInsertData)==1?(u(),c(S,{key:1,location:"top",text:"Upload File"},{activator:t(({props:d})=>[n("button",F(d,{onClick:O=>r.openModal(1,o)}),[a(g,{size:"20",icon:"bx-upload",color:"blue"})],16,Ve)]),_:2},1024)):m("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(u(),c(S,{key:2,location:"top",text:"Edit File"},{activator:t(({props:d})=>[n("button",F(d,{onClick:O=>r.openModal(1,o)}),[a(g,{size:"20",icon:"bx-edit",color:"blue"})],16,Te)]),_:2},1024)):m("",!0)])])]),default:t(()=>[a(x,null,{default:t(()=>[p(y(o.name),1)]),_:2},1024),o.note!=null?(u(),c(E,{key:0},{default:t(()=>[p(y(o.note),1)]),_:2},1024)):m("",!0)]),_:2},1024)):m("",!0)]),_:2},1024)]))),128)),r.showAnalisaAwalCredit()?(u(),D("div",Ce,[a(q,{density:"compact"},{default:t(()=>[a(U,null,{prepend:t(()=>[p(y(l.formAnalytic.isApprove?"âœ…":"âŒ")+" ",1),a(g,{icon:"mdi-file"})]),append:t(()=>[n("div",Ue,[n("div",Ne,[l.formAnalytic.path!=null&&l.formAnalytic.path!="null"?(u(),c(S,{key:0,location:"top",text:"Lihat File"},{activator:t(({props:o})=>[n("a",F(o,{href:`${i.filePath}/${i.fileId}/${l.formAnalytic.path}`,target:"_blank",rel:"noopener noreferrer"}),[n("button",null,[a(g,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Me)]),_:1})):m("",!0),(l.formAnalytic.path==null||l.formAnalytic.path=="null")&&i.userAccess&&parseInt(i.userAccess.canAppeal)==1?(u(),c(S,{key:1,location:"top",text:"Upload File"},{activator:t(({props:o})=>[n("button",F(o,{onClick:e[0]||(e[0]=k=>r.openModal(2,l.formAnalytic))}),[a(g,{size:"20",icon:"bx-upload",color:"blue"})],16)]),_:1})):m("",!0),i.userAccess&&parseInt(i.userAccess.canAppeal)==1?(u(),c(S,{key:2,location:"top",text:"Edit File"},{activator:t(({props:o})=>[n("button",F(o,{onClick:e[1]||(e[1]=k=>r.openModal(2,l.formAnalytic))}),[a(g,{size:"20",icon:"bx-edit",color:"blue"})],16)]),_:1})):m("",!0)])])]),default:t(()=>[a(x,null,{default:t(()=>[p(y(l.formAnalytic.name),1)]),_:1}),l.formAnalytic.note!=null?(u(),c(E,{key:0},{default:t(()=>[p(y(l.formAnalytic.note),1)]),_:1})):m("",!0)]),_:1})]),_:1})])):m("",!0),r.showFileBanding()?(u(),D("div",Ke,[a(q,{density:"compact"},{default:t(()=>[a(U,null,{prepend:t(()=>[p(y(l.formAppeal.isApprove?"âœ…":"âŒ")+" ",1),a(g,{icon:"mdi-file"})]),append:t(()=>[n("div",je,[n("div",qe,[l.formAppeal.path!=null&&l.formAppeal.path!="null"?(u(),c(S,{key:0,location:"top",text:"Lihat File"},{activator:t(({props:o})=>[n("a",F(o,{href:`${i.filePath}/${i.fileId}/${l.formAppeal.path}`,target:"_blank",rel:"noopener noreferrer"}),[n("button",null,[a(g,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Re)]),_:1})):m("",!0),(l.formAppeal.path==null||l.formAppeal.path=="null")&&i.userAccess&&parseInt(i.userAccess.canAppeal)==1?(u(),c(S,{key:1,location:"top",text:"Upload File"},{activator:t(({props:o})=>[n("button",F(o,{onClick:e[2]||(e[2]=k=>r.openModal(3,l.formAppeal))}),[a(g,{size:"20",icon:"bx-upload",color:"blue"})],16)]),_:1})):m("",!0),i.userAccess&&parseInt(i.userAccess.canAppeal)==1?(u(),c(S,{key:2,location:"top",text:"Edit File"},{activator:t(({props:o})=>[n("button",F(o,{onClick:e[3]||(e[3]=k=>r.openModal(3,l.formAppeal))}),[a(g,{size:"20",icon:"bx-edit",color:"blue"})],16)]),_:1})):m("",!0)])])]),default:t(()=>[a(x,null,{default:t(()=>[p(y(l.formAppeal.name),1)]),_:1})]),_:1})]),_:1})])):m("",!0)]),_:1}),a(I,{modelValue:l.isFormDetailSlik,"onUpdate:modelValue":e[10]||(e[10]=o=>l.isFormDetailSlik=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Data Attachment ")]),text:t(()=>[a(M,{onSubmit:N(r.insertSlik,["prevent"])},{default:t(()=>[a(b,null,{default:t(()=>[a(h,{md:"12",cols:"12"},{default:t(()=>[Oe,Le,a(j,{class:"my-3",modelValue:l.formDetailSlik.name,"onUpdate:modelValue":e[4]||(e[4]=o=>l.formDetailSlik.name=o),autofocus:"",disabled:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[Be,ze,a(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[5]||(e[5]=o=>r.handleFileChange(o))},null,8,["rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formDetailSlik.isSecret,"onUpdate:modelValue":e[6]||(e[6]=o=>l.formDetailSlik.isSecret=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formDetailSlik.isApprove,"onUpdate:modelValue":e[7]||(e[7]=o=>l.formDetailSlik.isApprove=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),a(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[a(P,{type:"submit"},{default:t(()=>[p(" Simpan ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[8]||(e[8]=o=>r.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:t(()=>[a(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[9]||(e[9]=o=>l.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:l.isFormResumeSlik,"onUpdate:modelValue":e[17]||(e[17]=o=>l.isFormResumeSlik=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Data Attachment ")]),text:t(()=>[a(M,{onSubmit:N(r.insertSlik,["prevent"])},{default:t(()=>[a(b,null,{default:t(()=>[a(h,{md:"12",cols:"12"},{default:t(()=>[Ge,Ee,a(j,{class:"my-3",modelValue:l.formDetailSlik.name,"onUpdate:modelValue":e[11]||(e[11]=o=>l.formDetailSlik.name=o),autofocus:"",disabled:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[He,Je,a(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[12]||(e[12]=o=>r.handleFileChange(o))},null,8,["rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formDetailSlik.isSecret,"onUpdate:modelValue":e[13]||(e[13]=o=>l.formDetailSlik.isSecret=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formDetailSlik.isApprove,"onUpdate:modelValue":e[14]||(e[14]=o=>l.formDetailSlik.isApprove=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),a(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[a(P,{type:"submit"},{default:t(()=>[p(" Simpan ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[15]||(e[15]=o=>r.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:t(()=>[a(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[16]||(e[16]=o=>l.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:l.isAnalytic,"onUpdate:modelValue":e[23]||(e[23]=o=>l.isAnalytic=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Data Analisis AO ")]),text:t(()=>[a(M,{onSubmit:N(r.insertAnalytic,["prevent"])},{default:t(()=>[a(b,null,{default:t(()=>[a(h,{md:"12",cols:"12"},{default:t(()=>[Ye,We,a(j,{class:"my-3",modelValue:l.formAnalytic.name,"onUpdate:modelValue":e[18]||(e[18]=o=>l.formAnalytic.name=o),autofocus:"",disabled:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[Xe,Qe,a(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[19]||(e[19]=o=>r.handleAnalyticChange(o))},null,8,["rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formAnalytic.isApprove,"onUpdate:modelValue":e[20]||(e[20]=o=>l.formAnalytic.isApprove=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),a(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[a(P,{type:"submit"},{default:t(()=>[p(" Simpan ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[21]||(e[21]=o=>r.closeModal(3))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:t(()=>[a(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[22]||(e[22]=o=>l.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:l.isAppeal,"onUpdate:modelValue":e[29]||(e[29]=o=>l.isAppeal=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Data Banding AO ")]),text:t(()=>[a(M,{onSubmit:N(r.insertAppeal,["prevent"])},{default:t(()=>[a(b,null,{default:t(()=>[a(h,{md:"12",cols:"12"},{default:t(()=>[Ze,$e,a(j,{class:"my-3",modelValue:l.formAppeal.name,"onUpdate:modelValue":e[24]||(e[24]=o=>l.formAppeal.name=o),autofocus:"",disabled:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[et,tt,a(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[25]||(e[25]=o=>r.handleAppealChange(o))},null,8,["rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formAppeal.isApprove,"onUpdate:modelValue":e[26]||(e[26]=o=>l.formAppeal.isApprove=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),a(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[a(P,{type:"submit"},{default:t(()=>[p(" Simpan ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[27]||(e[27]=o=>r.closeModal(4))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:t(()=>[a(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[28]||(e[28]=o=>l.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const lt=J(Pe,[["render",at]]),st={name:"AttachmentCard3",props:{data:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0}},data(){return{uploadProgress:null,rules:{required:s=>!!s||"Required"},isAnalisaKredit:!1,formAnalisaKredit:{id:null,name:"Analisa Kredit",file_id:this.fileId,path:null,isApprove:0,isSecret:0}}},methods:{openModal(s,e=null){s==1&&(this.formAnalisaKredit.id=e.id,this.formAnalisaKredit.name=e.name,this.formAnalisaKredit.isSecret=e.isSecret,this.formAnalisaKredit.isApprove=e.isApprove,this.isAnalisaKredit=!0)},closeModal(s){s==1&&(this.formAnalisaKredit.id=null,this.formAnalisaKredit.isSecret=null,this.formAnalisaKredit.isApprove=null,this.isAnalisaKredit=!1)},handleFileChange(s){const e=s.target.files[0];e&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(e.type)?this.formAnalisaKredit.path=e:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),s.target.value=null)},async insertAnalisa(){try{const s=new FormData;s.append("name",this.formAnalisaKredit.name),s.append("path",this.formAnalisaKredit.path),s.append("isSecret",this.formAnalisaKredit.isSecret),s.append("isApprove",this.formAnalisaKredit.isApprove),s.append("file_id",this.formAnalisaKredit.file_id),s.append("_method","PUT");const e={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(l){console.error("Error calculating progress:",l)}},headers:{"Content-Type":"multipart/form-data"}},i=await w.post(`/user/edit-attach/${this.formAnalisaKredit.id}`,s,e);i.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}}}},it=n("span",null,"Phase 3 (Analisa Kredit) ðŸ“„",-1),ot={class:"operation-wrapper"},nt={class:"d-flex justify-space-between"},rt=["href"],dt=["onClick"],ut=["onClick"],pt=n("span",{style:{color:"red"}},"*",-1),ct=n("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),ht=n("span",{style:{color:"red"}},"*",-1),mt=n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1);function ft(s,e,i,f,l,r){return u(),D(R,null,[a(v,{color:"warning"},{default:t(()=>[a(C,null,{default:t(()=>[a(b,{class:"d-flex justify-space-between"},{default:t(()=>[a(h,{cols:"12",sm:"6",md:"8"},{default:t(()=>[it]),_:1})]),_:1})]),_:1}),(u(!0),D(R,null,H(i.data,(o,k)=>(u(),D("div",{key:k},[a(q,{density:"compact"},{default:t(()=>[a(U,null,{prepend:t(()=>[p(y(o.isApprove?"âœ…":"âŒ")+" ",1),a(g,{icon:"mdi-file"})]),append:t(()=>[n("div",ot,[n("div",nt,[o.path!=="null"?(u(),c(S,{key:0,location:"top",text:"Lihat File"},{activator:t(({props:d})=>[n("a",F(d,{href:`${i.filePath}/${i.fileId}/${o.path}`,target:"_blank",rel:"noopener noreferrer"}),[n("button",null,[a(g,{size:"20",icon:"bx-link-external",color:"blue"})])],16,rt)]),_:2},1024)):m("",!0),o.path==="null"&&i.userAccess&&parseInt(i.userAccess.canInsertData)==1?(u(),c(S,{key:1,location:"top",text:"Upload File"},{activator:t(({props:d})=>[n("button",F(d,{onClick:O=>r.openModal(1,o)}),[a(g,{size:"20",icon:"bx-upload",color:"blue"})],16,dt)]),_:2},1024)):m("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(u(),c(S,{key:2,location:"top",text:"Edit File"},{activator:t(({props:d})=>[n("button",F(d,{onClick:O=>r.openModal(1,o)}),[a(g,{size:"20",icon:"bx-edit",color:"blue"})],16,ut)]),_:2},1024)):m("",!0)])])]),default:t(()=>[a(x,null,{default:t(()=>[p(y(o.name),1)]),_:2},1024),o.note!=null?(u(),c(E,{key:0},{default:t(()=>[p(y(o.note),1)]),_:2},1024)):m("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1}),a(I,{modelValue:l.isAnalisaKredit,"onUpdate:modelValue":e[6]||(e[6]=o=>l.isAnalisaKredit=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Data Attachment ")]),text:t(()=>[a(M,{onSubmit:N(r.insertAnalisa,["prevent"])},{default:t(()=>[a(b,null,{default:t(()=>[a(h,{md:"12",cols:"12"},{default:t(()=>[pt,ct,a(j,{class:"my-3",modelValue:l.formAnalisaKredit.name,"onUpdate:modelValue":e[0]||(e[0]=o=>l.formAnalisaKredit.name=o),autofocus:"",disabled:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[ht,mt,a(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[1]||(e[1]=o=>r.handleFileChange(o))},null,8,["rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formAnalisaKredit.isSecret,"onUpdate:modelValue":e[2]||(e[2]=o=>l.formAnalisaKredit.isSecret=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formAnalisaKredit.isApprove,"onUpdate:modelValue":e[3]||(e[3]=o=>l.formAnalisaKredit.isApprove=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),a(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[a(P,{type:"submit"},{default:t(()=>[p(" Simpan ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[4]||(e[4]=o=>r.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:t(()=>[a(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[5]||(e[5]=o=>l.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const te=J(st,[["render",ft]]),gt={name:"AttachmentOperation",props:{data:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0}},data(){return{uploadProgress:null,rules:{required:s=>!!s||"Required"},isSp3k:!1,formsp3k:{id:null,name:"SP3K",file_id:this.fileId,path:null,isApprove:0,isSecret:0}}},methods:{openModal(s,e=null){s==1&&(this.formsp3k.id=e.id,this.formsp3k.name=e.name,this.formsp3k.isSecret=e.isSecret,this.formsp3k.isApprove=e.isApprove,this.isSp3k=!0)},closeModal(s){s==1&&(this.formsp3k.id=null,this.formsp3k.isSecret=null,this.formsp3k.isApprove=null,this.isSp3k=!1)},handleFileChange(s){const e=s.target.files[0];e&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(e.type)?this.formsp3k.path=e:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),s.target.value=null)},async insertSpk3k(){try{const s=new FormData;s.append("name",this.formsp3k.name),s.append("path",this.formsp3k.path),s.append("isSecret",this.formsp3k.isSecret),s.append("isApprove",this.formsp3k.isApprove),s.append("file_id",this.formsp3k.file_id),s.append("_method","PUT");const e={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(l){console.error("Error calculating progress:",l)}},headers:{"Content-Type":"multipart/form-data"}},i=await w.post(`/user/edit-attach/${this.formsp3k.id}`,s,e);i.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}}}},yt=n("span",null,"Operation ðŸ“„",-1),At={class:"operation-wrapper"},vt={class:"d-flex justify-space-between"},_t=["href"],bt=["onClick"],kt=["onClick"],Ft=n("span",{style:{color:"red"}},"*",-1),St=n("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),Pt=n("span",{style:{color:"red"}},"*",-1),Dt=n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1);function wt(s,e,i,f,l,r){return u(),D(R,null,[a(v,{color:"warning"},{default:t(()=>[a(C,null,{default:t(()=>[a(b,{class:"d-flex justify-space-between"},{default:t(()=>[a(h,{cols:"12",sm:"6",md:"8"},{default:t(()=>[yt]),_:1})]),_:1})]),_:1}),(u(!0),D(R,null,H(i.data,(o,k)=>(u(),D("div",{key:k},[a(q,{density:"compact"},{default:t(()=>[a(U,null,{prepend:t(()=>[p(y(o.isApprove?"âœ…":"âŒ")+" ",1),a(g,{icon:"mdi-file"})]),append:t(()=>[n("div",At,[n("div",vt,[o.path!=="null"?(u(),c(S,{key:0,location:"top",text:"Lihat File"},{activator:t(({props:d})=>[n("a",F(d,{href:`${i.filePath}/${i.fileId}/${o.path}`,target:"_blank",rel:"noopener noreferrer"}),[n("button",null,[a(g,{size:"20",icon:"bx-link-external",color:"blue"})])],16,_t)]),_:2},1024)):m("",!0),o.path==="null"&&i.userAccess&&parseInt(i.userAccess.canInsertData)==1?(u(),c(S,{key:1,location:"top",text:"Upload File"},{activator:t(({props:d})=>[n("button",F(d,{onClick:O=>r.openModal(1,o)}),[a(g,{size:"20",icon:"bx-upload",color:"blue"})],16,bt)]),_:2},1024)):m("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(u(),c(S,{key:2,location:"top",text:"Edit File"},{activator:t(({props:d})=>[n("button",F(d,{onClick:O=>r.openModal(1,o)}),[a(g,{size:"20",icon:"bx-edit",color:"blue"})],16,kt)]),_:2},1024)):m("",!0)])])]),default:t(()=>[a(x,null,{default:t(()=>[p(y(o.name),1)]),_:2},1024),o.note!=null?(u(),c(E,{key:0},{default:t(()=>[p(y(o.note),1)]),_:2},1024)):m("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1}),a(I,{modelValue:l.isSp3k,"onUpdate:modelValue":e[6]||(e[6]=o=>l.isSp3k=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Data Attachment ")]),text:t(()=>[a(M,{onSubmit:N(r.insertSpk3k,["prevent"])},{default:t(()=>[a(b,null,{default:t(()=>[a(h,{md:"12",cols:"12"},{default:t(()=>[Ft,St,a(j,{class:"my-3",modelValue:l.formsp3k.name,"onUpdate:modelValue":e[0]||(e[0]=o=>l.formsp3k.name=o),autofocus:"",disabled:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[Pt,Dt,a(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[1]||(e[1]=o=>r.handleFileChange(o))},null,8,["rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formsp3k.isSecret,"onUpdate:modelValue":e[2]||(e[2]=o=>l.formsp3k.isSecret=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formsp3k.isApprove,"onUpdate:modelValue":e[3]||(e[3]=o=>l.formsp3k.isApprove=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),a(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[a(P,{type:"submit"},{default:t(()=>[p(" Simpan ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[4]||(e[4]=o=>r.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:t(()=>[a(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[5]||(e[5]=o=>l.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const xt=J(gt,[["render",wt]]);const It={components:{AttachmentCard1:Se,AttachmentCard2:lt,AttachmentCard3:te,attachmentCard3:te,attachmentOperation:xt},name:"Phase",props:{phase1Attachments:{type:Object,required:!0},phase2Attachments:{type:Object,required:!0},phase3Attachments:{type:Object,required:!0},phase5Attachments:{type:Object,required:!0},userAccess:{type:Object,required:!0},dataFile:{type:Object,required:!0},userData:{type:Object,required:!0},dataNote:{type:Object,required:!0},updateDataNote:{type:Object,required:!0},insertNote:{type:Function,required:!0},changeApproval:{type:Function,required:!0},formatDate:{type:Function,required:!0},openModal:{type:Function,required:!0},deleteAttachment:{type:Function,required:!0},deleteNote:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},step:{type:Function,required:!0},fileId:{type:String,required:!0},resetNote:{type:Function,required:!0},notePhase1:{type:Object,required:!0},notePhase2:{type:Object,required:!0},notePhase3:{type:Object,required:!0},notePhase4:{type:Object,required:!0},modalNote:{type:Function,required:!0}},data(){return{filePath:this.$filePath,isUpdateNote:!1,currentPage:1,itemsPerPage:10}},computed:{paginatedNotes(){const s=(this.currentPage-1)*this.itemsPerPage,e=s+this.itemsPerPage;return this.dataFile.notes.slice(s,e)}},methods:{onPageChange(s){this.currentPage=s},formatInput(s){return s=s.replace(/\D/g,""),s=s.replace(/\B(?=(\d{3})+(?!\d))/g,","),s}}},$=s=>(ae("data-v-293088e4"),s=s(),le(),s),Vt=$(()=>n("span",null,"Informasi Umum â„¹ï¸",-1)),Tt=$(()=>n("span",null,"Dokumen Pendukung ðŸ“„",-1)),Ct={class:"mb-5"},Ut={class:"mb-5"},Nt={class:"mb-5"},Mt={class:"mb-5"},Kt={key:0},jt=$(()=>n("span",null,"Catatan ðŸ“ƒ",-1)),qt={class:"comment-content"};function Rt(s,e,i,f,l,r){const o=G("AttachmentCard1"),k=G("AttachmentCard2"),d=G("attachmentCard3"),O=G("attachmentOperation");return u(),c(v,{color:"backgroundCard"},{default:t(()=>[["Account Officer","AO","ao","account officer","Account Officer Exceutive"].includes(i.userData.position.name)?(u(),c(C,{key:1,class:"text-2xl font-weight-bold d-flex justify-center"},{default:t(()=>[p(" Detail "),parseInt(i.dataFile.isApproved)==1?(u(),c(T,{key:0,color:"success"},{default:t(()=>[p("Approved")]),_:1})):m("",!0),parseInt(i.dataFile.isApproved)==2?(u(),c(T,{key:1,color:"warning"},{default:t(()=>[p("Pending")]),_:1})):m("",!0),parseInt(i.dataFile.isApproved)==3?(u(),c(T,{key:2,color:"error"},{default:t(()=>[p("Rejected")]),_:1})):m("",!0)]),_:1})):(u(),c(C,{key:0,class:"text-2xl font-weight-bold d-flex justify-center"},{default:t(()=>[p(" Detail "),parseInt(i.dataFile.isApproved)==1?(u(),c(T,{key:0,color:"success",onClick:e[0]||(e[0]=A=>i.openModal(9))},{default:t(()=>[p("Approved")]),_:1})):m("",!0),parseInt(i.dataFile.isApproved)==2?(u(),c(T,{key:1,color:"warning",onClick:e[1]||(e[1]=A=>i.openModal(9))},{default:t(()=>[p("Pending")]),_:1})):m("",!0),parseInt(i.dataFile.isApproved)==3?(u(),c(T,{key:2,color:"error",onClick:e[2]||(e[2]=A=>i.openModal(9))},{default:t(()=>[p("Rejected")]),_:1})):m("",!0)]),_:1})),i.dataFile.reasonRejected!=null?(u(),c(K,{key:2},{default:t(()=>[a(v,null,{default:t(()=>[a(C,null,{default:t(()=>[p(" Alasan Ditolak ðŸ”¹ ")]),_:1}),a(K,null,{default:t(()=>[n("div",null,[n("span",null,y(i.dataFile&&i.dataFile.reasonRejected),1)])]),_:1})]),_:1})]),_:1})):m("",!0),a(K,null,{default:t(()=>[a(v,{class:"mb-5"},{default:t(()=>[a(C,null,{default:t(()=>[a(b,{class:"d-flex justify-space-between"},{default:t(()=>[a(h,{cols:"12",sm:"6",md:"8"},{default:t(()=>[Vt]),_:1}),i.userAccess&&i.userAccess.canInsertData?(u(),c(h,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:t(()=>[n("span",null,[a(P,{color:"primary",size:"small",class:"my-3 mx-3",onClick:e[3]||(e[3]=A=>i.openModal(4))},{default:t(()=>[p(" Edit Data ")]),_:1})])]),_:1})):m("",!0)]),_:1})]),_:1}),a(K,null,{default:t(()=>[a(q,{density:"compact"},{default:t(()=>[a(U,null,{prepend:t(()=>[a(g,{icon:"mdi-person"})]),default:t(()=>[a(x,null,{default:t(()=>[p(" Nama Pemohon")]),_:1}),a(x,null,{default:t(()=>[n("strong",null,y(i.dataFile.name),1)]),_:1})]),_:1}),a(q,{density:"compact"},{default:t(()=>[a(U,null,{prepend:t(()=>[a(g,{icon:"mdi-cash"})]),default:t(()=>[a(x,null,{default:t(()=>[p(" Jumlah Plafon")]),_:1}),a(x,null,{default:t(()=>[n("strong",null," Rp "+y(r.formatInput(i.dataFile.plafon)),1)]),_:1})]),_:1})]),_:1}),a(q,{density:"compact"},{default:t(()=>[a(U,null,{prepend:t(()=>[a(g,{icon:"mdi-office-building"})]),default:t(()=>[a(x,null,{default:t(()=>[p(" Jenis Usaha")]),_:1}),a(x,null,{default:t(()=>[n("strong",null,y(i.dataFile.type_bussiness),1)]),_:1})]),_:1})]),_:1}),a(q,{density:"compact"},{default:t(()=>[a(U,null,{prepend:t(()=>[a(g,{icon:"mdi-office-building"})]),default:t(()=>[a(x,null,{default:t(()=>[p(" Deskripsi Usaha")]),_:1}),a(x,null,{default:t(()=>[n("strong",null,y(i.dataFile.desc_bussiness),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(v,null,{default:t(()=>[a(C,null,{default:t(()=>[a(b,{class:"d-flex justify-space-between"},{default:t(()=>[a(h,{cols:"12",sm:"6",md:"8"},{default:t(()=>[Tt]),_:1}),i.userAccess&&i.userAccess.canInsertData?(u(),c(h,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:t(()=>[n("span",null,[a(P,{color:"primary",size:"small",class:"my-3 mx-3",onClick:e[4]||(e[4]=A=>i.openModal(1))},{default:t(()=>[p(" Tambah Data Lain ")]),_:1})])]),_:1})):m("",!0)]),_:1})]),_:1}),a(K,null,{default:t(()=>[n("div",Ct,[a(o,{data:i.phase1Attachments,fileId:parseInt(i.dataFile.id),filePath:l.filePath,userAccess:i.userAccess,deleteAttachment:i.deleteAttachment,openModal:i.openModal},null,8,["data","fileId","filePath","userAccess","deleteAttachment","openModal"])]),n("div",Ut,[parseInt(i.dataFile.phase)>1?(u(),c(k,{key:0,data:i.phase2Attachments,fileId:parseInt(i.dataFile.id),filePath:l.filePath,userAccess:i.userAccess,deleteAttachment:i.deleteAttachment,getDetailFile:i.getDetailFile},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile"])):m("",!0)]),n("div",Nt,[parseInt(i.dataFile.phase)>2?(u(),c(d,{key:0,data:i.phase3Attachments,fileId:parseInt(i.dataFile.id),filePath:l.filePath,userAccess:i.userAccess,deleteAttachment:i.deleteAttachment,getDetailFile:i.getDetailFile},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile"])):m("",!0)]),n("div",Mt,[parseInt(i.dataFile.phase)>4?(u(),c(O,{key:0,data:i.phase5Attachments,fileId:parseInt(i.dataFile.id),filePath:l.filePath,userAccess:i.userAccess,deleteAttachment:i.deleteAttachment,getDetailFile:i.getDetailFile},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile"])):m("",!0)])]),_:1})]),_:1})]),_:1}),i.dataFile&&parseInt(i.dataFile.phase)<6?(u(),c(K,{key:3},{default:t(()=>[a(v,null,{default:t(()=>[a(C,null,{default:t(()=>[p(" Status Approval Phase âœ… ")]),_:1}),a(K,null,{default:t(()=>[i.dataFile&&i.dataFile.approvals&&i.dataFile.approvals.length?(u(),D("div",Kt,[(u(!0),D(R,null,H(i.dataFile.approvals,(A,Z)=>(u(),D(R,{key:Z},[i.dataFile.phase==A.phase?(u(),c(T,{key:0,color:A.approved==1?"success":"error",class:"mr-2",onClick:X=>i.changeApproval(A.id)},{default:t(()=>[p(y(A.user.name)+" - "+y(A.user.position.name),1)]),_:2},1032,["color","onClick"])):m("",!0)],64))),128))])):m("",!0)]),_:1})]),_:1})]),_:1})):m("",!0),a(K,null,{default:t(()=>[a(v,null,{default:t(()=>[a(C,null,{default:t(()=>[p(" Lain - lain ðŸ”¹ ")]),_:1}),a(K,null,{default:t(()=>[n("div",null,[a(ne,null,{default:t(()=>[a(T,{color:"success",onClick:e[5]||(e[5]=A=>i.openModal(6))},{default:t(()=>[p(" Data Durasi Waktu ")]),_:1}),a(T,{color:"success",onClick:e[6]||(e[6]=A=>i.openModal(7))},{default:t(()=>[p(" Data Riwayat File")]),_:1}),a(T,{color:"success",onClick:e[7]||(e[7]=A=>i.openModal(8))},{default:t(()=>[p(" Data Riwayat Persetujuan")]),_:1}),a(T,{color:"success",onClick:e[8]||(e[8]=A=>i.openModal(10))},{default:t(()=>[p(" Data Riwayat Dokumen Pendukung")]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),a(W),a(K,null,{default:t(()=>[a(v,null,{default:t(()=>[a(C,null,{default:t(()=>[a(b,{class:"d-flex justify-space-between"},{default:t(()=>[a(h,{cols:"12",sm:"6",md:"8"},{default:t(()=>[jt]),_:1}),a(h,{cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"})]),_:1}),a(M,{onSubmit:N(i.insertNote,["prevent"])},{default:t(()=>[a(b,{align:"center",justify:"center"},{default:t(()=>[a(h,{cols:"12",sm:"8",md:"10"},{default:t(()=>[a(Q,{outlined:"",rows:"2",placeholder:"Tambahkan catatan disini",modelValue:i.dataNote.note,"onUpdate:modelValue":e[9]||(e[9]=A=>i.dataNote.note=A)},null,8,["modelValue"])]),_:1}),a(h,{cols:"12",sm:"4",md:"2"},{default:t(()=>[a(P,{color:"primary",icon:"",type:"submit"},{default:t(()=>[a(g,null,{default:t(()=>[p("mdi-note-plus")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),a(K,null,{default:t(()=>[n("div",null,[(u(!0),D(R,null,H(r.paginatedNotes,(A,Z)=>(u(),D("div",{key:Z,class:"user-comment"},[n("div",qt,[n("p",null,y(A.note),1),a(b,{class:"justify-space-between mx-2 mb-2"},{default:t(()=>[n("small",null,[n("strong",null,y(A.user.name)+" - "+y(A.user.position.name),1)]),n("small",null,y(i.formatDate(A.created_at)),1)]),_:2},1024)]),i.userData.id==A.user_id?(u(),c(ie,{key:0,transition:"scale-transition"},{activator:t(({props:X})=>[a(g,F(X,{class:"ellipsis-icon"}),{default:t(()=>[p("mdi-dots-vertical")]),_:2},1040)]),default:t(()=>[a(q,null,{default:t(()=>[a(U,{color:"primary",onClick:X=>i.openModal(3,A)},{prepend:t(()=>[a(g,{icon:"mdi-edit"})]),default:t(()=>[a(x,null,{default:t(()=>[p(" edit")]),_:1})]),_:2},1032,["onClick"]),a(U,{color:"primary",onClick:X=>i.deleteNote(A.id)},{prepend:t(()=>[a(g,{icon:"mdi-trash"})]),default:t(()=>[a(x,null,{default:t(()=>[p(" hapus")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):m("",!0)]))),128)),a(re,{modelValue:l.currentPage,"onUpdate:modelValue":e[10]||(e[10]=A=>l.currentPage=A),length:Math.ceil(i.dataFile.notes.length/l.itemsPerPage),onInput:r.onPageChange},null,8,["modelValue","length","onInput"])])]),_:1})]),_:1})]),_:1}),i.userAccess&&parseInt(i.userAccess.canApprove)?(u(),c(se,{key:4},{default:t(()=>[i.dataFile&&parseInt(i.dataFile.plafon)>=25e6?(u(),c(h,{key:0,class:"d-flex justify-space-beetwen"},{default:t(()=>[i.dataFile&&parseInt(i.dataFile.phase)>1?(u(),c(P,{key:0,color:"info",text:"Prev Phase",variant:"tonal",onClick:e[11]||(e[11]=A=>i.step(i.fileId,"-"))})):m("",!0),a(ee),i.dataFile&&parseInt(i.dataFile.phase)<5?(u(),c(P,{key:1,color:"info",text:"Next Phase",variant:"tonal",onClick:e[12]||(e[12]=A=>i.step(i.fileId,"next"))})):m("",!0)]),_:1})):(u(),c(h,{key:1,class:"d-flex justify-space-beetwen"},{default:t(()=>[i.dataFile&&parseInt(i.dataFile.phase)>1?(u(),c(P,{key:0,color:"info",text:"Prev Phase",variant:"tonal",onClick:e[13]||(e[13]=A=>i.step(i.fileId,"-"))})):m("",!0),a(ee),i.dataFile&&parseInt(i.dataFile.phase)<4?(u(),c(P,{key:1,color:"info",text:"Next Phase",variant:"tonal",onClick:e[14]||(e[14]=A=>i.step(i.fileId,"next"))})):m("",!0)]),_:1}))]),_:1})):m("",!0)]),_:1})}const Ot=J(It,[["render",Rt],["__scopeId","data-v-293088e4"]]),Lt={components:{phase:Ot},data(){return{overlay:!1,isMobile:!1,userData:null,userAccess:{},fileId:this.$route.params.fileId,isShowPhase4:!1,isShowPhase5:!1,isShowTimers:!1,isShowHistory:!1,isShowApprovals:!1,isChangeStatusCredit:!1,isShowAttachment:!1,nameFileList:[{value:"KTP Pemohon",title:"KTP Pemohon"},{value:"Kartu Keluarga",title:"Kartu Keluarga"},{value:"Jaminan SHM",title:"Jaminan SHM"},{value:"Foto Kunjungan",title:"Foto Kunjungan"},{value:"Buku Nikah",title:"Buku Nikah"},{value:"SHM",title:"Jaminan SHM"},{value:"BPKB",title:"Jaminan BPKB"},{value:"KTP Pasangan",title:"KTP Pasangan"},{value:"KTP Atas Nama Jaminan",title:"KTP Atas Nama Jaminan"},{value:"KTP Atas Nama Jaminan",title:"KTP Atas Nama Jaminan"},{value:"Resume SLIK",title:"Resume SLIK"},{value:"Detail SLIK",title:"Detail SLIK"},{value:"File Banding",title:"File Banding"},{value:"Analisa Awal Kredit AO",title:"Analisa Awal Kredit AO"},{value:"Analisa Kredit",title:"Analisa Kredit"},{value:"SP3K",title:"SP3K"},{value:"Notaris",title:"Notaris"},{value:"Lain-lain",title:"Lain-lain"}],changeStatus:{id:null,status:null,reasonRejected:null},stepperModel:0,isUpdateGeneralInfo:!1,generalInfo:{id:null,name:"",type_bussiness:"",desc_bussiness:"",plafon:"0"},dataFile:{id:this.$route.params.fileId,user_id:null,phase:1,name:"",type_bussiness:"",desc_bussiness:"",plafon:"0",surveyResult:"-",otsResult:"-",cekLingResult:"-",verTelResult:"-",creditScoring:"-",attachments:[],notes:[],approvals:[],phase_times:[],file_activities:[],reasonRejected:""},filePath:this.$filePath,timerHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Waktu Mulai",value:"startTime",sortable:!0},{text:"Waktu Selesai",value:"endTime",sortable:!0},{text:"Rentang Waktu",value:"timeDiff",sortable:!0}],attachmentHeaders:[{text:"Nama",value:"name",sortable:!0},{text:"Phase",value:"phase",sortable:!0},{text:"Waktu",value:"startTime",sortable:!0}],historyHeaders:[{text:"User",value:"user.name",sortable:!0},{text:"Aktivitas",value:"activity",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],approvalHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Nama",value:"user.name",sortable:!0},{text:"Status",value:"approved",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],isUpdateNote:!1,dataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},updateDataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},phaseNote:[],notesByPhase:{},isModalPhase:!1,insertAttch:!1,updateAttch:!1,rules:{required:s=>!!s||"Required"},uploadProgress:null,attachFile:{id:null,file_id:this.$route.params.fileId,phase:null,name:null,path:null,note:null,isSecret:0,isApprove:1},notePhase1:[],notePhase2:[],notePhase3:[],notePhase4:[],currentPage:1,itemsPerPage:10,isDataPhase3:!1,dataPhase3:{surveyResult:""},dataAttachPhase1:[],dataAttachPhase2:[],dataAttachPhase3:[],dataAttachPhase4:[],dataAttachPhase5:[]}},computed:{paginatedNotes(){const s=(this.currentPage-1)*this.itemsPerPage,e=s+this.itemsPerPage;return this.dataFile.notes.slice(s,e)}},methods:{async updateStatusCredit(){try{this.overlay=!0;const s=new FormData;if(s.append("id",this.fileId),s.append("status",this.changeStatus.status),this.changeStatus.status=="3"){if(this.changeStatus.reasonRejected==null){this.overlay=!1,this.closeModal(9),this.$showToast("error","Sorry","Alasan Penolakan wajib diisi");return}s.append("reasonRejected",this.changeStatus.reasonRejected)}const e=await w.post("/user/change-status",s);e.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.closeModal(9),this.$showToast("success","Success",e.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.closeModal(9),this.$showToast("error","Sorry",e.data.message))}catch(s){this.closeModal(9),this.$showToast("error","Sorry",s.response.data.message)}},calculateTimeDiff(s,e){let i=new Date(s),l=(e?new Date(e):new Date).valueOf()-i.valueOf(),r=Math.floor(l/1e3/60),o=Math.floor(r/60),k=r%60;return`${o} jam ${k} menit`},formatFileId(s){return Array.isArray(s)?s.join(", "):s},async updatePhase3(){try{this.overlay=!0;const s=new FormData;s.append("surveyResult",this.dataPhase3.surveyResult),s.append("_method","PUT");const e=await w.post(`/user/survey-credit/${this.fileId}`,s);e.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("success","Success",e.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("error","Sorry",e.data.message))}catch(s){this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},onPageChange(s){this.currentPage=s},formatInputPlafon(s){let e=s.target.value;e=e.replace(/\D/g,""),e=e.replace(/\B(?=(\d{3})+(?!\d))/g,","),s.target.value=e},formatDate(s){return new Date(s).toLocaleString("id-ID")},resetNote(){this.dataNote={file_id:this.$route.params.fileId,user_id:null,phase:null,note:null,isRead:null}},checkMobile(){this.isMobile=window.innerWidth<728},formatInput(s){return s=s.replace(/\D/g,""),s=s.replace(/\B(?=(\d{3})+(?!\d))/g,","),s},async step(s,e){try{if(e=="next"){if(!window.confirm("Apakah Anda yakin melanjutkan ke tahap selanjutnya"))return;this.overlay=!0;const f=new FormData;f.append("id",s),f.append("type",e),f.append("_method","POST");const l=await w.post("/user/change-phase-approve",f);l.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",l.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.data.data.message))}else{if(!window.confirm("Apakah Anda yakin Kembali ke phase sebelumnya"))return;this.overlay=!0;const f=new FormData;f.append("id",s),f.append("type",e),f.append("_method","POST");const l=await w.post("/user/change-phase-approve",f);l.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",l.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.data.message))}}catch(i){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.response.data.message)}},async getDetailFile(s){try{this.overlay=!0;const e=await w.get(`/user/credit/${s}`);if(e.status===200){this.dataFile=e.data.data.file,this.userAccess=e.data.data.userAccess,this.dataAttachPhase1=e.data.data.file.attachments.filter(i=>i.phase==1),this.dataAttachPhase2=e.data.data.file.attachments.filter(i=>i.phase==2),this.dataAttachPhase3=e.data.data.file.attachments.filter(i=>i.phase==3),this.dataAttachPhase5=e.data.data.file.attachments.filter(i=>i.phase==5),this.dataFile.phase=parseInt(this.dataFile.phase),this.isShowPhase4=!(parseInt(this.dataFile.plafon)<25e6),this.dataFile.phase==5&&(this.isShowPhase5=!0),parseInt(this.dataFile.plafon)>=25e6?parseInt(this.dataFile.phase)==5?this.stepperModel=parseInt(this.dataFile.phase)-1:this.stepperModel=parseInt(this.dataFile.phase)-1:parseInt(this.dataFile.phase)==5?this.stepperModel=parseInt(this.dataFile.phase)-2:this.stepperModel=parseInt(this.dataFile.phase)-1,this.generalInfo.id=this.dataFile.id,this.generalInfo.name=this.dataFile.name,this.generalInfo.type_bussiness=this.dataFile.type_bussiness,this.generalInfo.desc_bussiness=this.dataFile.desc_bussiness,this.generalInfo.plafon=this.dataFile.plafon;for(let i=0;i<5;i++)this.separateNotesByPhase(this.dataFile,i);this.overlay=!1}else this.$showToast("error","Sorry",e.data.data.message),this.overlay=!1}catch(e){this.$showToast("error","Sorry",e.response.data.message),this.overlay=!1}},getUserData(){const s=localStorage.getItem("userData");s&&(this.userData=JSON.parse(s))},openModal(s,e=null){s==1?this.insertAttch=!0:s==2?(this.attachFile.id=e.id,this.attachFile.file_id=e.file_id,this.attachFile.name=e.name,this.attachFile.isSecret=e.isSecret,this.attachFile.isApprove=e.isApprove,this.updateAttch=!0):s==3?(this.updateDataNote.id=e.id,this.updateDataNote.file_id=e.file_id,this.updateDataNote.note=e.note,this.isUpdateNote=!0):s==4?this.isUpdateGeneralInfo=!0:s==5?(this.dataPhase3.surveyResult=this.dataFile.surveyResult,this.isDataPhase3=!0):s==6?this.isShowTimers=!0:s==7?this.isShowHistory=!0:s==8?this.isShowApprovals=!0:s==9?this.isChangeStatusCredit=!0:s==10&&(this.isShowAttachment=!0)},closeModal(s){s===1?(this.resetAttch(),this.insertAttch=!1):s===2?this.updateAttch=!1:s===3?(this.resetNote(),this.updateNote=!1):s==4?this.isUpdateGeneralInfo=!1:s==5?(this.dataPhase3.surveyResult="",this.isDataPhase3=!1):s==9&&(this.isChangeStatusCredit=!1,this.changeStatus.id=null,this.changeStatus.status=null,this.changeStatus.reasonRejected=null)},async updateGeneralInfo(){try{this.overlay=!0;const s=new FormData;s.append("name",this.generalInfo.name),s.append("plafon",this.generalInfo.plafon.replace(/\D/g,"")),s.append("type_bussiness",this.generalInfo.type_bussiness),s.append("desc_bussiness",this.generalInfo.desc_bussiness),s.append("_method","PUT");const e=await w.post(`/user/edit-general-info/${this.generalInfo.id}`,s);e.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("success","Success",e.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("error","Sorry",e.data.message))}catch(s){this.isUpdateGeneralInfo=!1,this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},async insertNote(){try{if(this.overlay=!0,this.dataNote.note==null){this.$showToast("error","Sorry","Note cannot be empty"),this.overlay=!1;return}const s=new FormData;s.append("file_id",this.dataNote.file_id),s.append("note",this.dataNote.note),s.append("_method","POST");const e=await w.post("/user/note",s);e.status===200?(this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",e.data.message)):(this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",e.data.message))}catch(s){this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},async updateNote(){try{this.overlay=!0;const s=new FormData;s.append("file_id",this.updateDataNote.file_id),s.append("note",this.updateDataNote.note),s.append("_method","PUT");const e=await w.post(`/user/note/${this.updateDataNote.id}`,s);e.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("success","Success",e.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("error","Sorry",e.data.message))}catch(s){this.isUpdateNote=!1,this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},async deleteNote(s){try{if(this.overlay=!0,!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;const i=await w.delete(`/user/note/${s}`);i.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",i.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(e){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",e.response.data.message)}},separateNotesByPhase(s,e){s.notes.forEach(i=>{if(i.phase==e)switch(e){case 1:this.notePhase1.push(i);break;case 2:this.notePhase2.push(i);break;case 3:this.notePhase3.push(i);break;case 4:this.notePhase4.push(i);break;default:console.log("Invalid phase")}})},modalNote(){this.isModalPhase=!this.isModalPhase,console.log(this.isModalPhase)},async changeApproval(s){try{this.overlay=!0;const e=await w.get(`/user/change-phase-approve/${s}`);e.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",e.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",e.data.message))}catch(e){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",e.response.data.message)}},handleFileChange(s){const e=s.target.files[0];e&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(e.type)?this.attachFile.path=e:(this.closeModal(1),this.closeModal(2),this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, DOCX, XLS, dan XLSX yang diizinkan."),s.target.value=null)},resetAttch(){this.attachFile={id:null,file_id:this.$route.params.fileId,name:null,path:null,note:null,isSecret:!1}},async insertAttachment(){try{this.overlay=!0;const s=new FormData;s.append("file_id",this.attachFile.file_id),s.append("phase",this.dataFile.phase),s.append("name",this.attachFile.name),s.append("path",this.attachFile.path),s.append("note",this.attachFile.note),s.append("isApprove",this.attachFile.isApprove),this.dataFile.phase>=2&&s.append("isSecret",this.attachFile.isSecret),s.append("_method","POST");const e={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(l){console.error("Error calculating progress:",l)}},headers:{"Content-Type":"multipart/form-data"}},i=await w.post("/user/add-attach",s,e);i.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},async editAttachment(){try{this.overlay=!0;const s=new FormData;s.append("file_id",this.attachFile.file_id),s.append("name",this.attachFile.name),s.append("path",this.attachFile.path),s.append("phase",this.dataFile.phase),s.append("isApprove",this.attachFile.isApprove),this.attachFile.path!=null&&s.append("path",this.attachFile.path),s.append("isSecret",this.attachFile.isSecret),s.append("_method","PUT");const e={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(l){console.error("Error calculating progress:",l)}},headers:{"Content-Type":"multipart/form-data"}},i=await w.post(`/user/edit-attach/${this.attachFile.id}`,s,e);i.status===200?(this.overlay=!1,this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},async deleteAttachment(s){try{if(this.overlay=!0,!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;(await w.delete(`/user/delete-attach/${s}`)).status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill","Terjadi Kesalahan Silahkan Coba Lagi"),window.location.reload()):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry","Terjadi Kesalahan Silahkan Coba Lagi"),window.location.reload())}catch{this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry","Terjadi Kesalahan Silahkan Coba Lagi"),window.location.reload()}}},mounted(){this.checkMobile(),this.getUserData(),this.getDetailFile(this.fileId)}};const _=s=>(ae("data-v-bfba4eb7"),s=s(),le(),s),Bt=_(()=>n("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),zt=_(()=>n("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Gt=_(()=>n("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Et=_(()=>n("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Ht=_(()=>n("span",{style:{color:"red"}},"*",-1)),Jt=_(()=>n("span",{class:"subtitle-1 text-center"},"Note: ",-1)),Yt=_(()=>n("span",{style:{color:"red"}},"*",-1)),Wt=_(()=>n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),Xt=_(()=>n("span",{style:{color:"red"}},"*",-1)),Qt=_(()=>n("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),Zt=_(()=>n("span",{style:{color:"red"}},"*",-1)),$t=_(()=>n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),ea=_(()=>n("span",{style:{color:"red"}},"*",-1)),ta=_(()=>n("span",{class:"subtitle-1 text-center"},"Nama Pemohon: ",-1)),aa=_(()=>n("span",{style:{color:"red"}},"*",-1)),la=_(()=>n("span",{class:"subtitle-1 text-center"},"Jumlah Plafon: ",-1)),sa=_(()=>n("span",{style:{color:"red"}},"*",-1)),ia=_(()=>n("span",{class:"subtitle-1 text-center"},"Jenis Usaha: ",-1)),oa=_(()=>n("span",{style:{color:"red"}},"*",-1)),na=_(()=>n("span",{class:"subtitle-1 text-center"},"Deskripsi Usaha: ",-1)),ra=_(()=>n("span",{style:{color:"red"}},"*",-1)),da=_(()=>n("span",{class:"subtitle-1 text-center"},"Hasil Survei: ",-1)),ua=_(()=>n("span",{style:{color:"red"}},"*",-1)),pa=_(()=>n("span",{class:"subtitle-1 text-center"},"Alasan: ",-1));function ca(s,e,i,f,l,r){const o=G("phase"),k=G("EasyDataTable");return u(),D("div",null,[a(ce,{"model-value":l.overlay,class:"align-center justify-center"},{default:t(()=>[a(oe,{color:"blue-lighten-3",indeterminate:"",size:41,width:5}),p(" Loading... ")]),_:1},8,["model-value"]),a(v,null,{default:t(()=>[a(C,{class:"text-2xl font-weight-bold d-flex justify-left"},{default:t(()=>[p(" Credit ")]),_:1}),a(K,null,{default:t(()=>[a(de,{"model-value":l.stepperModel,mobile:l.isMobile},{default:t(()=>[a(ue,null,{default:t(()=>[a(Y,{title:"Phase 1 (Pooling)",value:"1",complete:l.stepperModel>1},null,8,["complete"]),a(W),a(Y,{title:"Phase 2 (SLIK)",value:"2",complete:l.stepperModel>2},null,8,["complete"]),a(W),a(Y,{title:"Phase 3 (Keputusan)",value:"3",complete:l.stepperModel>3},null,8,["complete"]),l.isShowPhase4?(u(),c(W,{key:0})):m("",!0),l.isShowPhase4?(u(),c(Y,{key:1,title:"Phase 4 (Komite)",value:"4",complete:l.stepperModel>4},null,8,["complete"])):m("",!0),l.isShowPhase5?(u(),c(W,{key:2})):m("",!0),l.isShowPhase5?(u(),c(Y,{key:3,title:"Operation",value:"5"})):m("",!0)]),_:1}),a(pe,null,{default:t(()=>[l.userData&&l.userData.position.role.isPhase1Access==1?(u(),c(L,{key:0,value:"1"},{default:t(()=>[a(o,{dataFile:l.dataFile,userData:l.userData,"insert-note":r.insertNote,"change-approval":r.changeApproval,"format-date":r.formatDate,"open-modal":r.openModal,"delete-attachment":r.deleteAttachment,"delete-note":r.deleteNote,"get-detail-file":r.getDetailFile,step:r.step,"file-id":r.formatFileId(l.fileId),"user-access":l.userAccess,"reset-note":r.resetNote,"data-note":l.dataNote,"update-data-note":l.updateDataNote,"note-phase1":l.notePhase1,"note-phase2":l.notePhase2,"note-phase3":l.notePhase3,"note-phase4":l.notePhase4,"modal-note":r.modalNote,phase1Attachments:l.dataAttachPhase1,phase2Attachments:l.dataAttachPhase2,phase3Attachments:l.dataAttachPhase3,phase5Attachments:l.dataAttachPhase5},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase5Attachments"])]),_:1})):(u(),c(L,{key:1,value:"1"},{default:t(()=>[Bt]),_:1})),l.userData&&l.userData.position.role.isPhase2Access==1?(u(),c(L,{key:2,value:"2"},{default:t(()=>[a(o,{dataFile:l.dataFile,userData:l.userData,"insert-note":r.insertNote,"change-approval":r.changeApproval,"format-date":r.formatDate,"open-modal":r.openModal,"delete-attachment":r.deleteAttachment,"delete-note":r.deleteNote,"get-detail-file":r.getDetailFile,step:r.step,"file-id":r.formatFileId(l.fileId),"user-access":l.userAccess,"reset-note":r.resetNote,"data-note":l.dataNote,"update-data-note":l.updateDataNote,"note-phase1":l.notePhase1,"note-phase2":l.notePhase2,"note-phase3":l.notePhase3,"note-phase4":l.notePhase4,"modal-note":r.modalNote,phase1Attachments:l.dataAttachPhase1,phase2Attachments:l.dataAttachPhase2,phase3Attachments:l.dataAttachPhase3,phase5Attachments:l.dataAttachPhase5},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase5Attachments"])]),_:1})):(u(),c(L,{key:3,value:"2"},{default:t(()=>[zt]),_:1})),l.userData&&l.userData.position.role.isPhase3Access==1?(u(),c(L,{key:4,value:"3"},{default:t(()=>[a(o,{dataFile:l.dataFile,userData:l.userData,"insert-note":r.insertNote,"change-approval":r.changeApproval,"format-date":r.formatDate,"open-modal":r.openModal,"delete-attachment":r.deleteAttachment,"delete-note":r.deleteNote,"get-detail-file":r.getDetailFile,step:r.step,"file-id":r.formatFileId(l.fileId),"user-access":l.userAccess,"reset-note":r.resetNote,"data-note":l.dataNote,"update-data-note":l.updateDataNote,"note-phase1":l.notePhase1,"note-phase2":l.notePhase2,"note-phase3":l.notePhase3,"note-phase4":l.notePhase4,"modal-note":r.modalNote,phase1Attachments:l.dataAttachPhase1,phase2Attachments:l.dataAttachPhase2,phase3Attachments:l.dataAttachPhase3,phase5Attachments:l.dataAttachPhase5},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase5Attachments"])]),_:1})):(u(),c(L,{key:5,value:"3"},{default:t(()=>[Gt]),_:1})),l.userData&&l.userData.position.role.isPhase4Access==1?(u(),c(L,{key:6,value:"4"},{default:t(()=>[a(o,{dataFile:l.dataFile,userData:l.userData,"insert-note":r.insertNote,"change-approval":r.changeApproval,"format-date":r.formatDate,"open-modal":r.openModal,"delete-attachment":r.deleteAttachment,"delete-note":r.deleteNote,"get-detail-file":r.getDetailFile,step:r.step,"file-id":r.formatFileId(l.fileId),"user-access":l.userAccess,"reset-note":r.resetNote,"data-note":l.dataNote,"update-data-note":l.updateDataNote,"note-phase1":l.notePhase1,"note-phase2":l.notePhase2,"note-phase3":l.notePhase3,"note-phase4":l.notePhase4,"modal-note":r.modalNote,phase1Attachments:l.dataAttachPhase1,phase2Attachments:l.dataAttachPhase2,phase3Attachments:l.dataAttachPhase3,phase5Attachments:l.dataAttachPhase5},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase5Attachments"])]),_:1})):(u(),c(L,{key:7,value:"4"},{default:t(()=>[Et]),_:1})),a(L,{value:"5"},{default:t(()=>[a(o,{dataFile:l.dataFile,userData:l.userData,"insert-note":r.insertNote,"change-approval":r.changeApproval,"format-date":r.formatDate,"open-modal":r.openModal,"delete-attachment":r.deleteAttachment,"delete-note":r.deleteNote,"get-detail-file":r.getDetailFile,step:r.step,"file-id":r.formatFileId(l.fileId),"user-access":l.userAccess,"reset-note":r.resetNote,"data-note":l.dataNote,"update-data-note":l.updateDataNote,"note-phase1":l.notePhase1,"note-phase2":l.notePhase2,"note-phase3":l.notePhase3,"note-phase4":l.notePhase4,"modal-note":r.modalNote,phase1Attachments:l.dataAttachPhase1,phase2Attachments:l.dataAttachPhase2,phase3Attachments:l.dataAttachPhase3,phase5Attachments:l.dataAttachPhase5},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase5Attachments"])]),_:1})]),_:1})]),_:1},8,["model-value","mobile"])]),_:1})]),_:1}),a(I,{modelValue:l.insertAttch,"onUpdate:modelValue":e[7]||(e[7]=d=>l.insertAttch=d),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Tambah Data ")]),text:t(()=>[a(M,{onSubmit:N(r.insertAttachment,["prevent"])},{default:t(()=>[a(b,null,{default:t(()=>[a(h,{md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Pilih Keterangan File",items:l.nameFileList,modelValue:l.attachFile.name,"onUpdate:modelValue":e[0]||(e[0]=d=>l.attachFile.name=d),"prepend-icon":"mdi-help-rhombus"},null,8,["items","modelValue"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[Ht,Jt,a(j,{class:"my-3",modelValue:l.attachFile.note,"onUpdate:modelValue":e[1]||(e[1]=d=>l.attachFile.note=d),autofocus:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[Yt,Wt,a(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[2]||(e[2]=d=>r.handleFileChange(d))},null,8,["rules"])]),_:1}),l.dataFile.phase>=2?(u(),c(h,{key:0,md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.attachFile.isSecret,"onUpdate:modelValue":e[3]||(e[3]=d=>l.attachFile.isSecret=d),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):m("",!0),a(h,{md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.attachFile.isApprove,"onUpdate:modelValue":e[4]||(e[4]=d=>l.attachFile.isApprove=d),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),a(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[a(P,{type:"submit",disabled:(l.attachFile.name&&l.attachFile.path&&l.attachFile.isApprove!=1&&l.attachFile.note==null)==null},{default:t(()=>[p(" Simpan ")]),_:1},8,["disabled"]),n("button",{type:"button",class:"btn btn-blue",onClick:e[5]||(e[5]=d=>r.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:t(()=>[a(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[6]||(e[6]=d=>l.uploadProgress=d),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:l.updateAttch,"onUpdate:modelValue":e[14]||(e[14]=d=>l.updateAttch=d),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Edit Data ")]),text:t(()=>[a(M,{onSubmit:N(r.editAttachment,["prevent"])},{default:t(()=>[a(b,null,{default:t(()=>[a(h,{md:"12",cols:"12"},{default:t(()=>[Xt,Qt,a(j,{class:"my-3",modelValue:l.attachFile.name,"onUpdate:modelValue":e[8]||(e[8]=d=>l.attachFile.name=d),autofocus:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[Zt,$t,a(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[9]||(e[9]=d=>r.handleFileChange(d))},null,8,["rules"])]),_:1}),l.dataFile.phase==2?(u(),c(h,{key:0,md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Apakah Termasuk File Rahasia ? (SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.attachFile.isSecret,"onUpdate:modelValue":e[10]||(e[10]=d=>l.attachFile.isSecret=d),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):m("",!0),a(h,{md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.attachFile.isApprove,"onUpdate:modelValue":e[11]||(e[11]=d=>l.attachFile.isApprove=d),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),a(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[a(P,{type:"submit"},{default:t(()=>[p(" Update ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[12]||(e[12]=d=>r.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:t(()=>[a(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[13]||(e[13]=d=>l.uploadProgress=d),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:l.isUpdateGeneralInfo,"onUpdate:modelValue":e[21]||(e[21]=d=>l.isUpdateGeneralInfo=d),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Edit Informasi Umum ")]),text:t(()=>[a(M,{onSubmit:N(r.updateGeneralInfo,["prevent"])},{default:t(()=>[a(b,null,{default:t(()=>[a(h,{md:"12",cols:"12"},{default:t(()=>[ea,ta,a(j,{class:"my-3",modelValue:l.generalInfo.name,"onUpdate:modelValue":e[15]||(e[15]=d=>l.generalInfo.name=d),autofocus:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[aa,la,a(j,{class:"my-3",modelValue:l.generalInfo.plafon,"onUpdate:modelValue":e[16]||(e[16]=d=>l.generalInfo.plafon=d),type:"text",onInput:r.formatInputPlafon},null,8,["modelValue","onInput"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[sa,ia,a(j,{class:"my-3",modelValue:l.generalInfo.type_bussiness,"onUpdate:modelValue":e[17]||(e[17]=d=>l.generalInfo.type_bussiness=d),rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(h,{md:"12",cols:"12"},{default:t(()=>[oa,na,a(j,{class:"my-3",modelValue:l.generalInfo.desc_bussiness,"onUpdate:modelValue":e[18]||(e[18]=d=>l.generalInfo.desc_bussiness=d),rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[a(P,{type:"submit"},{default:t(()=>[p(" Update ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[19]||(e[19]=d=>r.closeModal(4))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:t(()=>[a(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[20]||(e[20]=d=>l.uploadProgress=d),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:l.isUpdateNote,"onUpdate:modelValue":e[23]||(e[23]=d=>l.isUpdateNote=d),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Update Note ")]),text:t(()=>[a(M,{onSubmit:N(r.updateNote,["prevent"])},{default:t(()=>[a(b,{align:"center",justify:"center"},{default:t(()=>[a(h,{md:"10",cols:"10"},{default:t(()=>[a(Q,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:l.updateDataNote.note,"onUpdate:modelValue":e[22]||(e[22]=d=>l.updateDataNote.note=d),rows:"2"},null,8,["modelValue"])]),_:1}),a(h,{md:"2",cols:"2"},{default:t(()=>[a(P,{density:"compact",icon:"mdi-note-plus",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:l.isDataPhase3,"onUpdate:modelValue":e[26]||(e[26]=d=>l.isDataPhase3=d),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Hasil Survey ")]),text:t(()=>[a(M,{onSubmit:N(r.updatePhase3,["prevent"])},{default:t(()=>[a(b,null,{default:t(()=>[a(h,{md:"12",cols:"12"},{default:t(()=>[ra,da,a(Q,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:l.dataPhase3.surveyResult,"onUpdate:modelValue":e[24]||(e[24]=d=>l.dataPhase3.surveyResult=d),rows:"3"},null,8,["modelValue"])]),_:1}),a(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[a(P,{type:"submit"},{default:t(()=>[p("Update")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[25]||(e[25]=d=>r.closeModal(5))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:l.isShowTimers,"onUpdate:modelValue":e[27]||(e[27]=d=>l.isShowTimers=d),width:"auto",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Data Waktu ")]),text:t(()=>[a(k,{headers:l.timerHeaders,items:l.dataFile.phase_times},{"item-timeDiff":t(d=>[p(y(r.calculateTimeDiff(d.startTime,d.endTime)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:l.isShowAttachment,"onUpdate:modelValue":e[28]||(e[28]=d=>l.isShowAttachment=d),width:"auto",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Data Waktu ")]),text:t(()=>[a(k,{headers:l.attachmentHeaders,items:l.dataFile.attachments},null,8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:l.isShowHistory,"onUpdate:modelValue":e[29]||(e[29]=d=>l.isShowHistory=d),width:"auto",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Data Riwayat ")]),text:t(()=>[a(k,{"show-index":"",headers:l.historyHeaders,items:l.dataFile.file_activities},{"item-created_at":t(d=>[p(y(r.formatDate(d.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:l.isShowApprovals,"onUpdate:modelValue":e[30]||(e[30]=d=>l.isShowApprovals=d),width:"auto",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Riwayat Persetujuan ")]),text:t(()=>[a(k,{headers:l.approvalHeaders,items:l.dataFile.approvals},{"item-approved":t(d=>[d.approved==1?(u(),c(T,{key:0,color:"success"},{default:t(()=>[p(" Disetujui ")]),_:1})):(u(),c(T,{key:1,color:"error"},{default:t(()=>[p(" Belum disetujui ")]),_:1}))]),"item-created_at":t(d=>[p(y(r.formatDate(d.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:l.isChangeStatusCredit,"onUpdate:modelValue":e[34]||(e[34]=d=>l.isChangeStatusCredit=d),width:"auto",transition:"dialog-top-transition"},{default:t(()=>[a(v,null,{title:t(()=>[p(" Ubah Status File ")]),text:t(()=>[a(M,{onSubmit:N(r.updateStatusCredit,["prevent"])},{default:t(()=>[a(b,null,{default:t(()=>[a(h,{md:"12",cols:"12"},{default:t(()=>[a(V,{label:"Ubah Status File",items:[{value:1,title:"Approved"},{value:2,title:"Pending"},{value:3,title:"Rejected"}],modelValue:l.changeStatus.status,"onUpdate:modelValue":e[31]||(e[31]=d=>l.changeStatus.status=d)},null,8,["modelValue"])]),_:1}),l.changeStatus.status==3?(u(),c(h,{key:0,md:"12",cols:"12"},{default:t(()=>[ua,pa,a(Q,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:l.changeStatus.reasonRejected,"onUpdate:modelValue":e[32]||(e[32]=d=>l.changeStatus.reasonRejected=d),rows:"2"},null,8,["modelValue"])]),_:1})):m("",!0),a(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[a(P,{type:"submit"},{default:t(()=>[p(" Simpan ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[33]||(e[33]=d=>r.closeModal(9))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}const Ta=J(Lt,[["render",ca],["__scopeId","data-v-bfba4eb7"]]);export{Ta as default};
