import{m as I}from"./VGrid-f18b5395.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";import{V}from"./VRow-e20a4f35.js";import{c,V as A,d as j,b as T,f as he}from"./VCol-c4d389e5.js";import{V as H}from"./VSpacer-44e2625f.js";import{V as ee,a as ae,b as ce,c as me,d as fe,e as Q,f as ge,g as z}from"./VStepper-fa984872.js";import{o as d,h,w as l,a as t,V as P,M as y,i as f,e as p,c as k,F as G,t as _,b as o,f as m,G as q,E as te,d as M,a2 as L,r as W,D as ye,H as ue,I as de}from"./main-057a441b.js";import{a as R,c as w,d as J,b as S,V as _e}from"./VMenu-fe543766.js";import{V as v}from"./VTooltip-63de7aa9.js";import{V as le}from"./VOverlay-d27575f1.js";import{V as O}from"./VForm-bcf899e6.js";import{V as F}from"./VTextField-2ebe6e36.js";import{b as B,c as U}from"./VWindowItem-c8ff885d.js";import{V as E}from"./VFileInput-aa4c5e86.js";import{V as K}from"./VSelect-568bcadc.js";import{V as N}from"./VDialog-5cea0855.js";import{V as X}from"./VDivider-4997d042.js";import{V as ie}from"./VChip-c15280ca.js";import{V as ke}from"./VAlert-55088421.js";import{V as Ae}from"./VContainer-94c86b34.js";import"./VImg-7c8d7e37.js";import"./VInput-2ebb994a.js";import"./index-6e68b54c.js";import"./dialog-transition-2a8c15a1.js";import"./VCheckboxBtn-545449b3.js";const be={name:"AttachmentCard1",props:{data:{type:Object,required:!0},fileId:{type:Number,required:!0},filePath:{type:String,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},openModal:{type:Function,required:!0},phase:{type:Number,required:!0}},data(){return{userAccessPhase1:null}},mounted(){this.userAccessPhase1=this.userAccess[1]}},ve=o("span",{class:"text-h6 font-weight-medium"},"Phase 1 (Pooling) 📄",-1),Se={class:"operation-wrapper"},Pe={class:"d-flex justify-space-between"},Fe=["href"],De=["onClick"],xe=["onClick"],Ie={class:"operation-wrapper"},Ve={class:"d-flex justify-space-between"},we=["href"],Te=["onClick"],Ce=["onClick"];function Ue(a,s,n,g,e,u){return d(),h(A,{color:"warning"},{default:l(()=>[t(j,{class:"py-2"},{default:l(()=>[t(V,{align:"center","no-gutters":""},{default:l(()=>[t(c,{cols:"auto"},{default:l(()=>[ve]),_:1}),t(H),t(c,{cols:"auto"},{default:l(()=>[t(ee,{"max-width":"400"},{activator:l(({props:i})=>[t(P,y({icon:""},i,{color:"on-primary",variant:"text"}),{default:l(()=>[t(f,{color:"on-primary"},{default:l(()=>[p("mdi-help-circle-outline")]),_:1})]),_:2},1040)]),default:l(()=>[t(A,null,{default:l(()=>[t(j,{class:"text-h6 py-2 px-4"},{default:l(()=>[p(" Penjelasan Phase 1: Pooling ")]),_:1}),t(T,{class:"py-2 px-4"},{default:l(()=>[p(" Tahap ini meliputi pengumpulan dan verifikasi berkas kredit nasabah. Proses ini dilaksanakan setelah Account Officer (AO) melakukan survei lapangan. Dokumentasi yang terkumpul akan digunakan untuk analisis SLIK (Sistem Layanan Informasi Keuangan) guna menilai kelayakan kredit. ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(d(!0),k(q,null,G(n.data,(i,x)=>(d(),k("div",{key:x},[i.path!=null&&!parseInt(i.isSecret)?(d(),h(R,{key:0,density:"compact"},{default:l(()=>[t(S,null,{prepend:l(()=>[p(_(parseInt(i.isApprove)?"✅":"❌")+" ",1),t(f,{icon:"mdi-file"})]),append:l(()=>[o("div",Se,[o("div",Pe,[i.path!="null"?(d(),h(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[o("a",y(r,{href:n.filePath+"/"+n.fileId+"/"+i.path,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Fe)]),_:2},1024)):m("",!0),e.userAccessPhase1&&parseInt(e.userAccessPhase1.canUpdateData)&&n.phase<2?(d(),h(v,{key:1,location:"top",text:"Edit File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>n.openModal(2,i)}),[t(f,{size:"20",icon:"bx-edit",color:"blue"})],16,De)]),_:2},1024)):m("",!0),e.userAccessPhase1&&parseInt(e.userAccessPhase1.canDeleteData)&&n.phase<2?(d(),h(v,{key:2,location:"top",text:"Hapus File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>n.deleteAttachment(i.id)}),[t(f,{size:"20",icon:"bx-trash",color:"red"})],16,xe)]),_:2},1024)):m("",!0)])])]),default:l(()=>[t(w,null,{default:l(()=>[p(_(i.name),1)]),_:2},1024),i.note!=null?(d(),h(J,{key:0},{default:l(()=>[p(_(i.note),1)]),_:2},1024)):m("",!0)]),_:2},1024)]),_:2},1024)):(d(),h(R,{key:1,density:"compact"},{default:l(()=>[t(S,null,{prepend:l(()=>[p(_(parseInt(i.isApprove)?"✅":"❌")+" ",1),t(f,{icon:"mdi-file"})]),append:l(()=>[o("div",Ie,[o("div",Ve,[e.userAccessPhase1&&parseInt(e.userAccessPhase1.isSecret)&&i.path!="null"?(d(),h(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[o("a",y(r,{href:n.filePath+"/"+a.dataFile.id+"/"+i.path,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,we)]),_:2},1024)):m("",!0),e.userAccessPhase1&&parseInt(e.userAccessPhase1.canUpdateData)&&n.phase<2?(d(),h(v,{key:1,location:"top",text:"Edit File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>n.openModal(2,i)}),[t(f,{size:"20",icon:"bx-edit",color:"blue"})],16,Te)]),_:2},1024)):m("",!0),e.userAccessPhase1&&parseInt(e.userAccessPhase1.canDeleteData)&&n.phase<2?(d(),h(v,{key:2,location:"top",text:"Hapus File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>n.deleteAttachment(i.id)}),[t(f,{size:"20",icon:"bx-trash",color:"red"})],16,Ce)]),_:2},1024)):m("",!0)])])]),default:l(()=>[t(w,null,{default:l(()=>[p(_(i.name),1)]),_:2},1024),i.note!=null?(d(),h(J,{key:0},{default:l(()=>[p(_(i.note),1)]),_:2},1024)):m("",!0)]),_:2},1024)]),_:2},1024))]))),128))]),_:1})}const Ke=Y(be,[["render",Ue]]),Ne={props:{data:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},phase:{type:Number,required:!0}},watch:{selectedOption(a){a==="file"?this.formDetailSlik.link=null:a==="link"&&(this.formDetailSlik.path=null)}},computed:{isSaveDisabled(){return(!this.formAnalytic.path||this.formAnalytic.path=="null")&&(!this.formAnalytic.link||this.formAnalytic.link==null)},isFormAppealDisabled(){return(!this.formAppeal.path||this.formAppeal.path=="null")&&(!this.formAppeal.link||this.formAppeal.link==null)}},data(){return{userAccessPhase2:null,overlay:!1,selectedOption:"",uploadProgress:null,rules:{required:a=>!!a||"Required"},isFormDetailSlik:!1,formDetailSlik:{id:null,name:null,note:null,path:null,link:null,file_id:this.fileId,isApprove:0,isSecret:0},isFormResumeSlik:!1,formResumeSlik:{id:null,name:null,path:null,note:null,link:null,file_id:this.fileId,isApprove:0,isSecret:0},isAppeal:!1,formAppeal:{id:null,file_id:this.fileId,phase:2,name:"File Banding",path:null,note:null,link:null,isApprove:0,isSecret:0},isAnalytic:!1,formAnalytic:{id:null,file_id:this.fileId,link:null,note:null,phase:2,name:"Analisa Awal Kredit AO",path:null,isApprove:0,isSecret:0}}},methods:{shouldDisplay(a){return!(a.name==="Analisa Awal Kredit AO"||a.name==="File Banding")},showAnalisaAwalCredit(){if(this.data.filter(s=>s.name.includes("SLIK")&&s.isApprove==1&&(s.path!="null"||s.link!=null)).length>0){let s=this.data.find(n=>n.name==="Analisa Awal Kredit AO");if(s!=null)return this.formAnalytic.id=s.id,this.formAnalytic.isApprove=parseInt(s.isApprove),this.formAnalytic.isSecret=parseInt(s.isSecret),this.formAnalytic.path=s.path,this.formAnalytic.link=s.link,!0}return!1},showFileBanding(){const a=this.data.filter(n=>n.name.includes("SLIK")&&n.isApprove==0&&(n.path!=="null"||n.link!==null)),s=this.data.filter(n=>n.name=="File Banding"&&(n.path!=="null"||n.link!==null));if(a.length>0||s.length>0){let n=this.data.find(g=>g.name==="File Banding");if(n!=null)return this.formAppeal.id=n.id,this.formAppeal.isApprove=parseInt(n.isApprove),this.formAppeal.isSecret=parseInt(n.isSecret),this.formAppeal.path=n.path,!0}return!1},handleFileChange(a){const s=a.target.files[0];s&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(s.type)?this.formDetailSlik.path=s:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),a.target.value=null)},handleAnalyticChange(a){const s=a.target.files[0];s&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(s.type)?this.formAnalytic.path=s:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),a.target.value=null)},handleAppealChange(a){const s=a.target.files[0];s&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(s.type)?this.formAppeal.path=s:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),a.target.value=null)},openModal(a,s=null){a==1?s.name=="Detail SLIK"?(this.selectedOption="",this.formDetailSlik.id=s.id,this.formDetailSlik.name=s.name,this.formDetailSlik.note=s.note,this.formDetailSlik.isSecret=parseInt(s.isSecret),this.formDetailSlik.isApprove=parseInt(s.isApprove),this.isFormDetailSlik=!0):s.name=="Resume SLIK"?(this.selectedOption="",this.formDetailSlik.id=s.id,this.formDetailSlik.name=s.name,this.formDetailSlik.note=s.note,this.formDetailSlik.isSecret=parseInt(s.isSecret),this.formDetailSlik.isApprove=parseInt(s.isApprove),this.isFormResumeSlik=!0):(this.formDetailSlik.id=s.id,this.formDetailSlik.name=s.name,this.formDetailSlik.note=s.note,this.formDetailSlik.isSecret=parseInt(s.isSecret),this.formDetailSlik.isApprove=parseInt(s.isApprove),this.isFormResumeSlik=!0):a==2?this.isAnalytic=!0:a==3&&(this.formAppeal.link=null,this.formAppeal.path=null,this.isAppeal=!0)},closeModal(a){a==1?(this.formDetailSlik.id=null,this.formDetailSlik.name=null,this.formDetailSlik.path=null,this.formDetailSlik.link=null,this.formDetailSlik.isSecret=0,this.formDetailSlik.isApprove=0,this.isFormDetailSlik=!1):a==2?(this.formDetailSlik.id=null,this.formDetailSlik.name=null,this.formDetailSlik.path=null,this.formDetailSlik.link=null,this.formDetailSlik.isSecret=0,this.formDetailSlik.isApprove=0,this.isFormResumeSlik=!1):a==3?(this.formAnalytic.id=null,this.formAnalytic.isSecret=0,this.formAnalytic.isApprove=0,this.formAnalytic.path=null,this.formAnalytic.link=null,this.isAnalytic=!1):a==4&&(this.formAppeal.id=null,this.formAppeal.isSecret=0,this.formAppeal.isApprove=0,this.formAppeal.link=null,this.formAppeal.path=null,this.isAppeal=!1)},async insertSlik(){try{this.overlay=!0;const a=new FormData;a.append("name",this.formDetailSlik.name),this.formDetailSlik.note!=null&&a.append("note",this.formDetailSlik.note),this.formDetailSlik.path!=null?a.append("path",this.formDetailSlik.path):this.formDetailSlik.link!=null&&a.append("link",this.formDetailSlik.link),a.append("isSecret",this.formDetailSlik.isSecret),a.append("isApprove",this.formDetailSlik.isApprove),a.append("file_id",this.formDetailSlik.file_id),a.append("_method","PUT");const s={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(e){console.error("Error calculating progress:",e)}},headers:{"Content-Type":"multipart/form-data"}},n=await I.post(`/user/edit-attach/${this.formDetailSlik.id}`,a,s);n.status===200?(this.overlay=!1,this.closeModal(1),this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.overlay=!1,this.closeModal(1),this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(a){this.overlay=!1,this.closeModal(1),this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async insertAnalytic(){try{this.overlay=!0;const a=new FormData;a.append("name",this.formAnalytic.name),a.append("note",this.formAnalytic.note),this.formAnalytic.path!="null"?a.append("path",this.formAnalytic.path):this.formAnalytic.link!=null&&a.append("link",this.formAnalytic.link),a.append("phase",this.formAnalytic.phase),a.append("isSecret",this.formAnalytic.isSecret),a.append("file_id",this.formAnalytic.file_id),a.append("isApprove",this.formAnalytic.isApprove),a.append("_method","PUT");const s={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(e){console.error("Error calculating progress:",e)}},headers:{"Content-Type":"multipart/form-data"}},n=await I.post(`/user/edit-attach/${this.formAnalytic.id}`,a,s);n.status===200?(this.overlay=!1,this.closeModal(3),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.overlay=!1,this.closeModal(3),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(a){this.overlay=!1,this.closeModal(3),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async insertAppeal(){try{this.overlay=!0;const a=new FormData;a.append("name",this.formAppeal.name),a.append("note",this.formAppeal.note),this.formAppeal.path!=null&&this.formAppeal.path!=""?a.append("path",this.formAppeal.path):this.formAppeal.link!=null&&this.formAppeal.link!=""&&a.append("link",this.formAppeal.link),a.append("phase",this.formAppeal.phase),a.append("isSecret",this.formAppeal.isSecret),a.append("file_id",this.formAppeal.file_id),a.append("isApprove",this.formAppeal.isApprove),a.append("_method","PUT");const s={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(e){console.error("Error calculating progress:",e)}},headers:{"Content-Type":"multipart/form-data"}},n=await I.post(`/user/edit-attach/${this.formAppeal.id}`,a,s);n.status===200?(this.overlay=!1,this.closeModal(4),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.overlay=!1,this.closeModal(4),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(a){this.overlay=!1,this.closeModal(4),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}}},mounted(){this.userAccessPhase2=this.userAccess[2]}},je=o("span",{class:"text-h6 font-weight-medium"},"Phase 2 (SLIK) 📄",-1),Me={class:"operation-wrapper"},Oe={class:"d-flex justify-space-between"},qe=["href"],Le=["href"],Re=["href"],Ee=["href"],ze=["onClick"],Be=["onClick"],He=["onClick"],Ge={key:0},Je={class:"operation-wrapper"},We={class:"d-flex justify-space-between"},Xe=["href"],Ye=["href"],Qe={key:1},Ze={class:"operation-wrapper"},$e={class:"d-flex justify-space-between"},et=["href"],tt=["href"],lt=o("span",{style:{color:"red"}},"*",-1),st=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),at=o("span",{class:"subtitle-1 text-center"},"Note: ",-1),it=o("span",{style:{color:"red"}},"*",-1),nt=o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1),ot=o("span",{style:{color:"red"}},"*",-1),rt=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),ut=o("span",{style:{color:"red"}},"*",-1),dt=o("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1),pt=o("span",{style:{color:"red"}},"*",-1),ht=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),ct=o("span",{style:{color:"red"}},"*",-1),mt=o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1),ft=o("span",{style:{color:"red"}},"*",-1),gt=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),yt=o("span",{style:{color:"red"}},"*",-1),_t=o("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1),kt=o("span",{style:{color:"red"}},"*",-1),At=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),bt=o("span",{style:{color:"red"}},"*",-1),vt=o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1),St=o("span",{style:{color:"red"}},"*",-1),Pt=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),Ft=o("span",{style:{color:"red"}},"*",-1),Dt=o("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1),xt=o("span",{style:{color:"red"}},"*",-1),It=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),Vt=o("span",{style:{color:"red"}},"*",-1),wt=o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1),Tt=o("span",{style:{color:"red"}},"*",-1),Ct=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),Ut=o("span",{style:{color:"red"}},"*",-1),Kt=o("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1);function Nt(a,s,n,g,e,u){return d(),k(q,null,[t(le,{"model-value":e.overlay,class:"align-center justify-center"},{default:l(()=>[t(te,{color:"blue-lighten-3",indeterminate:"",size:41,width:5}),p(" Loading... ")]),_:1},8,["model-value"]),t(A,{color:"warning"},{default:l(()=>[t(j,{class:"py-2"},{default:l(()=>[t(V,{align:"center","no-gutters":""},{default:l(()=>[t(c,{cols:"auto"},{default:l(()=>[je]),_:1}),t(H),t(c,{cols:"auto"},{default:l(()=>[t(ee,{"max-width":"400"},{activator:l(({props:i})=>[t(P,y({icon:""},i,{color:"on-primary",variant:"text"}),{default:l(()=>[t(f,{color:"on-primary"},{default:l(()=>[p("mdi-help-circle-outline")]),_:1})]),_:2},1040)]),default:l(()=>[t(A,null,{default:l(()=>[t(j,{class:"text-h6 py-2 px-4"},{default:l(()=>[p(" Penjelasan Phase SLIK ")]),_:1}),t(T,{class:"py-2 px-4"},{default:l(()=>[p(" Tahap ini melibatkan proses pengecekan riwayat kredit nasabah melalui Sistem Layanan Informasi Keuangan (SLIK). SLIK merupakan sistem yang dikelola oleh Otoritas Jasa Keuangan (OJK) untuk menyediakan informasi pinjaman debitur. Hasil analisis SLIK digunakan untuk menilai kelayakan kredit dan risiko nasabah berdasarkan catatan keuangan sebelumnya. ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(d(!0),k(q,null,G(n.data,(i,x)=>(d(),k("div",{key:x},[t(R,{density:"compact"},{default:l(()=>[u.shouldDisplay(i)?(d(),h(S,{key:0},{prepend:l(()=>[p(_(parseInt(i.isApprove)?"✅":"❌")+" ",1),t(f,{icon:"mdi-file"})]),append:l(()=>[o("div",Me,[o("div",Oe,[(i.path!=="null"||i.link!==null)&&parseInt(i.isSecret)?(d(),h(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[i.path!=="null"&&e.userAccessPhase2&&parseInt(e.userAccessPhase2.isSecret)==1?(d(),k("a",y({key:0},r,{href:`${n.filePath}/${n.fileId}/${i.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,qe)):m("",!0),i.link!==null&&e.userAccessPhase2&&parseInt(e.userAccessPhase2.isSecret)==1?(d(),k("a",y({key:1},r,{href:`${i.link}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Le)):m("",!0)]),_:2},1024)):(d(),h(v,{key:1,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[i.path!=="null"?(d(),k("a",y({key:0},r,{href:`${n.filePath}/${n.fileId}/${i.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Re)):m("",!0),i.link!==null?(d(),k("a",y({key:1},r,{href:`${i.link}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Ee)):m("",!0)]),_:2},1024)),i.path==="null"&&i.link===null&&e.userAccessPhase2&&parseInt(e.userAccessPhase2.canInsertData)==1?(d(),h(v,{key:2,location:"top",text:"Upload File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>u.openModal(1,i)}),[t(f,{size:"20",icon:"bx-upload",color:"blue"})],16,ze)]),_:2},1024)):m("",!0),e.userAccessPhase2&&parseInt(e.userAccessPhase2.canUpdateData)&&n.phase<3?(d(),h(v,{key:3,location:"top",text:"Edit File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>u.openModal(1,i)}),[t(f,{size:"20",icon:"bx-edit",color:"blue"})],16,Be)]),_:2},1024)):m("",!0),e.userAccessPhase2&&parseInt(e.userAccessPhase2.canDeleteData)&&n.phase<3?(d(),h(v,{key:4,location:"top",text:"Hapus File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>n.deleteAttachment(i.id)}),[t(f,{size:"20",icon:"bx-trash",color:"red"})],16,He)]),_:2},1024)):m("",!0)])])]),default:l(()=>[t(w,null,{default:l(()=>[p(_(i.name),1)]),_:2},1024),i.note!="null"?(d(),h(J,{key:0},{default:l(()=>[p(_(i.note),1)]),_:2},1024)):m("",!0)]),_:2},1024)):m("",!0)]),_:2},1024)]))),128)),u.showAnalisaAwalCredit()?(d(),k("div",Ge,[t(R,{density:"compact"},{default:l(()=>[t(S,null,{prepend:l(()=>[p(_(parseInt(e.formAnalytic.isApprove)?"✅":"❌")+" ",1),t(f,{icon:"mdi-file"})]),append:l(()=>[o("div",Je,[o("div",We,[e.formAnalytic.path!=="null"&&e.formAnalytic.path!==null||e.formAnalytic.link!==null?(d(),h(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:i})=>[e.formAnalytic.path!=="null"?(d(),k("a",y({key:0},i,{href:`${n.filePath}/${n.fileId}/${e.formAnalytic.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Xe)):m("",!0),e.formAnalytic.link!==null?(d(),k("a",y({key:1},i,{href:`${e.formAnalytic.link}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Ye)):m("",!0)]),_:1})):m("",!0),e.formAnalytic.path==null&&e.formAnalytic.path=="null"&&e.formAnalytic.link==null&&e.userAccessPhase2&&parseInt(e.userAccessPhase2.canAppeal)==1?(d(),h(v,{key:1,location:"top",text:"Upload File / Link"},{activator:l(({props:i})=>[o("button",y(i,{onClick:s[0]||(s[0]=x=>u.openModal(2,e.formAnalytic))}),[t(f,{size:"20",icon:"bx-upload",color:"blue"})],16)]),_:1})):m("",!0),e.userAccessPhase2&&parseInt(e.userAccessPhase2.canAppeal)==1&&n.phase<3?(d(),h(v,{key:2,location:"top",text:"Edit File"},{activator:l(({props:i})=>[o("button",y(i,{onClick:s[1]||(s[1]=x=>u.openModal(2,e.formAnalytic))}),[t(f,{size:"20",icon:"bx-edit",color:"blue"})],16)]),_:1})):m("",!0),e.userAccessPhase2&&parseInt(e.userAccessPhase2.canDeleteData)==1&&n.phase<3?(d(),h(v,{key:3,location:"top",text:"Hapus File"},{activator:l(({props:i})=>[o("button",y(i,{onClick:s[2]||(s[2]=x=>n.deleteAttachment(e.formAnalytic.id))}),[t(f,{size:"20",icon:"bx-trash",color:"red"})],16)]),_:1})):m("",!0)])])]),default:l(()=>[t(w,null,{default:l(()=>[p(_(e.formAnalytic.name),1)]),_:1}),e.formAnalytic.note!=null?(d(),h(J,{key:0},{default:l(()=>[p(_(e.formAnalytic.note),1)]),_:1})):m("",!0)]),_:1})]),_:1})])):m("",!0),u.showFileBanding()?(d(),k("div",Qe,[t(R,{density:"compact"},{default:l(()=>[t(S,null,{prepend:l(()=>[p(_(parseInt(e.formAppeal.isApprove)?"✅":"❌")+" ",1),t(f,{icon:"mdi-file"})]),append:l(()=>[o("div",Ze,[o("div",$e,[e.formAppeal.path!=="null"&&e.formAppeal.path!==null||e.formAppeal.link!==null?(d(),h(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:i})=>[e.formAppeal.path!=="null"?(d(),k("a",y({key:0},i,{href:`${n.filePath}/${n.fileId}/${e.formAppeal.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,et)):m("",!0),e.formAppeal.link!==null?(d(),k("a",y({key:1},i,{href:`${e.formAppeal.link}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,tt)):m("",!0)]),_:1})):m("",!0),e.formAppeal.path==null&&e.formAppeal.path=="null"&&e.userAccessPhase2&&parseInt(e.userAccessPhase2.canAppeal)==1?(d(),h(v,{key:1,location:"top",text:"Upload File / Link"},{activator:l(({props:i})=>[o("button",y(i,{onClick:s[3]||(s[3]=x=>u.openModal(3))}),[t(f,{size:"20",icon:"bx-upload",color:"blue"})],16)]),_:1})):m("",!0),e.userAccessPhase2&&parseInt(e.userAccessPhase2.canAppeal)==1&&n.phase<3?(d(),h(v,{key:2,location:"top",text:"Edit File"},{activator:l(({props:i})=>[o("button",y(i,{onClick:s[4]||(s[4]=x=>u.openModal(3))}),[t(f,{size:"20",icon:"bx-edit",color:"blue"})],16)]),_:1})):m("",!0),e.userAccessPhase2&&parseInt(e.userAccessPhase2.canDeleteData)==1&&n.phase<3?(d(),h(v,{key:3,location:"top",text:"Hapus File"},{activator:l(({props:i})=>[o("button",y(i,{onClick:s[5]||(s[5]=x=>n.deleteAttachment(e.formAppeal.id))}),[t(f,{size:"20",icon:"bx-trash",color:"red"})],16)]),_:1})):m("",!0)])])]),default:l(()=>[t(w,null,{default:l(()=>[p(_(e.formAppeal.name),1)]),_:1})]),_:1})]),_:1})])):m("",!0)]),_:1}),t(N,{modelValue:e.isFormDetailSlik,"onUpdate:modelValue":s[15]||(s[15]=i=>e.isFormDetailSlik=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Data Attachment ")]),text:l(()=>[t(O,{onSubmit:M(u.insertSlik,["prevent"])},{default:l(()=>[t(V,null,{default:l(()=>[t(c,{md:"12",cols:"12"},{default:l(()=>[lt,st,t(F,{class:"my-3",modelValue:e.formDetailSlik.name,"onUpdate:modelValue":s[6]||(s[6]=i=>e.formDetailSlik.name=i),autofocus:"",disabled:"",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[at,t(F,{class:"my-3",modelValue:e.formDetailSlik.note,"onUpdate:modelValue":s[7]||(s[7]=i=>e.formDetailSlik.note=i),rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[it,nt,t(B,{modelValue:e.selectedOption,"onUpdate:modelValue":s[8]||(s[8]=i=>e.selectedOption=i),mandatory:!0,row:""},{default:l(()=>[t(U,{label:"File",value:"file"}),t(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),e.selectedOption==="file"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[ot,rt,t(E,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[e.rules.required],onChange:s[9]||(s[9]=i=>{u.handleFileChange(i),e.formDetailSlik.link=null})},null,8,["rules"])]),_:1})):m("",!0),e.selectedOption==="link"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[ut,dt,t(F,{class:"my-3",modelValue:e.formDetailSlik.link,"onUpdate:modelValue":s[10]||(s[10]=i=>e.formDetailSlik.link=i),type:"link",hint:"Pastikan menggunakan https://",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1})):m("",!0),t(c,{md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:e.formDetailSlik.isSecret,"onUpdate:modelValue":s[11]||(s[11]=i=>e.formDetailSlik.isSecret=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:e.formDetailSlik.isApprove,"onUpdate:modelValue":s[12]||(s[12]=i=>e.formDetailSlik.isApprove=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[t(P,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:s[13]||(s[13]=i=>u.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[t(L,{modelValue:e.uploadProgress,"onUpdate:modelValue":s[14]||(s[14]=i=>e.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:e.isFormResumeSlik,"onUpdate:modelValue":s[24]||(s[24]=i=>e.isFormResumeSlik=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Data Attachment ")]),text:l(()=>[t(O,{onSubmit:M(u.insertSlik,["prevent"])},{default:l(()=>[t(V,null,{default:l(()=>[t(c,{md:"12",cols:"12"},{default:l(()=>[pt,ht,t(F,{class:"my-3",modelValue:e.formDetailSlik.name,"onUpdate:modelValue":s[16]||(s[16]=i=>e.formDetailSlik.name=i),autofocus:"",disabled:"",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[ct,mt,t(B,{modelValue:e.selectedOption,"onUpdate:modelValue":s[17]||(s[17]=i=>e.selectedOption=i),mandatory:!0,row:""},{default:l(()=>[t(U,{label:"File",value:"file"}),t(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),e.selectedOption==="file"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[ft,gt,t(E,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[e.rules.required],onChange:s[18]||(s[18]=i=>{u.handleFileChange(i),e.formDetailSlik.link=null})},null,8,["rules"])]),_:1})):m("",!0),e.selectedOption==="link"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[yt,_t,t(F,{class:"my-3",modelValue:e.formDetailSlik.link,"onUpdate:modelValue":s[19]||(s[19]=i=>e.formDetailSlik.link=i),type:"link",hint:"Pastikan menggunakan https://",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1})):m("",!0),t(c,{md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:e.formDetailSlik.isSecret,"onUpdate:modelValue":s[20]||(s[20]=i=>e.formDetailSlik.isSecret=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:e.formDetailSlik.isApprove,"onUpdate:modelValue":s[21]||(s[21]=i=>e.formDetailSlik.isApprove=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[t(P,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:s[22]||(s[22]=i=>u.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[t(L,{modelValue:e.uploadProgress,"onUpdate:modelValue":s[23]||(s[23]=i=>e.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:e.isAnalytic,"onUpdate:modelValue":s[32]||(s[32]=i=>e.isAnalytic=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Data Analisis AO ")]),text:l(()=>[t(O,{onSubmit:M(u.insertAnalytic,["prevent"])},{default:l(()=>[t(V,null,{default:l(()=>[t(c,{md:"12",cols:"12"},{default:l(()=>[kt,At,t(F,{class:"my-3",modelValue:e.formAnalytic.name,"onUpdate:modelValue":s[25]||(s[25]=i=>e.formAnalytic.name=i),autofocus:"",disabled:"",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[bt,vt,t(B,{modelValue:e.selectedOption,"onUpdate:modelValue":s[26]||(s[26]=i=>e.selectedOption=i),mandatory:!0,row:""},{default:l(()=>[t(U,{label:"File",value:"file"}),t(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),e.selectedOption==="file"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[St,Pt,t(E,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[e.rules.required],onChange:s[27]||(s[27]=i=>{u.handleAnalyticChange(i),e.formAnalytic.link=null})},null,8,["rules"])]),_:1})):m("",!0),e.selectedOption==="link"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[Ft,Dt,t(F,{class:"my-3",modelValue:e.formAnalytic.link,"onUpdate:modelValue":s[28]||(s[28]=i=>e.formAnalytic.link=i),type:"link",hint:"Pastikan menggunakan https://",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1})):m("",!0),t(c,{md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:e.formAnalytic.isApprove,"onUpdate:modelValue":s[29]||(s[29]=i=>e.formAnalytic.isApprove=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[t(P,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:s[30]||(s[30]=i=>u.closeModal(3))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[t(L,{modelValue:e.uploadProgress,"onUpdate:modelValue":s[31]||(s[31]=i=>e.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:e.isAppeal,"onUpdate:modelValue":s[41]||(s[41]=i=>e.isAppeal=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Data Banding AO ")]),text:l(()=>[t(O,{onSubmit:M(u.insertAppeal,["prevent"])},{default:l(()=>[t(V,null,{default:l(()=>[t(c,{md:"12",cols:"12"},{default:l(()=>[xt,It,t(F,{class:"my-3",modelValue:e.formAppeal.name,"onUpdate:modelValue":s[33]||(s[33]=i=>e.formAppeal.name=i),autofocus:"",disabled:"",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[Vt,wt,t(B,{modelValue:e.selectedOption,"onUpdate:modelValue":s[34]||(s[34]=i=>e.selectedOption=i),mandatory:!0,row:""},{default:l(()=>[t(U,{label:"File",value:"file"}),t(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),e.selectedOption==="file"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[Tt,Ct,t(E,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[e.rules.required],onChange:s[35]||(s[35]=i=>{u.handleAppealChange(i),e.formAppeal.link=null})},null,8,["rules"])]),_:1})):m("",!0),e.selectedOption==="link"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[Ut,Kt,t(F,{class:"my-3",modelValue:e.formAppeal.link,"onUpdate:modelValue":s[36]||(s[36]=i=>e.formAppeal.link=i),type:"link",hint:"Pastikan menggunakan https://",rules:[e.rules.required],onChange:s[37]||(s[37]=i=>e.formAppeal.path=null)},null,8,["modelValue","rules"])]),_:1})):m("",!0),e.userAccessPhase2&&parseInt(e.userAccessPhase2.canApproveAppeal)==1?(d(),h(c,{key:2,md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:e.formAppeal.isApprove,"onUpdate:modelValue":s[38]||(s[38]=i=>e.formAppeal.isApprove=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):m("",!0),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[t(P,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:s[39]||(s[39]=i=>u.closeModal(4))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[t(L,{modelValue:e.uploadProgress,"onUpdate:modelValue":s[40]||(s[40]=i=>e.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const jt=Y(Ne,[["render",Nt]]),Mt={name:"AttachmentCard3",props:{data:{type:Object,required:!0},submission:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},phase:{type:Number,required:!0}},watch:{selectedOption(a){a==="file"?this.formAnalisaKredit.link=null:a==="link"&&(this.formAnalisaKredit.path=null)}},computed:{sortedSubmission(){return this.submission.slice().sort((a,s)=>a.type===2&&s.type!==2?-1:a.type!==2&&s.type===2?1:0)}},data(){return{userAccessPhase3:null,selectedOption:"",overlay:!1,uploadProgress:null,rules:{required:a=>!!a||"Required"},isAnalisaKredit:!1,formAnalisaKredit:{id:null,name:"Analisa Kredit",file_id:this.fileId,path:"null",link:null,isApprove:0,isSecret:0},isSubmission:!1,isUpdateSubmission:!1,formSubmission:{id:null,file_id:null,phase:null,name:null,path:null,link:null,note:null,type:null}}},methods:{openModal(a,s=null){a==1?(this.formAnalisaKredit.id=s.id,this.formAnalisaKredit.name=s.name,this.formAnalisaKredit.link=s.link,this.formAnalisaKredit.path=s.path,this.formAnalisaKredit.isSecret=parseInt(s.isSecret),this.formAnalisaKredit.isApprove=parseInt(s.isApprove),this.isAnalisaKredit=!0):a==2?(this.formSubmission.file_id=this.fileId,this.formSubmission.phase=3,this.isSubmission=!0):a==3&&(this.formSubmission.id=s.id,this.formSubmission.file_id=this.fileId,this.formSubmission.phase=3,this.formSubmission.name=s.name,this.formSubmission.type=s.type,this.isUpdateSubmission=!0)},closeModal(a){a==1?(this.formAnalisaKredit.id=null,this.formAnalisaKredit.isSecret=0,this.formAnalisaKredit.isApprove=0,this.selectedOption="",this.isAnalisaKredit=!1):a==2?(this.formSubmission.id=null,this.formSubmission.file_id=null,this.formSubmission.phase=null,this.formSubmission.name=null,this.formSubmission.path=null,this.formSubmission.link=null,this.formSubmission.note=null,this.formSubmission.type=null,this.selectedOption="",this.isSubmission=!1):a==3&&(this.formSubmission.id=null,this.formSubmission.file_id=null,this.formSubmission.phase=null,this.formSubmission.name=null,this.formSubmission.path=null,this.formSubmission.link=null,this.formSubmission.note=null,this.formSubmission.type=null,this.selectedOption="",this.isUpdateSubmission=!1)},handleFileChange(a,s,n){const g=a.target.files[0];g&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(g.type)?s[n]=g:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),a.target.value=null)},async insertAnalisa(){try{this.overlay=!0;const a=new FormData;a.append("name",this.formAnalisaKredit.name),a.append("isSecret",this.formAnalisaKredit.isSecret),a.append("isApprove",this.formAnalisaKredit.isApprove),a.append("file_id",this.formAnalisaKredit.file_id),this.formAnalisaKredit.path!="null"&&this.formAnalisaKredit.path!=null?a.append("path",this.formAnalisaKredit.path):this.formAnalisaKredit.link!=null&&a.append("link",this.formAnalisaKredit.link),a.append("_method","PUT");const s={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(e){console.error("Error calculating progress:",e)}},headers:{"Content-Type":"multipart/form-data"}},n=await I.post(`/user/edit-attach/${this.formAnalisaKredit.id}`,a,s);n.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(a){this.overlay=!1,this.uploadProgress=null,this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async insertSubmission(){try{if(this.overlay=!0,this.formSubmission.link==null&&this.formSubmission.path==null){this.isSubmission=!1,this.$showToast("error","Error","File / Link harus diisi"),this.overlay=!1;return}const a=new FormData;a.append("file_id",this.formSubmission.file_id),a.append("name",this.formSubmission.name),a.append("type",this.formSubmission.type),a.append("phase",this.formSubmission.phase),this.formSubmission.path!=null&&this.formSubmission.path!=null?a.append("path",this.formSubmission.path):this.formSubmission.link!=null&&a.append("link",this.formSubmission.link),a.append("_method","POST");const s={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(e){console.error("Error calculating progress:",e)}},headers:{"Content-Type":"multipart/form-data"}},n=await I.post("/user/file-submission",a,s);n.status===200?(this.overlay=!1,this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.overlay=!1,this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(a){this.overlay=!1,this.uploadProgress=null,this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async deleteSubmission(a){try{if(!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;this.overlay=!0;const n=await I.delete(`/user/file-submission/${a}`);n.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",n.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry","Terjadi Kesalahan Silahkan Coba Lagi"))}catch(s){this.overlay=!1,this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},async updateSubmission(){try{this.overlay=!0;const a=new FormData;a.append("file_id",this.formSubmission.file_id),a.append("name",this.formSubmission.name),a.append("type",this.formSubmission.type),a.append("phase",this.formSubmission.phase),this.formSubmission.path!=null&&this.formSubmission.path!=null?a.append("path",this.formSubmission.path):this.formSubmission.link!=null&&a.append("link",this.formSubmission.link),a.append("_method","PUT");const s={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(e){console.error("Error calculating progress:",e)}},headers:{"Content-Type":"multipart/form-data"}},n=await I.post(`/user/file-submission/${this.formSubmission.id}`,a,s);n.status===200?(this.overlay=!1,this.closeModal(3),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.overlay=!1,this.closeModal(3),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(a){this.overlay=!1,this.uploadProgress=null,this.closeModal(3),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}}},mounted(){this.userAccessPhase3=this.userAccess[3]}},Ot=o("span",{class:"text-h6 font-weight-medium"},"Phase 3 (Analisa Kredit) 📄",-1),qt={class:"operation-wrapper"},Lt={class:"d-flex justify-space-between"},Rt=["href"],Et=["href"],zt=["onClick"],Bt=["onClick"],Ht=["onClick"],Gt=o("span",null,"Dokumen Penunjang Kredit / Jaminan 📄",-1),Jt={key:0},Wt={class:"operation-wrapper"},Xt={class:"d-flex justify-space-between"},Yt=["href"],Qt=["href"],Zt=["onClick"],$t=["onClick"],el=o("span",{style:{color:"red"}},"*",-1),tl=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),ll=o("span",{style:{color:"red"}},"*",-1),sl=o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1),al=o("span",{style:{color:"red"}},"*",-1),il=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),nl=o("span",{style:{color:"red"}},"*",-1),ol=o("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1),rl=o("span",{style:{color:"red"}},"*",-1),ul=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),dl=o("span",{style:{color:"red"}},"*",-1),pl=o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1),hl=o("span",{style:{color:"red"}},"*",-1),cl=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),ml=o("span",{style:{color:"red"}},"*",-1),fl=o("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1),gl=o("span",{style:{color:"red"}},"*",-1),yl=o("span",{class:"subtitle-1 text-center"},"Pilih Jenis Dokumen : ",-1),_l=o("span",{style:{color:"red"}},"*",-1),kl=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),Al=o("span",{style:{color:"red"}},"*",-1),bl=o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1),vl=o("span",{style:{color:"red"}},"*",-1),Sl=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),Pl=o("span",{style:{color:"red"}},"*",-1),Fl=o("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1),Dl=o("span",{style:{color:"red"}},"*",-1),xl=o("span",{class:"subtitle-1 text-center"},"Pilih Jenis Dokumen : ",-1);function Il(a,s,n,g,e,u){return d(),k(q,null,[t(le,{"model-value":e.overlay,class:"align-center justify-center"},{default:l(()=>[t(te,{color:"blue-lighten-3",indeterminate:"",size:41,width:5}),p(" Loading... ")]),_:1},8,["model-value"]),t(A,{color:"warning"},{default:l(()=>[t(j,{class:"py-2"},{default:l(()=>[t(V,{align:"center","no-gutters":""},{default:l(()=>[t(c,{cols:"auto"},{default:l(()=>[Ot]),_:1}),t(H),t(c,{cols:"auto"},{default:l(()=>[t(ee,{"max-width":"400"},{activator:l(({props:i})=>[t(P,y({icon:""},i,{color:"on-primary",variant:"text"}),{default:l(()=>[t(f,{color:"on-primary"},{default:l(()=>[p("mdi-help-circle-outline")]),_:1})]),_:2},1040)]),default:l(()=>[t(A,null,{default:l(()=>[t(j,{class:"text-h6 py-2 px-4"},{default:l(()=>[p(" Penjelasan Phase Analisa Kredit ")]),_:1}),t(T,{class:"py-2 px-4"},{default:l(()=>[p(" Tahap ini merupakan proses evaluasi mendalam terhadap kelayakan nasabah untuk menerima kredit. Analisa kredit mencakup penilaian aspek 5C: Character (karakter), Capacity (kapasitas), Capital (modal), Collateral (jaminan), dan Condition (kondisi). Tim analis kredit akan mengevaluasi data finansial, riwayat kredit, dan informasi lainnya untuk menentukan tingkat risiko dan kemampuan nasabah dalam memenuhi kewajiban kreditnya. ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(d(!0),k(q,null,G(n.data,(i,x)=>(d(),k("div",{key:x},[t(R,{density:"compact"},{default:l(()=>[t(S,null,{prepend:l(()=>[p(_(parseInt(i.isApprove)?"✅":"❌")+" ",1),t(f,{icon:"mdi-file"})]),append:l(()=>[o("div",qt,[o("div",Lt,[i.path!=="null"||i.link!==null?(d(),h(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[i.path!=="null"?(d(),k("a",y({key:0},r,{href:`${n.filePath}/${n.fileId}/${i.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Rt)):m("",!0),i.link!==null?(d(),k("a",y({key:1},r,{href:`${i.link}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Et)):m("",!0)]),_:2},1024)):m("",!0),i.path=="null"&&i.link==null&&e.userAccessPhase3&&parseInt(e.userAccessPhase3.canInsertData)==1?(d(),h(v,{key:1,location:"top",text:"Upload File / Link"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>u.openModal(1,i)}),[t(f,{size:"20",icon:"bx-upload",color:"blue"})],16,zt)]),_:2},1024)):m("",!0),e.userAccessPhase3&&parseInt(e.userAccessPhase3.canUpdateData)&&n.phase<4?(d(),h(v,{key:2,location:"top",text:"Edit File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>u.openModal(1,i)}),[t(f,{size:"20",icon:"bx-edit",color:"blue"})],16,Bt)]),_:2},1024)):m("",!0),e.userAccessPhase3&&parseInt(e.userAccessPhase3.canDeleteData)&&n.phase<4?(d(),h(v,{key:3,location:"top",text:"Hapus File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>n.deleteAttachment(i.id)}),[t(f,{size:"20",icon:"bx-trash",color:"red"})],16,Ht)]),_:2},1024)):m("",!0)])])]),default:l(()=>[t(w,null,{default:l(()=>[p(_(i.name),1)]),_:2},1024),i.note!=null?(d(),h(J,{key:0},{default:l(()=>[p(_(i.note),1)]),_:2},1024)):m("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1}),t(A,{color:"warning",class:"mt-2"},{default:l(()=>[t(j,null,{default:l(()=>[t(V,{class:"d-flex justify-space-between"},{default:l(()=>[t(c,{cols:"12",sm:"6",md:"8"},{default:l(()=>[Gt]),_:1}),e.userAccessPhase3&&parseInt(e.userAccessPhase3.canAppeal)==1&&n.phase<5?(d(),h(c,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:l(()=>[o("span",null,[t(P,{color:"primary",size:"small",class:"my-3 mx-3",onClick:s[0]||(s[0]=i=>u.openModal(2))},{default:l(()=>[p(" Tambah Data Lain ")]),_:1})])]),_:1})):m("",!0)]),_:1})]),_:1}),n.submission.length==0?(d(),k("div",Jt,[t(R,null,{default:l(()=>[t(S,null,{default:l(()=>[p("Belum ada file")]),_:1})]),_:1})])):m("",!0),u.sortedSubmission.length>0?(d(!0),k(q,{key:1},G(u.sortedSubmission,(i,x)=>(d(),k("div",{key:x},[t(R,{density:"compact"},{default:l(()=>[t(S,null,{append:l(()=>[o("div",Wt,[o("div",Xt,[i.path!=="null"||i.link!==null?(d(),h(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[i.path!==null?(d(),k("a",y({key:0},r,{href:`${n.filePath}/${n.fileId}/${i.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Yt)):m("",!0),i.link!==null?(d(),k("a",y({key:1},r,{href:`${i.link}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Qt)):m("",!0)]),_:2},1024)):m("",!0),e.userAccessPhase3&&parseInt(e.userAccessPhase3.canAppeal)&&n.phase<4?(d(),h(v,{key:1,location:"top",text:"Edit File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>u.openModal(3,i)}),[t(f,{size:"20",icon:"bx-edit",color:"blue"})],16,Zt)]),_:2},1024)):m("",!0),e.userAccessPhase3&&parseInt(e.userAccessPhase3.canAppeal)&&n.phase<4?(d(),h(v,{key:2,location:"top",text:"Hapus File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>u.deleteSubmission(i.id)}),[t(f,{size:"20",icon:"bx-trash",color:"red"})],16,$t)]),_:2},1024)):m("",!0)])])]),default:l(()=>[t(w,null,{default:l(()=>[p(_(i.name),1)]),_:2},1024),i.type==1?(d(),h(J,{key:0},{default:l(()=>[p(" Dokumen Penunjang Analisa ")]),_:1})):m("",!0),i.type==2?(d(),h(J,{key:1},{default:l(()=>[p(" Dokumen Jaminan ")]),_:1})):m("",!0)]),_:2},1024)]),_:2},1024)]))),128)):m("",!0)]),_:1}),t(N,{modelValue:e.isAnalisaKredit,"onUpdate:modelValue":s[9]||(s[9]=i=>e.isAnalisaKredit=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Data Attachment ")]),text:l(()=>[t(O,{onSubmit:M(u.insertAnalisa,["prevent"])},{default:l(()=>[t(V,null,{default:l(()=>[t(c,{md:"12",cols:"12"},{default:l(()=>[el,tl,t(F,{class:"my-3",modelValue:e.formAnalisaKredit.name,"onUpdate:modelValue":s[1]||(s[1]=i=>e.formAnalisaKredit.name=i),autofocus:"",disabled:"",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[ll,sl,t(B,{modelValue:e.selectedOption,"onUpdate:modelValue":s[2]||(s[2]=i=>e.selectedOption=i),mandatory:!0,row:""},{default:l(()=>[t(U,{label:"File",value:"file"}),t(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),e.selectedOption==="file"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[al,il,t(E,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[e.rules.required],onChange:s[3]||(s[3]=i=>{u.handleFileChange(i,this.formAnalisaKredit,"path"),e.formAnalisaKredit.link=null})},null,8,["rules"])]),_:1})):m("",!0),e.selectedOption==="link"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[nl,ol,t(F,{class:"my-3",modelValue:e.formAnalisaKredit.link,"onUpdate:modelValue":s[4]||(s[4]=i=>e.formAnalisaKredit.link=i),type:"link",hint:"Pastikan menggunakan https://",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1})):m("",!0),t(c,{md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:e.formAnalisaKredit.isSecret,"onUpdate:modelValue":s[5]||(s[5]=i=>e.formAnalisaKredit.isSecret=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:e.formAnalisaKredit.isApprove,"onUpdate:modelValue":s[6]||(s[6]=i=>e.formAnalisaKredit.isApprove=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[t(P,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:s[7]||(s[7]=i=>u.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[t(L,{modelValue:e.uploadProgress,"onUpdate:modelValue":s[8]||(s[8]=i=>e.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:e.isSubmission,"onUpdate:modelValue":s[17]||(s[17]=i=>e.isSubmission=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Tambah Data ")]),text:l(()=>[t(O,{onSubmit:M(u.insertSubmission,["prevent"])},{default:l(()=>[t(V,null,{default:l(()=>[t(c,{md:"12",cols:"12"},{default:l(()=>[rl,ul,t(F,{class:"my-3",modelValue:e.formSubmission.name,"onUpdate:modelValue":s[10]||(s[10]=i=>e.formSubmission.name=i),autofocus:"",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[dl,pl,t(B,{modelValue:e.selectedOption,"onUpdate:modelValue":s[11]||(s[11]=i=>e.selectedOption=i),mandatory:!0,row:""},{default:l(()=>[t(U,{label:"File",value:"file"}),t(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),e.selectedOption==="file"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[hl,cl,t(E,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[e.rules.required],onChange:s[12]||(s[12]=i=>{u.handleFileChange(i,this.formSubmission,"path"),e.formSubmission.link=null})},null,8,["rules"])]),_:1})):m("",!0),e.selectedOption==="link"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[ml,fl,t(F,{class:"my-3",modelValue:e.formSubmission.link,"onUpdate:modelValue":s[13]||(s[13]=i=>e.formSubmission.link=i),type:"link",hint:"Pastikan menggunakan https://",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1})):m("",!0),t(c,{md:"12",cols:"12"},{default:l(()=>[gl,yl,t(B,{modelValue:e.formSubmission.type,"onUpdate:modelValue":s[14]||(s[14]=i=>e.formSubmission.type=i),mandatory:!0,row:""},{default:l(()=>[t(U,{label:"Dokumen Penunjang Analisa",value:"1"}),t(U,{label:"Dokumen Jaminan",value:"2"})]),_:1},8,["modelValue"])]),_:1}),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[t(P,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:s[15]||(s[15]=i=>u.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[t(L,{modelValue:e.uploadProgress,"onUpdate:modelValue":s[16]||(s[16]=i=>e.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:e.isUpdateSubmission,"onUpdate:modelValue":s[25]||(s[25]=i=>e.isUpdateSubmission=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Update Data ")]),text:l(()=>[t(O,{onSubmit:M(u.updateSubmission,["prevent"])},{default:l(()=>[t(V,null,{default:l(()=>[t(c,{md:"12",cols:"12"},{default:l(()=>[_l,kl,t(F,{class:"my-3",modelValue:e.formSubmission.name,"onUpdate:modelValue":s[18]||(s[18]=i=>e.formSubmission.name=i),autofocus:"",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[Al,bl,t(B,{modelValue:e.selectedOption,"onUpdate:modelValue":s[19]||(s[19]=i=>e.selectedOption=i),mandatory:!0,row:""},{default:l(()=>[t(U,{label:"File",value:"file"}),t(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),e.selectedOption==="file"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[vl,Sl,t(E,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[e.rules.required],onChange:s[20]||(s[20]=i=>{u.handleFileChange(i,this.formSubmission,"path"),e.formSubmission.link=null})},null,8,["rules"])]),_:1})):m("",!0),e.selectedOption==="link"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[Pl,Fl,t(F,{class:"my-3",modelValue:e.formSubmission.link,"onUpdate:modelValue":s[21]||(s[21]=i=>e.formSubmission.link=i),type:"link",hint:"Pastikan menggunakan https://",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1})):m("",!0),t(c,{md:"12",cols:"12"},{default:l(()=>[Dl,xl,t(B,{modelValue:e.formSubmission.type,"onUpdate:modelValue":s[22]||(s[22]=i=>e.formSubmission.type=i),mandatory:!0,row:""},{default:l(()=>[t(U,{label:"Dokumen Penunjang Kredit",value:1}),t(U,{label:"Dokumen Jaminan",value:2})]),_:1},8,["modelValue"])]),_:1}),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[t(P,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:s[23]||(s[23]=i=>u.closeModal(3))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[t(L,{modelValue:e.uploadProgress,"onUpdate:modelValue":s[24]||(s[24]=i=>e.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const oe=Y(Mt,[["render",Il]]),Vl={name:"AttachmentCard4",props:{data:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},phase:{type:Number,required:!0}},watch:{selectedOption(a){a==="file"?this.formAnalisaKredit.link=null:a==="link"&&(this.formAnalisaKredit.path=null)}},data(){return{userAccessPhase4:null,selectedOption:"",overlay:!1,uploadProgress:null,rules:{required:a=>!!a||"Required"},isKomite:!1,formKomite:{id:null,name:"Analisa Kredit",file_id:this.fileId,path:"null",link:null,isApprove:0,isSecret:0}}},methods:{toSignature(a){if(a.path=="null"&&a.link==null){alert("Silahkan upload file terlebih dahulu");return}this.$router.push(`/u-pdfeditor/${a.id}`)},openModal(a,s=null){a==1&&(this.formKomite.id=s.id,this.formKomite.name=s.name,this.formKomite.isSecret=parseInt(s.isSecret),this.formKomite.isApprove=parseInt(s.isApprove),this.isKomite=!0)},closeModal(a){a==1&&(this.formKomite.id=null,this.formKomite.isSecret=0,this.formKomite.isApprove=0,this.isKomite=!1)},handleFileChange(a){const s=a.target.files[0];s&&["application/pdf"].includes(s.type)?this.formKomite.path=s:(this.isKomite=!1,this.$showToast("error","Error","Hanya file PDF yang diizinkan."),a.target.value=null)},async insertKomite(){try{this.overlay=!0;const a=new FormData;a.append("name",this.formKomite.name),a.append("isSecret",this.formKomite.isSecret),a.append("isApprove",this.formKomite.isApprove),a.append("file_id",this.formKomite.file_id),this.formKomite.path!="null"&&this.formKomite.path!=null?a.append("path",this.formKomite.path):this.formKomite.link!=null&&a.append("link",this.formKomite.link),a.append("_method","PUT");const s={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(e){console.error("Error calculating progress:",e)}},headers:{"Content-Type":"multipart/form-data"}},n=await I.post(`/user/edit-attach/${this.formKomite.id}`,a,s);n.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(a){this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}}},mounted(){this.userAccessPhase4=this.userAccess[4]}},wl=o("span",{class:"text-h6 font-weight-medium"},"Phase 4 (KOMITE) 📄",-1),Tl={class:"operation-wrapper"},Cl={class:"d-flex justify-space-between"},Ul=["href"],Kl=["href"],Nl=["onClick"],jl=["onClick"],Ml=["onClick"],Ol=["onClick"],ql=o("span",{style:{color:"red"}},"*",-1),Ll=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),Rl=o("span",{style:{color:"red"}},"*",-1),El=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1);function zl(a,s,n,g,e,u){return d(),k(q,null,[t(le,{"model-value":e.overlay,class:"align-center justify-center"},{default:l(()=>[t(te,{color:"blue-lighten-3",indeterminate:"",size:41,width:5}),p(" Loading... ")]),_:1},8,["model-value"]),t(A,{color:"warning"},{default:l(()=>[t(j,{class:"py-2"},{default:l(()=>[t(V,{align:"center","no-gutters":""},{default:l(()=>[t(c,{cols:"auto"},{default:l(()=>[wl]),_:1}),t(H),t(c,{cols:"auto"},{default:l(()=>[t(ee,{"max-width":"400"},{activator:l(({props:i})=>[t(P,y({icon:""},i,{color:"on-primary",variant:"text"}),{default:l(()=>[t(f,{color:"on-primary"},{default:l(()=>[p("mdi-help-circle-outline")]),_:1})]),_:2},1040)]),default:l(()=>[t(A,null,{default:l(()=>[t(j,{class:"text-h6 py-2 px-4"},{default:l(()=>[p(" Penjelasan Phase Komite ")]),_:1}),t(T,{class:"py-2 px-4"},{default:l(()=>[p(" Tahap ini merupakan proses pengambilan keputusan akhir terkait pengajuan kredit. Komite Kredit akan memberikan keputusan apakah pengajuan kredit disetujui, ditolak, atau memerlukan informasi tambahan. Keputusan diambil berdasarkan pertimbangan risiko, kebijakan kredit bank, dan potensi keuntungan. Komite juga dapat memberikan rekomendasi terkait syarat dan ketentuan kredit jika disetujui. ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(d(!0),k(q,null,G(n.data,(i,x)=>(d(),k("div",{key:x},[t(R,{density:"compact"},{default:l(()=>[t(S,null,{prepend:l(()=>[p(_(parseInt(i.isApprove)?"✅":"❌")+" ",1),t(f,{icon:"mdi-file"})]),append:l(()=>[o("div",Tl,[o("div",Cl,[i.path!=="null"||i.link!==null?(d(),h(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[i.path!=="null"?(d(),k("a",y({key:0},r,{href:`${n.filePath}/${n.fileId}/${i.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Ul)):m("",!0),i.link!==null?(d(),k("a",y({key:1},r,{href:`${i.link}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Kl)):m("",!0)]),_:2},1024)):m("",!0),i.path=="null"&&i.link==null&&e.userAccessPhase4&&parseInt(e.userAccessPhase4.canInsertData)==1?(d(),h(v,{key:1,location:"top",text:"Upload File / Link"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>u.openModal(1,i)}),[t(f,{size:"20",icon:"bx-upload",color:"blue"})],16,Nl)]),_:2},1024)):m("",!0),e.userAccessPhase4&&parseInt(e.userAccessPhase4.canUpdateData)&&n.phase<5?(d(),h(v,{key:2,location:"top",text:"Edit File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>u.openModal(1,i)}),[t(f,{size:"20",icon:"bx-edit",color:"blue"})],16,jl)]),_:2},1024)):m("",!0),e.userAccessPhase4&&parseInt(e.userAccessPhase4.canApprove)&&n.phase<5?(d(),h(v,{key:3,location:"top",text:"Tanda Tangan File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>u.toSignature(i)}),[t(f,{size:"20",icon:"bx-pen",color:"blue"})],16,Ml)]),_:2},1024)):m("",!0),e.userAccessPhase4&&parseInt(e.userAccessPhase4.canDeleteData)&&n.phase<5?(d(),h(v,{key:4,location:"top",text:"Hapus File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>n.deleteAttachment(i.id)}),[t(f,{size:"20",icon:"bx-trash",color:"red"})],16,Ol)]),_:2},1024)):m("",!0)])])]),default:l(()=>[t(w,null,{default:l(()=>[p(_(i.name),1)]),_:2},1024),i.note!=null?(d(),h(J,{key:0},{default:l(()=>[p(_(i.note),1)]),_:2},1024)):m("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1}),t(N,{modelValue:e.isKomite,"onUpdate:modelValue":s[6]||(s[6]=i=>e.isKomite=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Data Attachment ")]),text:l(()=>[t(O,{onSubmit:M(u.insertKomite,["prevent"])},{default:l(()=>[t(V,null,{default:l(()=>[t(c,{md:"12",cols:"12"},{default:l(()=>[ql,Ll,t(F,{class:"my-3",modelValue:e.formKomite.name,"onUpdate:modelValue":s[0]||(s[0]=i=>e.formKomite.name=i),autofocus:"",disabled:"",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[Rl,El,t(E,{class:"my-3",accept:"application/pdf",placeholder:"Pick an image",rules:[e.rules.required],onChange:s[1]||(s[1]=i=>u.handleFileChange(i))},null,8,["rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:e.formKomite.isSecret,"onUpdate:modelValue":s[2]||(s[2]=i=>e.formKomite.isSecret=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(X,{thickness:5,class:"border-opacity-75",color:"info"}),t(c,{md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:e.formKomite.isApprove,"onUpdate:modelValue":s[3]||(s[3]=i=>e.formKomite.isApprove=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[t(P,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:s[4]||(s[4]=i=>u.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[t(L,{modelValue:e.uploadProgress,"onUpdate:modelValue":s[5]||(s[5]=i=>e.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const re=Y(Vl,[["render",zl]]),Bl={name:"AttachmentOperation",props:{data:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},phase:{type:Number,required:!0}},data(){return{userAccessPhase5:null,overlay:!1,uploadProgress:null,rules:{required:a=>!!a||"Required"},isSp3k:!1,formsp3k:{id:null,name:"SP3K",file_id:this.fileId,path:null,isApprove:0,isSecret:0}}},methods:{openModal(a,s=null){a==1&&(this.formsp3k.id=s.id,this.formsp3k.name=s.name,this.formsp3k.isSecret=parseInt(s.isSecret),this.formsp3k.isApprove=parseInt(s.isApprove),this.isSp3k=!0)},closeModal(a){a==1&&(this.formsp3k.id=null,this.formsp3k.isSecret=0,this.formsp3k.path=null,this.formsp3k.isApprove=0,this.isSp3k=!1)},handleFileChange(a){const s=a.target.files[0];s&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(s.type)?this.formsp3k.path=s:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),a.target.value=null)},async insertSpk3k(){try{this.overlay=!0;const a=new FormData;a.append("name",this.formsp3k.name),a.append("path",this.formsp3k.path),a.append("isSecret",this.formsp3k.isSecret),a.append("isApprove",this.formsp3k.isApprove),a.append("file_id",this.formsp3k.file_id),a.append("_method","PUT");const s={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(e){console.error("Error calculating progress:",e)}},headers:{"Content-Type":"multipart/form-data"}},n=await I.post(`/user/edit-attach/${this.formsp3k.id}`,a,s);n.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(a){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}}},mounted(){this.userAccessPhase5=this.userAccess[5]}},Hl=o("span",{class:"text-h6 font-weight-medium"},"Phase Operation 📄",-1),Gl={class:"operation-wrapper"},Jl={class:"d-flex justify-space-between"},Wl=["href"],Xl=["onClick"],Yl=["onClick"],Ql=["onClick"],Zl=o("span",{style:{color:"red"}},"*",-1),$l=o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),es=o("span",{style:{color:"red"}},"*",-1),ts=o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1);function ls(a,s,n,g,e,u){return d(),k(q,null,[t(le,{"model-value":e.overlay,class:"align-center justify-center"},{default:l(()=>[t(te,{color:"blue-lighten-3",indeterminate:"",size:41,width:5}),p(" Loading... ")]),_:1},8,["model-value"]),t(A,{color:"warning"},{default:l(()=>[t(j,{class:"py-2"},{default:l(()=>[t(V,{align:"center","no-gutters":""},{default:l(()=>[t(c,{cols:"auto"},{default:l(()=>[Hl]),_:1}),t(H),t(c,{cols:"auto"},{default:l(()=>[t(ee,{"max-width":"400"},{activator:l(({props:i})=>[t(P,y({icon:""},i,{color:"on-primary",variant:"text"}),{default:l(()=>[t(f,{color:"on-primary"},{default:l(()=>[p("mdi-help-circle-outline")]),_:1})]),_:2},1040)]),default:l(()=>[t(A,null,{default:l(()=>[t(j,{class:"text-h6 py-2 px-4"},{default:l(()=>[p(" Penjelasan Phase Operation ")]),_:1}),t(T,{class:"py-2 px-4"},{default:l(()=>[p(" Tahap Operation merupakan fase implementasi dan pengelolaan kredit setelah disetujui. Tujuan utama tahap ini adalah memastikan kredit berjalan sesuai dengan ketentuan yang disepakati dan meminimalkan risiko operasional. ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(d(!0),k(q,null,G(n.data,(i,x)=>(d(),k("div",{key:x},[t(R,{density:"compact"},{default:l(()=>[t(S,null,{prepend:l(()=>[p(_(parseInt(i.isApprove)?"✅":"❌")+" ",1),t(f,{icon:"mdi-file"})]),append:l(()=>[o("div",Gl,[o("div",Jl,[i.path!=="null"?(d(),h(v,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:r})=>[o("a",y(r,{href:`${n.filePath}/${n.fileId}/${i.path}`,target:"_blank",rel:"noopener noreferrer"}),[o("button",null,[t(f,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Wl)]),_:2},1024)):m("",!0),i.path==="null"&&e.userAccessPhase5&&parseInt(e.userAccessPhase5.canInsertData)==1?(d(),h(v,{key:1,location:"top",text:"Upload File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>u.openModal(1,i)}),[t(f,{size:"20",icon:"bx-upload",color:"blue"})],16,Xl)]),_:2},1024)):m("",!0),e.userAccessPhase5&&parseInt(e.userAccessPhase5.canUpdateData)&&n.phase<6?(d(),h(v,{key:2,location:"top",text:"Edit File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>u.openModal(1,i)}),[t(f,{size:"20",icon:"bx-edit",color:"blue"})],16,Yl)]),_:2},1024)):m("",!0),e.userAccessPhase5&&parseInt(e.userAccessPhase5.canDeleteData)&&n.phase<6?(d(),h(v,{key:3,location:"top",text:"Hapus File"},{activator:l(({props:r})=>[o("button",y(r,{onClick:C=>n.deleteAttachment(i.id)}),[t(f,{size:"20",icon:"bx-trash",color:"red"})],16,Ql)]),_:2},1024)):m("",!0)])])]),default:l(()=>[t(w,null,{default:l(()=>[p(_(i.name),1)]),_:2},1024),i.note!=null?(d(),h(J,{key:0},{default:l(()=>[p(_(i.note),1)]),_:2},1024)):m("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1}),t(N,{modelValue:e.isSp3k,"onUpdate:modelValue":s[6]||(s[6]=i=>e.isSp3k=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Data Attachment ")]),text:l(()=>[t(O,{onSubmit:M(u.insertSpk3k,["prevent"])},{default:l(()=>[t(V,null,{default:l(()=>[t(c,{md:"12",cols:"12"},{default:l(()=>[Zl,$l,t(F,{class:"my-3",modelValue:e.formsp3k.name,"onUpdate:modelValue":s[0]||(s[0]=i=>e.formsp3k.name=i),autofocus:"",disabled:"",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[es,ts,t(E,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[e.rules.required],onChange:s[1]||(s[1]=i=>u.handleFileChange(i))},null,8,["rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:e.formsp3k.isSecret,"onUpdate:modelValue":s[2]||(s[2]=i=>e.formsp3k.isSecret=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:e.formsp3k.isApprove,"onUpdate:modelValue":s[3]||(s[3]=i=>e.formsp3k.isApprove=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[t(P,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:s[4]||(s[4]=i=>u.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[t(L,{modelValue:e.uploadProgress,"onUpdate:modelValue":s[5]||(s[5]=i=>e.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const ss=Y(Bl,[["render",ls]]);const as={components:{AttachmentCard1:Ke,AttachmentCard2:jt,AttachmentCard3:oe,attachmentCard3:oe,AttachmentCard4:re,attachmentCard4:re,attachmentOperation:ss},name:"Phase",props:{phase1Attachments:{type:Object,required:!0},phase2Attachments:{type:Object,required:!0},phase3Attachments:{type:Object,required:!0},phase4Attachments:{type:Object,required:!0},phase5Attachments:{type:Object,required:!0},userAccess:{type:Object,required:!0},dataFile:{type:Object,required:!0},userData:{type:Object,required:!0},dataNote:{type:Object,required:!0},updateDataNote:{type:Object,required:!0},insertNote:{type:Function,required:!0},changeApproval:{type:Function,required:!0},formatDate:{type:Function,required:!0},openModal:{type:Function,required:!0},deleteAttachment:{type:Function,required:!0},deleteNote:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},step:{type:Function,required:!0},fileId:{type:String,required:!0},resetNote:{type:Function,required:!0},notePhase1:{type:Object,required:!0},notePhase2:{type:Object,required:!0},notePhase3:{type:Object,required:!0},notePhase4:{type:Object,required:!0},modalNote:{type:Function,required:!0},submissions:{type:Object,required:!0}},data(){return{userAccessNow:null,filePath:this.$filePath,isUpdateNote:!1,currentPage:1,itemsPerPage:10,otherButtons:[{id:6,name:"Data Durasi Waktu"},{id:7,name:"Data Aktivitas"},{id:8,name:"Data Riwayat Persetujuan"},{id:10,name:"Data Riwayat Dokumen"}]}},computed:{paginatedNotes(){const a=(this.currentPage-1)*this.itemsPerPage,s=a+this.itemsPerPage;return this.dataFile.notes.slice(a,s)},isAccountOfficer(){return["Account Officer","AO","ao","account officer","Account Officer Executive","account officer executive","Account Officer / Executive AO","AO / RO"].includes(this.userData.position.name)}},methods:{getStatusColor(a){return{1:"success",2:"warning",3:"error"}[a]||"default"},getStatusText(a){return{1:"Approved",2:"Pending",3:"Rejected"}[a]||"Unknown"},async generateReport(a){try{this.overlay=!0;const s=await I.get(`/user/generatereport/${a}`,{responseType:"blob"});if(s.status==200){this.overlay=!1;const n=window.URL.createObjectURL(new Blob([s.data])),g=document.createElement("a");g.href=n,g.setAttribute("download",`${this.dataFile.name}.pdf`),document.body.appendChild(g),g.click(),document.body.removeChild(g),this.$showToast("success","Berhasil","File berhasil diunduh")}else this.overlay=!1,this.$showToast("error","Error","Gagal mengunduh file")}catch(s){console.log(s),this.overlay=!1,this.$showToast("error","Error","Terjadi kesalahan saat mengunduh file")}},onPageChange(a){this.currentPage=a},formatInput(a){return a=a.replace(/\D/g,""),a=a.replace(/\B(?=(\d{3})+(?!\d))/g,","),a}},mounted(){this.userAccessNow=this.userAccess[this.dataFile.phase]}},se=a=>(ue("data-v-da0612fb"),a=a(),de(),a),is=se(()=>o("span",null,"Detail",-1)),ns=se(()=>o("span",null,"Alasan Ditolak : ",-1)),os=se(()=>o("span",null,"Informasi Umum ℹ️",-1)),rs=se(()=>o("span",null,"Dokumen Pendukung 📄",-1)),us={class:"mb-5"},ds={class:"mb-5"},ps={class:"mb-5"},hs={class:"mb-5"},cs={class:"mb-5"},ms={class:"d-flex flex-wrap justify-center"},fs={class:"chip-text"},gs={class:"button-text"},ys=se(()=>o("span",null,"Catatan 📃",-1)),_s={class:"comment-content"},ks={class:"pl-2"};function As(a,s,n,g,e,u){const i=W("AttachmentCard1"),x=W("AttachmentCard2"),r=W("attachmentCard3"),C=W("attachmentCard4"),pe=W("attachmentOperation"),ne=W("v-list-item-icon");return d(),h(A,{color:"backgroundCard","min-width":"100%",class:"v-card-custom"},{default:l(()=>[t(j,{class:"text-2xl font-weight-bold d-flex flex-column align-center"},{default:l(()=>[is,t(ie,{color:u.getStatusColor(n.dataFile.isApproved),onClick:s[0]||(s[0]=D=>!u.isAccountOfficer&&n.openModal(9)),class:ye({"mt-2":!0,clickable:!u.isAccountOfficer}),small:""},{default:l(()=>[p(_(u.getStatusText(n.dataFile.isApproved)),1)]),_:1},8,["color","class"])]),_:1}),n.dataFile&&parseInt(n.dataFile.phase)==6?(d(),h(T,{key:0,class:"font-weight-bold d-flex justify-end"},{default:l(()=>[t(P,{color:"primary",onClick:s[1]||(s[1]=D=>u.generateReport(n.fileId)),size:"x-small"},{default:l(()=>[p(" Generate Laporan ")]),_:1})]),_:1})):m("",!0),n.dataFile.reasonRejected!=null?(d(),h(T,{key:1},{default:l(()=>[t(ke,{type:"error",border:"left",class:"mt-2 mb-0"},{default:l(()=>[ns,o("strong",null,_(n.dataFile&&n.dataFile.reasonRejected),1)]),_:1})]),_:1})):m("",!0),t(T,null,{default:l(()=>[t(Ae,{fluid:""},{default:l(()=>[t(V,null,{default:l(()=>[t(c,{cols:"12",md:"6"},{default:l(()=>[t(A,{class:"mb-5"},{default:l(()=>[t(j,null,{default:l(()=>[os,t(H),e.userAccessNow&&parseInt(e.userAccessNow.canUpdateData)==1?(d(),h(P,{key:0,color:"primary",size:"small",class:"my-3 mx-3",onClick:s[2]||(s[2]=D=>n.openModal(4))},{default:l(()=>[p(" Edit Data ")]),_:1})):m("",!0)]),_:1}),t(T,null,{default:l(()=>[t(R,{density:"compact",lines:"two"},{default:l(()=>[t(S,null,{default:l(()=>[t(w,null,{default:l(()=>[p(" Nama Pemohon ")]),_:1}),t(S,null,{default:l(()=>[o("strong",null,_(n.dataFile.name),1)]),_:1})]),_:1}),t(S,null,{default:l(()=>[t(w,null,{default:l(()=>[p(" NIK Pemohon ")]),_:1}),t(S,null,{default:l(()=>[o("strong",null,_(n.dataFile.nik_pemohon),1)]),_:1})]),_:1}),t(S,null,{default:l(()=>[t(w,null,{default:l(()=>[p(" Alamat Pemohon ")]),_:1}),t(S,null,{default:l(()=>[o("strong",null,_(n.dataFile.address),1)]),_:1})]),_:1}),t(S,null,{default:l(()=>[t(w,null,{default:l(()=>[p(" No. HP Pemohon")]),_:1}),t(S,null,{default:l(()=>[o("strong",null,_(n.dataFile.no_hp),1)]),_:1})]),_:1}),t(S,null,{default:l(()=>[t(w,null,{default:l(()=>[p(" Jumlah Plafon")]),_:1}),t(S,null,{default:l(()=>[o("strong",null," Rp "+_(u.formatInput(n.dataFile.plafon)),1)]),_:1})]),_:1}),n.dataFile.nik_pasangan?(d(),h(S,{key:0},{default:l(()=>[t(w,null,{default:l(()=>[p(" NIK Pasangan")]),_:1}),t(S,null,{default:l(()=>[o("strong",null,_(n.dataFile.nik_pasangan),1)]),_:1})]),_:1})):m("",!0),n.dataFile.nik_jaminan?(d(),h(S,{key:1},{default:l(()=>[t(w,null,{default:l(()=>[p(" NIK atas nama Jaminan")]),_:1}),t(S,null,{default:l(()=>[o("strong",null,_(n.dataFile.nik_jaminan),1)]),_:1})]),_:1})):m("",!0),t(S,null,{default:l(()=>[t(w,null,{default:l(()=>[p(" Jenis Usaha")]),_:1}),t(S,null,{default:l(()=>[o("strong",null,_(n.dataFile.type_bussiness),1)]),_:1})]),_:1}),t(S,null,{default:l(()=>[t(w,null,{default:l(()=>[p(" Deskripsi Usaha")]),_:1}),t(S,null,{default:l(()=>[o("strong",null,_(n.dataFile.desc_bussiness),1)]),_:1})]),_:1}),n.dataFile.order_source?(d(),h(S,{key:2},{default:l(()=>[t(w,null,{default:l(()=>[p(" Sumber Order")]),_:1}),t(S,null,{default:l(()=>[o("strong",null,_(n.dataFile.order_source),1)]),_:1})]),_:1})):m("",!0),n.dataFile.status_kredit?(d(),h(S,{key:3},{default:l(()=>[t(w,null,{default:l(()=>[p(" Status Kredit")]),_:1}),t(S,null,{default:l(()=>[o("strong",null,_(n.dataFile.status_kredit),1)]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(c,{cols:"12",md:"6"},{default:l(()=>[t(A,null,{default:l(()=>[t(j,null,{default:l(()=>[rs,t(H),e.userAccessNow&&parseInt(e.userAccessNow.canInsertData)==1?(d(),h(P,{key:0,color:"primary",size:"small",class:"my-3 mx-3",onClick:s[3]||(s[3]=D=>n.openModal(1))},{default:l(()=>[p(" Tambah Data Lain ")]),_:1})):m("",!0)]),_:1}),t(T,null,{default:l(()=>[o("div",us,[t(i,{data:n.phase1Attachments,fileId:parseInt(n.dataFile.id),filePath:e.filePath,userAccess:n.userAccess,deleteAttachment:n.deleteAttachment,openModal:n.openModal,phase:parseInt(n.dataFile.phase)},null,8,["data","fileId","filePath","userAccess","deleteAttachment","openModal","phase"])]),o("div",ds,[parseInt(n.dataFile.phase)>1?(d(),h(x,{key:0,data:n.phase2Attachments,fileId:parseInt(n.dataFile.id),filePath:e.filePath,userAccess:n.userAccess,deleteAttachment:n.deleteAttachment,getDetailFile:n.getDetailFile,phase:parseInt(n.dataFile.phase)},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile","phase"])):m("",!0)]),o("div",ps,[parseInt(n.dataFile.phase)>2?(d(),h(r,{key:0,data:n.phase3Attachments,fileId:parseInt(n.dataFile.id),filePath:e.filePath,userAccess:n.userAccess,deleteAttachment:n.deleteAttachment,getDetailFile:n.getDetailFile,submission:n.submissions,phase:parseInt(n.dataFile.phase)},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile","submission","phase"])):m("",!0)]),o("div",hs,[parseInt(n.dataFile.phase)>3?(d(),h(C,{key:0,data:n.phase4Attachments,fileId:parseInt(n.dataFile.id),filePath:e.filePath,userAccess:n.userAccess,deleteAttachment:n.deleteAttachment,getDetailFile:n.getDetailFile,phase:parseInt(n.dataFile.phase)},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile","phase"])):m("",!0)]),o("div",cs,[parseInt(n.dataFile.phase)>4?(d(),h(pe,{key:0,data:n.phase5Attachments,fileId:parseInt(n.dataFile.id),filePath:e.filePath,userAccess:n.userAccess,deleteAttachment:n.deleteAttachment,getDetailFile:n.getDetailFile,phase:parseInt(n.dataFile.phase)},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile","phase"])):m("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n.dataFile&&parseInt(n.dataFile.phase)<6?(d(),h(T,{key:2,class:"pa-4"},{default:l(()=>[t(A,null,{default:l(()=>[t(T,{class:"d-flex justify-center text-center pa-3 font-weight-bold"},{default:l(()=>[p(" Status Approval Phase ✅ ")]),_:1}),t(T,{class:"pa-3"},{default:l(()=>[o("div",ms,[(d(!0),k(q,null,G(n.dataFile.approvals,(D,Z)=>(d(),k(q,{key:Z},[n.dataFile.phase==D.phase?(d(),h(ie,{key:0,class:"ma-2 pa-2",color:D.approved==1?"success":"error",onClick:$=>n.changeApproval(D.id)},{default:l(()=>[o("span",fs,_(D.user.name)+" - "+_(D.user.position.name),1)]),_:2},1032,["color","onClick"])):m("",!0)],64))),128))])]),_:1})]),_:1})]),_:1})):m("",!0),t(T,null,{default:l(()=>[t(A,{outlined:"",class:"p-2"},{default:l(()=>[t(j,{class:"d-flex justify-center"},{default:l(()=>[p(" Lain - lain 🔹 ")]),_:1}),t(T,{class:"d-flex flex-wrap justify-center"},{default:l(()=>[(d(!0),k(q,null,G(e.otherButtons,(D,Z)=>(d(),h(P,{key:Z,variant:"outlined",class:"ma-2 mobile-btn",onClick:$=>n.openModal(D.id)},{default:l(()=>[o("span",gs,_(D.name),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),t(X),t(T,null,{default:l(()=>[t(A,{outlined:"",class:"py-2 px-4"},{default:l(()=>[t(j,null,{default:l(()=>[ys]),_:1}),t(T,null,{default:l(()=>[t(O,{onSubmit:M(n.insertNote,["prevent"])},{default:l(()=>[t(ae,{outlined:"",rows:"2",placeholder:"Tambahkan catatan disini",modelValue:n.dataNote.note,"onUpdate:modelValue":s[4]||(s[4]=D=>n.dataNote.note=D)},null,8,["modelValue"]),t(P,{color:"primary",type:"submit",block:"",class:"mt-2"},{default:l(()=>[t(f,null,{default:l(()=>[p("mdi-note-plus")]),_:1}),p(" Tambah Catatan ")]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1}),t(A,{outlined:"",class:"my-4"},{default:l(()=>[t(T,{class:"d-flex justify-center text-center pa-3 font-weight-bold"},{default:l(()=>[p(" Catatan Berdasarkan Fase ")]),_:1}),u.paginatedNotes.length>0?(d(),h(T,{key:0},{default:l(()=>[(d(!0),k(q,null,G(u.paginatedNotes,(D,Z)=>(d(),k("div",{key:Z,class:"user-comment"},[o("div",_s,[o("p",ks,_(D.note),1),t(V,{class:"justify-space-between align-center py-2 px-2"},{default:l(()=>[o("small",null,[o("strong",null,_(D.user.name)+" - "+_(D.user.position.name),1)]),o("small",null,_(n.formatDate(D.created_at)),1),t(H),n.userData.id==D.user_id?(d(),h(_e,{key:0,transition:"scale-transition",bottom:"",left:""},{activator:l(({props:$})=>[t(P,y({icon:""},$,{variant:"text"}),{default:l(()=>[t(f,null,{default:l(()=>[p("mdi-dots-vertical")]),_:1})]),_:2},1040)]),default:l(()=>[t(R,null,{default:l(()=>[t(S,{color:"primary",onClick:$=>n.openModal(3,D)},{default:l(()=>[t(ne,null,{default:l(()=>[t(f,null,{default:l(()=>[p("mdi-pencil")]),_:1})]),_:1}),t(w,null,{default:l(()=>[p("Edit")]),_:1})]),_:2},1032,["onClick"]),t(S,{color:"error",onClick:$=>n.deleteNote(D.id)},{default:l(()=>[t(ne,null,{default:l(()=>[t(f,null,{default:l(()=>[p("mdi-delete")]),_:1})]),_:1}),t(w,null,{default:l(()=>[p("Hapus")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):m("",!0)]),_:2},1024)])]))),128)),t(ce,{modelValue:e.currentPage,"onUpdate:modelValue":s[5]||(s[5]=D=>e.currentPage=D),length:Math.ceil(n.dataFile.notes.length/e.itemsPerPage),onInput:u.onPageChange},null,8,["modelValue","length","onInput"])]),_:1})):(d(),h(T,{key:1},{default:l(()=>[p(" Kosong ")]),_:1}))]),_:1})]),_:1}),e.userAccessNow&&parseInt(e.userAccessNow.canApprove)&&parseInt(n.dataFile.isApproved)!=3?(d(),h(he,{key:3},{default:l(()=>[t(c,{class:"d-flex justify-space-beetwen"},{default:l(()=>[n.dataFile&&parseInt(n.dataFile.phase)>1?(d(),h(P,{key:0,color:"info",text:"Prev Phase",variant:"tonal",onClick:s[6]||(s[6]=D=>n.step(n.fileId,"-"))})):m("",!0),t(H),n.dataFile&&parseInt(n.dataFile.phase)<5?(d(),h(P,{key:1,color:"info",text:"Next Phase",variant:"tonal",onClick:s[7]||(s[7]=D=>n.step(n.fileId,"next"))})):m("",!0),n.dataFile&&parseInt(n.dataFile.phase)==5?(d(),h(P,{key:2,color:"success",text:"Setujui",variant:"tonal",onClick:s[8]||(s[8]=D=>n.step(n.fileId,"next"))})):m("",!0)]),_:1})]),_:1})):m("",!0)]),_:1})}const bs=Y(as,[["render",As],["__scopeId","data-v-da0612fb"]]),vs={components:{phase:bs},data(){return{dataLoaded:!1,selectedOption:"",overlay:!1,isMobile:!1,userData:null,userAccess:{},fileId:this.$route.params.fileId,isShowPhase4:!1,isShowPhase5:!1,isShowTimers:!1,isShowHistory:!1,isShowApprovals:!1,isChangeStatusCredit:!1,isShowAttachment:!1,statusCreditList:[{value:"FRESH",title:"FRESH"},{value:"REPEAT ORDER",title:"REPEAT ORDER"},{value:"TOPUP",title:"TOPUP"}],nameFileList:[{value:"KTP Pemohon",title:"KTP Pemohon"},{value:"Kartu Keluarga",title:"Kartu Keluarga"},{value:"Jaminan SHM",title:"Jaminan SHM"},{value:"Foto Kunjungan",title:"Foto Kunjungan"},{value:"Foto WhatsApp",title:"Foto WhatsApp"},{value:"Buku Nikah",title:"Buku Nikah"},{value:"SHM",title:"Jaminan SHM"},{value:"BPKB",title:"Jaminan BPKB"},{value:"KTP Pasangan",title:"KTP Pasangan"},{value:"KTP Atas Nama Jaminan",title:"KTP Atas Nama Jaminan"},{value:"Resume SLIK",title:"Resume SLIK"},{value:"Detail SLIK",title:"Detail SLIK"},{value:"Detail SLIK Pasangan",title:"Detail SLIK Pasangan"},{value:"Detail SLIK Atas Nama jaminan",title:"Detail SLIK Atas Nama jaminan"},{value:"File Banding",title:"File Banding"},{value:"Analisa Awal Kredit AO",title:"Analisa Awal Kredit AO"},{value:"Analisa Kredit",title:"Analisa Kredit"},{value:"Lembar Pengesahan",title:"Lembar Pengesahan"},{value:"Rekomendasi Kepatuhan",title:"Rekomendasi Kepatuhan"},{value:"SP3K",title:"SP3K"},{value:"Notaris",title:"Notaris"},{value:"Lain-lain",title:"Lain-lain"}],changeStatus:{id:null,status:null,reasonRejected:null},stepperModel:0,isUpdateGeneralInfo:!1,generalInfo:{id:null,name:null,type_bussiness:null,desc_bussiness:null,order_source:null,status_kredit:null,plafon:null,nik_pemohon:null,nik_pasangan:null,nik_jaminan:null,address:null,no_hp:null},dataFile:{id:this.$route.params.fileId,user_id:null,phase:1,name:"",type_bussiness:"",desc_bussiness:"",order_source:"",status_kredit:"",nik_pemohon:null,nik_pasangan:null,nik_jaminan:null,address:null,no_hp:null,plafon:"0",surveyResult:"-",otsResult:"-",cekLingResult:"-",verTelResult:"-",creditScoring:"-",attachments:[],notes:[],approvals:[],phase_times:[],file_activities:[],reasonRejected:""},filePath:this.$filePath,timerHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Waktu Mulai",value:"startTime",sortable:!0},{text:"Waktu Selesai",value:"endTime",sortable:!0},{text:"Rentang Waktu",value:"timeDiff",sortable:!0}],attachmentHeaders:[{text:"Nama",value:"name",sortable:!0},{text:"Phase",value:"phase",sortable:!0},{text:"Waktu",value:"startTime",sortable:!0}],historyHeaders:[{text:"User",value:"user.name",sortable:!0},{text:"Aktivitas",value:"activity",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],approvalHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Nama",value:"user.name",sortable:!0},{text:"Status",value:"approved",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],isUpdateNote:!1,dataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},updateDataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},phaseNote:[],notesByPhase:{},isModalPhase:!1,insertAttch:!1,updateAttch:!1,rules:{required:a=>!!a||"Required"},uploadProgress:null,attachFile:{id:null,file_id:this.$route.params.fileId,phase:null,name:null,path:null,note:null,link:null,isSecret:0,isApprove:1},orderList:[{value:"AO SENDIRI",title:"AO SENDIRI"},{value:"C. SERVIS / KANTOR",title:"C. SERVIS / KANTOR"},{value:"NASABAH",title:"NASABAH"},{value:"CROSS SALING DIVISI",title:"CROSS SALING DIVISI"},{value:"AGEN MGM / LAINNYA",title:"AGEN MGM / LAINNYA"},{value:"WEBSITE / WA / SOSMED",title:"WEBSITE / WA/ SOSMED"},{value:"TEAM BUSSINES",title:"TEAM BUSSINES"},{value:"PROGRAM KKB NEW",title:"PROGRAM KKB NEW"},{value:"PROGRAM KKB SECOND",title:"PROGRAM KKB SECOND"},{value:"CENTRO",title:"CENTRO"}],notePhase1:[],notePhase2:[],notePhase3:[],notePhase4:[],currentPage:1,itemsPerPage:10,isDataPhase3:!1,dataPhase3:{surveyResult:""},attachments:[],fileSubmissions:[],dataAttachPhase1:[],dataAttachPhase2:[],dataAttachPhase3:[],dataAttachPhase4:[],dataAttachPhase5:[]}},computed:{paginatedNotes(){const a=(this.currentPage-1)*this.itemsPerPage,s=a+this.itemsPerPage;return this.dataFile.notes.slice(a,s)}},methods:{async updateStatusCredit(){try{this.overlay=!0;const a=new FormData;if(a.append("id",this.fileId),a.append("status",this.changeStatus.status),this.changeStatus.status=="3"){if(this.changeStatus.reasonRejected==null){this.overlay=!1,this.closeModal(9),this.$showToast("error","Sorry","Alasan Penolakan wajib diisi");return}a.append("reasonRejected",this.changeStatus.reasonRejected)}const s=await I.post("/user/change-status",a);s.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.closeModal(9),this.$showToast("success","Success",s.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.closeModal(9),this.$showToast("error","Sorry",s.data.message))}catch(a){this.overlay=!1,this.closeModal(9),this.$showToast("error","Sorry",a.response.data.message)}},calculateTimeDiff(a,s){let n=new Date(a),e=(s?new Date(s):new Date).valueOf()-n.valueOf(),u=Math.floor(e/1e3/60),i=Math.floor(u/60),x=u%60;return`${i} jam ${x} menit`},formatFileId(a){return Array.isArray(a)?a.join(", "):a},async updatePhase3(){try{this.overlay=!0;const a=new FormData;a.append("surveyResult",this.dataPhase3.surveyResult),a.append("_method","PUT");const s=await I.post(`/user/survey-credit/${this.fileId}`,a);s.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("success","Success",s.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("error","Sorry",s.data.message))}catch(a){this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},onPageChange(a){this.currentPage=a},formatInputPlafon(a){let s=a.target.value;s=s.replace(/\D/g,""),s=s.replace(/\B(?=(\d{3})+(?!\d))/g,","),a.target.value=s},formatDate(a){return new Date(a).toLocaleString("id-ID")},resetNote(){this.dataNote={file_id:this.$route.params.fileId,user_id:null,phase:null,note:null,isRead:null}},checkMobile(){this.isMobile=window.innerWidth<728},formatInput(a){return a=a.replace(/\D/g,""),a=a.replace(/\B(?=(\d{3})+(?!\d))/g,","),a},async step(a,s){try{if(s=="next"){if(this.dataFile.phase===3&&this.fileSubmissions.length===0){if(!window.confirm("Tidak ada file Pendukung yang diajukan. Apakah Anda yakin melanjutkan ke tahap selanjutnya?"))return}else if(!window.confirm("Apakah Anda yakin melanjutkan ke tahap selanjutnya"))return;this.overlay=!0;const n=new FormData;n.append("id",a),n.append("type",s),n.append("_method","POST");const g=await I.post("/user/change-phase-approve",n);g.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",g.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",g.data.data.message))}else{if(!window.confirm("Apakah Anda yakin Kembali ke phase sebelumnya"))return;this.overlay=!0;const g=new FormData;g.append("id",a),g.append("type",s),g.append("_method","POST");const e=await I.post("/user/change-phase-approve",g);e.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",e.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",e.data.message))}}catch(n){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.response.data.message)}},async getDetailFile(a){try{this.overlay=!0;const s=await I.get(`/user/credit/${a}`);if(s.status===200){this.dataFile=s.data.data.file,this.attachments=this.dataFile.attachments.filter(n=>n.path&&n.path!=="null"||n.link&&n.link!=="null"),this.fileSubmissions=this.dataFile.filesubmissions,this.userAccess=s.data.data.userAccess,this.dataAttachPhase1=s.data.data.file.attachments.filter(n=>n.phase==1),this.dataAttachPhase2=s.data.data.file.attachments.filter(n=>n.phase==2),this.dataAttachPhase3=s.data.data.file.attachments.filter(n=>n.phase==3),this.dataAttachPhase4=s.data.data.file.attachments.filter(n=>n.phase==4),this.dataAttachPhase5=s.data.data.file.attachments.filter(n=>n.phase==5),this.dataFile.phase=parseInt(this.dataFile.phase),this.isShowPhase4=!(parseInt(this.dataFile.plafon)<25e6),this.dataFile.phase==5&&(this.isShowPhase5=!0),parseInt(this.dataFile.phase)==5?this.stepperModel=parseInt(this.dataFile.phase)-1:this.stepperModel=parseInt(this.dataFile.phase)-1,this.generalInfo.id=this.dataFile.id,this.generalInfo.name=this.dataFile.name,this.generalInfo.type_bussiness=this.dataFile.type_bussiness,this.generalInfo.desc_bussiness=this.dataFile.desc_bussiness,this.generalInfo.order_source=this.dataFile.order_source,this.generalInfo.status_kredit=this.dataFile.status_kredit,this.generalInfo.plafon=this.dataFile.plafon,this.generalInfo.nik_pemohon=this.dataFile.nik_pemohon,this.generalInfo.nik_pasangan=this.dataFile.nik_pasangan,this.generalInfo.nik_jaminan=this.dataFile.nik_jaminan,this.generalInfo.address=this.dataFile.address,this.generalInfo.no_hp=this.dataFile.no_hp;for(let n=0;n<5;n++)this.separateNotesByPhase(this.dataFile,n);this.dataLoaded=!0,this.overlay=!1}else this.$showToast("error","Sorry",s.data.data.message),this.overlay=!1}catch(s){this.overlay=!1,this.$showToast("error","Sorry",s.response.data.message)}},getUserData(){const a=localStorage.getItem("userData");a&&(this.userData=JSON.parse(a))},openModal(a,s=null){a==1?this.insertAttch=!0:a==2?(this.attachFile.id=s.id,this.attachFile.file_id=s.file_id,this.attachFile.name=s.name,this.attachFile.isSecret=parseInt(s.isSecret),this.attachFile.isApprove=parseInt(s.isApprove),this.attachFile.link=s.link,this.updateAttch=!0):a==3?(this.updateDataNote.id=s.id,this.updateDataNote.file_id=s.file_id,this.updateDataNote.note=s.note,this.isUpdateNote=!0):a==4?this.isUpdateGeneralInfo=!0:a==5?(this.dataPhase3.surveyResult=this.dataFile.surveyResult,this.isDataPhase3=!0):a==6?this.isShowTimers=!0:a==7?this.isShowHistory=!0:a==8?this.isShowApprovals=!0:a==9?this.isChangeStatusCredit=!0:a==10&&(this.isShowAttachment=!0)},closeModal(a){a===1?(this.resetAttch(),this.insertAttch=!1):a===2?this.updateAttch=!1:a===3?(this.resetNote(),this.updateNote=!1):a==4?this.isUpdateGeneralInfo=!1:a==5?(this.dataPhase3.surveyResult="",this.isDataPhase3=!1):a==9&&(this.isChangeStatusCredit=!1,this.changeStatus.id=null,this.changeStatus.status=null,this.changeStatus.reasonRejected=null)},async updateGeneralInfo(){try{this.overlay=!0;const a=new FormData;a.append("name",this.generalInfo.name),a.append("plafon",this.generalInfo.plafon.replace(/\D/g,"")),a.append("type_bussiness",this.generalInfo.type_bussiness),a.append("desc_bussiness",this.generalInfo.desc_bussiness),a.append("order_source",this.generalInfo.order_source),a.append("status_kredit",this.generalInfo.status_kredit),this.generalInfo.nik_pemohon!=""&&a.append("nik_pemohon",this.generalInfo.nik_pemohon),this.generalInfo.nik_pasangan!=""&&this.generalInfo.nik_pasangan!=null&&this.generalInfo.nik_pasangan!="null"&&this.generalInfo.nik_pasangan!="-"&&a.append("nik_pasangan",this.generalInfo.nik_pasangan),this.generalInfo.nik_jaminan!=""&&this.generalInfo.nik_jaminan!=null&&this.generalInfo.nik_jaminan!="null"&&this.generalInfo.nik_jaminan!="-"&&a.append("nik_jaminan",this.generalInfo.nik_jaminan),this.generalInfo.address!=""&&a.append("address",this.generalInfo.address),this.generalInfo.no_hp!=""&&a.append("no_hp",this.generalInfo.no_hp),a.append("_method","PUT");const s=await I.post(`/user/edit-general-info/${this.generalInfo.id}`,a);s.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("success","Success",s.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("error","Sorry",s.data.message))}catch(a){this.isUpdateGeneralInfo=!1,this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async insertNote(){try{if(this.overlay=!0,this.dataNote.note==null){this.$showToast("error","Sorry","Note cannot be empty"),this.overlay=!1;return}const a=new FormData;a.append("file_id",this.dataNote.file_id),a.append("note",this.dataNote.note),a.append("_method","POST");const s=await I.post("/user/note",a);s.status===200?(this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",s.data.message)):(this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.data.message))}catch(a){this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async updateNote(){try{this.overlay=!0;const a=new FormData;a.append("file_id",this.updateDataNote.file_id),a.append("note",this.updateDataNote.note),a.append("_method","PUT");const s=await I.post(`/user/note/${this.updateDataNote.id}`,a);s.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("success","Success",s.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("error","Sorry",s.data.message))}catch(a){this.isUpdateNote=!1,this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async deleteNote(a){try{if(this.overlay=!0,!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;const n=await I.delete(`/user/note/${a}`);n.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",n.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(s){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},separateNotesByPhase(a,s){a.notes.forEach(n=>{if(n.phase==s)switch(s){case 1:this.notePhase1.push(n);break;case 2:this.notePhase2.push(n);break;case 3:this.notePhase3.push(n);break;case 4:this.notePhase4.push(n);break;default:console.log("Invalid phase")}})},modalNote(){this.isModalPhase=!this.isModalPhase},async changeApproval(a){try{this.overlay=!0;const s=await I.get(`/user/change-phase-approve/${a}`);s.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",s.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.data.message))}catch(s){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},handleFileChange(a){const s=a.target.files[0];s&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(s.type)?this.attachFile.path=s:(this.closeModal(1),this.closeModal(2),this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, DOCX, XLS, dan XLSX yang diizinkan."),a.target.value=null)},resetAttch(){this.attachFile={id:null,file_id:this.$route.params.fileId,name:null,path:null,note:null,link:null,isSecret:!1}},async insertAttachment(){try{this.overlay=!0;const a=new FormData;a.append("file_id",this.attachFile.file_id),a.append("phase",this.dataFile.phase),a.append("name",this.attachFile.name),this.attachFile.path!=null&&a.append("path",this.attachFile.path),this.attachFile.link!=null&&a.append("link",this.attachFile.link),a.append("note",this.attachFile.note),a.append("isApprove",this.attachFile.isApprove),this.dataFile.phase>=2&&(this.attachFile.isSecret===!1?a.append("isSecret","0"):a.append("isSecret",String(this.attachFile.isSecret))),a.append("_method","POST");const s={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(e){console.error("Error calculating progress:",e)}},headers:{"Content-Type":"multipart/form-data"}},n=await I.post("/user/add-attach",a,s);n.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(a){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async editAttachment(){try{this.overlay=!0;const a=new FormData;a.append("file_id",this.attachFile.file_id),a.append("name",this.attachFile.name),a.append("path",this.attachFile.path),a.append("phase",this.dataFile.phase),a.append("isApprove",this.attachFile.isApprove),this.attachFile.path!=null&&a.append("path",this.attachFile.path),a.append("isSecret",this.attachFile.isSecret),a.append("_method","PUT");const s={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(e){console.error("Error calculating progress:",e)}},headers:{"Content-Type":"multipart/form-data"}},n=await I.post(`/user/edit-attach/${this.attachFile.id}`,a,s);n.status===200?(this.overlay=!1,this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.overlay=!1,this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(a){this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async deleteAttachment(a){try{if(!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;this.overlay=!0;const n=await I.delete(`/user/delete-attach/${a}`);n.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",n.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry","Terjadi Kesalahan Silahkan Coba Lagi"))}catch{this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry","Terjadi Kesalahan Silahkan Coba Lagi")}}},mounted(){this.checkMobile(),this.getUserData(),this.getDetailFile(this.fileId)}};const b=a=>(ue("data-v-482a4ed8"),a=a(),de(),a),Ss=b(()=>o("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Ps=b(()=>o("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Fs=b(()=>o("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Ds=b(()=>o("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),xs=b(()=>o("span",{style:{color:"red"}},"*",-1)),Is=b(()=>o("span",{class:"subtitle-1 text-center"},"Note: ",-1)),Vs=b(()=>o("span",{style:{color:"red"}},"*",-1)),ws=b(()=>o("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1)),Ts=b(()=>o("span",{style:{color:"red"}},"*",-1)),Cs=b(()=>o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),Us=b(()=>o("span",{style:{color:"red"}},"*",-1)),Ks=b(()=>o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),Ns=b(()=>o("span",{style:{color:"red"}},"*",-1)),js=b(()=>o("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),Ms=b(()=>o("span",{style:{color:"red"}},"*",-1)),Os=b(()=>o("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),qs=b(()=>o("span",{style:{color:"red"}},"*",-1)),Ls=b(()=>o("span",{class:"subtitle-1 text-center"},"Nama Pemohon: ",-1)),Rs=b(()=>o("span",{style:{color:"red"}},"*",-1)),Es=b(()=>o("span",{class:"subtitle-1 text-center"},"Jumlah Plafon: ",-1)),zs=b(()=>o("span",{style:{color:"red"}},"*",-1)),Bs=b(()=>o("span",{class:"subtitle-1 text-center"},"Jenis Usaha: ",-1)),Hs=b(()=>o("span",{style:{color:"red"}},"*",-1)),Gs=b(()=>o("span",{class:"subtitle-1 text-center"},"Deskripsi Usaha: ",-1)),Js=b(()=>o("span",{style:{color:"red"}},"*",-1)),Ws=b(()=>o("span",{class:"subtitle-1 text-center"},"Pilih sumber order: ",-1)),Xs=b(()=>o("span",{style:{color:"red"}},"*",-1)),Ys=b(()=>o("span",{class:"subtitle-1 text-center"},"Pilih status kredit: ",-1)),Qs=b(()=>o("span",{style:{color:"red"}},"*",-1)),Zs=b(()=>o("span",{class:"subtitle-1 text-center"},"NIK Pemohon: ",-1)),$s=b(()=>o("span",{style:{color:"red"}},"*",-1)),ea=b(()=>o("span",{class:"subtitle-1 text-center"},"Alamat Pemohon: ",-1)),ta=b(()=>o("span",{class:"subtitle-1 text-center"},"NIK Pasangan: ",-1)),la=b(()=>o("span",{class:"subtitle-1 text-center"},"NIK Pemilik Jaminan: ",-1)),sa=b(()=>o("span",{class:"subtitle-1 text-center"},"No. HP: ",-1)),aa=b(()=>o("span",{style:{color:"red"}},"*",-1)),ia=b(()=>o("span",{class:"subtitle-1 text-center"},"Hasil Survei: ",-1)),na=b(()=>o("span",{style:{color:"red"}},"*",-1)),oa=b(()=>o("span",{class:"subtitle-1 text-center"},"Alasan: ",-1));function ra(a,s,n,g,e,u){const i=W("phase"),x=W("EasyDataTable");return d(),k("div",null,[t(le,{"model-value":e.overlay,class:"align-center justify-center"},{default:l(()=>[t(te,{color:"blue-lighten-3",indeterminate:"",size:41,width:5}),p(" Loading... ")]),_:1},8,["model-value"]),e.dataLoaded?(d(),h(A,{key:0},{default:l(()=>[t(j,{class:"text-2xl font-weight-bold d-flex justify-left"},{default:l(()=>[p(" Detail Kredit ")]),_:1}),t(T,null,{default:l(()=>[t(me,{"model-value":e.stepperModel,mobile:e.isMobile},{default:l(()=>[t(fe,null,{default:l(()=>[t(Q,{title:"Phase 1 (Pooling)",value:"1",complete:e.stepperModel>1},null,8,["complete"]),t(X),t(Q,{title:"Phase 2 (SLIK)",value:"2",complete:e.stepperModel>2},null,8,["complete"]),t(X),t(Q,{title:"Phase 3 (Survei)",value:"3",complete:e.stepperModel>3},null,8,["complete"]),t(X),t(Q,{title:"Phase 4 (Komite)",value:"4",complete:e.stepperModel>4},null,8,["complete"]),t(X),t(Q,{title:"Operation",value:"5",complete:e.stepperModel>5},null,8,["complete"]),t(X),t(Q,{title:"Pencairan",value:"6",complete:e.stepperModel>6},null,8,["complete"])]),_:1}),t(ge,null,{default:l(()=>[e.userData&&e.userData.position.role.isPhase1Access==1?(d(),h(z,{key:0,value:"1"},{default:l(()=>[t(i,{dataFile:e.dataFile,userData:e.userData,"insert-note":u.insertNote,"change-approval":u.changeApproval,"format-date":u.formatDate,"open-modal":u.openModal,"delete-attachment":u.deleteAttachment,"delete-note":u.deleteNote,"get-detail-file":u.getDetailFile,step:u.step,"file-id":u.formatFileId(e.fileId),"user-access":e.userAccess,"reset-note":u.resetNote,"data-note":e.dataNote,"update-data-note":e.updateDataNote,"note-phase1":e.notePhase1,"note-phase2":e.notePhase2,"note-phase3":e.notePhase3,"note-phase4":e.notePhase4,"modal-note":u.modalNote,phase1Attachments:e.dataAttachPhase1,phase2Attachments:e.dataAttachPhase2,phase3Attachments:e.dataAttachPhase3,phase4Attachments:e.dataAttachPhase4,phase5Attachments:e.dataAttachPhase5,submissions:e.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1})):(d(),h(z,{key:1,value:"1"},{default:l(()=>[Ss]),_:1})),e.userData&&e.userData.position.role.isPhase2Access==1?(d(),h(z,{key:2,value:"2"},{default:l(()=>[t(i,{dataFile:e.dataFile,userData:e.userData,"insert-note":u.insertNote,"change-approval":u.changeApproval,"format-date":u.formatDate,"open-modal":u.openModal,"delete-attachment":u.deleteAttachment,"delete-note":u.deleteNote,"get-detail-file":u.getDetailFile,step:u.step,"file-id":u.formatFileId(e.fileId),"user-access":e.userAccess,"reset-note":u.resetNote,"data-note":e.dataNote,"update-data-note":e.updateDataNote,"note-phase1":e.notePhase1,"note-phase2":e.notePhase2,"note-phase3":e.notePhase3,"note-phase4":e.notePhase4,"modal-note":u.modalNote,phase1Attachments:e.dataAttachPhase1,phase2Attachments:e.dataAttachPhase2,phase3Attachments:e.dataAttachPhase3,phase4Attachments:e.dataAttachPhase4,phase5Attachments:e.dataAttachPhase5,submissions:e.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1})):(d(),h(z,{key:3,value:"2"},{default:l(()=>[Ps]),_:1})),e.userData&&e.userData.position.role.isPhase3Access==1?(d(),h(z,{key:4,value:"3"},{default:l(()=>[t(i,{dataFile:e.dataFile,userData:e.userData,"insert-note":u.insertNote,"change-approval":u.changeApproval,"format-date":u.formatDate,"open-modal":u.openModal,"delete-attachment":u.deleteAttachment,"delete-note":u.deleteNote,"get-detail-file":u.getDetailFile,step:u.step,"file-id":u.formatFileId(e.fileId),"user-access":e.userAccess,"reset-note":u.resetNote,"data-note":e.dataNote,"update-data-note":e.updateDataNote,"note-phase1":e.notePhase1,"note-phase2":e.notePhase2,"note-phase3":e.notePhase3,"note-phase4":e.notePhase4,"modal-note":u.modalNote,phase1Attachments:e.dataAttachPhase1,phase2Attachments:e.dataAttachPhase2,phase3Attachments:e.dataAttachPhase3,phase4Attachments:e.dataAttachPhase4,phase5Attachments:e.dataAttachPhase5,submissions:e.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1})):(d(),h(z,{key:5,value:"3"},{default:l(()=>[Fs]),_:1})),e.userData&&e.userData.position.role.isPhase4Access==1?(d(),h(z,{key:6,value:"4"},{default:l(()=>[t(i,{dataFile:e.dataFile,userData:e.userData,"insert-note":u.insertNote,"change-approval":u.changeApproval,"format-date":u.formatDate,"open-modal":u.openModal,"delete-attachment":u.deleteAttachment,"delete-note":u.deleteNote,"get-detail-file":u.getDetailFile,step:u.step,"file-id":u.formatFileId(e.fileId),"user-access":e.userAccess,"reset-note":u.resetNote,"data-note":e.dataNote,"update-data-note":e.updateDataNote,"note-phase1":e.notePhase1,"note-phase2":e.notePhase2,"note-phase3":e.notePhase3,"note-phase4":e.notePhase4,"modal-note":u.modalNote,phase1Attachments:e.dataAttachPhase1,phase2Attachments:e.dataAttachPhase2,phase3Attachments:e.dataAttachPhase3,phase4Attachments:e.dataAttachPhase4,phase5Attachments:e.dataAttachPhase5,submissions:e.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1})):(d(),h(z,{key:7,value:"4"},{default:l(()=>[Ds]),_:1})),t(z,{value:"5"},{default:l(()=>[t(i,{dataFile:e.dataFile,userData:e.userData,"insert-note":u.insertNote,"change-approval":u.changeApproval,"format-date":u.formatDate,"open-modal":u.openModal,"delete-attachment":u.deleteAttachment,"delete-note":u.deleteNote,"get-detail-file":u.getDetailFile,step:u.step,"file-id":u.formatFileId(e.fileId),"user-access":e.userAccess,"reset-note":u.resetNote,"data-note":e.dataNote,"update-data-note":e.updateDataNote,"note-phase1":e.notePhase1,"note-phase2":e.notePhase2,"note-phase3":e.notePhase3,"note-phase4":e.notePhase4,"modal-note":u.modalNote,phase1Attachments:e.dataAttachPhase1,phase2Attachments:e.dataAttachPhase2,phase3Attachments:e.dataAttachPhase3,phase4Attachments:e.dataAttachPhase4,phase5Attachments:e.dataAttachPhase5,submissions:e.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1}),t(z,{value:"6"},{default:l(()=>[t(i,{dataFile:e.dataFile,userData:e.userData,"insert-note":u.insertNote,"change-approval":u.changeApproval,"format-date":u.formatDate,"open-modal":u.openModal,"delete-attachment":u.deleteAttachment,"delete-note":u.deleteNote,"get-detail-file":u.getDetailFile,step:u.step,"file-id":u.formatFileId(e.fileId),"user-access":e.userAccess,"reset-note":u.resetNote,"data-note":e.dataNote,"update-data-note":e.updateDataNote,"note-phase1":e.notePhase1,"note-phase2":e.notePhase2,"note-phase3":e.notePhase3,"note-phase4":e.notePhase4,"modal-note":u.modalNote,phase1Attachments:e.dataAttachPhase1,phase2Attachments:e.dataAttachPhase2,phase3Attachments:e.dataAttachPhase3,phase4Attachments:e.dataAttachPhase4,phase5Attachments:e.dataAttachPhase5,submissions:e.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1})]),_:1})]),_:1},8,["model-value","mobile"])]),_:1})]),_:1})):(d(),h(A,{key:1},{default:l(()=>[t(j,{class:"text-2xl font-weight-bold d-flex justify-left"},{default:l(()=>[p(" Mempersiapkan data..... ")]),_:1})]),_:1})),t(N,{modelValue:e.insertAttch,"onUpdate:modelValue":s[9]||(s[9]=r=>e.insertAttch=r),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Tambah Data ")]),text:l(()=>[t(O,{onSubmit:M(u.insertAttachment,["prevent"])},{default:l(()=>[t(V,null,{default:l(()=>[t(c,{md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Pilih Keterangan File",items:e.nameFileList,autofocus:"",modelValue:e.attachFile.name,"onUpdate:modelValue":s[0]||(s[0]=r=>e.attachFile.name=r),"prepend-icon":"mdi-help-rhombus"},null,8,["items","modelValue"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[xs,Is,t(F,{class:"my-3",modelValue:e.attachFile.note,"onUpdate:modelValue":s[1]||(s[1]=r=>e.attachFile.note=r),rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[Vs,ws,t(B,{modelValue:e.selectedOption,"onUpdate:modelValue":s[2]||(s[2]=r=>e.selectedOption=r),mandatory:!0,row:""},{default:l(()=>[t(U,{label:"File",value:"file"}),t(U,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),e.selectedOption==="file"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[Ts,Cs,t(E,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[e.rules.required],onChange:s[3]||(s[3]=r=>u.handleFileChange(r))},null,8,["rules"])]),_:1})):m("",!0),e.selectedOption==="link"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[Us,Ks,t(F,{class:"my-3",modelValue:e.attachFile.link,"onUpdate:modelValue":s[4]||(s[4]=r=>e.attachFile.link=r),autofocus:"",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1})):m("",!0),e.dataFile.phase>=2?(d(),h(c,{key:2,md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:e.attachFile.isSecret,"onUpdate:modelValue":s[5]||(s[5]=r=>e.attachFile.isSecret=r),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):m("",!0),t(c,{md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:e.attachFile.isApprove,"onUpdate:modelValue":s[6]||(s[6]=r=>e.attachFile.isApprove=r),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[t(P,{type:"submit",disabled:!(e.attachFile.name&&(e.attachFile.path||e.attachFile.link)&&e.attachFile.note!==null)},{default:l(()=>[p(" Simpan ")]),_:1},8,["disabled"]),o("button",{type:"button",class:"btn btn-blue",onClick:s[7]||(s[7]=r=>u.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[t(L,{modelValue:e.uploadProgress,"onUpdate:modelValue":s[8]||(s[8]=r=>e.uploadProgress=r),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:e.updateAttch,"onUpdate:modelValue":s[16]||(s[16]=r=>e.updateAttch=r),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Edit Data ")]),text:l(()=>[t(O,{onSubmit:M(u.editAttachment,["prevent"])},{default:l(()=>[t(V,null,{default:l(()=>[t(c,{md:"12",cols:"12"},{default:l(()=>[Ns,js,t(F,{class:"my-3",modelValue:e.attachFile.name,"onUpdate:modelValue":s[10]||(s[10]=r=>e.attachFile.name=r),autofocus:"",rules:[e.rules.required],disabled:""},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[Ms,Os,t(E,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[e.rules.required],onChange:s[11]||(s[11]=r=>u.handleFileChange(r))},null,8,["rules"])]),_:1}),e.dataFile.phase==2?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Termasuk File Rahasia ? (SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:e.attachFile.isSecret,"onUpdate:modelValue":s[12]||(s[12]=r=>e.attachFile.isSecret=r),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):m("",!0),t(c,{md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:e.attachFile.isApprove,"onUpdate:modelValue":s[13]||(s[13]=r=>e.attachFile.isApprove=r),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[t(P,{type:"submit"},{default:l(()=>[p(" Update ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:s[14]||(s[14]=r=>u.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[t(L,{modelValue:e.uploadProgress,"onUpdate:modelValue":s[15]||(s[15]=r=>e.uploadProgress=r),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:e.isUpdateGeneralInfo,"onUpdate:modelValue":s[30]||(s[30]=r=>e.isUpdateGeneralInfo=r),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Edit Informasi Umum ")]),text:l(()=>[t(O,{onSubmit:M(u.updateGeneralInfo,["prevent"])},{default:l(()=>[t(V,null,{default:l(()=>[t(c,{md:"12",cols:"12"},{default:l(()=>[qs,Ls,t(F,{class:"my-3",modelValue:e.generalInfo.name,"onUpdate:modelValue":s[17]||(s[17]=r=>e.generalInfo.name=r),autofocus:"",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[Rs,Es,t(F,{class:"my-3",modelValue:e.generalInfo.plafon,"onUpdate:modelValue":s[18]||(s[18]=r=>e.generalInfo.plafon=r),type:"text",onInput:u.formatInputPlafon},null,8,["modelValue","onInput"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[zs,Bs,t(F,{class:"my-3",modelValue:e.generalInfo.type_bussiness,"onUpdate:modelValue":s[19]||(s[19]=r=>e.generalInfo.type_bussiness=r),rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[Hs,Gs,t(F,{class:"my-3",modelValue:e.generalInfo.desc_bussiness,"onUpdate:modelValue":s[20]||(s[20]=r=>e.generalInfo.desc_bussiness=r),rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[Js,Ws,t(K,{items:e.orderList,modelValue:e.generalInfo.order_source,"onUpdate:modelValue":s[21]||(s[21]=r=>e.generalInfo.order_source=r),"prepend-icon":"mdi-help-rhombus"},null,8,["items","modelValue"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[Xs,Ys,t(K,{items:e.statusCreditList,modelValue:e.generalInfo.status_kredit,"onUpdate:modelValue":s[22]||(s[22]=r=>e.generalInfo.status_kredit=r),"prepend-icon":"mdi-help-rhombus"},null,8,["items","modelValue"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[Qs,Zs,t(F,{type:"number",class:"my-3",modelValue:e.generalInfo.nik_pemohon,"onUpdate:modelValue":s[23]||(s[23]=r=>e.generalInfo.nik_pemohon=r),rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[$s,ea,t(F,{class:"my-3",modelValue:e.generalInfo.address,"onUpdate:modelValue":s[24]||(s[24]=r=>e.generalInfo.address=r),rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[ta,t(F,{type:"number",class:"my-3",modelValue:e.generalInfo.nik_pasangan,"onUpdate:modelValue":s[25]||(s[25]=r=>e.generalInfo.nik_pasangan=r),hint:"kosongkan jika tidak ada"},null,8,["modelValue"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[la,t(F,{type:"number",class:"my-3",modelValue:e.generalInfo.nik_jaminan,"onUpdate:modelValue":s[26]||(s[26]=r=>e.generalInfo.nik_jaminan=r),hint:"kosongkan jika tidak ada"},null,8,["modelValue"])]),_:1}),t(c,{md:"12",cols:"12"},{default:l(()=>[sa,t(F,{class:"my-3",modelValue:e.generalInfo.no_hp,"onUpdate:modelValue":s[27]||(s[27]=r=>e.generalInfo.no_hp=r),rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[t(P,{type:"submit"},{default:l(()=>[p(" Update ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:s[28]||(s[28]=r=>u.closeModal(4))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[t(L,{modelValue:e.uploadProgress,"onUpdate:modelValue":s[29]||(s[29]=r=>e.uploadProgress=r),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:e.isUpdateNote,"onUpdate:modelValue":s[32]||(s[32]=r=>e.isUpdateNote=r),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Update Note ")]),text:l(()=>[t(O,{onSubmit:M(u.updateNote,["prevent"])},{default:l(()=>[t(V,{align:"center",justify:"center"},{default:l(()=>[t(c,{md:"10",cols:"10"},{default:l(()=>[t(ae,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:e.updateDataNote.note,"onUpdate:modelValue":s[31]||(s[31]=r=>e.updateDataNote.note=r),rows:"2"},null,8,["modelValue"])]),_:1}),t(c,{md:"2",cols:"2"},{default:l(()=>[t(P,{density:"compact",icon:"mdi-note-plus",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:e.isDataPhase3,"onUpdate:modelValue":s[35]||(s[35]=r=>e.isDataPhase3=r),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Hasil Survey ")]),text:l(()=>[t(O,{onSubmit:M(u.updatePhase3,["prevent"])},{default:l(()=>[t(V,null,{default:l(()=>[t(c,{md:"12",cols:"12"},{default:l(()=>[aa,ia,t(ae,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:e.dataPhase3.surveyResult,"onUpdate:modelValue":s[33]||(s[33]=r=>e.dataPhase3.surveyResult=r),rows:"3"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[t(P,{type:"submit"},{default:l(()=>[p("Update")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:s[34]||(s[34]=r=>u.closeModal(5))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:e.isShowTimers,"onUpdate:modelValue":s[36]||(s[36]=r=>e.isShowTimers=r),width:"auto",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Data Waktu ")]),text:l(()=>[t(x,{headers:e.timerHeaders,items:e.dataFile.phase_times},{"item-timeDiff":l(r=>[p(_(u.calculateTimeDiff(r.startTime,r.endTime)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:e.isShowAttachment,"onUpdate:modelValue":s[37]||(s[37]=r=>e.isShowAttachment=r),width:"auto",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Data Waktu ")]),text:l(()=>[t(x,{headers:e.attachmentHeaders,items:e.attachments},null,8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:e.isShowHistory,"onUpdate:modelValue":s[38]||(s[38]=r=>e.isShowHistory=r),width:"auto",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Data Riwayat ")]),text:l(()=>[t(x,{"show-index":"",headers:e.historyHeaders,items:e.dataFile.file_activities},{"item-created_at":l(r=>[p(_(u.formatDate(r.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:e.isShowApprovals,"onUpdate:modelValue":s[39]||(s[39]=r=>e.isShowApprovals=r),width:"auto",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Riwayat Persetujuan ")]),text:l(()=>[t(x,{headers:e.approvalHeaders,items:e.dataFile.approvals},{"item-approved":l(r=>[parseInt(r.approved)==1?(d(),h(ie,{key:0,color:"success"},{default:l(()=>[p(" Disetujui ")]),_:1})):(d(),h(ie,{key:1,color:"error"},{default:l(()=>[p(" Belum disetujui ")]),_:1}))]),"item-created_at":l(r=>[p(_(u.formatDate(r.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:e.isChangeStatusCredit,"onUpdate:modelValue":s[43]||(s[43]=r=>e.isChangeStatusCredit=r),width:"auto",transition:"dialog-top-transition"},{default:l(()=>[t(A,null,{title:l(()=>[p(" Ubah Status File ")]),text:l(()=>[t(O,{onSubmit:M(u.updateStatusCredit,["prevent"])},{default:l(()=>[t(V,null,{default:l(()=>[t(c,{md:"12",cols:"12"},{default:l(()=>[t(K,{label:"Ubah Status File",items:[{value:1,title:"Approved"},{value:2,title:"Pending"},{value:3,title:"Rejected"}],modelValue:e.changeStatus.status,"onUpdate:modelValue":s[40]||(s[40]=r=>e.changeStatus.status=r)},null,8,["modelValue"])]),_:1}),e.changeStatus.status==3?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[na,oa,t(ae,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:e.changeStatus.reasonRejected,"onUpdate:modelValue":s[41]||(s[41]=r=>e.changeStatus.reasonRejected=r),rows:"2"},null,8,["modelValue"])]),_:1})):m("",!0),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[t(P,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),o("button",{type:"button",class:"btn btn-blue",onClick:s[42]||(s[42]=r=>u.closeModal(9))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}const Ka=Y(vs,[["render",ra],["__scopeId","data-v-482a4ed8"]]);export{Ka as default};
