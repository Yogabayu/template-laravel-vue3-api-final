import{m as D}from"./index-169ae2f3.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";import{c as b,d as h,e as C,V as A,b as K,g as le}from"./VRow-9be3193f.js";import{a as q,c as x,b as U,V as se}from"./VMenu-18565200.js";import{o as u,h as c,w as a,a as t,c as P,F as E,e as p,t as v,i as g,b as n,K as k,f as m,G as R,d as N,V as w,a0 as B,r as G,H as te,I as ae,E as ie}from"./main-5deaae5c.js";import{V as S}from"./VTooltip-9ddda067.js";import{V as M,a as j}from"./VTextField-3e6e65ed.js";import{b as z}from"./VWindowItem-d6584987.js";import{V}from"./VSelect-16eb113b.js";import{V as I}from"./VDialog-e917b245.js";import{V as T,a as oe}from"./VChip-aa983857.js";import{V as Y}from"./VDivider-69570e57.js";import{V as X,a as ne,b as re,c as de,d as J,e as ue,f as L}from"./VStepper-994e995b.js";import{V as $}from"./VSpacer-048e66f3.js";import{V as pe}from"./VOverlay-da0cca56.js";import"./VImg-60c4c785.js";import"./dialog-transition-75589b3c.js";import"./VCheckboxBtn-a03976bd.js";const ce={name:"AttachmentCard1",props:{data:{type:Object,required:!0},fileId:{type:Number,required:!0},filePath:{type:String,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},openModal:{type:Function,required:!0}}},he=n("span",null,"Phase 1 (Pooling) ðŸ“„",-1),me={class:"operation-wrapper"},fe={class:"d-flex justify-space-between"},ge=["href"],ye=["onClick"],Ae={class:"operation-wrapper"},ve={class:"d-flex justify-space-between"},_e=["href"],be=["onClick"];function Fe(s,e,i,f,l,r){return u(),c(A,{color:"warning"},{default:a(()=>[t(C,null,{default:a(()=>[t(b,{class:"d-flex justify-space-between"},{default:a(()=>[t(h,{cols:"12",sm:"6",md:"8"},{default:a(()=>[he]),_:1})]),_:1})]),_:1}),(u(!0),P(R,null,E(i.data,(o,F)=>(u(),P("div",{key:F},[o.path!=null&&!parseInt(o.isSecret)?(u(),c(q,{key:0,density:"compact"},{default:a(()=>[t(U,null,{prepend:a(()=>[p(v(o.isApprove?"âœ…":"âŒ")+" ",1),t(g,{icon:"mdi-file"})]),append:a(()=>[n("div",me,[n("div",fe,[o.path!="null"?(u(),c(S,{key:0,location:"top",text:"Lihat File"},{activator:a(({props:d})=>[n("a",k(d,{href:i.filePath+"/"+i.fileId+"/"+o.path,target:"_blank",rel:"noopener noreferrer"}),[n("button",null,[t(g,{size:"20",icon:"bx-link-external",color:"blue"})])],16,ge)]),_:2},1024)):m("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(u(),c(S,{key:1,location:"top",text:"Edit File"},{activator:a(({props:d})=>[n("button",k(d,{onClick:O=>i.openModal(2,o)}),[t(g,{size:"20",icon:"bx-edit",color:"blue"})],16,ye)]),_:2},1024)):m("",!0)])])]),default:a(()=>[t(x,null,{default:a(()=>[p(v(o.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(u(),c(q,{key:1,density:"compact"},{default:a(()=>[t(U,null,{prepend:a(()=>[p(v(o.isApprove?"âœ…":"âŒ")+" ",1),t(g,{icon:"mdi-file"})]),append:a(()=>[n("div",Ae,[n("div",ve,[i.userAccess&&parseInt(i.userAccess.isSecret)&&o.path!="null"?(u(),c(S,{key:0,location:"top",text:"Lihat File"},{activator:a(({props:d})=>[n("a",k(d,{href:i.filePath+"/"+s.dataFile.id+"/"+o.path,target:"_blank",rel:"noopener noreferrer"}),[n("button",null,[t(g,{size:"20",icon:"bx-link-external",color:"blue"})])],16,_e)]),_:2},1024)):m("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(u(),c(S,{key:1,location:"top",text:"Edit File"},{activator:a(({props:d})=>[n("button",k(d,{onClick:O=>i.openModal(2,o)}),[t(g,{size:"20",icon:"bx-edit",color:"blue"})],16,be)]),_:2},1024)):m("",!0)])])]),default:a(()=>[t(x,null,{default:a(()=>[p(v(o.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))]))),128))]),_:1})}const ke=H(ce,[["render",Fe]]),Se={props:{data:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0}},data(){return{uploadProgress:null,rules:{required:s=>!!s||"Required"},isFormDetailSlik:!1,formDetailSlik:{id:null,name:null,path:null,file_id:this.fileId,isApprove:0,isSecret:0},isFormResumeSlik:!1,formResumeSlik:{id:null,name:null,path:null,file_id:this.fileId,isApprove:0,isSecret:0},isAppeal:!1,formAppeal:{id:null,file_id:this.fileId,phase:2,name:"File Banding",path:null,isApprove:0,isSecret:0},isAnalytic:!1,formAnalytic:{id:null,file_id:this.fileId,phase:2,name:"Analisa Awal Kredit AO",path:null,isApprove:0,isSecret:0}}},methods:{shouldDisplay(s){return s.name==="Detail SLIK"&&parseInt(this.userAccess.isSecret)==1||s.name==="Resume SLIK"},showAnalisaAwalCredit(){const s=this.data.find(i=>i.name==="Detail SLIK"&&i.isApprove==1),e=this.data.find(i=>i.name==="Resume SLIK"&&i.isApprove==1);if(s&&e){let i=this.data.find(f=>f.name=="Analisa Awal Kredit AO");i&&(this.formAnalytic.id=i.id,this.formAnalytic.isApprove=i.isApprove,this.formAnalytic.isSecret=i.isSecret,this.formAnalytic.path=i.path)}return s&&e},showFileBanding(){const s=this.data.find(l=>l.name=="Detail SLIK"&&l.isApprove!=1),e=this.data.find(l=>l.name=="Resume SLIK"&&l.isApprove!=1),i=this.data.find(l=>l.name==="File Banding"&&l.path!="null"),f=this.data.find(l=>l.name==="Analisa Awal Kredit AO"&&l.path!="null");if(s&&e||i&&f){let l=this.data.find(r=>r.name==="File Banding");return l&&(this.formAppeal.id=l.id,this.formAppeal.isApprove=l.isApprove,this.formAppeal.isSecret=l.isSecret,this.formAppeal.path=l.path),!0}return!1},handleFileChange(s){const e=s.target.files[0];e&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(e.type)?this.formDetailSlik.path=e:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),s.target.value=null)},handleAnalyticChange(s){const e=s.target.files[0];e&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(e.type)?this.formAnalytic.path=e:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),s.target.value=null)},handleAppealChange(s){const e=s.target.files[0];e&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(e.type)?this.formAppeal.path=e:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),s.target.value=null)},openModal(s,e=null){s==1?e.name=="Detail SLIK"?(this.formDetailSlik.id=e.id,this.formDetailSlik.name=e.name,this.formDetailSlik.isSecret=e.isSecret,this.formDetailSlik.isApprove=e.isApprove,this.isFormDetailSlik=!0):e.name=="Resume SLIK"&&(this.formDetailSlik.id=e.id,this.formDetailSlik.name=e.name,this.formDetailSlik.isSecret=e.isSecret,this.formDetailSlik.isApprove=e.isApprove,this.isFormResumeSlik=!0):s==2?this.isAnalytic=!0:s==3&&(this.isAppeal=!0)},closeModal(s){s==1?(this.formDetailSlik.id=null,this.formDetailSlik.name=null,this.formDetailSlik.isSecret=null,this.formDetailSlik.isApprove=null,this.isFormDetailSlik=!1):s==2?(this.formDetailSlik.id=null,this.formDetailSlik.name=null,this.formDetailSlik.isSecret=null,this.formDetailSlik.isApprove=null,this.isFormResumeSlik=!1):s==3?(this.formAnalytic.id=null,this.formAnalytic.isSecret=null,this.formAnalytic.isApprove=null,this.formAnalytic.path=null,this.isAnalytic=!1):s==4&&(this.formAppeal.id=null,this.formAppeal.isSecret=null,this.formAppeal.isApprove=null,this.formAppeal.path=null,this.isAppeal=!1)},async insertSlik(){try{const s=new FormData;s.append("name",this.formDetailSlik.name),s.append("path",this.formDetailSlik.path),s.append("isSecret",this.formDetailSlik.isSecret),s.append("isApprove",this.formDetailSlik.isApprove),s.append("file_id",this.formDetailSlik.file_id),s.append("_method","PUT");const e={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(l){console.error("Error calculating progress:",l)}},headers:{"Content-Type":"multipart/form-data"}},i=await D.post(`/edit-attach/${this.formDetailSlik.id}`,s,e);i.status===200?(this.overlay=!1,this.closeModal(1),this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},async insertAnalytic(){try{const s=new FormData;s.append("name",this.formAnalytic.name),s.append("path",this.formAnalytic.path),s.append("phase",this.formAnalytic.phase),s.append("isSecret",this.formAnalytic.isSecret),s.append("file_id",this.formAnalytic.file_id),s.append("isApprove",this.formAnalytic.isApprove),s.append("_method","PUT");const e={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(l){console.error("Error calculating progress:",l)}},headers:{"Content-Type":"multipart/form-data"}},i=await D.post(`/edit-attach/${this.formAnalytic.id}`,s,e);i.status===200?(this.overlay=!1,this.closeModal(3),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(3),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.closeModal(3),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},async insertAppeal(){try{const s=new FormData;s.append("name",this.formAppeal.name),s.append("path",this.formAppeal.path),s.append("phase",this.formAppeal.phase),s.append("isSecret",this.formAppeal.isSecret),s.append("file_id",this.formAppeal.file_id),s.append("isApprove",this.formAppeal.isApprove),s.append("_method","PUT");const e={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(l){console.error("Error calculating progress:",l)}},headers:{"Content-Type":"multipart/form-data"}},i=await D.post(`/edit-attach/${this.formAppeal.id}`,s,e);i.status===200?(this.overlay=!1,this.closeModal(4),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(4),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.closeModal(4),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}}}},Pe=n("span",null,"Phase 2 (SLIK) ðŸ“„",-1),De={class:"operation-wrapper"},we={class:"d-flex justify-space-between"},xe=["href"],Ie=["onClick"],Ve=["onClick"],Te={key:0},Ce={class:"operation-wrapper"},Ue={class:"d-flex justify-space-between"},Ne=["href"],Me={key:1},Ke={class:"operation-wrapper"},je={class:"d-flex justify-space-between"},qe=["href"],Re=n("span",{style:{color:"red"}},"*",-1),Oe=n("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),Le=n("span",{style:{color:"red"}},"*",-1),Be=n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),ze=n("span",{style:{color:"red"}},"*",-1),Ge=n("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),Ee=n("span",{style:{color:"red"}},"*",-1),He=n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),Je=n("span",{style:{color:"red"}},"*",-1),Ye=n("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),We=n("span",{style:{color:"red"}},"*",-1),Xe=n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1),Qe=n("span",{style:{color:"red"}},"*",-1),Ze=n("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),$e=n("span",{style:{color:"red"}},"*",-1),et=n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1);function tt(s,e,i,f,l,r){return u(),P(R,null,[t(A,{color:"warning"},{default:a(()=>[t(C,null,{default:a(()=>[t(b,{class:"d-flex justify-space-between"},{default:a(()=>[t(h,{cols:"12",sm:"6",md:"8"},{default:a(()=>[Pe]),_:1})]),_:1})]),_:1}),(u(!0),P(R,null,E(i.data,(o,F)=>(u(),P("div",{key:F},[t(q,{density:"compact"},{default:a(()=>[r.shouldDisplay(o)?(u(),c(U,{key:0},{prepend:a(()=>[p(v(o.isApprove?"âœ…":"âŒ")+" ",1),t(g,{icon:"mdi-file"})]),append:a(()=>[n("div",De,[n("div",we,[o.path!=="null"?(u(),c(S,{key:0,location:"top",text:"Lihat File"},{activator:a(({props:d})=>[n("a",k(d,{href:`${i.filePath}/${i.fileId}/${o.path}`,target:"_blank",rel:"noopener noreferrer"}),[n("button",null,[t(g,{size:"20",icon:"bx-link-external",color:"blue"})])],16,xe)]),_:2},1024)):m("",!0),o.path==="null"&&i.userAccess&&parseInt(i.userAccess.canInsertData)==1?(u(),c(S,{key:1,location:"top",text:"Upload File"},{activator:a(({props:d})=>[n("button",k(d,{onClick:O=>r.openModal(1,o)}),[t(g,{size:"20",icon:"bx-upload",color:"blue"})],16,Ie)]),_:2},1024)):m("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(u(),c(S,{key:2,location:"top",text:"Edit File"},{activator:a(({props:d})=>[n("button",k(d,{onClick:O=>r.openModal(1,o)}),[t(g,{size:"20",icon:"bx-edit",color:"blue"})],16,Ve)]),_:2},1024)):m("",!0)])])]),default:a(()=>[t(x,null,{default:a(()=>[p(v(o.name),1)]),_:2},1024)]),_:2},1024)):m("",!0)]),_:2},1024)]))),128)),r.showAnalisaAwalCredit()?(u(),P("div",Te,[t(q,{density:"compact"},{default:a(()=>[t(U,null,{prepend:a(()=>[p(v(l.formAnalytic.isApprove?"âœ…":"âŒ")+" ",1),t(g,{icon:"mdi-file"})]),append:a(()=>[n("div",Ce,[n("div",Ue,[l.formAnalytic.path!=null&&l.formAnalytic.path!="null"?(u(),c(S,{key:0,location:"top",text:"Lihat File"},{activator:a(({props:o})=>[n("a",k(o,{href:`${i.filePath}/${i.fileId}/${l.formAnalytic.path}`,target:"_blank",rel:"noopener noreferrer"}),[n("button",null,[t(g,{size:"20",icon:"bx-link-external",color:"blue"})])],16,Ne)]),_:1})):m("",!0),(l.formAnalytic.path==null||l.formAnalytic.path=="null")&&i.userAccess&&parseInt(i.userAccess.canAppeal)==1?(u(),c(S,{key:1,location:"top",text:"Upload File"},{activator:a(({props:o})=>[n("button",k(o,{onClick:e[0]||(e[0]=F=>r.openModal(2,l.formAnalytic))}),[t(g,{size:"20",icon:"bx-upload",color:"blue"})],16)]),_:1})):m("",!0),i.userAccess&&parseInt(i.userAccess.canAppeal)==1?(u(),c(S,{key:2,location:"top",text:"Edit File"},{activator:a(({props:o})=>[n("button",k(o,{onClick:e[1]||(e[1]=F=>r.openModal(2,l.formAnalytic))}),[t(g,{size:"20",icon:"bx-edit",color:"blue"})],16)]),_:1})):m("",!0)])])]),default:a(()=>[t(x,null,{default:a(()=>[p(v(l.formAnalytic.name),1)]),_:1})]),_:1})]),_:1})])):m("",!0),r.showFileBanding()?(u(),P("div",Me,[t(q,{density:"compact"},{default:a(()=>[t(U,null,{prepend:a(()=>[p(v(l.formAppeal.isApprove?"âœ…":"âŒ")+" ",1),t(g,{icon:"mdi-file"})]),append:a(()=>[n("div",Ke,[n("div",je,[l.formAppeal.path!=null&&l.formAppeal.path!="null"?(u(),c(S,{key:0,location:"top",text:"Lihat File"},{activator:a(({props:o})=>[n("a",k(o,{href:`${i.filePath}/${i.fileId}/${l.formAppeal.path}`,target:"_blank",rel:"noopener noreferrer"}),[n("button",null,[t(g,{size:"20",icon:"bx-link-external",color:"blue"})])],16,qe)]),_:1})):m("",!0),(l.formAppeal.path==null||l.formAppeal.path=="null")&&i.userAccess&&parseInt(i.userAccess.canAppeal)==1?(u(),c(S,{key:1,location:"top",text:"Upload File"},{activator:a(({props:o})=>[n("button",k(o,{onClick:e[2]||(e[2]=F=>r.openModal(3,l.formAppeal))}),[t(g,{size:"20",icon:"bx-upload",color:"blue"})],16)]),_:1})):m("",!0),i.userAccess&&parseInt(i.userAccess.canAppeal)==1?(u(),c(S,{key:2,location:"top",text:"Edit File"},{activator:a(({props:o})=>[n("button",k(o,{onClick:e[3]||(e[3]=F=>r.openModal(3,l.formAppeal))}),[t(g,{size:"20",icon:"bx-edit",color:"blue"})],16)]),_:1})):m("",!0)])])]),default:a(()=>[t(x,null,{default:a(()=>[p(v(l.formAppeal.name),1)]),_:1})]),_:1})]),_:1})])):m("",!0)]),_:1}),t(I,{modelValue:l.isFormDetailSlik,"onUpdate:modelValue":e[10]||(e[10]=o=>l.isFormDetailSlik=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Data Attachment ")]),text:a(()=>[t(M,{onSubmit:N(r.insertSlik,["prevent"])},{default:a(()=>[t(b,null,{default:a(()=>[t(h,{md:"12",cols:"12"},{default:a(()=>[Re,Oe,t(j,{class:"my-3",modelValue:l.formDetailSlik.name,"onUpdate:modelValue":e[4]||(e[4]=o=>l.formDetailSlik.name=o),autofocus:"",disabled:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[Le,Be,t(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[5]||(e[5]=o=>r.handleFileChange(o))},null,8,["rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formDetailSlik.isSecret,"onUpdate:modelValue":e[6]||(e[6]=o=>l.formDetailSlik.isSecret=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formDetailSlik.isApprove,"onUpdate:modelValue":e[7]||(e[7]=o=>l.formDetailSlik.isApprove=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(w,{type:"submit"},{default:a(()=>[p(" Simpan ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[8]||(e[8]=o=>r.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:a(()=>[t(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[9]||(e[9]=o=>l.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:l.isFormResumeSlik,"onUpdate:modelValue":e[17]||(e[17]=o=>l.isFormResumeSlik=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Data Attachment ")]),text:a(()=>[t(M,{onSubmit:N(r.insertSlik,["prevent"])},{default:a(()=>[t(b,null,{default:a(()=>[t(h,{md:"12",cols:"12"},{default:a(()=>[ze,Ge,t(j,{class:"my-3",modelValue:l.formDetailSlik.name,"onUpdate:modelValue":e[11]||(e[11]=o=>l.formDetailSlik.name=o),autofocus:"",disabled:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[Ee,He,t(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[12]||(e[12]=o=>r.handleFileChange(o))},null,8,["rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formDetailSlik.isSecret,"onUpdate:modelValue":e[13]||(e[13]=o=>l.formDetailSlik.isSecret=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formDetailSlik.isApprove,"onUpdate:modelValue":e[14]||(e[14]=o=>l.formDetailSlik.isApprove=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(w,{type:"submit"},{default:a(()=>[p(" Simpan ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[15]||(e[15]=o=>r.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:a(()=>[t(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[16]||(e[16]=o=>l.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:l.isAnalytic,"onUpdate:modelValue":e[23]||(e[23]=o=>l.isAnalytic=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Data Analisis AO ")]),text:a(()=>[t(M,{onSubmit:N(r.insertAnalytic,["prevent"])},{default:a(()=>[t(b,null,{default:a(()=>[t(h,{md:"12",cols:"12"},{default:a(()=>[Je,Ye,t(j,{class:"my-3",modelValue:l.formAnalytic.name,"onUpdate:modelValue":e[18]||(e[18]=o=>l.formAnalytic.name=o),autofocus:"",disabled:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[We,Xe,t(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[19]||(e[19]=o=>r.handleAnalyticChange(o))},null,8,["rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formAnalytic.isApprove,"onUpdate:modelValue":e[20]||(e[20]=o=>l.formAnalytic.isApprove=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(w,{type:"submit"},{default:a(()=>[p(" Simpan ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[21]||(e[21]=o=>r.closeModal(3))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:a(()=>[t(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[22]||(e[22]=o=>l.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:l.isAppeal,"onUpdate:modelValue":e[29]||(e[29]=o=>l.isAppeal=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Data Banding AO ")]),text:a(()=>[t(M,{onSubmit:N(r.insertAppeal,["prevent"])},{default:a(()=>[t(b,null,{default:a(()=>[t(h,{md:"12",cols:"12"},{default:a(()=>[Qe,Ze,t(j,{class:"my-3",modelValue:l.formAppeal.name,"onUpdate:modelValue":e[24]||(e[24]=o=>l.formAppeal.name=o),autofocus:"",disabled:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[$e,et,t(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[25]||(e[25]=o=>r.handleAppealChange(o))},null,8,["rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formAppeal.isApprove,"onUpdate:modelValue":e[26]||(e[26]=o=>l.formAppeal.isApprove=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(w,{type:"submit"},{default:a(()=>[p(" Simpan ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[27]||(e[27]=o=>r.closeModal(4))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:a(()=>[t(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[28]||(e[28]=o=>l.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const at=H(Se,[["render",tt]]),lt={name:"AttachmentCard3",props:{data:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0}},data(){return{uploadProgress:null,rules:{required:s=>!!s||"Required"},isAnalisaKredit:!1,formAnalisaKredit:{id:null,name:"Analisa Kredit",file_id:this.fileId,path:null,isApprove:0,isSecret:0}}},methods:{openModal(s,e=null){s==1&&(this.formAnalisaKredit.id=e.id,this.formAnalisaKredit.name=e.name,this.formAnalisaKredit.isSecret=e.isSecret,this.formAnalisaKredit.isApprove=e.isApprove,this.isAnalisaKredit=!0)},closeModal(s){s==1&&(this.formAnalisaKredit.id=null,this.formAnalisaKredit.isSecret=null,this.formAnalisaKredit.isApprove=null,this.isAnalisaKredit=!1)},handleFileChange(s){const e=s.target.files[0];e&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(e.type)?this.formAnalisaKredit.path=e:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),s.target.value=null)},async insertAnalisa(){try{const s=new FormData;s.append("name",this.formAnalisaKredit.name),s.append("path",this.formAnalisaKredit.path),s.append("isSecret",this.formAnalisaKredit.isSecret),s.append("isApprove",this.formAnalisaKredit.isApprove),s.append("file_id",this.formAnalisaKredit.file_id),s.append("_method","PUT");const e={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(l){console.error("Error calculating progress:",l)}},headers:{"Content-Type":"multipart/form-data"}},i=await D.post(`/edit-attach/${this.formAnalisaKredit.id}`,s,e);i.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}}}},st=n("span",null,"Phase 3 (Analisa Kredit) ðŸ“„",-1),it={class:"operation-wrapper"},ot={class:"d-flex justify-space-between"},nt=["href"],rt=["onClick"],dt=["onClick"],ut=n("span",{style:{color:"red"}},"*",-1),pt=n("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),ct=n("span",{style:{color:"red"}},"*",-1),ht=n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1);function mt(s,e,i,f,l,r){return u(),P(R,null,[t(A,{color:"warning"},{default:a(()=>[t(C,null,{default:a(()=>[t(b,{class:"d-flex justify-space-between"},{default:a(()=>[t(h,{cols:"12",sm:"6",md:"8"},{default:a(()=>[st]),_:1})]),_:1})]),_:1}),(u(!0),P(R,null,E(i.data,(o,F)=>(u(),P("div",{key:F},[t(q,{density:"compact"},{default:a(()=>[t(U,null,{prepend:a(()=>[p(v(o.isApprove?"âœ…":"âŒ")+" ",1),t(g,{icon:"mdi-file"})]),append:a(()=>[n("div",it,[n("div",ot,[o.path!=="null"?(u(),c(S,{key:0,location:"top",text:"Lihat File"},{activator:a(({props:d})=>[n("a",k(d,{href:`${i.filePath}/${i.fileId}/${o.path}`,target:"_blank",rel:"noopener noreferrer"}),[n("button",null,[t(g,{size:"20",icon:"bx-link-external",color:"blue"})])],16,nt)]),_:2},1024)):m("",!0),o.path==="null"&&i.userAccess&&parseInt(i.userAccess.canInsertData)==1?(u(),c(S,{key:1,location:"top",text:"Upload File"},{activator:a(({props:d})=>[n("button",k(d,{onClick:O=>r.openModal(1,o)}),[t(g,{size:"20",icon:"bx-upload",color:"blue"})],16,rt)]),_:2},1024)):m("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(u(),c(S,{key:2,location:"top",text:"Edit File"},{activator:a(({props:d})=>[n("button",k(d,{onClick:O=>r.openModal(1,o)}),[t(g,{size:"20",icon:"bx-edit",color:"blue"})],16,dt)]),_:2},1024)):m("",!0)])])]),default:a(()=>[t(x,null,{default:a(()=>[p(v(o.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))]),_:1}),t(I,{modelValue:l.isAnalisaKredit,"onUpdate:modelValue":e[6]||(e[6]=o=>l.isAnalisaKredit=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Data Attachment ")]),text:a(()=>[t(M,{onSubmit:N(r.insertAnalisa,["prevent"])},{default:a(()=>[t(b,null,{default:a(()=>[t(h,{md:"12",cols:"12"},{default:a(()=>[ut,pt,t(j,{class:"my-3",modelValue:l.formAnalisaKredit.name,"onUpdate:modelValue":e[0]||(e[0]=o=>l.formAnalisaKredit.name=o),autofocus:"",disabled:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[ct,ht,t(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[1]||(e[1]=o=>r.handleFileChange(o))},null,8,["rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formAnalisaKredit.isSecret,"onUpdate:modelValue":e[2]||(e[2]=o=>l.formAnalisaKredit.isSecret=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formAnalisaKredit.isApprove,"onUpdate:modelValue":e[3]||(e[3]=o=>l.formAnalisaKredit.isApprove=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(w,{type:"submit"},{default:a(()=>[p(" Simpan ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[4]||(e[4]=o=>r.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:a(()=>[t(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[5]||(e[5]=o=>l.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const ee=H(lt,[["render",mt]]),ft={name:"AttachmentOperation",props:{data:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0}},data(){return{uploadProgress:null,rules:{required:s=>!!s||"Required"},isSp3k:!1,formsp3k:{id:null,name:"SP3K",file_id:this.fileId,path:null,isApprove:0,isSecret:0}}},methods:{openModal(s,e=null){s==1&&(this.formsp3k.id=e.id,this.formsp3k.name=e.name,this.formsp3k.isSecret=e.isSecret,this.formsp3k.isApprove=e.isApprove,this.isSp3k=!0)},closeModal(s){s==1&&(this.formsp3k.id=null,this.formsp3k.isSecret=null,this.formsp3k.isApprove=null,this.isSp3k=!1)},handleFileChange(s){const e=s.target.files[0];e&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(e.type)?this.formsp3k.path=e:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),s.target.value=null)},async insertSpk3k(){try{const s=new FormData;s.append("name",this.formsp3k.name),s.append("path",this.formsp3k.path),s.append("isSecret",this.formsp3k.isSecret),s.append("isApprove",this.formsp3k.isApprove),s.append("file_id",this.formsp3k.file_id),s.append("_method","PUT");const e={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(l){console.error("Error calculating progress:",l)}},headers:{"Content-Type":"multipart/form-data"}},i=await D.post(`/edit-attach/${this.formsp3k.id}`,s,e);i.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}}}},gt=n("span",null,"Operation ðŸ“„",-1),yt={class:"operation-wrapper"},At={class:"d-flex justify-space-between"},vt=["href"],_t=["onClick"],bt=["onClick"],Ft=n("span",{style:{color:"red"}},"*",-1),kt=n("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1),St=n("span",{style:{color:"red"}},"*",-1),Pt=n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1);function Dt(s,e,i,f,l,r){return u(),P(R,null,[t(A,{color:"warning"},{default:a(()=>[t(C,null,{default:a(()=>[t(b,{class:"d-flex justify-space-between"},{default:a(()=>[t(h,{cols:"12",sm:"6",md:"8"},{default:a(()=>[gt]),_:1})]),_:1})]),_:1}),(u(!0),P(R,null,E(i.data,(o,F)=>(u(),P("div",{key:F},[t(q,{density:"compact"},{default:a(()=>[t(U,null,{prepend:a(()=>[p(v(o.isApprove?"âœ…":"âŒ")+" ",1),t(g,{icon:"mdi-file"})]),append:a(()=>[n("div",yt,[n("div",At,[o.path!=="null"?(u(),c(S,{key:0,location:"top",text:"Lihat File"},{activator:a(({props:d})=>[n("a",k(d,{href:`${i.filePath}/${i.fileId}/${o.path}`,target:"_blank",rel:"noopener noreferrer"}),[n("button",null,[t(g,{size:"20",icon:"bx-link-external",color:"blue"})])],16,vt)]),_:2},1024)):m("",!0),o.path==="null"&&i.userAccess&&parseInt(i.userAccess.canInsertData)==1?(u(),c(S,{key:1,location:"top",text:"Upload File"},{activator:a(({props:d})=>[n("button",k(d,{onClick:O=>r.openModal(1,o)}),[t(g,{size:"20",icon:"bx-upload",color:"blue"})],16,_t)]),_:2},1024)):m("",!0),i.userAccess&&parseInt(i.userAccess.canUpdateData)?(u(),c(S,{key:2,location:"top",text:"Edit File"},{activator:a(({props:d})=>[n("button",k(d,{onClick:O=>r.openModal(1,o)}),[t(g,{size:"20",icon:"bx-edit",color:"blue"})],16,bt)]),_:2},1024)):m("",!0)])])]),default:a(()=>[t(x,null,{default:a(()=>[p(v(o.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))]),_:1}),t(I,{modelValue:l.isSp3k,"onUpdate:modelValue":e[6]||(e[6]=o=>l.isSp3k=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Data Attachment ")]),text:a(()=>[t(M,{onSubmit:N(r.insertSpk3k,["prevent"])},{default:a(()=>[t(b,null,{default:a(()=>[t(h,{md:"12",cols:"12"},{default:a(()=>[Ft,kt,t(j,{class:"my-3",modelValue:l.formsp3k.name,"onUpdate:modelValue":e[0]||(e[0]=o=>l.formsp3k.name=o),autofocus:"",disabled:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[St,Pt,t(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[1]||(e[1]=o=>r.handleFileChange(o))},null,8,["rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formsp3k.isSecret,"onUpdate:modelValue":e[2]||(e[2]=o=>l.formsp3k.isSecret=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.formsp3k.isApprove,"onUpdate:modelValue":e[3]||(e[3]=o=>l.formsp3k.isApprove=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(w,{type:"submit"},{default:a(()=>[p(" Simpan ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[4]||(e[4]=o=>r.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:a(()=>[t(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[5]||(e[5]=o=>l.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const wt=H(ft,[["render",Dt]]);const xt={components:{AttachmentCard1:ke,AttachmentCard2:at,AttachmentCard3:ee,attachmentCard3:ee,attachmentOperation:wt},name:"Phase",props:{phase1Attachments:{type:Object,required:!0},phase2Attachments:{type:Object,required:!0},phase3Attachments:{type:Object,required:!0},phase5Attachments:{type:Object,required:!0},userAccess:{type:Object,required:!0},dataFile:{type:Object,required:!0},userData:{type:Object,required:!0},dataNote:{type:Object,required:!0},updateDataNote:{type:Object,required:!0},insertNote:{type:Function,required:!0},changeApproval:{type:Function,required:!0},formatDate:{type:Function,required:!0},openModal:{type:Function,required:!0},deleteAttachment:{type:Function,required:!0},deleteNote:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},step:{type:Function,required:!0},fileId:{type:String,required:!0},resetNote:{type:Function,required:!0},notePhase1:{type:Object,required:!0},notePhase2:{type:Object,required:!0},notePhase3:{type:Object,required:!0},notePhase4:{type:Object,required:!0},modalNote:{type:Function,required:!0}},data(){return{filePath:this.$filePath,isUpdateNote:!1,currentPage:1,itemsPerPage:10}},computed:{paginatedNotes(){const s=(this.currentPage-1)*this.itemsPerPage,e=s+this.itemsPerPage;return this.dataFile.notes.slice(s,e)}},methods:{onPageChange(s){this.currentPage=s},formatInput(s){return s=s.replace(/\D/g,""),s=s.replace(/\B(?=(\d{3})+(?!\d))/g,","),s}}},Z=s=>(te("data-v-80d069da"),s=s(),ae(),s),It=Z(()=>n("span",null,"Informasi Umum â„¹ï¸",-1)),Vt=Z(()=>n("span",null,"Dokumen Pendukung ðŸ“„",-1)),Tt={class:"mb-5"},Ct={class:"mb-5"},Ut={class:"mb-5"},Nt={class:"mb-5"},Mt={key:0},Kt=Z(()=>n("span",null,"Catatan ðŸ“ƒ",-1)),jt={class:"comment-content"};function qt(s,e,i,f,l,r){const o=G("AttachmentCard1"),F=G("AttachmentCard2"),d=G("attachmentCard3"),O=G("attachmentOperation");return u(),c(A,{color:"backgroundCard"},{default:a(()=>[["Account Officer","AO","ao","account officer","Account Officer Exceutive"].includes(i.userData.position.name)?(u(),c(C,{key:1,class:"text-2xl font-weight-bold d-flex justify-center"},{default:a(()=>[p(" Detail "),parseInt(i.dataFile.isApproved)==1?(u(),c(T,{key:0,color:"success"},{default:a(()=>[p("Approved")]),_:1})):m("",!0),parseInt(i.dataFile.isApproved)==2?(u(),c(T,{key:1,color:"warning"},{default:a(()=>[p("Pending")]),_:1})):m("",!0),parseInt(i.dataFile.isApproved)==3?(u(),c(T,{key:2,color:"error"},{default:a(()=>[p("Rejected")]),_:1})):m("",!0)]),_:1})):(u(),c(C,{key:0,class:"text-2xl font-weight-bold d-flex justify-center"},{default:a(()=>[p(" Detail "),parseInt(i.dataFile.isApproved)==1?(u(),c(T,{key:0,color:"success",onClick:e[0]||(e[0]=y=>i.openModal(9))},{default:a(()=>[p("Approved")]),_:1})):m("",!0),parseInt(i.dataFile.isApproved)==2?(u(),c(T,{key:1,color:"warning",onClick:e[1]||(e[1]=y=>i.openModal(9))},{default:a(()=>[p("Pending")]),_:1})):m("",!0),parseInt(i.dataFile.isApproved)==3?(u(),c(T,{key:2,color:"error",onClick:e[2]||(e[2]=y=>i.openModal(9))},{default:a(()=>[p("Rejected")]),_:1})):m("",!0)]),_:1})),i.dataFile.reasonRejected!=null?(u(),c(K,{key:2},{default:a(()=>[t(A,null,{default:a(()=>[t(C,null,{default:a(()=>[p(" Alasan Ditolak ðŸ”¹ ")]),_:1}),t(K,null,{default:a(()=>[n("div",null,[n("span",null,v(i.dataFile&&i.dataFile.reasonRejected),1)])]),_:1})]),_:1})]),_:1})):m("",!0),t(K,null,{default:a(()=>[t(A,{class:"mb-5"},{default:a(()=>[t(C,null,{default:a(()=>[t(b,{class:"d-flex justify-space-between"},{default:a(()=>[t(h,{cols:"12",sm:"6",md:"8"},{default:a(()=>[It]),_:1}),i.userAccess&&i.userAccess.canInsertData?(u(),c(h,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:a(()=>[n("span",null,[t(w,{color:"primary",size:"small",class:"my-3 mx-3",onClick:e[3]||(e[3]=y=>i.openModal(4))},{default:a(()=>[p(" Edit Data ")]),_:1})])]),_:1})):m("",!0)]),_:1})]),_:1}),t(K,null,{default:a(()=>[t(q,{density:"compact"},{default:a(()=>[t(U,null,{prepend:a(()=>[t(g,{icon:"mdi-person"})]),default:a(()=>[t(x,null,{default:a(()=>[p(" Nama Pemohon")]),_:1}),t(x,null,{default:a(()=>[n("strong",null,v(i.dataFile.name),1)]),_:1})]),_:1}),t(q,{density:"compact"},{default:a(()=>[t(U,null,{prepend:a(()=>[t(g,{icon:"mdi-cash"})]),default:a(()=>[t(x,null,{default:a(()=>[p(" Jumlah Plafon")]),_:1}),t(x,null,{default:a(()=>[n("strong",null," Rp "+v(r.formatInput(i.dataFile.plafon)),1)]),_:1})]),_:1})]),_:1}),t(q,{density:"compact"},{default:a(()=>[t(U,null,{prepend:a(()=>[t(g,{icon:"mdi-office-building"})]),default:a(()=>[t(x,null,{default:a(()=>[p(" Jenis Usaha")]),_:1}),t(x,null,{default:a(()=>[n("strong",null,v(i.dataFile.type_bussiness),1)]),_:1})]),_:1})]),_:1}),t(q,{density:"compact"},{default:a(()=>[t(U,null,{prepend:a(()=>[t(g,{icon:"mdi-office-building"})]),default:a(()=>[t(x,null,{default:a(()=>[p(" Deskripsi Usaha")]),_:1}),t(x,null,{default:a(()=>[n("strong",null,v(i.dataFile.desc_bussiness),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(A,null,{default:a(()=>[t(C,null,{default:a(()=>[t(b,{class:"d-flex justify-space-between"},{default:a(()=>[t(h,{cols:"12",sm:"6",md:"8"},{default:a(()=>[Vt]),_:1})]),_:1})]),_:1}),t(K,null,{default:a(()=>[n("div",Tt,[t(o,{data:i.phase1Attachments,fileId:parseInt(i.dataFile.id),filePath:l.filePath,userAccess:i.userAccess,deleteAttachment:i.deleteAttachment,openModal:i.openModal},null,8,["data","fileId","filePath","userAccess","deleteAttachment","openModal"])]),n("div",Ct,[parseInt(i.dataFile.phase)>1?(u(),c(F,{key:0,data:i.phase2Attachments,fileId:parseInt(i.dataFile.id),filePath:l.filePath,userAccess:i.userAccess,deleteAttachment:i.deleteAttachment,getDetailFile:i.getDetailFile},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile"])):m("",!0)]),n("div",Ut,[parseInt(i.dataFile.phase)>2?(u(),c(d,{key:0,data:i.phase3Attachments,fileId:parseInt(i.dataFile.id),filePath:l.filePath,userAccess:i.userAccess,deleteAttachment:i.deleteAttachment,getDetailFile:i.getDetailFile},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile"])):m("",!0)]),n("div",Nt,[parseInt(i.dataFile.phase)>4?(u(),c(O,{key:0,data:i.phase5Attachments,fileId:parseInt(i.dataFile.id),filePath:l.filePath,userAccess:i.userAccess,deleteAttachment:i.deleteAttachment,getDetailFile:i.getDetailFile},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile"])):m("",!0)])]),_:1})]),_:1})]),_:1}),i.dataFile&&parseInt(i.dataFile.phase)<6?(u(),c(K,{key:3},{default:a(()=>[t(A,null,{default:a(()=>[t(C,null,{default:a(()=>[p(" Status Approval Phase âœ… ")]),_:1}),t(K,null,{default:a(()=>[i.dataFile&&i.dataFile.approvals&&i.dataFile.approvals.length?(u(),P("div",Mt,[(u(!0),P(R,null,E(i.dataFile.approvals,(y,Q)=>(u(),P(R,{key:Q},[i.dataFile.phase==y.phase?(u(),c(T,{key:0,color:y.approved==1?"success":"error",class:"mr-2",onClick:W=>i.changeApproval(y.id)},{default:a(()=>[p(v(y.user.name)+" - "+v(y.user.position.name),1)]),_:2},1032,["color","onClick"])):m("",!0)],64))),128))])):m("",!0)]),_:1})]),_:1})]),_:1})):m("",!0),t(K,null,{default:a(()=>[t(A,null,{default:a(()=>[t(C,null,{default:a(()=>[p(" Lain - lain ðŸ”¹ ")]),_:1}),t(K,null,{default:a(()=>[n("div",null,[t(oe,null,{default:a(()=>[t(T,{color:"success",onClick:e[4]||(e[4]=y=>i.openModal(6))},{default:a(()=>[p(" Data Durasi Waktu ")]),_:1}),t(T,{color:"success",onClick:e[5]||(e[5]=y=>i.openModal(7))},{default:a(()=>[p(" Data Riwayat File")]),_:1}),t(T,{color:"success",onClick:e[6]||(e[6]=y=>i.openModal(8))},{default:a(()=>[p(" Data Riwayat Persetujuan")]),_:1}),t(T,{color:"success",onClick:e[7]||(e[7]=y=>i.openModal(10))},{default:a(()=>[p(" Data Riwayat Dokumen Pendukung")]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),t(Y),t(K,null,{default:a(()=>[t(A,null,{default:a(()=>[t(C,null,{default:a(()=>[t(b,{class:"d-flex justify-space-between"},{default:a(()=>[t(h,{cols:"12",sm:"6",md:"8"},{default:a(()=>[Kt]),_:1}),t(h,{cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"})]),_:1}),t(M,{onSubmit:N(i.insertNote,["prevent"])},{default:a(()=>[t(b,{align:"center",justify:"center"},{default:a(()=>[t(h,{cols:"12",sm:"8",md:"10"},{default:a(()=>[t(X,{outlined:"",rows:"2",placeholder:"Tambahkan catatan disini",modelValue:i.dataNote.note,"onUpdate:modelValue":e[8]||(e[8]=y=>i.dataNote.note=y)},null,8,["modelValue"])]),_:1}),t(h,{cols:"12",sm:"4",md:"2"},{default:a(()=>[t(w,{color:"primary",icon:"",type:"submit"},{default:a(()=>[t(g,null,{default:a(()=>[p("mdi-note-plus")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),t(K,null,{default:a(()=>[n("div",null,[(u(!0),P(R,null,E(r.paginatedNotes,(y,Q)=>(u(),P("div",{key:Q,class:"user-comment"},[n("div",jt,[n("p",null,v(y.note),1),t(b,{class:"justify-space-between mx-2 mb-2"},{default:a(()=>[n("small",null,[n("strong",null,v(y.user.name)+" - "+v(y.user.position.name),1)]),n("small",null,v(i.formatDate(y.created_at)),1)]),_:2},1024)]),i.userData.id==y.user_id?(u(),c(se,{key:0,transition:"scale-transition"},{activator:a(({props:W})=>[t(g,k(W,{class:"ellipsis-icon"}),{default:a(()=>[p("mdi-dots-vertical")]),_:2},1040)]),default:a(()=>[t(q,null,{default:a(()=>[t(U,{color:"primary",onClick:W=>i.openModal(3,y)},{prepend:a(()=>[t(g,{icon:"mdi-edit"})]),default:a(()=>[t(x,null,{default:a(()=>[p(" edit")]),_:1})]),_:2},1032,["onClick"]),t(U,{color:"primary",onClick:W=>i.deleteNote(y.id)},{prepend:a(()=>[t(g,{icon:"mdi-trash"})]),default:a(()=>[t(x,null,{default:a(()=>[p(" hapus")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):m("",!0)]))),128)),t(ne,{modelValue:l.currentPage,"onUpdate:modelValue":e[9]||(e[9]=y=>l.currentPage=y),length:Math.ceil(i.dataFile.notes.length/l.itemsPerPage),onInput:r.onPageChange},null,8,["modelValue","length","onInput"])])]),_:1})]),_:1})]),_:1}),i.userAccess&&parseInt(i.userAccess.canApprove)?(u(),c(le,{key:4},{default:a(()=>[i.dataFile&&parseInt(i.dataFile.plafon)>=25e6?(u(),c(h,{key:0,class:"d-flex justify-space-beetwen"},{default:a(()=>[i.dataFile&&parseInt(i.dataFile.phase)>1?(u(),c(w,{key:0,color:"info",text:"Prev Phase",variant:"tonal",onClick:e[10]||(e[10]=y=>i.step(i.fileId,"-"))})):m("",!0),t($),i.dataFile&&parseInt(i.dataFile.phase)<5?(u(),c(w,{key:1,color:"info",text:"Next Phase",variant:"tonal",onClick:e[11]||(e[11]=y=>i.step(i.fileId,"next"))})):m("",!0)]),_:1})):(u(),c(h,{key:1,class:"d-flex justify-space-beetwen"},{default:a(()=>[i.dataFile&&parseInt(i.dataFile.phase)>1?(u(),c(w,{key:0,color:"info",text:"Prev Phase",variant:"tonal",onClick:e[12]||(e[12]=y=>i.step(i.fileId,"-"))})):m("",!0),t($),i.dataFile&&parseInt(i.dataFile.phase)<4?(u(),c(w,{key:1,color:"info",text:"Next Phase",variant:"tonal",onClick:e[13]||(e[13]=y=>i.step(i.fileId,"next"))})):m("",!0)]),_:1}))]),_:1})):m("",!0)]),_:1})}const Rt=H(xt,[["render",qt],["__scopeId","data-v-80d069da"]]),Ot={components:{phase:Rt},data(){return{overlay:!1,isMobile:!1,userData:null,userAccess:{},fileId:this.$route.params.fileId,isShowPhase4:!1,isShowPhase5:!1,isShowTimers:!1,isShowHistory:!1,isShowApprovals:!1,isChangeStatusCredit:!1,isShowAttachment:!1,nameFileList:[{value:"KTP Pemohon",title:"KTP Pemohon"},{value:"Kartu Keluarga",title:"Kartu Keluarga"},{value:"Jaminan SHM",title:"Jaminan SHM"},{value:"Foto Kunjungan",title:"Foto Kunjungan"},{value:"Buku Nikah",title:"Buku Nikah"},{value:"SHM",title:"Jaminan SHM"},{value:"BPKB",title:"Jaminan BPKB"},{value:"KTP Pasangan",title:"KTP Pasangan"},{value:"KTP Atas Nama Jaminan",title:"KTP Atas Nama Jaminan"},{value:"KTP Atas Nama Jaminan",title:"KTP Atas Nama Jaminan"},{value:"Resume SLIK",title:"Resume SLIK"},{value:"Detail SLIK",title:"Detail SLIK"},{value:"File Banding",title:"File Banding"},{value:"Analisa Awal Kredit AO",title:"Analisa Awal Kredit AO"},{value:"Analisa Kredit",title:"Analisa Kredit"},{value:"SP3K",title:"SP3K"},{value:"Notaris",title:"Notaris"},{value:"Lain-lain",title:"Lain-lain"}],changeStatus:{id:null,status:null,reasonRejected:null},stepperModel:0,isUpdateGeneralInfo:!1,generalInfo:{id:null,name:"",type_bussiness:"",desc_bussiness:"",plafon:"0"},dataFile:{id:this.$route.params.fileId,user_id:null,phase:1,name:"",type_bussiness:"",desc_bussiness:"",plafon:"0",surveyResult:"-",otsResult:"-",cekLingResult:"-",verTelResult:"-",creditScoring:"-",attachments:[],notes:[],approvals:[],phase_times:[],file_activities:[],reasonRejected:""},filePath:this.$filePath,timerHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Waktu Mulai",value:"startTime",sortable:!0},{text:"Waktu Selesai",value:"endTime",sortable:!0},{text:"Rentang Waktu",value:"timeDiff",sortable:!0}],attachmentHeaders:[{text:"Nama",value:"name",sortable:!0},{text:"Phase",value:"phase",sortable:!0},{text:"Waktu",value:"startTime",sortable:!0}],historyHeaders:[{text:"User",value:"user.name",sortable:!0},{text:"Aktivitas",value:"activity",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],approvalHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Nama",value:"user.name",sortable:!0},{text:"Status",value:"approved",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],isUpdateNote:!1,dataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},updateDataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},phaseNote:[],notesByPhase:{},isModalPhase:!1,insertAttch:!1,updateAttch:!1,rules:{required:s=>!!s||"Required"},uploadProgress:null,attachFile:{id:null,file_id:this.$route.params.fileId,phase:null,name:null,path:null,note:null,isSecret:0,isApprove:1},notePhase1:[],notePhase2:[],notePhase3:[],notePhase4:[],currentPage:1,itemsPerPage:10,isDataPhase3:!1,dataPhase3:{surveyResult:""},dataAttachPhase1:[],dataAttachPhase2:[],dataAttachPhase3:[],dataAttachPhase4:[],dataAttachPhase5:[]}},computed:{paginatedNotes(){const s=(this.currentPage-1)*this.itemsPerPage,e=s+this.itemsPerPage;return this.dataFile.notes.slice(s,e)}},methods:{async updateStatusCredit(){try{this.overlay=!0;const s=new FormData;if(s.append("id",this.fileId),s.append("status",this.changeStatus.status),this.changeStatus.status=="3"){if(this.changeStatus.reasonRejected==null){this.overlay=!1,this.closeModal(9),this.$showToast("error","Sorry","Alasan Penolakan wajib diisi");return}s.append("reasonRejected",this.changeStatus.reasonRejected)}const e=await D.post("/change-status",s);e.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.closeModal(9),this.$showToast("success","Success",e.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.closeModal(9),this.$showToast("error","Sorry",e.data.message))}catch(s){this.closeModal(9),this.$showToast("error","Sorry",s.response.data.message)}},calculateTimeDiff(s,e){let i=new Date(s),l=(e?new Date(e):new Date).valueOf()-i.valueOf(),r=Math.floor(l/1e3/60),o=Math.floor(r/60),F=r%60;return`${o} jam ${F} menit`},formatFileId(s){return Array.isArray(s)?s.join(", "):s},async updatePhase3(){try{this.overlay=!0;const s=new FormData;s.append("surveyResult",this.dataPhase3.surveyResult),s.append("_method","PUT");const e=await D.post(`/survey-credit/${this.fileId}`,s);e.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("success","Success",e.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("error","Sorry",e.data.message))}catch(s){this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},onPageChange(s){this.currentPage=s},formatInputPlafon(s){let e=s.target.value;e=e.replace(/\D/g,""),e=e.replace(/\B(?=(\d{3})+(?!\d))/g,","),s.target.value=e},formatDate(s){return new Date(s).toLocaleString("id-ID")},resetNote(){this.dataNote={file_id:this.$route.params.fileId,user_id:null,phase:null,note:null,isRead:null}},checkMobile(){this.isMobile=window.innerWidth<728},formatInput(s){return s=s.replace(/\D/g,""),s=s.replace(/\B(?=(\d{3})+(?!\d))/g,","),s},async step(s,e){try{if(e=="next"){if(!window.confirm("Apakah Anda yakin melanjutkan ke tahap selanjutnya"))return;this.overlay=!0;const f=new FormData;f.append("id",s),f.append("type",e),f.append("_method","POST");const l=await D.post("/change-phase-approve",f);l.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",l.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.data.data.message))}else{if(!window.confirm("Apakah Anda yakin Kembali ke phase sebelumnya"))return;this.overlay=!0;const f=new FormData;f.append("id",s),f.append("type",e),f.append("_method","POST");const l=await D.post("/change-phase-approve",f);l.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",l.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.data.message))}}catch(i){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.response.data.message)}},async getDetailFile(s){try{this.overlay=!0;const e=await D.get(`/credit/${s}`);if(e.status===200){this.dataFile=e.data.data.file,this.userAccess=e.data.data.userAccess,this.dataAttachPhase1=e.data.data.file.attachments.filter(i=>i.phase==1),this.dataAttachPhase2=e.data.data.file.attachments.filter(i=>i.phase==2),this.dataAttachPhase3=e.data.data.file.attachments.filter(i=>i.phase==3),this.dataAttachPhase5=e.data.data.file.attachments.filter(i=>i.phase==5),this.dataFile.phase=parseInt(this.dataFile.phase),this.isShowPhase4=!(parseInt(this.dataFile.plafon)<25e6),this.dataFile.phase==5&&(this.isShowPhase5=!0),parseInt(this.dataFile.plafon)>=25e6?parseInt(this.dataFile.phase)==5?this.stepperModel=parseInt(this.dataFile.phase)-1:this.stepperModel=parseInt(this.dataFile.phase)-1:parseInt(this.dataFile.phase)==5?this.stepperModel=parseInt(this.dataFile.phase)-2:this.stepperModel=parseInt(this.dataFile.phase)-1,this.generalInfo.id=this.dataFile.id,this.generalInfo.name=this.dataFile.name,this.generalInfo.type_bussiness=this.dataFile.type_bussiness,this.generalInfo.desc_bussiness=this.dataFile.desc_bussiness,this.generalInfo.plafon=this.dataFile.plafon;for(let i=0;i<5;i++)this.separateNotesByPhase(this.dataFile,i);this.overlay=!1}else this.$showToast("error","Sorry",e.data.data.message),this.overlay=!1}catch(e){this.$showToast("error","Sorry",e.response.data.message),this.overlay=!1}},getUserData(){const s=localStorage.getItem("userData");s&&(this.userData=JSON.parse(s))},openModal(s,e=null){s==1?this.insertAttch=!0:s==2?(this.attachFile.id=e.id,this.attachFile.file_id=e.file_id,this.attachFile.name=e.name,this.attachFile.isSecret=e.isSecret,this.attachFile.isApprove=e.isApprove,this.updateAttch=!0):s==3?(this.updateDataNote.id=e.id,this.updateDataNote.file_id=e.file_id,this.updateDataNote.note=e.note,this.isUpdateNote=!0):s==4?this.isUpdateGeneralInfo=!0:s==5?(this.dataPhase3.surveyResult=this.dataFile.surveyResult,this.isDataPhase3=!0):s==6?this.isShowTimers=!0:s==7?this.isShowHistory=!0:s==8?this.isShowApprovals=!0:s==9?this.isChangeStatusCredit=!0:s==10&&(this.isShowAttachment=!0)},closeModal(s){s===1?(this.resetAttch(),this.insertAttch=!1):s===2?this.updateAttch=!1:s===3?(this.resetNote(),this.updateNote=!1):s==4?this.isUpdateGeneralInfo=!1:s==5?(this.dataPhase3.surveyResult="",this.isDataPhase3=!1):s==9&&(this.isChangeStatusCredit=!1,this.changeStatus.id=null,this.changeStatus.status=null,this.changeStatus.reasonRejected=null)},async updateGeneralInfo(){try{this.overlay=!0;const s=new FormData;s.append("name",this.generalInfo.name),s.append("plafon",this.generalInfo.plafon.replace(/\D/g,"")),s.append("type_bussiness",this.generalInfo.type_bussiness),s.append("desc_bussiness",this.generalInfo.desc_bussiness),s.append("_method","PUT");const e=await D.post(`/edit-general-info/${this.generalInfo.id}`,s);e.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("success","Success",e.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("error","Sorry",e.data.message))}catch(s){this.isUpdateGeneralInfo=!1,this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},async insertNote(){try{if(this.overlay=!0,this.dataNote.note==null){this.$showToast("error","Sorry","Note cannot be empty"),this.overlay=!1;return}const s=new FormData;s.append("file_id",this.dataNote.file_id),s.append("note",this.dataNote.note),s.append("_method","POST");const e=await D.post("/note",s);e.status===200?(this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",e.data.message)):(this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",e.data.message))}catch(s){this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},async updateNote(){try{this.overlay=!0;const s=new FormData;s.append("file_id",this.updateDataNote.file_id),s.append("note",this.updateDataNote.note),s.append("_method","PUT");const e=await D.post(`/note/${this.updateDataNote.id}`,s);e.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("success","Success",e.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("error","Sorry",e.data.message))}catch(s){this.isUpdateNote=!1,this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},async deleteNote(s){try{if(this.overlay=!0,!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;const i=await D.delete(`/note/${s}`);i.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",i.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(e){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",e.response.data.message)}},separateNotesByPhase(s,e){s.notes.forEach(i=>{if(i.phase==e)switch(e){case 1:this.notePhase1.push(i);break;case 2:this.notePhase2.push(i);break;case 3:this.notePhase3.push(i);break;case 4:this.notePhase4.push(i);break;default:console.log("Invalid phase")}})},modalNote(){this.isModalPhase=!this.isModalPhase,console.log(this.isModalPhase)},async changeApproval(s){try{this.overlay=!0;const e=await D.get(`/change-phase-approve/${s}`);e.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",e.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",e.data.message))}catch(e){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",e.response.data.message)}},handleFileChange(s){const e=s.target.files[0];e&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(e.type)?this.attachFile.path=e:(this.closeModal(1),this.closeModal(2),this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, DOCX, XLS, dan XLSX yang diizinkan."),s.target.value=null)},resetAttch(){this.attachFile={id:null,file_id:this.$route.params.fileId,name:null,path:null,note:null,isSecret:!1}},async insertAttachment(){try{this.overlay=!0;const s=new FormData;s.append("file_id",this.attachFile.file_id),s.append("name",this.attachFile.name),s.append("path",this.attachFile.path),s.append("phase",this.dataFile.phase),s.append("isApprove",this.attachFile.isApprove),this.dataFile.phase==2&&s.append("isSecret",this.attachFile.isSecret),s.append("_method","POST");const e={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(l){console.error("Error calculating progress:",l)}},headers:{"Content-Type":"multipart/form-data"}},i=await D.post("/add-attach",s,e);i.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},async editAttachment(){try{this.overlay=!0;const s=new FormData;s.append("file_id",this.attachFile.file_id),s.append("name",this.attachFile.name),s.append("path",this.attachFile.path),s.append("phase",this.dataFile.phase),s.append("isApprove",this.attachFile.isApprove),this.attachFile.path!=null&&s.append("path",this.attachFile.path),s.append("isSecret",this.attachFile.isSecret),s.append("_method","PUT");const e={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(l){console.error("Error calculating progress:",l)}},headers:{"Content-Type":"multipart/form-data"}},i=await D.post(`/edit-attach/${this.attachFile.id}`,s,e);i.status===200?(this.overlay=!1,this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},async deleteAttachment(s){try{if(this.overlay=!0,!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;(await D.delete(`/delete-attach/${s}`)).status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill","Terjadi Kesalahan Silahkan Coba Lagi"),window.location.reload()):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry","Terjadi Kesalahan Silahkan Coba Lagi"),window.location.reload())}catch{this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry","Terjadi Kesalahan Silahkan Coba Lagi"),window.location.reload()}}},mounted(){this.checkMobile(),this.getUserData(),this.getDetailFile(this.fileId)}};const _=s=>(te("data-v-5f899a8d"),s=s(),ae(),s),Lt=_(()=>n("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Bt=_(()=>n("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),zt=_(()=>n("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Gt=_(()=>n("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Et=_(()=>n("span",{style:{color:"red"}},"*",-1)),Ht=_(()=>n("span",{class:"subtitle-1 text-center"},"Note: ",-1)),Jt=_(()=>n("span",{style:{color:"red"}},"*",-1)),Yt=_(()=>n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),Wt=_(()=>n("span",{style:{color:"red"}},"*",-1)),Xt=_(()=>n("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),Qt=_(()=>n("span",{style:{color:"red"}},"*",-1)),Zt=_(()=>n("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),$t=_(()=>n("span",{style:{color:"red"}},"*",-1)),ea=_(()=>n("span",{class:"subtitle-1 text-center"},"Nama Pemohon: ",-1)),ta=_(()=>n("span",{style:{color:"red"}},"*",-1)),aa=_(()=>n("span",{class:"subtitle-1 text-center"},"Jumlah Plafon: ",-1)),la=_(()=>n("span",{style:{color:"red"}},"*",-1)),sa=_(()=>n("span",{class:"subtitle-1 text-center"},"Jenis Usaha: ",-1)),ia=_(()=>n("span",{style:{color:"red"}},"*",-1)),oa=_(()=>n("span",{class:"subtitle-1 text-center"},"Deskripsi Usaha: ",-1)),na=_(()=>n("span",{style:{color:"red"}},"*",-1)),ra=_(()=>n("span",{class:"subtitle-1 text-center"},"Hasil Survei: ",-1)),da=_(()=>n("span",{style:{color:"red"}},"*",-1)),ua=_(()=>n("span",{class:"subtitle-1 text-center"},"Alasan: ",-1));function pa(s,e,i,f,l,r){const o=G("phase"),F=G("EasyDataTable");return u(),P("div",null,[t(pe,{"model-value":l.overlay,class:"align-center justify-center"},{default:a(()=>[t(ie,{color:"blue-lighten-3",indeterminate:"",size:41,width:5}),p(" Loading... ")]),_:1},8,["model-value"]),t(A,null,{default:a(()=>[t(C,{class:"text-2xl font-weight-bold d-flex justify-left"},{default:a(()=>[p(" Credit ")]),_:1}),t(K,null,{default:a(()=>[t(re,{"model-value":l.stepperModel,mobile:l.isMobile},{default:a(()=>[t(de,null,{default:a(()=>[t(J,{title:"Phase 1 (Pooling)",value:"1",complete:l.stepperModel>1},null,8,["complete"]),t(Y),t(J,{title:"Phase 2 (SLIK)",value:"2",complete:l.stepperModel>2},null,8,["complete"]),t(Y),t(J,{title:"Phase 3 (Keputusan)",value:"3",complete:l.stepperModel>3},null,8,["complete"]),l.isShowPhase4?(u(),c(Y,{key:0})):m("",!0),l.isShowPhase4?(u(),c(J,{key:1,title:"Phase 4 (Komite)",value:"4",complete:l.stepperModel>4},null,8,["complete"])):m("",!0),l.isShowPhase5?(u(),c(Y,{key:2})):m("",!0),l.isShowPhase5?(u(),c(J,{key:3,title:"Operation",value:"5"})):m("",!0)]),_:1}),t(ue,null,{default:a(()=>[l.userData&&l.userData.position.role.isPhase1Access==1?(u(),c(L,{key:0,value:"1"},{default:a(()=>[t(o,{dataFile:l.dataFile,userData:l.userData,"insert-note":r.insertNote,"change-approval":r.changeApproval,"format-date":r.formatDate,"open-modal":r.openModal,"delete-attachment":r.deleteAttachment,"delete-note":r.deleteNote,"get-detail-file":r.getDetailFile,step:r.step,"file-id":r.formatFileId(l.fileId),"user-access":l.userAccess,"reset-note":r.resetNote,"data-note":l.dataNote,"update-data-note":l.updateDataNote,"note-phase1":l.notePhase1,"note-phase2":l.notePhase2,"note-phase3":l.notePhase3,"note-phase4":l.notePhase4,"modal-note":r.modalNote,phase1Attachments:l.dataAttachPhase1,phase2Attachments:l.dataAttachPhase2,phase3Attachments:l.dataAttachPhase3,phase5Attachments:l.dataAttachPhase5},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase5Attachments"])]),_:1})):(u(),c(L,{key:1,value:"1"},{default:a(()=>[Lt]),_:1})),l.userData&&l.userData.position.role.isPhase2Access==1?(u(),c(L,{key:2,value:"2"},{default:a(()=>[t(o,{dataFile:l.dataFile,userData:l.userData,"insert-note":r.insertNote,"change-approval":r.changeApproval,"format-date":r.formatDate,"open-modal":r.openModal,"delete-attachment":r.deleteAttachment,"delete-note":r.deleteNote,"get-detail-file":r.getDetailFile,step:r.step,"file-id":r.formatFileId(l.fileId),"user-access":l.userAccess,"reset-note":r.resetNote,"data-note":l.dataNote,"update-data-note":l.updateDataNote,"note-phase1":l.notePhase1,"note-phase2":l.notePhase2,"note-phase3":l.notePhase3,"note-phase4":l.notePhase4,"modal-note":r.modalNote,phase1Attachments:l.dataAttachPhase1,phase2Attachments:l.dataAttachPhase2,phase3Attachments:l.dataAttachPhase3,phase5Attachments:l.dataAttachPhase5},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase5Attachments"])]),_:1})):(u(),c(L,{key:3,value:"2"},{default:a(()=>[Bt]),_:1})),l.userData&&l.userData.position.role.isPhase3Access==1?(u(),c(L,{key:4,value:"3"},{default:a(()=>[t(o,{dataFile:l.dataFile,userData:l.userData,"insert-note":r.insertNote,"change-approval":r.changeApproval,"format-date":r.formatDate,"open-modal":r.openModal,"delete-attachment":r.deleteAttachment,"delete-note":r.deleteNote,"get-detail-file":r.getDetailFile,step:r.step,"file-id":r.formatFileId(l.fileId),"user-access":l.userAccess,"reset-note":r.resetNote,"data-note":l.dataNote,"update-data-note":l.updateDataNote,"note-phase1":l.notePhase1,"note-phase2":l.notePhase2,"note-phase3":l.notePhase3,"note-phase4":l.notePhase4,"modal-note":r.modalNote,phase1Attachments:l.dataAttachPhase1,phase2Attachments:l.dataAttachPhase2,phase3Attachments:l.dataAttachPhase3,phase5Attachments:l.dataAttachPhase5},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase5Attachments"])]),_:1})):(u(),c(L,{key:5,value:"3"},{default:a(()=>[zt]),_:1})),l.userData&&l.userData.position.role.isPhase4Access==1?(u(),c(L,{key:6,value:"4"},{default:a(()=>[t(o,{dataFile:l.dataFile,userData:l.userData,"insert-note":r.insertNote,"change-approval":r.changeApproval,"format-date":r.formatDate,"open-modal":r.openModal,"delete-attachment":r.deleteAttachment,"delete-note":r.deleteNote,"get-detail-file":r.getDetailFile,step:r.step,"file-id":r.formatFileId(l.fileId),"user-access":l.userAccess,"reset-note":r.resetNote,"data-note":l.dataNote,"update-data-note":l.updateDataNote,"note-phase1":l.notePhase1,"note-phase2":l.notePhase2,"note-phase3":l.notePhase3,"note-phase4":l.notePhase4,"modal-note":r.modalNote,phase1Attachments:l.dataAttachPhase1,phase2Attachments:l.dataAttachPhase2,phase3Attachments:l.dataAttachPhase3,phase5Attachments:l.dataAttachPhase5},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase5Attachments"])]),_:1})):(u(),c(L,{key:7,value:"4"},{default:a(()=>[Gt]),_:1})),t(L,{value:"5"},{default:a(()=>[t(o,{dataFile:l.dataFile,userData:l.userData,"insert-note":r.insertNote,"change-approval":r.changeApproval,"format-date":r.formatDate,"open-modal":r.openModal,"delete-attachment":r.deleteAttachment,"delete-note":r.deleteNote,"get-detail-file":r.getDetailFile,step:r.step,"file-id":r.formatFileId(l.fileId),"user-access":l.userAccess,"reset-note":r.resetNote,"data-note":l.dataNote,"update-data-note":l.updateDataNote,"note-phase1":l.notePhase1,"note-phase2":l.notePhase2,"note-phase3":l.notePhase3,"note-phase4":l.notePhase4,"modal-note":r.modalNote,phase1Attachments:l.dataAttachPhase1,phase2Attachments:l.dataAttachPhase2,phase3Attachments:l.dataAttachPhase3,phase5Attachments:l.dataAttachPhase5},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase5Attachments"])]),_:1})]),_:1})]),_:1},8,["model-value","mobile"])]),_:1})]),_:1}),t(I,{modelValue:l.insertAttch,"onUpdate:modelValue":e[7]||(e[7]=d=>l.insertAttch=d),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Tambah Data ")]),text:a(()=>[t(M,{onSubmit:N(r.insertAttachment,["prevent"])},{default:a(()=>[t(b,null,{default:a(()=>[t(h,{md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Pilih Keterangan File",items:l.nameFileList,modelValue:l.attachFile.name,"onUpdate:modelValue":e[0]||(e[0]=d=>l.attachFile.name=d),"prepend-icon":"mdi-help-rhombus"},null,8,["items","modelValue"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[Et,Ht,t(j,{class:"my-3",modelValue:l.attachFile.note,"onUpdate:modelValue":e[1]||(e[1]=d=>l.attachFile.note=d),autofocus:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[Jt,Yt,t(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[2]||(e[2]=d=>r.handleFileChange(d))},null,8,["rules"])]),_:1}),l.dataFile.phase==2?(u(),c(h,{key:0,md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Apakah Termasuk File Rahasia ? (SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.attachFile.isSecret,"onUpdate:modelValue":e[3]||(e[3]=d=>l.attachFile.isSecret=d),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):m("",!0),t(h,{md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.attachFile.isApprove,"onUpdate:modelValue":e[4]||(e[4]=d=>l.attachFile.isApprove=d),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(w,{type:"submit",disabled:(l.attachFile.name&&l.attachFile.path&&l.attachFile.isApprove!=1&&l.attachFile.note==null)==null},{default:a(()=>[p(" Simpan ")]),_:1},8,["disabled"]),n("button",{type:"button",class:"btn btn-blue",onClick:e[5]||(e[5]=d=>r.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:a(()=>[t(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[6]||(e[6]=d=>l.uploadProgress=d),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:l.updateAttch,"onUpdate:modelValue":e[14]||(e[14]=d=>l.updateAttch=d),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Edit Data ")]),text:a(()=>[t(M,{onSubmit:N(r.editAttachment,["prevent"])},{default:a(()=>[t(b,null,{default:a(()=>[t(h,{md:"12",cols:"12"},{default:a(()=>[Wt,Xt,t(j,{class:"my-3",modelValue:l.attachFile.name,"onUpdate:modelValue":e[8]||(e[8]=d=>l.attachFile.name=d),autofocus:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[Qt,Zt,t(z,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[l.rules.required],onChange:e[9]||(e[9]=d=>r.handleFileChange(d))},null,8,["rules"])]),_:1}),l.dataFile.phase==2?(u(),c(h,{key:0,md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Apakah Termasuk File Rahasia ? (SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.attachFile.isSecret,"onUpdate:modelValue":e[10]||(e[10]=d=>l.attachFile.isSecret=d),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):m("",!0),t(h,{md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Apakah Anda Yakin file sudah benar ?",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:l.attachFile.isApprove,"onUpdate:modelValue":e[11]||(e[11]=d=>l.attachFile.isApprove=d),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),t(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(w,{type:"submit"},{default:a(()=>[p(" Update ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[12]||(e[12]=d=>r.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:a(()=>[t(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[13]||(e[13]=d=>l.uploadProgress=d),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:l.isUpdateGeneralInfo,"onUpdate:modelValue":e[21]||(e[21]=d=>l.isUpdateGeneralInfo=d),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Edit Informasi Umum ")]),text:a(()=>[t(M,{onSubmit:N(r.updateGeneralInfo,["prevent"])},{default:a(()=>[t(b,null,{default:a(()=>[t(h,{md:"12",cols:"12"},{default:a(()=>[$t,ea,t(j,{class:"my-3",modelValue:l.generalInfo.name,"onUpdate:modelValue":e[15]||(e[15]=d=>l.generalInfo.name=d),autofocus:"",rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[ta,aa,t(j,{class:"my-3",modelValue:l.generalInfo.plafon,"onUpdate:modelValue":e[16]||(e[16]=d=>l.generalInfo.plafon=d),type:"text",onInput:r.formatInputPlafon},null,8,["modelValue","onInput"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[la,sa,t(j,{class:"my-3",modelValue:l.generalInfo.type_bussiness,"onUpdate:modelValue":e[17]||(e[17]=d=>l.generalInfo.type_bussiness=d),rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(h,{md:"12",cols:"12"},{default:a(()=>[ia,oa,t(j,{class:"my-3",modelValue:l.generalInfo.desc_bussiness,"onUpdate:modelValue":e[18]||(e[18]=d=>l.generalInfo.desc_bussiness=d),rules:[l.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(w,{type:"submit"},{default:a(()=>[p(" Update ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[19]||(e[19]=d=>r.closeModal(4))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:a(()=>[t(B,{modelValue:l.uploadProgress,"onUpdate:modelValue":e[20]||(e[20]=d=>l.uploadProgress=d),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:l.isUpdateNote,"onUpdate:modelValue":e[23]||(e[23]=d=>l.isUpdateNote=d),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Update Note ")]),text:a(()=>[t(M,{onSubmit:N(r.updateNote,["prevent"])},{default:a(()=>[t(b,{align:"center",justify:"center"},{default:a(()=>[t(h,{md:"10",cols:"10"},{default:a(()=>[t(X,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:l.updateDataNote.note,"onUpdate:modelValue":e[22]||(e[22]=d=>l.updateDataNote.note=d),rows:"2"},null,8,["modelValue"])]),_:1}),t(h,{md:"2",cols:"2"},{default:a(()=>[t(w,{density:"compact",icon:"mdi-note-plus",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:l.isDataPhase3,"onUpdate:modelValue":e[26]||(e[26]=d=>l.isDataPhase3=d),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Hasil Survey ")]),text:a(()=>[t(M,{onSubmit:N(r.updatePhase3,["prevent"])},{default:a(()=>[t(b,null,{default:a(()=>[t(h,{md:"12",cols:"12"},{default:a(()=>[na,ra,t(X,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:l.dataPhase3.surveyResult,"onUpdate:modelValue":e[24]||(e[24]=d=>l.dataPhase3.surveyResult=d),rows:"3"},null,8,["modelValue"])]),_:1}),t(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(w,{type:"submit"},{default:a(()=>[p("Update")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[25]||(e[25]=d=>r.closeModal(5))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:l.isShowTimers,"onUpdate:modelValue":e[27]||(e[27]=d=>l.isShowTimers=d),width:"auto",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Data Waktu ")]),text:a(()=>[t(F,{headers:l.timerHeaders,items:l.dataFile.phase_times},{"item-timeDiff":a(d=>[p(v(r.calculateTimeDiff(d.startTime,d.endTime)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:l.isShowAttachment,"onUpdate:modelValue":e[28]||(e[28]=d=>l.isShowAttachment=d),width:"auto",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Data Waktu ")]),text:a(()=>[t(F,{headers:l.attachmentHeaders,items:l.dataFile.attachments},null,8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:l.isShowHistory,"onUpdate:modelValue":e[29]||(e[29]=d=>l.isShowHistory=d),width:"auto",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Data Riwayat ")]),text:a(()=>[t(F,{"show-index":"",headers:l.historyHeaders,items:l.dataFile.file_activities},{"item-created_at":a(d=>[p(v(r.formatDate(d.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:l.isShowApprovals,"onUpdate:modelValue":e[30]||(e[30]=d=>l.isShowApprovals=d),width:"auto",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Riwayat Persetujuan ")]),text:a(()=>[t(F,{headers:l.approvalHeaders,items:l.dataFile.approvals},{"item-approved":a(d=>[d.approved==1?(u(),c(T,{key:0,color:"success"},{default:a(()=>[p(" Disetujui ")]),_:1})):(u(),c(T,{key:1,color:"error"},{default:a(()=>[p(" Belum disetujui ")]),_:1}))]),"item-created_at":a(d=>[p(v(r.formatDate(d.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:l.isChangeStatusCredit,"onUpdate:modelValue":e[34]||(e[34]=d=>l.isChangeStatusCredit=d),width:"auto",transition:"dialog-top-transition"},{default:a(()=>[t(A,null,{title:a(()=>[p(" Ubah Status File ")]),text:a(()=>[t(M,{onSubmit:N(r.updateStatusCredit,["prevent"])},{default:a(()=>[t(b,null,{default:a(()=>[t(h,{md:"12",cols:"12"},{default:a(()=>[t(V,{label:"Ubah Status File",items:[{value:1,title:"Approved"},{value:2,title:"Pending"},{value:3,title:"Rejected"}],modelValue:l.changeStatus.status,"onUpdate:modelValue":e[31]||(e[31]=d=>l.changeStatus.status=d)},null,8,["modelValue"])]),_:1}),l.changeStatus.status==3?(u(),c(h,{key:0,md:"12",cols:"12"},{default:a(()=>[da,ua,t(X,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:l.changeStatus.reasonRejected,"onUpdate:modelValue":e[32]||(e[32]=d=>l.changeStatus.reasonRejected=d),rows:"2"},null,8,["modelValue"])]),_:1})):m("",!0),t(h,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(w,{type:"submit"},{default:a(()=>[p(" Simpan ")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:e[33]||(e[33]=d=>r.closeModal(9))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}const Va=H(Ot,[["render",pa],["__scopeId","data-v-5f899a8d"]]);export{Va as default};
