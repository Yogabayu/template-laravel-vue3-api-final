import{m as u}from"./index-f2a4a954.js";import{o as V,c as b,a,w as t,b as r,G as F,E as k,e as d,d as f,V as p}from"./main-19788671.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import{V as P}from"./VOverlay-522e29d2.js";import{V as h,d as i,a as g,e as y,c as _}from"./VRow-3c6bb6d8.js";import{V as w,a as m}from"./VTextField-523db1d7.js";import{V as U}from"./VAlert-83e7812d.js";import"./VImg-b7b7784d.js";import"./VGrid-ec1b317c.js";const S={data(){return{dataForm:{name:"",email:"",password:null,nik:null,telegram_username:"",telegram_chat_id:null,type:1},displayPhoto:"https://bankarthaya.com/wp-content/uploads/2023/07/arthayann.png",isPasswordVisible:!1,overlay:!1}},methods:{async connectTelegram(s){try{if(this.overlay=!0,s==2){this.dataForm.type=2;const e=new FormData;e.append("username",this.dataForm.telegram_username),e.append("type",this.dataForm.type),e.append("_method","POST");const n=await u.post("/user/update-user-telegram",e);n.status===200?(this.overlay=!1,this.getUserProfile(),this.$showToast("success","Success",n.data.message)):(this.getUserProfile(),this.$showToast("error","Sorry",n.data.message))}else{const e=new FormData;e.append("username",this.dataForm.telegram_username),e.append("type",this.dataForm.type),e.append("_method","POST");const n=await u.post("/user/update-user-telegram",e);n.status===200?(this.overlay=!1,this.getUserProfile(),this.$showToast("success","Success",n.data.message)):(this.overlay=!1,this.getUserProfile(),this.$showToast("error","Sorry",n.data.message))}}catch(e){this.overlay=!1,this.$showToast("error","Sorry",e.response.data.message),this.getUserProfile()}},async updateUserProfile(){try{const s=new FormData;s.append("name",this.dataForm.name),s.append("email",this.dataForm.email),s.append("nik",this.dataForm.nik),this.dataForm.password!==null&&s.append("password",this.dataForm.password),s.append("_method","POST");const e=await u.post("/user/update-user-profile",s);e.status===200?this.dataForm.password==null?(this.getUserProfile(),localStorage.setItem("userData",JSON.stringify(e.data.data)),window.location.reload(),this.$showToast("success","Success",e.data.message)):this.logout():this.$showToast("error","Sorry",e.data.message)}catch(s){this.$showToast("error","Sorry",s.response.data.message)}},async getUserProfile(){try{const s=await u.get("/user/user-profile");s.status===200?(this.dataForm.name=s.data.data.name,this.dataForm.email=s.data.data.email,this.dataForm.nik=s.data.data.nik,this.dataForm.telegram_username=s.data.data.telegram_username):this.$showToast("error","Sorry",s.data.data.message)}catch(s){this.$showToast("error","Sorry",s.data.data.message)}},async logout(){localStorage.removeItem("userData"),localStorage.removeItem("userToken"),this.$showToast("succces","Sukses","Berhasil Logout"),this.$router.push("/login")}},mounted(){this.getUserProfile()}},v=r("br",null,null,-1),x=r("span",{class:"font-weight-bold text-lg"},"Loading....",-1),C={class:"profile-container"},D=["src"],I=r("ol",null,[r("li",null,"1. Pastikan Anda telah masuk ke akun Telegram Anda."),r("li",null,"2. Isi bagian Username pada pengaturan profil Telegram Anda."),r("li",null,[d(" 3. Chat Bot Telegram : "),r("a",{href:"https://t.me/bprarthaya_bot",target:"_blank",rel:"noopener noreferrer"},"@bprarthaya_bot")]),r("li",null,"4. Klik /start"),r("li",null," 5. Kemudian isi username dibawah sesuai dengan profile anda sebelumnya, dan klik connect ")],-1);function A(s,e,n,B,o,c){return V(),b(F,null,[a(P,{absolute:!0,modelValue:o.overlay,"onUpdate:modelValue":e[0]||(e[0]=l=>o.overlay=l),contained:"",persistent:"",class:"align-center justify-center"},{default:t(()=>[a(i,null,{default:t(()=>[a(k,{color:"primary",size:"32",indeterminate:""}),v,x]),_:1})]),_:1},8,["modelValue"]),r("div",null,[a(h,{class:"auth-card pa-4 pt-5"},{default:t(()=>[a(g,{class:"align-left"},{default:t(()=>[a(y,{class:"text-2xl font-weight-bold"},{default:t(()=>[d(" User Profile ")]),_:1})]),_:1}),r("div",C,[r("img",{class:"profile-image",src:o.displayPhoto,alt:"User Profile Photo"},null,8,D)]),a(w,{class:"mt-6",onSubmit:f(c.updateUserProfile,["prevent"])},{default:t(()=>[a(_,null,{default:t(()=>[a(i,{md:"6",cols:"12"},{default:t(()=>[a(m,{placeholder:"John",label:"Nama",modelValue:o.dataForm.name,"onUpdate:modelValue":e[1]||(e[1]=l=>o.dataForm.name=l),autofocus:""},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"6"},{default:t(()=>[a(m,{label:"E-mail",placeholder:"johndoe@gmail.com",type:"email",modelValue:o.dataForm.email,"onUpdate:modelValue":e[2]||(e[2]=l=>o.dataForm.email=l)},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"6"},{default:t(()=>[a(m,{label:"NIK",modelValue:o.dataForm.nik,"onUpdate:modelValue":e[3]||(e[3]=l=>o.dataForm.nik=l)},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"6"},{default:t(()=>[a(m,{modelValue:o.dataForm.password,"onUpdate:modelValue":e[4]||(e[4]=l=>o.dataForm.password=l),label:"Password",placeholder:"············",type:o.isPasswordVisible?"text":"password","append-inner-icon":o.isPasswordVisible?"bx-hide":"bx-show","onClick:appendInner":e[5]||(e[5]=l=>o.isPasswordVisible=!o.isPasswordVisible)},null,8,["modelValue","type","append-inner-icon"])]),_:1}),a(i,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[a(p,{type:"submit"},{default:t(()=>[d("Update changes")]),_:1}),a(p,{color:"secondary",variant:"tonal",type:"reset"},{default:t(()=>[d(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),a(h,{class:"mt-3 auth-card pa-4 pt-5"},{default:t(()=>[a(g,{class:"align-left"},{default:t(()=>[a(y,{class:"text-2xl font-weight-bold"},{default:t(()=>[d(" Connect Telegram ")]),_:1})]),_:1}),a(U,{density:"compact",title:"Langkah-langkah untuk Menghubungkan Akun Telegram Anda:",type:"warning"},{default:t(()=>[I]),_:1}),a(w,{class:"mt-6",onSubmit:f(c.connectTelegram,["prevent"])},{default:t(()=>[a(_,null,{default:t(()=>[a(i,{md:"6",cols:"12"},{default:t(()=>[a(m,{placeholder:"Username Telegram",label:"Username",modelValue:o.dataForm.telegram_username,"onUpdate:modelValue":e[6]||(e[6]=l=>o.dataForm.telegram_username=l),autofocus:""},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[a(p,{type:"submit"},{default:t(()=>[d("Connect")]),_:1}),a(p,{color:"secondary",variant:"tonal",type:"reset",onClick:e[7]||(e[7]=l=>c.connectTelegram(2))},{default:t(()=>[d(" disconnect ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})])],64)}const z=T(S,[["render",A]]);export{z as default};
