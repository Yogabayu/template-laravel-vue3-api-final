import{m as c}from"./VGrid-339e33a6.js";import{o as V,c as b,a as e,w as t,b as r,G as F,E as k,e as i,d as f,V as u}from"./main-b95079ee.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import{V as P}from"./VOverlay-0ec5b778.js";import{V as h,c as n,a as g,d as y}from"./VCol-538157a7.js";import{V as _}from"./VForm-733157df.js";import{V as w}from"./VRow-66913789.js";import{V as d}from"./VTextField-974fa2d4.js";import{V as U}from"./VAlert-e24e0ad7.js";import"./VImg-c54e4b59.js";import"./VInput-8588e264.js";import"./index-e5c66add.js";const v={data(){return{dataForm:{name:"",email:"",password:null,nik:null,telegram_username:"",telegram_chat_id:null,type:1},displayPhoto:"https://bankarthaya.com/wp-content/uploads/2023/07/arthayann.png",isPasswordVisible:!1,overlay:!1}},methods:{async connectTelegram(s){try{this.overlay=!0,s==2&&(this.dataForm.type=2);const a=new FormData;a.append("username",this.dataForm.telegram_username),a.append("type",this.dataForm.type),a.append("_method","POST");const m=await c.post("/user/update-user-telegram",a);m.status===200?(this.overlay=!1,this.getUserProfile(),this.$showToast("success","Success",m.data.message),window.location.reload()):(this.overlay=!1,this.getUserProfile(),this.$showToast("error","Sorry",m.data.message))}catch(a){this.overlay=!1,this.$showToast("error","Sorry",a.response.data.message),this.getUserProfile()}},async updateUserProfile(){try{const s=new FormData;s.append("name",this.dataForm.name),s.append("email",this.dataForm.email),s.append("nik",this.dataForm.nik),this.dataForm.password!==null&&s.append("password",this.dataForm.password),s.append("_method","POST");const a=await c.post("/user/update-user-profile",s);a.status===200?this.dataForm.password==null?(this.getUserProfile(),localStorage.setItem("userData",JSON.stringify(a.data.data)),window.location.reload(),this.$showToast("success","Success",a.data.message)):this.logout():this.$showToast("error","Sorry",a.data.message)}catch(s){this.$showToast("error","Sorry",s.response.data.message)}},async getUserProfile(){try{const s=await c.get("/user/user-profile");s.status===200?(this.dataForm.name=s.data.data.name,this.dataForm.email=s.data.data.email,this.dataForm.nik=s.data.data.nik,this.dataForm.telegram_username=s.data.data.telegram_username):this.$showToast("error","Sorry",s.data.data.message)}catch(s){this.$showToast("error","Sorry",s.data.data.message)}},async logout(){localStorage.removeItem("userData"),localStorage.removeItem("userToken"),this.$showToast("succces","Sukses","Berhasill Logout"),this.$router.push("/login")}},mounted(){this.getUserProfile()}},x=r("br",null,null,-1),S=r("span",{class:"font-weight-bold text-lg"},"Loading....",-1),C={class:"profile-container"},I=["src"],A=r("ol",null,[r("li",null,"1. Pastikan Anda telah masuk ke akun Telegram Anda."),r("li",null,"2. Isi bagian Username pada pengaturan profil Telegram Anda."),r("li",null,[i(" 3. Chat Bot Telegram : "),r("a",{href:"https://t.me/bprarthaya_bot",target:"_blank",rel:"noopener noreferrer"},"@bprarthaya_bot")]),r("li",null,"4. Klik /start"),r("li",null," 5. Kemudian isi username dibawah sesuai dengan profile anda sebelumnya, dan klik connect ")],-1);function B(s,a,m,D,o,p){return V(),b(F,null,[e(P,{absolute:!0,modelValue:o.overlay,"onUpdate:modelValue":a[0]||(a[0]=l=>o.overlay=l),contained:"",persistent:"",class:"align-center justify-center"},{default:t(()=>[e(n,null,{default:t(()=>[e(k,{color:"primary",size:"32",indeterminate:""}),x,S]),_:1})]),_:1},8,["modelValue"]),r("div",null,[e(h,{class:"auth-card pa-4 pt-5"},{default:t(()=>[e(g,{class:"align-left"},{default:t(()=>[e(y,{class:"text-2xl font-weight-bold"},{default:t(()=>[i(" User Profile ")]),_:1})]),_:1}),r("div",C,[r("img",{class:"profile-image",src:o.displayPhoto,alt:"User Profile Photo"},null,8,I)]),e(_,{class:"mt-6",onSubmit:f(p.updateUserProfile,["prevent"])},{default:t(()=>[e(w,null,{default:t(()=>[e(n,{md:"6",cols:"12"},{default:t(()=>[e(d,{placeholder:"John",label:"Nama",modelValue:o.dataForm.name,"onUpdate:modelValue":a[1]||(a[1]=l=>o.dataForm.name=l),autofocus:""},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"6"},{default:t(()=>[e(d,{label:"E-mail",placeholder:"johndoe@gmail.com",type:"email",modelValue:o.dataForm.email,"onUpdate:modelValue":a[2]||(a[2]=l=>o.dataForm.email=l)},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"6"},{default:t(()=>[e(d,{label:"NIK",modelValue:o.dataForm.nik,"onUpdate:modelValue":a[3]||(a[3]=l=>o.dataForm.nik=l)},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"6"},{default:t(()=>[e(d,{modelValue:o.dataForm.password,"onUpdate:modelValue":a[4]||(a[4]=l=>o.dataForm.password=l),label:"Password",placeholder:"············",type:o.isPasswordVisible?"text":"password","append-inner-icon":o.isPasswordVisible?"bx-hide":"bx-show","onClick:appendInner":a[5]||(a[5]=l=>o.isPasswordVisible=!o.isPasswordVisible)},null,8,["modelValue","type","append-inner-icon"])]),_:1}),e(n,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(u,{type:"submit"},{default:t(()=>[i("Update changes")]),_:1}),e(u,{color:"secondary",variant:"tonal",type:"reset"},{default:t(()=>[i(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(h,{class:"mt-3 auth-card pa-4 pt-5"},{default:t(()=>[e(g,{class:"align-left"},{default:t(()=>[e(y,{class:"text-2xl font-weight-bold"},{default:t(()=>[i(" Connect Telegram ")]),_:1})]),_:1}),e(U,{density:"compact",title:"Langkah-langkah untuk Menghubungkan Akun Telegram Anda:",type:"warning"},{default:t(()=>[A]),_:1}),e(_,{class:"mt-6",onSubmit:f(p.connectTelegram,["prevent"])},{default:t(()=>[e(w,null,{default:t(()=>[e(n,{md:"6",cols:"12"},{default:t(()=>[e(d,{placeholder:"Username Telegram",label:"Username",modelValue:o.dataForm.telegram_username,"onUpdate:modelValue":a[6]||(a[6]=l=>o.dataForm.telegram_username=l),autofocus:""},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(u,{type:"submit"},{default:t(()=>[i("Connect")]),_:1}),e(u,{color:"secondary",variant:"tonal",type:"reset",onClick:a[7]||(a[7]=l=>p.connectTelegram(2))},{default:t(()=>[i(" disconnect ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})])],64)}const H=T(v,[["render",B]]);export{H as default};
