import{m as h}from"./VAvatar-948ccb70.js";import{_ as V,o as b,c as F,a as e,w as t,f as n,b as r,d as c,V as i,e as u}from"./main-d5b147b0.js";import{V as f,a as g,c as w}from"./VCard-13a2d665.js";import{V as _}from"./VForm-26e5c323.js";import{V as y}from"./VRow-8d385ad1.js";import{V as d}from"./VTextField-e84bb552.js";import{V as k}from"./VAlert-3c9473d7.js";import"./VImg-89f03179.js";import"./VInput-6463a4ad.js";import"./index-c0b6e900.js";const T={data(){return{dataForm:{name:"",email:"",password:null,nik:null,telegram_username:"",telegram_chat_id:null,type:1},displayPhoto:"https://bankarthaya.com/wp-content/uploads/2023/07/arthayann.png",isPasswordVisible:!1}},methods:{async connectTelegram(s){try{this.loading.show(),s==2&&(this.dataForm.type=2);const a=new FormData;a.append("username",this.dataForm.telegram_username),a.append("type",this.dataForm.type),a.append("_method","POST");const m=await h.post("/user/update-user-telegram",a);m.status===200?(this.loading.hide(),this.getUserProfile(),this.$showToast("success","Success",m.data.message),window.location.reload()):(this.loading.hide(),this.getUserProfile(),this.$showToast("error","Sorry",m.data.message))}catch(a){this.loading.hide(),this.$showToast("error","Sorry",a.response.data.message),this.getUserProfile()}},async updateUserProfile(){try{this.loading.show();const s=new FormData;s.append("name",this.dataForm.name),s.append("email",this.dataForm.email),s.append("nik",this.dataForm.nik),this.dataForm.password!==null&&s.append("password",this.dataForm.password),s.append("_method","POST");const a=await h.post("/user/update-user-profile",s);a.status===200?(this.loading.hide(),this.dataForm.password==null?(this.getUserProfile(),localStorage.setItem("userData",JSON.stringify(a.data.data)),window.location.reload(),this.$showToast("success","Success",a.data.message)):(this.loading.hide(),this.logout())):(this.loading.hide(),this.$showToast("error","Sorry",a.data.message))}catch(s){this.loading.hide(),this.$showToast("error","Sorry",s.response.data.message)}},async getUserProfile(){try{this.loading.show();const s=await h.get("/user/user-profile");s.status===200?(this.loading.hide(),this.dataForm.name=s.data.data.name,this.dataForm.email=s.data.data.email,this.dataForm.nik=s.data.data.nik,this.dataForm.telegram_username=s.data.data.telegram_username):(this.loading.hide(),this.$showToast("error","Sorry",s.data.data.message))}catch(s){this.loading.hide(),this.$showToast("error","Sorry",s.data.data.message)}},async logout(){localStorage.removeItem("userData"),localStorage.removeItem("userToken"),this.$showToast("succces","Sukses","Berhasill Logout"),this.$router.push("/login")}},mounted(){this.getUserProfile()}},P={class:"profile-container"},U=["src"],S=r("ol",null,[r("li",null,"1. Pastikan Anda telah masuk ke akun Telegram Anda."),r("li",null,"2. Isi bagian Username pada pengaturan profil Telegram Anda."),r("li",null,[n(" 3. Chat Bot Telegram : "),r("a",{href:"https://t.me/bprarthaya_bot",target:"_blank",rel:"noopener noreferrer"},"@bprarthaya_bot")]),r("li",null,"4. Klik /start"),r("li",null," 5. Kemudian isi username dibawah sesuai dengan profile anda sebelumnya, dan klik connect ")],-1);function x(s,a,m,v,o,p){return b(),F("div",null,[e(f,{class:"auth-card pa-4 pt-5"},{default:t(()=>[e(g,{class:"align-left"},{default:t(()=>[e(w,{class:"text-2xl font-weight-bold"},{default:t(()=>[n(" User Profile ")]),_:1})]),_:1}),r("div",P,[r("img",{class:"profile-image",src:o.displayPhoto,alt:"User Profile Photo"},null,8,U)]),e(_,{class:"mt-6",onSubmit:c(p.updateUserProfile,["prevent"])},{default:t(()=>[e(y,null,{default:t(()=>[e(i,{md:"6",cols:"12"},{default:t(()=>[e(d,{placeholder:"John",label:"Nama",modelValue:o.dataForm.name,"onUpdate:modelValue":a[0]||(a[0]=l=>o.dataForm.name=l),autofocus:""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[e(d,{label:"E-mail",placeholder:"johndoe@gmail.com",type:"email",modelValue:o.dataForm.email,"onUpdate:modelValue":a[1]||(a[1]=l=>o.dataForm.email=l)},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[e(d,{label:"NIK",modelValue:o.dataForm.nik,"onUpdate:modelValue":a[2]||(a[2]=l=>o.dataForm.nik=l)},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[e(d,{modelValue:o.dataForm.password,"onUpdate:modelValue":a[3]||(a[3]=l=>o.dataForm.password=l),label:"Password",placeholder:"············",type:o.isPasswordVisible?"text":"password","append-inner-icon":o.isPasswordVisible?"bx-hide":"bx-show","onClick:appendInner":a[4]||(a[4]=l=>o.isPasswordVisible=!o.isPasswordVisible)},null,8,["modelValue","type","append-inner-icon"])]),_:1}),e(i,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(u,{type:"submit"},{default:t(()=>[n("Update changes")]),_:1}),e(u,{color:"secondary",variant:"tonal",type:"reset"},{default:t(()=>[n(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(f,{class:"mt-3 auth-card pa-4 pt-5"},{default:t(()=>[e(g,{class:"align-left"},{default:t(()=>[e(w,{class:"text-2xl font-weight-bold"},{default:t(()=>[n(" Connect Telegram ")]),_:1})]),_:1}),e(k,{density:"compact",title:"Langkah-langkah untuk Menghubungkan Akun Telegram Anda:",type:"warning"},{default:t(()=>[S]),_:1}),e(_,{class:"mt-6",onSubmit:c(p.connectTelegram,["prevent"])},{default:t(()=>[e(y,null,{default:t(()=>[e(i,{md:"6",cols:"12"},{default:t(()=>[e(d,{placeholder:"Username Telegram",label:"Username",modelValue:o.dataForm.telegram_username,"onUpdate:modelValue":a[5]||(a[5]=l=>o.dataForm.telegram_username=l),autofocus:""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(u,{type:"submit"},{default:t(()=>[n("Connect")]),_:1}),e(u,{color:"secondary",variant:"tonal",type:"reset",onClick:a[6]||(a[6]=l=>p.connectTelegram(2))},{default:t(()=>[n(" disconnect ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})])}const E=V(T,[["render",x]]);export{E as default};
