import{m as P}from"./index-68ed0472.js";import{o as d,h as u,w as e,e as h,f,a as t,b as r,t as v,V as b,i as _,c as C,F as G,K as M,G as O,d as j,H as X,I as Z,r as J,E as ee,a0 as E}from"./main-a89262b3.js";import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";import{V as y,e as S,b as D,c as w,d as p,g as te}from"./VRow-78d56170.js";import{V as I,a as ae}from"./VChip-c1a8b158.js";import{a as T,b as x,c as F,V as se}from"./VMenu-6b5ae49c.js";import{V as q}from"./VTooltip-cfdf4a83.js";import{V as U}from"./VDivider-d34c26b9.js";import{V as R,a as B}from"./VTextField-6670407c.js";import{V as H,a as le,b as ie,c as V,d as K,e as oe,f as A}from"./VStepper-3b78cf82.js";import{V as Y}from"./VSpacer-9874554f.js";import{V as ne}from"./VOverlay-ce607799.js";import{V as N}from"./VDialog-3fff9aef.js";import{b as Q}from"./VWindowItem-4395bcc1.js";import{V as W}from"./VSelect-497e0769.js";import"./VImg-c01b2120.js";import"./dialog-transition-8a67a77e.js";import"./VCheckboxBtn-3fcc73cd.js";const re={name:"Phase",props:{userAccess:{type:Object,required:!0},dataFile:{type:Object,required:!0},userData:{type:Object,required:!0},dataNote:{type:Object,required:!0},updateDataNote:{type:Object,required:!0},insertNote:{type:Function,required:!0},changeApproval:{type:Function,required:!0},formatDate:{type:Function,required:!0},openModal:{type:Function,required:!0},deleteAttachment:{type:Function,required:!0},deleteNote:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},step:{type:Function,required:!0},fileId:{type:String,required:!0},resetNote:{type:Function,required:!0},notePhase1:{type:Object,required:!0},notePhase2:{type:Object,required:!0},notePhase3:{type:Object,required:!0},notePhase4:{type:Object,required:!0},modalNote:{type:Function,required:!0}},data(){return{filePath:this.$filePath,isUpdateNote:!1,currentPage:1,itemsPerPage:10}},computed:{paginatedNotes(){const l=(this.currentPage-1)*this.itemsPerPage,a=l+this.itemsPerPage;return this.dataFile.notes.slice(l,a)}},methods:{onPageChange(l){this.currentPage=l},formatInput(l){return l=l.replace(/\D/g,""),l=l.replace(/\B(?=(\d{3})+(?!\d))/g,","),l}}},L=l=>(X("data-v-158f4b6f"),l=l(),Z(),l),de=L(()=>r("span",null,"Informasi Umum â„¹ï¸",-1)),ue=L(()=>r("span",null,"Dokumen Pendukung ðŸ“„",-1)),he={class:"operation-wrapper"},ce={class:"d-flex justify-space-between"},fe=["href"],pe=["onClick"],me=["onClick"],ge={class:"operation-wrapper"},ye={class:"d-flex justify-space-between"},_e=["href"],ve=["onClick"],Fe=["onClick"],De=L(()=>r("span",null,"Survey Lapangan â„¹ï¸",-1)),be={key:0},Pe=L(()=>r("span",null,"Catatan ðŸ“ƒ",-1)),Ie={class:"comment-content"};function we(l,a,i,g,s,n){return d(),u(y,{color:"backgroundCard"},{default:e(()=>[["Account Officer","AO","ao","account officer","Account Officer Exceutive"].includes(i.userData.position.name)?(d(),u(S,{key:1,class:"text-2xl font-weight-bold d-flex justify-center"},{default:e(()=>[h(" Detail "),parseInt(i.dataFile.isApproved)==1?(d(),u(I,{key:0,color:"success"},{default:e(()=>[h("Approved")]),_:1})):f("",!0),parseInt(i.dataFile.isApproved)==2?(d(),u(I,{key:1,color:"warning"},{default:e(()=>[h("Pending")]),_:1})):f("",!0),parseInt(i.dataFile.isApproved)==3?(d(),u(I,{key:2,color:"error"},{default:e(()=>[h("Rejected")]),_:1})):f("",!0)]),_:1})):(d(),u(S,{key:0,class:"text-2xl font-weight-bold d-flex justify-center"},{default:e(()=>[h(" Detail "),parseInt(i.dataFile.isApproved)==1?(d(),u(I,{key:0,color:"success",onClick:a[0]||(a[0]=c=>i.openModal(9))},{default:e(()=>[h("Approved")]),_:1})):f("",!0),parseInt(i.dataFile.isApproved)==2?(d(),u(I,{key:1,color:"warning",onClick:a[1]||(a[1]=c=>i.openModal(9))},{default:e(()=>[h("Pending")]),_:1})):f("",!0),parseInt(i.dataFile.isApproved)==3?(d(),u(I,{key:2,color:"error",onClick:a[2]||(a[2]=c=>i.openModal(9))},{default:e(()=>[h("Rejected")]),_:1})):f("",!0)]),_:1})),i.dataFile.reasonRejected!=null?(d(),u(D,{key:2},{default:e(()=>[t(y,null,{default:e(()=>[t(S,null,{default:e(()=>[h(" Alasan Ditolak ðŸ”¹ ")]),_:1}),t(D,null,{default:e(()=>[r("div",null,[r("span",null,v(i.dataFile&&i.dataFile.reasonRejected),1)])]),_:1})]),_:1})]),_:1})):f("",!0),t(D,null,{default:e(()=>[t(y,{class:"mb-5"},{default:e(()=>[t(S,null,{default:e(()=>[t(w,{class:"d-flex justify-space-between"},{default:e(()=>[t(p,{cols:"12",sm:"6",md:"8"},{default:e(()=>[de]),_:1}),i.userAccess&&i.userAccess.canInsertData?(d(),u(p,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:e(()=>[r("span",null,[t(b,{color:"primary",size:"small",class:"my-3 mx-3",onClick:a[3]||(a[3]=c=>i.openModal(4))},{default:e(()=>[h(" Edit Data ")]),_:1})])]),_:1})):f("",!0)]),_:1})]),_:1}),t(D,null,{default:e(()=>[t(T,{density:"compact"},{default:e(()=>[t(x,null,{prepend:e(()=>[t(_,{icon:"mdi-person"})]),default:e(()=>[t(F,null,{default:e(()=>[h(" Nama Pemohon")]),_:1}),t(F,null,{default:e(()=>[r("strong",null,v(i.dataFile.name),1)]),_:1})]),_:1}),t(T,{density:"compact"},{default:e(()=>[t(x,null,{prepend:e(()=>[t(_,{icon:"mdi-cash"})]),default:e(()=>[t(F,null,{default:e(()=>[h(" Jumlah Plafon")]),_:1}),t(F,null,{default:e(()=>[r("strong",null," Rp "+v(n.formatInput(i.dataFile.plafon)),1)]),_:1})]),_:1})]),_:1}),t(T,{density:"compact"},{default:e(()=>[t(x,null,{prepend:e(()=>[t(_,{icon:"mdi-office-building"})]),default:e(()=>[t(F,null,{default:e(()=>[h(" Jenis Usaha")]),_:1}),t(F,null,{default:e(()=>[r("strong",null,v(i.dataFile.type_bussiness),1)]),_:1})]),_:1})]),_:1}),t(T,{density:"compact"},{default:e(()=>[t(x,null,{prepend:e(()=>[t(_,{icon:"mdi-office-building"})]),default:e(()=>[t(F,null,{default:e(()=>[h(" Deskripsi Usaha")]),_:1}),t(F,null,{default:e(()=>[r("strong",null,v(i.dataFile.desc_bussiness),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(y,null,{default:e(()=>[t(S,null,{default:e(()=>[t(w,{class:"d-flex justify-space-between"},{default:e(()=>[t(p,{cols:"12",sm:"6",md:"8"},{default:e(()=>[ue]),_:1}),i.userAccess&&i.userAccess.canInsertData?(d(),u(p,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:e(()=>[r("span",null,[t(b,{color:"primary",size:"small",class:"my-3 mx-3",onClick:a[4]||(a[4]=c=>i.openModal(1))},{default:e(()=>[h(" Tambah Data Lain ")]),_:1})])]),_:1})):f("",!0)]),_:1})]),_:1}),t(D,null,{default:e(()=>[(d(!0),C(O,null,G(i.dataFile.attachments,(c,k)=>(d(),C("div",{key:k},[c.path!=null&&!parseInt(c.isSecret)?(d(),u(T,{key:0,density:"compact"},{default:e(()=>[t(x,null,{prepend:e(()=>[t(_,{icon:"mdi-file"})]),append:e(()=>[r("div",he,[r("div",ce,[t(q,{location:"top",text:"Lihat File"},{activator:e(({props:o})=>[r("a",M(o,{href:s.filePath+"/"+i.dataFile.id+"/"+c.path,target:"_blank",rel:"noopener noreferrer"}),[r("button",null,[t(_,{size:"20",icon:"bx-link-external",color:"blue"})])],16,fe)]),_:2},1024),i.userData.id==i.dataFile.user_id||i.userAccess&&parseInt(i.userAccess.canInsertData)?(d(),u(q,{key:0,location:"top",text:"Edit File"},{activator:e(({props:o})=>[r("button",M(o,{onClick:z=>i.openModal(2,c)}),[t(_,{size:"20",icon:"bx-edit",color:"blue"})],16,pe)]),_:2},1024)):f("",!0),i.userData.id==i.dataFile.user_id||i.userAccess&&parseInt(i.userAccess.canInsertData)?(d(),u(q,{key:1,location:"top",text:"Hapus File"},{activator:e(({props:o})=>[r("button",M(o,{onClick:z=>i.deleteAttachment(c.id)}),[t(_,{size:"20",icon:"bx-trash",color:"red"})],16,me)]),_:2},1024)):f("",!0)])])]),default:e(()=>[t(F,null,{default:e(()=>[h(v(c.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(d(),u(T,{key:1,density:"compact"},{default:e(()=>[t(x,null,{prepend:e(()=>[t(_,{icon:"mdi-file"})]),append:e(()=>[r("div",ge,[r("div",ye,[t(q,{location:"top",text:"Lihat File"},{activator:e(({props:o})=>[r("a",M(o,{href:s.filePath+"/"+i.dataFile.id+"/"+c.path,target:"_blank",rel:"noopener noreferrer"}),[r("button",null,[t(_,{size:"20",icon:"bx-link-external",color:"blue"})])],16,_e)]),_:2},1024),i.userData.id==i.dataFile.user_id||i.userAccess&&parseInt(i.userAccess.canInsertData)?(d(),u(q,{key:0,location:"top",text:"Edit File"},{activator:e(({props:o})=>[r("button",M(o,{onClick:z=>i.openModal(2,c)}),[t(_,{size:"20",icon:"bx-edit",color:"blue"})],16,ve)]),_:2},1024)):f("",!0),i.userData.id==i.dataFile.user_id||i.userAccess&&parseInt(i.userAccess.canInsertData)?(d(),u(q,{key:1,location:"top",text:"Hapus File"},{activator:e(({props:o})=>[r("button",M(o,{onClick:z=>i.deleteAttachment(c.id)}),[t(_,{size:"20",icon:"bx-trash",color:"red"})],16,Fe)]),_:2},1024)):f("",!0)])])]),default:e(()=>[t(F,null,{default:e(()=>[h(v(c.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))]))),128))]),_:1})]),_:1})]),_:1}),i.dataFile.phase>2?(d(),u(D,{key:3},{default:e(()=>[t(y,{class:"mb-5"},{default:e(()=>[t(S,null,{default:e(()=>[t(w,{class:"d-flex justify-space-between"},{default:e(()=>[t(p,{cols:"12",sm:"6",md:"8"},{default:e(()=>[De]),_:1}),i.userAccess&&i.userAccess.canInsertData?(d(),u(p,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:e(()=>[r("span",null,[t(b,{color:"primary",size:"small",class:"my-3 mx-3",onClick:a[5]||(a[5]=c=>i.openModal(5))},{default:e(()=>[h(" Edit Data ")]),_:1})])]),_:1})):f("",!0)]),_:1})]),_:1}),t(D,null,{default:e(()=>[t(T,{density:"compact"},{default:e(()=>[t(x,null,{prepend:e(()=>[t(_,{icon:"mdi-note-text-outline"})]),default:e(()=>[t(F,null,{default:e(()=>[h(" Hasil Survei")]),_:1}),t(F,null,{default:e(()=>[r("strong",null,v(i.dataFile.surveyResult),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0),i.dataFile&&parseInt(i.dataFile.phase)<5?(d(),u(D,{key:4},{default:e(()=>[t(y,null,{default:e(()=>[t(S,null,{default:e(()=>[h(" Status Verifikasi âœ… ")]),_:1}),t(D,null,{default:e(()=>[i.dataFile&&i.dataFile.approvals&&i.dataFile.approvals.length?(d(),C("div",be,[(d(!0),C(O,null,G(i.dataFile.approvals,(c,k)=>(d(),C(O,{key:k},[i.dataFile.phase==c.phase?(d(),u(I,{key:0,color:c.approved==1?"success":"error",class:"mr-2",onClick:o=>i.changeApproval(c.id)},{default:e(()=>[h(v(c.user.name),1)]),_:2},1032,["color","onClick"])):f("",!0)],64))),128))])):f("",!0)]),_:1})]),_:1})]),_:1})):f("",!0),t(D,null,{default:e(()=>[t(y,null,{default:e(()=>[t(S,null,{default:e(()=>[h(" Lain - lain ðŸ”¹ ")]),_:1}),t(D,null,{default:e(()=>[r("div",null,[t(ae,null,{default:e(()=>[t(I,{color:"success",onClick:a[6]||(a[6]=c=>i.openModal(6))},{default:e(()=>[h(" Data Durasi Waktu ")]),_:1}),t(I,{color:"success",onClick:a[7]||(a[7]=c=>i.openModal(7))},{default:e(()=>[h(" Data Riwayat File")]),_:1}),t(I,{color:"success",onClick:a[8]||(a[8]=c=>i.openModal(8))},{default:e(()=>[h(" Data Riwayat Persetujuan")]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),t(U),t(D,null,{default:e(()=>[t(y,null,{default:e(()=>[t(S,null,{default:e(()=>[t(w,{class:"d-flex justify-space-between"},{default:e(()=>[t(p,{cols:"12",sm:"6",md:"8"},{default:e(()=>[Pe]),_:1}),t(p,{cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"})]),_:1}),t(R,{onSubmit:j(i.insertNote,["prevent"])},{default:e(()=>[t(w,{align:"center",justify:"center"},{default:e(()=>[t(p,{cols:"12",sm:"8",md:"10"},{default:e(()=>[t(H,{outlined:"",rows:"2",placeholder:"Tambahkan catatan disini",modelValue:i.dataNote.note,"onUpdate:modelValue":a[9]||(a[9]=c=>i.dataNote.note=c)},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",sm:"4",md:"2"},{default:e(()=>[t(b,{color:"primary",icon:"",type:"submit"},{default:e(()=>[t(_,null,{default:e(()=>[h("mdi-note-plus")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),t(D,null,{default:e(()=>[r("div",null,[(d(!0),C(O,null,G(n.paginatedNotes,(c,k)=>(d(),C("div",{key:k,class:"user-comment"},[r("div",Ie,[r("p",null,v(c.note),1),t(w,{class:"justify-space-between mx-2 mb-2"},{default:e(()=>[r("small",null,[r("strong",null,v(c.user.name)+" - "+v(c.user.position.name),1)]),r("small",null,v(i.formatDate(c.created_at)),1)]),_:2},1024)]),i.userData.id==c.user_id?(d(),u(se,{key:0,transition:"scale-transition"},{activator:e(({props:o})=>[t(_,M(o,{class:"ellipsis-icon"}),{default:e(()=>[h("mdi-dots-vertical")]),_:2},1040)]),default:e(()=>[t(T,null,{default:e(()=>[t(x,{color:"primary",onClick:o=>i.openModal(3,c)},{prepend:e(()=>[t(_,{icon:"mdi-edit"})]),default:e(()=>[t(F,null,{default:e(()=>[h(" edit")]),_:1})]),_:2},1032,["onClick"]),t(x,{color:"primary",onClick:o=>i.deleteNote(c.id)},{prepend:e(()=>[t(_,{icon:"mdi-trash"})]),default:e(()=>[t(F,null,{default:e(()=>[h(" hapus")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):f("",!0)]))),128)),t(le,{modelValue:s.currentPage,"onUpdate:modelValue":a[10]||(a[10]=c=>s.currentPage=c),length:Math.ceil(i.dataFile.notes.length/s.itemsPerPage),onInput:n.onPageChange},null,8,["modelValue","length","onInput"])])]),_:1})]),_:1})]),_:1}),i.userAccess&&parseInt(i.userAccess.canApprove)?(d(),u(te,{key:5},{default:e(()=>[i.dataFile&&parseInt(i.dataFile.plafon)>25e6?(d(),u(p,{key:0,class:"d-flex justify-space-beetwen"},{default:e(()=>[i.dataFile&&parseInt(i.dataFile.phase)>1?(d(),u(b,{key:0,color:"info",text:"Prev Phase",variant:"tonal",onClick:a[11]||(a[11]=c=>i.step(i.fileId,"-"))})):f("",!0),t(Y),i.dataFile&&parseInt(i.dataFile.phase)<5?(d(),u(b,{key:1,color:"info",text:"Next Phase",variant:"tonal",onClick:a[12]||(a[12]=c=>i.step(i.fileId,"next"))})):f("",!0)]),_:1})):(d(),u(p,{key:1,class:"d-flex justify-space-beetwen"},{default:e(()=>[i.dataFile&&parseInt(i.dataFile.phase)>1?(d(),u(b,{key:0,color:"info",text:"Prev Phase",variant:"tonal",onClick:a[13]||(a[13]=c=>i.step(i.fileId,"-"))})):f("",!0),t(Y),i.dataFile&&parseInt(i.dataFile.phase)<4?(d(),u(b,{key:1,color:"info",text:"Next Phase",variant:"tonal",onClick:a[14]||(a[14]=c=>i.step(i.fileId,"next"))})):f("",!0)]),_:1}))]),_:1})):f("",!0)]),_:1})}const ke=$(re,[["render",we],["__scopeId","data-v-158f4b6f"]]),Se={components:{phase:ke},data(){return{overlay:!1,isMobile:!1,userData:null,userAccess:{},fileId:this.$route.params.fileId,isShowPhase4:!1,isShowPhase5:!1,isShowTimers:!1,isShowHistory:!1,isShowApprovals:!1,isChangeStatusCredit:!1,changeStatus:{id:null,status:null,reasonRejected:null},stepperModel:0,isUpdateGeneralInfo:!1,generalInfo:{id:null,name:"",type_bussiness:"",desc_bussiness:"",plafon:"0"},dataFile:{id:null,user_id:null,phase:1,name:"",type_bussiness:"",desc_bussiness:"",plafon:"0",surveyResult:"-",otsResult:"-",cekLingResult:"-",verTelResult:"-",creditScoring:"-",attachments:[],notes:[],approvals:[],phase_times:[],file_activities:[],reasonRejected:""},filePath:this.$filePath,timerHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Waktu Mulai",value:"startTime",sortable:!0},{text:"Waktu Selesai",value:"endTime",sortable:!0},{text:"Rentang Waktu",value:"timeDiff",sortable:!0}],historyHeaders:[{text:"User",value:"user.name",sortable:!0},{text:"Aktivitas",value:"activity",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],approvalHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Nama",value:"user.name",sortable:!0},{text:"Status",value:"approved",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],isUpdateNote:!1,dataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},updateDataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},phaseNote:[],notesByPhase:{},isModalPhase:!1,insertAttch:!1,updateAttch:!1,rules:{required:l=>!!l||"Required"},uploadProgress:null,attachFile:{id:null,file_id:this.$route.params.fileId,name:null,path:null,note:null,isSecret:0},notePhase1:[],notePhase2:[],notePhase3:[],notePhase4:[],currentPage:1,itemsPerPage:10,isDataPhase3:!1,dataPhase3:{surveyResult:""}}},computed:{paginatedNotes(){const l=(this.currentPage-1)*this.itemsPerPage,a=l+this.itemsPerPage;return this.dataFile.notes.slice(l,a)}},methods:{async updateStatusCredit(){try{this.overlay=!0;const l=new FormData;if(l.append("id",this.fileId),l.append("status",this.changeStatus.status),this.changeStatus.status=="3"){if(this.changeStatus.reasonRejected==null){this.overlay=!1,this.closeModal(9),this.$showToast("error","Sorry","Alasan Penolakan wajib diisi");return}l.append("reasonRejected",this.changeStatus.reasonRejected)}const a=await P.post("/user/change-status",l);a.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.closeModal(9),this.$showToast("success","Success",a.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.closeModal(9),this.$showToast("error","Sorry",a.data.message))}catch(l){this.closeModal(9),this.$showToast("error","Sorry",l.response.data.message)}},calculateTimeDiff(l,a){let i=new Date(l),s=(a?new Date(a):new Date).valueOf()-i.valueOf(),n=Math.floor(s/1e3/60),c=Math.floor(n/60),k=n%60;return`${c} jam ${k} menit`},formatFileId(l){return Array.isArray(l)?l.join(", "):l},async updatePhase3(){try{this.overlay=!0;const l=new FormData;l.append("surveyResult",this.dataPhase3.surveyResult),l.append("_method","PUT");const a=await P.post(`/user/survey-credit/${this.fileId}`,l);a.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("success","Success",a.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("error","Sorry",a.data.message))}catch(l){this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},onPageChange(l){this.currentPage=l},formatInputPlafon(l){let a=l.target.value;a=a.replace(/\D/g,""),a=a.replace(/\B(?=(\d{3})+(?!\d))/g,","),l.target.value=a},formatDate(l){return new Date(l).toLocaleString("id-ID")},resetNote(){this.dataNote={file_id:this.$route.params.fileId,user_id:null,phase:null,note:null,isRead:null}},checkMobile(){this.isMobile=window.innerWidth<728},formatInput(l){return l=l.replace(/\D/g,""),l=l.replace(/\B(?=(\d{3})+(?!\d))/g,","),l},async step(l,a){try{if(a=="next"){if(!window.confirm("Apakah Anda yakin melanjutkan ke tahap selanjutnya"))return;this.overlay=!0;const g=new FormData;g.append("id",l),g.append("type",a),g.append("_method","POST");const s=await P.post("/user/change-phase-approve",g);s.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",s.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.data.data.message))}else{if(!window.confirm("Apakah Anda yakin Kembali ke phase sebelumnya"))return;this.overlay=!0;const g=new FormData;g.append("id",l),g.append("type",a),g.append("_method","POST");const s=await P.post("/user/change-phase-approve",g);s.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",s.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.data.message))}}catch(i){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.response.data.message)}},async getDetailFile(l){try{this.overlay=!0;const a=await P.get(`/user/credit/${l}`);if(a.status===200){this.dataFile=a.data.data.file,this.userAccess=a.data.data.userAccess,this.dataFile.phase=parseInt(this.dataFile.phase),this.isShowPhase4=!(parseInt(this.dataFile.plafon)<25e6),this.dataFile.phase==5&&(this.isShowPhase5=!0),parseInt(this.dataFile.plafon)>25e6?parseInt(this.dataFile.phase)==5?this.stepperModel=parseInt(this.dataFile.phase)-1:this.stepperModel=parseInt(this.dataFile.phase)-1:parseInt(this.dataFile.phase)==5?this.stepperModel=parseInt(this.dataFile.phase)-2:this.stepperModel=parseInt(this.dataFile.phase)-1,this.generalInfo.id=this.dataFile.id,this.generalInfo.name=this.dataFile.name,this.generalInfo.type_bussiness=this.dataFile.type_bussiness,this.generalInfo.desc_bussiness=this.dataFile.desc_bussiness,this.generalInfo.plafon=this.dataFile.plafon;for(let i=0;i<5;i++)this.separateNotesByPhase(this.dataFile,i);this.overlay=!1}else this.$showToast("error","Sorry",a.data.data.message),this.overlay=!1}catch(a){this.$showToast("error","Sorry",a.response.data.message),this.overlay=!1}},getUserData(){const l=localStorage.getItem("userData");l&&(this.userData=JSON.parse(l))},openModal(l,a=null){l==1?this.insertAttch=!0:l==2?(this.attachFile.id=a.id,this.attachFile.file_id=a.file_id,this.attachFile.name=a.name,this.updateAttch=!0):l==3?(this.updateDataNote.id=a.id,this.updateDataNote.file_id=a.file_id,this.updateDataNote.note=a.note,this.isUpdateNote=!0):l==4?this.isUpdateGeneralInfo=!0:l==5?(this.dataPhase3.surveyResult=this.dataFile.surveyResult,this.isDataPhase3=!0):l==6?this.isShowTimers=!0:l==7?this.isShowHistory=!0:l==8?this.isShowApprovals=!0:l==9&&(this.isChangeStatusCredit=!0)},closeModal(l){l===1?(this.resetAttch(),this.insertAttch=!1):l===2?this.updateAttch=!1:l===3?(this.resetNote(),this.updateNote=!1):l==4?this.isUpdateGeneralInfo=!1:l==5?(this.dataPhase3.surveyResult="",this.isDataPhase3=!1):l==9&&(this.isChangeStatusCredit=!1,this.changeStatus.id=null,this.changeStatus.status=null,this.changeStatus.reasonRejected=null)},async updateGeneralInfo(){try{this.overlay=!0;const l=new FormData;l.append("name",this.generalInfo.name),l.append("plafon",this.generalInfo.plafon.replace(/\D/g,"")),l.append("type_bussiness",this.generalInfo.type_bussiness),l.append("desc_bussiness",this.generalInfo.desc_bussiness),l.append("_method","PUT");const a=await P.post(`/user/edit-general-info/${this.generalInfo.id}`,l);a.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("success","Success",a.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("error","Sorry",a.data.message))}catch(l){this.isUpdateGeneralInfo=!1,this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},async insertNote(){try{if(this.overlay=!0,this.dataNote.note==null){this.$showToast("error","Sorry","Note cannot be empty"),this.overlay=!1;return}const l=new FormData;l.append("file_id",this.dataNote.file_id),l.append("note",this.dataNote.note),l.append("_method","POST");const a=await P.post("/user/note",l);a.status===200?(this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",a.data.message)):(this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.data.message))}catch(l){this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},async updateNote(){try{this.overlay=!0;const l=new FormData;l.append("file_id",this.updateDataNote.file_id),l.append("note",this.updateDataNote.note),l.append("_method","PUT");const a=await P.post(`/user/note/${this.updateDataNote.id}`,l);a.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("success","Success",a.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("error","Sorry",a.data.message))}catch(l){this.isUpdateNote=!1,this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},async deleteNote(l){try{if(this.overlay=!0,!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;const i=await P.delete(`/user/note/${l}`);i.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",i.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(a){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},separateNotesByPhase(l,a){l.notes.forEach(i=>{if(i.phase==a)switch(a){case 1:this.notePhase1.push(i);break;case 2:this.notePhase2.push(i);break;case 3:this.notePhase3.push(i);break;case 4:this.notePhase4.push(i);break;default:console.log("Invalid phase")}})},modalNote(){this.isModalPhase=!this.isModalPhase,console.log(this.isModalPhase)},async changeApproval(l){try{this.overlay=!0;const a=await P.get(`/user/change-phase-approve/${l}`);a.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",a.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.data.message))}catch(a){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},handleFileChange(l){const a=l.target.files[0];a&&["image/jpeg","image/png"].includes(a.type)?this.attachFile.path=a:(this.$showToast("error","Error","Hanya file JPG, JPEG, dan PNG yang diizinkan."),l.target.value=null)},resetAttch(){this.attachFile={id:null,file_id:this.$route.params.fileId,name:null,path:null,note:null,isSecret:!1}},async insertAttachment(){try{this.overlay=!0;const l=new FormData;l.append("file_id",this.attachFile.file_id),l.append("name",this.attachFile.name),l.append("path",this.attachFile.path),this.dataFile.phase==2&&l.append("isSecret",this.attachFile.isSecret),l.append("_method","POST");const a={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},i=await P.post("/user/add-attach",l,a);i.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(l){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},async editAttachment(){try{this.overlay=!0;const l=new FormData;l.append("file_id",this.attachFile.file_id),l.append("name",this.attachFile.name),this.attachFile.path!=null&&l.append("path",this.attachFile.path),this.dataFile.phase==2&&l.append("isSecret",this.attachFile.isSecret),l.append("_method","PUT");const a={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},i=await P.post(`/user/edit-attach/${this.attachFile.id}`,l,a);i.status===200?(this.overlay=!1,this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(l){this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},async deleteAttachment(l){try{if(this.overlay=!0,!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;const i=await P.delete(`/user/delete-attach/${l}`);i.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",i.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(a){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}}},mounted(){this.checkMobile(),this.getUserData(),this.getDetailFile(this.fileId)}};const m=l=>(X("data-v-ab59b452"),l=l(),Z(),l),xe=m(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Ve=m(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Ae=m(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Ne=m(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Te=m(()=>r("span",{style:{color:"red"}},"*",-1)),Ce=m(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),Ue=m(()=>r("span",{style:{color:"red"}},"*",-1)),Me=m(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),je=m(()=>r("span",{style:{color:"red"}},"*",-1)),Re=m(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),qe=m(()=>r("span",{style:{color:"red"}},"*",-1)),Be=m(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),Oe=m(()=>r("span",{style:{color:"red"}},"*",-1)),He=m(()=>r("span",{class:"subtitle-1 text-center"},"Nama Pemohon: ",-1)),Le=m(()=>r("span",{style:{color:"red"}},"*",-1)),ze=m(()=>r("span",{class:"subtitle-1 text-center"},"Jumlah Plafon: ",-1)),Ge=m(()=>r("span",{style:{color:"red"}},"*",-1)),Ee=m(()=>r("span",{class:"subtitle-1 text-center"},"Jenis Usaha: ",-1)),We=m(()=>r("span",{style:{color:"red"}},"*",-1)),Je=m(()=>r("span",{class:"subtitle-1 text-center"},"Deskripsi Usaha: ",-1)),Ke=m(()=>r("span",{style:{color:"red"}},"*",-1)),Ye=m(()=>r("span",{class:"subtitle-1 text-center"},"Hasil Survei: ",-1)),Qe=m(()=>r("span",{style:{color:"red"}},"*",-1)),Xe=m(()=>r("span",{class:"subtitle-1 text-center"},"Alasan: ",-1));function Ze(l,a,i,g,s,n){const c=J("phase"),k=J("EasyDataTable");return d(),C("div",null,[t(ne,{"model-value":s.overlay,class:"align-center justify-center"},{default:e(()=>[t(ee,{color:"blue-lighten-3",indeterminate:"",size:41,width:5}),h(" Loading... ")]),_:1},8,["model-value"]),t(y,null,{default:e(()=>[t(S,{class:"text-2xl font-weight-bold d-flex justify-left"},{default:e(()=>[h(" Credit ")]),_:1}),t(D,null,{default:e(()=>[t(ie,{"model-value":s.stepperModel,mobile:s.isMobile},{default:e(()=>[parseInt(s.dataFile.plafon)>25e6?(d(),u(K,{key:0},{default:e(()=>[t(V,{title:"Phase 1",value:"1",complete:s.dataFile.phase>1},null,8,["complete"]),t(U),t(V,{title:"Phase 2",value:"2",complete:s.dataFile.phase>2},null,8,["complete"]),t(U),t(V,{title:"Phase 3",value:"3",complete:s.dataFile.phase>3},null,8,["complete"]),s.isShowPhase4?(d(),u(U,{key:0})):f("",!0),s.isShowPhase4?(d(),u(V,{key:1,title:"Phase 4",value:"4",complete:s.dataFile.phase>4},null,8,["complete"])):f("",!0),s.isShowPhase5?(d(),u(U,{key:2})):f("",!0),s.isShowPhase5?(d(),u(V,{key:3,title:"Approved",value:"5"})):f("",!0)]),_:1})):(d(),u(K,{key:1},{default:e(()=>[t(V,{title:"Phase 1",value:"1",complete:s.dataFile.phase>1},null,8,["complete"]),t(U),t(V,{title:"Phase 2",value:"2",complete:s.dataFile.phase>2},null,8,["complete"]),t(U),t(V,{title:"Phase 3",value:"3",complete:s.dataFile.phase>3},null,8,["complete"]),s.isShowPhase5?(d(),u(U,{key:0})):f("",!0),s.isShowPhase5?(d(),u(V,{key:1,title:"Approved",value:"5"})):f("",!0)]),_:1})),t(oe,null,{default:e(()=>[s.userData&&s.userData.position.role.isPhase1Access==1?(d(),u(A,{key:0,value:"1"},{default:e(()=>[t(c,{dataFile:s.dataFile,userData:s.userData,"insert-note":n.insertNote,"change-approval":n.changeApproval,"format-date":n.formatDate,"open-modal":n.openModal,"delete-attachment":n.deleteAttachment,"delete-note":n.deleteNote,"get-detail-file":n.getDetailFile,step:n.step,"file-id":n.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":n.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":n.modalNote},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note"])]),_:1})):(d(),u(A,{key:1,value:"1"},{default:e(()=>[xe]),_:1})),s.userData&&s.userData.position.role.isPhase2Access==1?(d(),u(A,{key:2,value:"2"},{default:e(()=>[t(c,{dataFile:s.dataFile,userData:s.userData,"insert-note":n.insertNote,"change-approval":n.changeApproval,"format-date":n.formatDate,"open-modal":n.openModal,"delete-attachment":n.deleteAttachment,"delete-note":n.deleteNote,"get-detail-file":n.getDetailFile,step:n.step,"file-id":n.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":n.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":n.modalNote},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note"])]),_:1})):(d(),u(A,{key:3,value:"2"},{default:e(()=>[Ve]),_:1})),s.userData&&s.userData.position.role.isPhase3Access==1?(d(),u(A,{key:4,value:"3"},{default:e(()=>[t(c,{dataFile:s.dataFile,userData:s.userData,"insert-note":n.insertNote,"change-approval":n.changeApproval,"format-date":n.formatDate,"open-modal":n.openModal,"delete-attachment":n.deleteAttachment,"delete-note":n.deleteNote,"get-detail-file":n.getDetailFile,step:n.step,"file-id":n.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":n.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":n.modalNote},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note"])]),_:1})):(d(),u(A,{key:5,value:"3"},{default:e(()=>[Ae]),_:1})),s.userData&&s.userData.position.role.isPhase4Access==1?(d(),u(A,{key:6,value:"4"},{default:e(()=>[t(c,{dataFile:s.dataFile,userData:s.userData,"insert-note":n.insertNote,"change-approval":n.changeApproval,"format-date":n.formatDate,"open-modal":n.openModal,"delete-attachment":n.deleteAttachment,"delete-note":n.deleteNote,"get-detail-file":n.getDetailFile,step:n.step,"file-id":n.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":n.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":n.modalNote},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note"])]),_:1})):(d(),u(A,{key:7,value:"4"},{default:e(()=>[Ne]),_:1})),t(A,{value:"5"},{default:e(()=>[t(c,{dataFile:s.dataFile,userData:s.userData,"insert-note":n.insertNote,"change-approval":n.changeApproval,"format-date":n.formatDate,"open-modal":n.openModal,"delete-attachment":n.deleteAttachment,"delete-note":n.deleteNote,"get-detail-file":n.getDetailFile,step:n.step,"file-id":n.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":n.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":n.modalNote},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note"])]),_:1})]),_:1})]),_:1},8,["model-value","mobile"])]),_:1})]),_:1}),t(N,{modelValue:s.insertAttch,"onUpdate:modelValue":a[5]||(a[5]=o=>s.insertAttch=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:e(()=>[t(y,null,{title:e(()=>[h(" Tambah Data ")]),text:e(()=>[t(R,{onSubmit:j(n.insertAttachment,["prevent"])},{default:e(()=>[t(w,null,{default:e(()=>[t(p,{md:"12",cols:"12"},{default:e(()=>[Te,Ce,t(B,{class:"my-3",modelValue:s.attachFile.name,"onUpdate:modelValue":a[0]||(a[0]=o=>s.attachFile.name=o),autofocus:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(p,{md:"12",cols:"12"},{default:e(()=>[Ue,Me,t(Q,{class:"my-3",accept:"image/jpeg,image/png",placeholder:"Pick an image",rules:[s.rules.required],onChange:a[1]||(a[1]=o=>n.handleFileChange(o))},null,8,["rules"])]),_:1}),s.dataFile.phase==2?(d(),u(p,{key:0,md:"12",cols:"12"},{default:e(()=>[t(W,{label:"Apakah Termasuk File Rahasia ? (SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.attachFile.isSecret,"onUpdate:modelValue":a[2]||(a[2]=o=>s.attachFile.isSecret=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):f("",!0),t(p,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(b,{type:"submit",disabled:(s.attachFile.name&&s.attachFile.path)==null},{default:e(()=>[h(" Simpan ")]),_:1},8,["disabled"]),r("button",{type:"button",class:"btn btn-blue",onClick:a[3]||(a[3]=o=>n.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:e(()=>[t(E,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[4]||(a[4]=o=>s.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:s.updateAttch,"onUpdate:modelValue":a[11]||(a[11]=o=>s.updateAttch=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:e(()=>[t(y,null,{title:e(()=>[h(" Edit Data ")]),text:e(()=>[t(R,{onSubmit:j(n.editAttachment,["prevent"])},{default:e(()=>[t(w,null,{default:e(()=>[t(p,{md:"12",cols:"12"},{default:e(()=>[je,Re,t(B,{class:"my-3",modelValue:s.attachFile.name,"onUpdate:modelValue":a[6]||(a[6]=o=>s.attachFile.name=o),autofocus:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(p,{md:"12",cols:"12"},{default:e(()=>[qe,Be,t(Q,{class:"my-3",accept:"image/jpeg,image/png",placeholder:"Pick an image",rules:[s.rules.required],onChange:a[7]||(a[7]=o=>n.handleFileChange(o))},null,8,["rules"])]),_:1}),s.dataFile.phase==2?(d(),u(p,{key:0,md:"12",cols:"12"},{default:e(()=>[t(W,{label:"Apakah Termasuk File Rahasia ? (SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.attachFile.isSecret,"onUpdate:modelValue":a[8]||(a[8]=o=>s.attachFile.isSecret=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):f("",!0),t(p,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(b,{type:"submit"},{default:e(()=>[h(" Update ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[9]||(a[9]=o=>n.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:e(()=>[t(E,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[10]||(a[10]=o=>s.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:s.isUpdateGeneralInfo,"onUpdate:modelValue":a[18]||(a[18]=o=>s.isUpdateGeneralInfo=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:e(()=>[t(y,null,{title:e(()=>[h(" Edit Informasi Umum ")]),text:e(()=>[t(R,{onSubmit:j(n.updateGeneralInfo,["prevent"])},{default:e(()=>[t(w,null,{default:e(()=>[t(p,{md:"12",cols:"12"},{default:e(()=>[Oe,He,t(B,{class:"my-3",modelValue:s.generalInfo.name,"onUpdate:modelValue":a[12]||(a[12]=o=>s.generalInfo.name=o),autofocus:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(p,{md:"12",cols:"12"},{default:e(()=>[Le,ze,t(B,{class:"my-3",modelValue:s.generalInfo.plafon,"onUpdate:modelValue":a[13]||(a[13]=o=>s.generalInfo.plafon=o),type:"text",onInput:n.formatInputPlafon},null,8,["modelValue","onInput"])]),_:1}),t(p,{md:"12",cols:"12"},{default:e(()=>[Ge,Ee,t(B,{class:"my-3",modelValue:s.generalInfo.type_bussiness,"onUpdate:modelValue":a[14]||(a[14]=o=>s.generalInfo.type_bussiness=o),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(p,{md:"12",cols:"12"},{default:e(()=>[We,Je,t(B,{class:"my-3",modelValue:s.generalInfo.desc_bussiness,"onUpdate:modelValue":a[15]||(a[15]=o=>s.generalInfo.desc_bussiness=o),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(p,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(b,{type:"submit"},{default:e(()=>[h(" Update ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[16]||(a[16]=o=>n.closeModal(4))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:e(()=>[t(E,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[17]||(a[17]=o=>s.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:s.isUpdateNote,"onUpdate:modelValue":a[20]||(a[20]=o=>s.isUpdateNote=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:e(()=>[t(y,null,{title:e(()=>[h(" Update Note ")]),text:e(()=>[t(R,{onSubmit:j(n.updateNote,["prevent"])},{default:e(()=>[t(w,{align:"center",justify:"center"},{default:e(()=>[t(p,{md:"10",cols:"10"},{default:e(()=>[t(H,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:s.updateDataNote.note,"onUpdate:modelValue":a[19]||(a[19]=o=>s.updateDataNote.note=o),rows:"2"},null,8,["modelValue"])]),_:1}),t(p,{md:"2",cols:"2"},{default:e(()=>[t(b,{density:"compact",icon:"mdi-note-plus",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:s.isDataPhase3,"onUpdate:modelValue":a[23]||(a[23]=o=>s.isDataPhase3=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:e(()=>[t(y,null,{title:e(()=>[h(" Hasil Survey ")]),text:e(()=>[t(R,{onSubmit:j(n.updatePhase3,["prevent"])},{default:e(()=>[t(w,null,{default:e(()=>[t(p,{md:"12",cols:"12"},{default:e(()=>[Ke,Ye,t(H,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:s.dataPhase3.surveyResult,"onUpdate:modelValue":a[21]||(a[21]=o=>s.dataPhase3.surveyResult=o),rows:"3"},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(b,{type:"submit"},{default:e(()=>[h("Update")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[22]||(a[22]=o=>n.closeModal(5))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:s.isShowTimers,"onUpdate:modelValue":a[24]||(a[24]=o=>s.isShowTimers=o),width:"auto",transition:"dialog-top-transition"},{default:e(()=>[t(y,null,{title:e(()=>[h(" Data Waktu ")]),text:e(()=>[t(k,{headers:s.timerHeaders,items:s.dataFile.phase_times},{"item-timeDiff":e(o=>[h(v(n.calculateTimeDiff(o.startTime,o.endTime)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:s.isShowHistory,"onUpdate:modelValue":a[25]||(a[25]=o=>s.isShowHistory=o),width:"auto",transition:"dialog-top-transition"},{default:e(()=>[t(y,null,{title:e(()=>[h(" Data Riwayat ")]),text:e(()=>[t(k,{"show-index":"",headers:s.historyHeaders,items:s.dataFile.file_activities},{"item-created_at":e(o=>[h(v(n.formatDate(o.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:s.isShowApprovals,"onUpdate:modelValue":a[26]||(a[26]=o=>s.isShowApprovals=o),width:"auto",transition:"dialog-top-transition"},{default:e(()=>[t(y,null,{title:e(()=>[h(" Riwayat Persetujuan ")]),text:e(()=>[t(k,{headers:s.approvalHeaders,items:s.dataFile.approvals},{"item-approved":e(o=>[o.approved==1?(d(),u(I,{key:0,color:"success"},{default:e(()=>[h(" Disetujui ")]),_:1})):(d(),u(I,{key:1,color:"error"},{default:e(()=>[h(" Belum disetujui ")]),_:1}))]),"item-created_at":e(o=>[h(v(n.formatDate(o.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:s.isChangeStatusCredit,"onUpdate:modelValue":a[30]||(a[30]=o=>s.isChangeStatusCredit=o),width:"auto",transition:"dialog-top-transition"},{default:e(()=>[t(y,null,{title:e(()=>[h(" Ubah Status File ")]),text:e(()=>[t(R,{onSubmit:j(n.updateStatusCredit,["prevent"])},{default:e(()=>[t(w,null,{default:e(()=>[t(p,{md:"12",cols:"12"},{default:e(()=>[t(W,{label:"Ubah Status File",items:[{value:1,title:"Approved"},{value:2,title:"Pending"},{value:3,title:"Rejected"}],modelValue:s.changeStatus.status,"onUpdate:modelValue":a[27]||(a[27]=o=>s.changeStatus.status=o)},null,8,["modelValue"])]),_:1}),s.changeStatus.status==3?(d(),u(p,{key:0,md:"12",cols:"12"},{default:e(()=>[Qe,Xe,t(H,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:s.changeStatus.reasonRejected,"onUpdate:modelValue":a[28]||(a[28]=o=>s.changeStatus.reasonRejected=o),rows:"2"},null,8,["modelValue"])]),_:1})):f("",!0),t(p,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(b,{type:"submit"},{default:e(()=>[h(" Simpan ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[29]||(a[29]=o=>n.closeModal(9))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}const yt=$(Se,[["render",Ze],["__scopeId","data-v-ab59b452"]]);export{yt as default};
