import{m as P}from"./index-17ba41d1.js";import{o as d,h,w as e,a as t,e as c,f as p,b as r,V as D,i as y,t as _,c as T,F as z,K as M,a1 as ee,G as H,d as R,H as X,I as Z,r as W,E as te,a0 as G}from"./main-52afc2d0.js";import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";import{V as v,e as U,c as w,d as f,b,g as ae}from"./VRow-b26dadf1.js";import{V as S,a as se}from"./VChip-25929339.js";import{a as N,b as k,c as F,V as le}from"./VMenu-c825a489.js";import{V as j}from"./VTooltip-ebba990c.js";import{V as C}from"./VDivider-ad1e4e0b.js";import{V as B,a as q}from"./VTextField-5170760a.js";import{V as E,a as ie,b as oe,d as x,c as J,e as ne,f as V}from"./VStepper-63650cff.js";import{V as K}from"./VSpacer-96f913f7.js";import{V as re}from"./VOverlay-1c0d16f1.js";import{V as A}from"./VDialog-b03f870b.js";import{b as Y}from"./VWindowItem-0c090a4d.js";import{V as Q}from"./VSelect-ddb3ebe1.js";import"./VGrid-f83fc269.js";import"./VImg-1c5c3258.js";import"./dialog-transition-9e83211a.js";import"./VCheckboxBtn-2aff673d.js";const de={name:"Phase",props:{userAccess:{type:Object,required:!0},dataFile:{type:Object,required:!0},userData:{type:Object,required:!0},dataNote:{type:Object,required:!0},updateDataNote:{type:Object,required:!0},insertNote:{type:Function,required:!0},changeApproval:{type:Function,required:!0},formatDate:{type:Function,required:!0},openModal:{type:Function,required:!0},deleteAttachment:{type:Function,required:!0},deleteNote:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},step:{type:Function,required:!0},fileId:{type:String,required:!0},resetNote:{type:Function,required:!0},notePhase1:{type:Object,required:!0},notePhase2:{type:Object,required:!0},notePhase3:{type:Object,required:!0},notePhase4:{type:Object,required:!0},modalNote:{type:Function,required:!0}},data(){return{filePath:this.$filePath,isUpdateNote:!1,currentPage:1,itemsPerPage:10}},computed:{paginatedNotes(){const l=(this.currentPage-1)*this.itemsPerPage,s=l+this.itemsPerPage;return this.dataFile.notes.slice(l,s)}},methods:{onPageChange(l){this.currentPage=l},formatInput(l){return l=l.replace(/\D/g,""),l=l.replace(/\B(?=(\d{3})+(?!\d))/g,","),l}}},O=l=>(X("data-v-6d711a9a"),l=l(),Z(),l),ue=O(()=>r("span",null,"Informasi Umum â„¹ï¸",-1)),he=O(()=>r("span",null,"Dokumen Pendukung ðŸ“„",-1)),ce={class:"operation-wrapper"},fe={class:"d-flex justify-space-between"},pe=["href"],me=["onClick"],ge=["onClick"],ye={class:"operation-wrapper"},_e={class:"d-flex justify-space-between"},ve=["href"],Fe=["onClick"],De=["onClick"],Pe=O(()=>r("span",null,"Survey Lapangan â„¹ï¸",-1)),be={key:0},Ie=O(()=>r("span",null,"Catatan ðŸ“ƒ",-1)),we={class:"comment-content"};function ke(l,s,i,g,a,o){return d(),h(v,{color:"backgroundCard"},{default:e(()=>[t(U,{class:"text-2xl font-weight-bold d-flex justify-center"},{default:e(()=>[c(" Detail "),parseInt(i.dataFile.isApproved)==1?(d(),h(S,{key:0,color:"success"},{default:e(()=>[c("Approved")]),_:1})):p("",!0),parseInt(i.dataFile.isApproved)==2?(d(),h(S,{key:1,color:"warning"},{default:e(()=>[c("Pending")]),_:1})):p("",!0),parseInt(i.dataFile.isApproved)==3?(d(),h(S,{key:2,color:"error"},{default:e(()=>[c("Rejected")]),_:1})):p("",!0)]),_:1}),t(b,null,{default:e(()=>[t(v,{class:"mb-5"},{default:e(()=>[t(U,null,{default:e(()=>[t(w,{class:"d-flex justify-space-between"},{default:e(()=>[t(f,{cols:"12",sm:"6",md:"8"},{default:e(()=>[ue]),_:1}),i.userAccess&&i.userAccess.canInsertData?(d(),h(f,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:e(()=>[r("span",null,[t(D,{color:"primary",size:"small",class:"my-3 mx-3",onClick:s[0]||(s[0]=u=>i.openModal(4))},{default:e(()=>[c(" Edit Data ")]),_:1})])]),_:1})):p("",!0)]),_:1})]),_:1}),t(b,null,{default:e(()=>[t(N,{density:"compact"},{default:e(()=>[t(k,null,{prepend:e(()=>[t(y,{icon:"mdi-person"})]),default:e(()=>[t(F,null,{default:e(()=>[c(" Nama Pemohon")]),_:1}),t(F,null,{default:e(()=>[r("strong",null,_(i.dataFile.name),1)]),_:1})]),_:1}),t(N,{density:"compact"},{default:e(()=>[t(k,null,{prepend:e(()=>[t(y,{icon:"mdi-cash"})]),default:e(()=>[t(F,null,{default:e(()=>[c(" Jumlah Plafon")]),_:1}),t(F,null,{default:e(()=>[r("strong",null," Rp "+_(o.formatInput(i.dataFile.plafon)),1)]),_:1})]),_:1})]),_:1}),t(N,{density:"compact"},{default:e(()=>[t(k,null,{prepend:e(()=>[t(y,{icon:"mdi-office-building"})]),default:e(()=>[t(F,null,{default:e(()=>[c(" Jenis Usaha")]),_:1}),t(F,null,{default:e(()=>[r("strong",null,_(i.dataFile.type_bussiness),1)]),_:1})]),_:1})]),_:1}),t(N,{density:"compact"},{default:e(()=>[t(k,null,{prepend:e(()=>[t(y,{icon:"mdi-office-building"})]),default:e(()=>[t(F,null,{default:e(()=>[c(" Deskripsi Usaha")]),_:1}),t(F,null,{default:e(()=>[r("strong",null,_(i.dataFile.desc_bussiness),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(v,null,{default:e(()=>[t(U,null,{default:e(()=>[t(w,{class:"d-flex justify-space-between"},{default:e(()=>[t(f,{cols:"12",sm:"6",md:"8"},{default:e(()=>[he]),_:1}),i.userAccess&&i.userAccess.canInsertData?(d(),h(f,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:e(()=>[r("span",null,[t(D,{color:"primary",size:"small",class:"my-3 mx-3",onClick:s[1]||(s[1]=u=>i.openModal(1))},{default:e(()=>[c(" Tambah Data Lain ")]),_:1})])]),_:1})):p("",!0)]),_:1})]),_:1}),t(b,null,{default:e(()=>[(d(!0),T(H,null,z(i.dataFile.attachments,(u,I)=>(d(),T("div",{key:I},[u.path!=null&&!parseInt(u.isSecret)?(d(),h(N,{key:0,density:"compact"},{default:e(()=>[t(k,null,{prepend:e(()=>[t(y,{icon:"mdi-file"})]),append:e(()=>[r("div",ce,[r("div",fe,[t(j,{location:"top",text:"Lihat File"},{activator:e(({props:n})=>[r("a",M(n,{href:a.filePath+"/"+i.dataFile.id+"/"+u.path,target:"_blank",rel:"noopener noreferrer"}),[r("button",null,[t(y,{size:"20",icon:"bx-link-external",color:"blue"})])],16,pe)]),_:2},1024),i.userData.id==i.dataFile.user_id||i.userAccess&&i.userAccess.canInsertData?(d(),h(j,{key:0,location:"top",text:"Edit File"},{activator:e(({props:n})=>[r("button",M(n,{onClick:L=>i.openModal(2,u)}),[t(y,{size:"20",icon:"bx-edit",color:"blue"})],16,me)]),_:2},1024)):p("",!0),i.userData.id==i.dataFile.user_id||i.userAccess&&i.userAccess.canInsertData?(d(),h(j,{key:1,location:"top",text:"Hapus File"},{activator:e(({props:n})=>[r("button",M(n,{onClick:L=>i.deleteAttachment(u.id)}),[t(y,{size:"20",icon:"bx-trash",color:"red"})],16,ge)]),_:2},1024)):p("",!0)])])]),default:e(()=>[t(F,null,{default:e(()=>[c(_(u.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(d(),h(N,{key:1,density:"compact"},{default:e(()=>[t(k,null,ee({prepend:e(()=>[t(y,{icon:"mdi-file"})]),default:e(()=>[t(F,null,{default:e(()=>[c(_(u.name),1)]),_:2},1024)]),_:2},[i.userAccess&&i.userAccess.isSecret?{name:"append",fn:e(()=>[r("div",ye,[r("div",_e,[t(j,{location:"top",text:"Lihat File"},{activator:e(({props:n})=>[r("a",M(n,{href:a.filePath+"/"+i.dataFile.id+"/"+u.path,target:"_blank",rel:"noopener noreferrer"}),[r("button",null,[t(y,{size:"20",icon:"bx-link-external",color:"blue"})])],16,ve)]),_:2},1024),i.userData.id==i.dataFile.user_id||i.userAccess&&i.userAccess.canInsertData?(d(),h(j,{key:0,location:"top",text:"Edit File"},{activator:e(({props:n})=>[r("button",M(n,{onClick:L=>i.openModal(2,u)}),[t(y,{size:"20",icon:"bx-edit",color:"blue"})],16,Fe)]),_:2},1024)):p("",!0),i.userData.id==i.dataFile.user_id||i.userAccess&&i.userAccess.canInsertData?(d(),h(j,{key:1,location:"top",text:"Hapus File"},{activator:e(({props:n})=>[r("button",M(n,{onClick:L=>i.deleteAttachment(u.id)}),[t(y,{size:"20",icon:"bx-trash",color:"red"})],16,De)]),_:2},1024)):p("",!0)])])]),key:"0"}:void 0]),1024)]),_:2},1024))]))),128))]),_:1})]),_:1})]),_:1}),i.dataFile.phase>2?(d(),h(b,{key:0},{default:e(()=>[t(v,{class:"mb-5"},{default:e(()=>[t(U,null,{default:e(()=>[t(w,{class:"d-flex justify-space-between"},{default:e(()=>[t(f,{cols:"12",sm:"6",md:"8"},{default:e(()=>[Pe]),_:1}),i.userAccess&&i.userAccess.canInsertData?(d(),h(f,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:e(()=>[r("span",null,[t(D,{color:"primary",size:"small",class:"my-3 mx-3",onClick:s[2]||(s[2]=u=>i.openModal(5))},{default:e(()=>[c(" Edit Data ")]),_:1})])]),_:1})):p("",!0)]),_:1})]),_:1}),t(b,null,{default:e(()=>[t(N,{density:"compact"},{default:e(()=>[t(k,null,{prepend:e(()=>[t(y,{icon:"mdi-note-text-outline"})]),default:e(()=>[t(F,null,{default:e(()=>[c(" Hasil Survei")]),_:1}),t(F,null,{default:e(()=>[r("strong",null,_(i.dataFile.surveyResult),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):p("",!0),i.dataFile&&parseInt(i.dataFile.phase)<5?(d(),h(b,{key:1},{default:e(()=>[t(v,null,{default:e(()=>[t(U,null,{default:e(()=>[c(" Status Verifikasi âœ… ")]),_:1}),t(b,null,{default:e(()=>[i.dataFile&&i.dataFile.approvals&&i.dataFile.approvals.length?(d(),T("div",be,[(d(!0),T(H,null,z(i.dataFile.approvals,(u,I)=>(d(),T(H,{key:I},[i.dataFile.phase==u.phase?(d(),h(S,{key:0,color:u.approved==1?"success":"error",class:"mr-2",onClick:n=>i.changeApproval(u.id)},{default:e(()=>[c(_(u.user.name),1)]),_:2},1032,["color","onClick"])):p("",!0)],64))),128))])):p("",!0)]),_:1})]),_:1})]),_:1})):p("",!0),t(b,null,{default:e(()=>[t(v,null,{default:e(()=>[t(U,null,{default:e(()=>[c(" Lain - lain ðŸ”¹ ")]),_:1}),t(b,null,{default:e(()=>[r("div",null,[t(se,null,{default:e(()=>[t(S,{color:"success",onClick:s[3]||(s[3]=u=>i.openModal(6))},{default:e(()=>[c(" Data Durasi Waktu ")]),_:1}),t(S,{color:"success",onClick:s[4]||(s[4]=u=>i.openModal(7))},{default:e(()=>[c(" Data Riwayat File")]),_:1}),t(S,{color:"success",onClick:s[5]||(s[5]=u=>i.openModal(8))},{default:e(()=>[c(" Data Riwayat Persetujuan")]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),t(C),t(b,null,{default:e(()=>[t(v,null,{default:e(()=>[t(U,null,{default:e(()=>[t(w,{class:"d-flex justify-space-between"},{default:e(()=>[t(f,{cols:"12",sm:"6",md:"8"},{default:e(()=>[Ie]),_:1}),t(f,{cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"})]),_:1}),t(B,{onSubmit:R(i.insertNote,["prevent"])},{default:e(()=>[t(w,{align:"center",justify:"center"},{default:e(()=>[t(f,{cols:"12",sm:"8",md:"10"},{default:e(()=>[t(E,{outlined:"",rows:"2",placeholder:"Tambahkan catatan disini",modelValue:i.dataNote.note,"onUpdate:modelValue":s[6]||(s[6]=u=>i.dataNote.note=u)},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",sm:"4",md:"2"},{default:e(()=>[t(D,{color:"primary",icon:"",type:"submit"},{default:e(()=>[t(y,null,{default:e(()=>[c("mdi-note-plus")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),t(b,null,{default:e(()=>[r("div",null,[(d(!0),T(H,null,z(o.paginatedNotes,(u,I)=>(d(),T("div",{key:I,class:"user-comment"},[r("div",we,[r("p",null,_(u.note),1),t(w,{class:"justify-space-between mx-2 mb-2"},{default:e(()=>[r("small",null,[r("strong",null,_(u.user.name)+" - "+_(u.user.position.name),1)]),r("small",null,_(i.formatDate(u.created_at)),1)]),_:2},1024)]),i.userData.id==u.user_id?(d(),h(le,{key:0,transition:"scale-transition"},{activator:e(({props:n})=>[t(y,M(n,{class:"ellipsis-icon"}),{default:e(()=>[c("mdi-dots-vertical")]),_:2},1040)]),default:e(()=>[t(N,null,{default:e(()=>[t(k,{color:"primary",onClick:n=>i.openModal(3,u)},{prepend:e(()=>[t(y,{icon:"mdi-edit"})]),default:e(()=>[t(F,null,{default:e(()=>[c(" edit")]),_:1})]),_:2},1032,["onClick"]),t(k,{color:"primary",onClick:n=>i.deleteNote(u.id)},{prepend:e(()=>[t(y,{icon:"mdi-trash"})]),default:e(()=>[t(F,null,{default:e(()=>[c(" hapus")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):p("",!0)]))),128)),t(ie,{modelValue:a.currentPage,"onUpdate:modelValue":s[7]||(s[7]=u=>a.currentPage=u),length:Math.ceil(i.dataFile.notes.length/a.itemsPerPage),onInput:o.onPageChange},null,8,["modelValue","length","onInput"])])]),_:1})]),_:1})]),_:1}),i.userAccess&&parseInt(i.userAccess.canApprove)?(d(),h(ae,{key:2},{default:e(()=>[i.dataFile&&parseInt(i.dataFile.plafon)>25e6?(d(),h(f,{key:0,class:"d-flex justify-space-beetwen"},{default:e(()=>[i.dataFile&&parseInt(i.dataFile.phase)>1?(d(),h(D,{key:0,color:"info",text:"Prev",variant:"tonal",onClick:s[8]||(s[8]=u=>i.step(i.fileId,"-"))})):p("",!0),t(K),i.dataFile&&parseInt(i.dataFile.phase)<5?(d(),h(D,{key:1,color:"info",text:"Next",variant:"tonal",onClick:s[9]||(s[9]=u=>i.step(i.fileId,"next"))})):p("",!0)]),_:1})):(d(),h(f,{key:1,class:"d-flex justify-space-beetwen"},{default:e(()=>[i.dataFile&&parseInt(i.dataFile.phase)>1?(d(),h(D,{key:0,color:"info",text:"Prev",variant:"tonal",onClick:s[10]||(s[10]=u=>i.step(i.fileId,"-"))})):p("",!0),t(K),i.dataFile&&parseInt(i.dataFile.phase)<4?(d(),h(D,{key:1,color:"info",text:"Next",variant:"tonal",onClick:s[11]||(s[11]=u=>i.step(i.fileId,"next"))})):p("",!0)]),_:1}))]),_:1})):p("",!0)]),_:1})}const xe=$(de,[["render",ke],["__scopeId","data-v-6d711a9a"]]),Ve={components:{phase:xe},data(){return{overlay:!1,isMobile:!1,userData:null,userAccess:{},fileId:this.$route.params.fileId,isShowPhase4:!1,isShowPhase5:!1,isShowTimers:!1,isShowHistory:!1,isShowApprovals:!1,stepperModel:0,isUpdateGeneralInfo:!1,generalInfo:{id:null,name:"",type_bussiness:"",desc_bussiness:"",plafon:"0"},dataFile:{id:null,user_id:null,phase:1,name:"",type_bussiness:"",desc_bussiness:"",plafon:"0",surveyResult:"-",otsResult:"-",cekLingResult:"-",verTelResult:"-",creditScoring:"-",attachments:[],notes:[],approvals:[],phase_times:[],file_activities:[]},filePath:this.$filePath,timerHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Waktu Mulai",value:"startTime",sortable:!0},{text:"Waktu Selesai",value:"endTime",sortable:!0},{text:"Rentang Waktu",value:"timeDiff",sortable:!0}],historyHeaders:[{text:"User",value:"user.name",sortable:!0},{text:"Aktivitas",value:"activity",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],approvalHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Nama",value:"user.name",sortable:!0},{text:"Status",value:"approved",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],isUpdateNote:!1,dataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},updateDataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},phaseNote:[],notesByPhase:{},isModalPhase:!1,insertAttch:!1,updateAttch:!1,rules:{required:l=>!!l||"Required"},uploadProgress:null,attachFile:{id:null,file_id:this.$route.params.fileId,name:null,path:null,note:null,isSecret:0},notePhase1:[],notePhase2:[],notePhase3:[],notePhase4:[],currentPage:1,itemsPerPage:10,isDataPhase3:!1,dataPhase3:{surveyResult:""}}},computed:{paginatedNotes(){const l=(this.currentPage-1)*this.itemsPerPage,s=l+this.itemsPerPage;return this.dataFile.notes.slice(l,s)}},methods:{calculateTimeDiff(l,s){let i=new Date(l),a=(s?new Date(s):new Date).valueOf()-i.valueOf(),o=Math.floor(a/1e3/60),u=Math.floor(o/60),I=o%60;return`${u} jam ${I} menit`},formatFileId(l){return Array.isArray(l)?l.join(", "):l},async updatePhase3(){try{const l=new FormData;l.append("surveyResult",this.dataPhase3.surveyResult),l.append("_method","PUT");const s=await P.post(`/user/survey-credit/${this.fileId}`,l);s.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("success","Success",s.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("error","Sorry",s.data.message))}catch(l){this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},onPageChange(l){this.currentPage=l},formatInputPlafon(l){let s=l.target.value;s=s.replace(/\D/g,""),s=s.replace(/\B(?=(\d{3})+(?!\d))/g,","),l.target.value=s},formatDate(l){return new Date(l).toLocaleString("id-ID")},resetNote(){this.dataNote={file_id:this.$route.params.fileId,user_id:null,phase:null,note:null,isRead:null}},checkMobile(){this.isMobile=window.innerWidth<728},formatInput(l){return l=l.replace(/\D/g,""),l=l.replace(/\B(?=(\d{3})+(?!\d))/g,","),l},async step(l,s){try{if(s=="next"){if(!window.confirm("Apakah Anda yakin melanjutkan ke tahap selanjutnya"))return;this.overlay=!0;const g=new FormData;g.append("id",l),g.append("type",s),g.append("_method","POST");const a=await P.post("/user/change-phase-approve",g);a.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",a.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.data.data.message))}else{if(!window.confirm("Apakah Anda yakin Kembali ke phase sebelumnya"))return;this.overlay=!0;const g=new FormData;g.append("id",l),g.append("type",s),g.append("_method","POST");const a=await P.post("/user/change-phase-approve",g);a.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",a.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.data.message))}}catch(i){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.response.data.message)}},async getDetailFile(l){try{this.overlay=!0;const s=await P.get(`/user/credit/${l}`);if(s.status===200){this.dataFile=s.data.data.file,this.userAccess=s.data.data.userAccess,this.dataFile.phase=parseInt(this.dataFile.phase),this.isShowPhase4=!(parseInt(this.dataFile.plafon)<25e6),this.dataFile.phase==5&&(this.isShowPhase5=!0),parseInt(this.dataFile.plafon)>25e6?parseInt(this.dataFile.phase)==5?this.stepperModel=parseInt(this.dataFile.phase)-1:this.stepperModel=parseInt(this.dataFile.phase)-1:parseInt(this.dataFile.phase)==5?this.stepperModel=parseInt(this.dataFile.phase)-2:this.stepperModel=parseInt(this.dataFile.phase)-1,this.generalInfo.id=this.dataFile.id,this.generalInfo.name=this.dataFile.name,this.generalInfo.type_bussiness=this.dataFile.type_bussiness,this.generalInfo.desc_bussiness=this.dataFile.desc_bussiness,this.generalInfo.plafon=this.dataFile.plafon;for(let i=0;i<5;i++)this.separateNotesByPhase(this.dataFile,i);this.overlay=!1}else this.$showToast("error","Sorry",s.data.data.message),this.overlay=!1}catch(s){this.$showToast("error","Sorry",s.response.data.message),this.overlay=!1}},getUserData(){const l=localStorage.getItem("userData");l&&(this.userData=JSON.parse(l))},openModal(l,s=null){l==1?this.insertAttch=!0:l==2?(this.attachFile.id=s.id,this.attachFile.file_id=s.file_id,this.attachFile.name=s.name,this.updateAttch=!0):l==3?(this.updateDataNote.id=s.id,this.updateDataNote.file_id=s.file_id,this.updateDataNote.note=s.note,this.isUpdateNote=!0):l==4?this.isUpdateGeneralInfo=!0:l==5?(this.dataPhase3.surveyResult=this.dataFile.surveyResult,this.isDataPhase3=!0):l==6?this.isShowTimers=!0:l==7?this.isShowHistory=!0:l==8&&(this.isShowApprovals=!0)},closeModal(l){l===1?(this.resetAttch(),this.insertAttch=!1):l===2?this.updateAttch=!1:l===3?(this.resetNote(),this.updateNote=!1):l==4?this.isUpdateGeneralInfo=!1:l==5&&(this.dataPhase3.surveyResult="",this.isDataPhase3=!1)},async updateGeneralInfo(){try{this.overlay=!0;const l=new FormData;l.append("name",this.generalInfo.name),l.append("plafon",this.generalInfo.plafon.replace(/\D/g,"")),l.append("type_bussiness",this.generalInfo.type_bussiness),l.append("desc_bussiness",this.generalInfo.desc_bussiness),l.append("_method","PUT");const s=await P.post(`/user/edit-general-info/${this.generalInfo.id}`,l);s.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("success","Success",s.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("error","Sorry",s.data.message))}catch(l){this.isUpdateGeneralInfo=!1,this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},async insertNote(){try{if(this.overlay=!0,this.dataNote.note==null){this.$showToast("error","Sorry","Note cannot be empty"),this.overlay=!1;return}const l=new FormData;l.append("file_id",this.dataNote.file_id),l.append("note",this.dataNote.note),l.append("_method","POST");const s=await P.post("/user/note",l);s.status===200?(this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",s.data.message)):(this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.data.message))}catch(l){this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},async updateNote(){try{this.overlay=!0;const l=new FormData;l.append("file_id",this.updateDataNote.file_id),l.append("note",this.updateDataNote.note),l.append("_method","PUT");const s=await P.post(`/user/note/${this.updateDataNote.id}`,l);s.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("success","Success",s.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("error","Sorry",s.data.message))}catch(l){this.isUpdateNote=!1,this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},async deleteNote(l){try{if(this.overlay=!0,!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;const i=await P.delete(`/user/note/${l}`);i.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasil",i.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},separateNotesByPhase(l,s){l.notes.forEach(i=>{if(i.phase==s)switch(s){case 1:this.notePhase1.push(i);break;case 2:this.notePhase2.push(i);break;case 3:this.notePhase3.push(i);break;case 4:this.notePhase4.push(i);break;default:console.log("Invalid phase")}})},modalNote(){this.isModalPhase=!this.isModalPhase,console.log(this.isModalPhase)},async changeApproval(l){try{this.overlay=!0;const s=await P.get(`/user/change-phase-approve/${l}`);s.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasil",s.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.data.message))}catch(s){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}},handleFileChange(l){const s=l.target.files[0];s&&["image/jpeg","image/png"].includes(s.type)?this.attachFile.path=s:(this.$showToast("error","Error","Hanya file JPG, JPEG, dan PNG yang diizinkan."),l.target.value=null)},resetAttch(){this.attachFile={id:null,file_id:this.$route.params.fileId,name:null,path:null,note:null,isSecret:!1}},async insertAttachment(){try{this.overlay=!0;const l=new FormData;l.append("file_id",this.attachFile.file_id),l.append("name",this.attachFile.name),l.append("path",this.attachFile.path),this.dataFile.phase==2&&l.append("isSecret",this.attachFile.isSecret),l.append("_method","POST");const s={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(a){console.error("Error calculating progress:",a)}},headers:{"Content-Type":"multipart/form-data"}},i=await P.post("/user/add-attach",l,s);i.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(l){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},async editAttachment(){try{this.overlay=!0;const l=new FormData;l.append("file_id",this.attachFile.file_id),l.append("name",this.attachFile.name),this.attachFile.path!=null&&l.append("path",this.attachFile.path),this.dataFile.phase==2&&l.append("isSecret",this.attachFile.isSecret),l.append("_method","PUT");const s={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(a){console.error("Error calculating progress:",a)}},headers:{"Content-Type":"multipart/form-data"}},i=await P.post(`/user/edit-attach/${this.attachFile.id}`,l,s);i.status===200?(this.overlay=!1,this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(l){this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},async deleteAttachment(l){try{if(this.overlay=!0,!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;const i=await P.delete(`/user/delete-attach/${l}`);i.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasil",i.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(s){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.response.data.message)}}},mounted(){this.checkMobile(),this.getUserData(),this.getDetailFile(this.fileId)}};const m=l=>(X("data-v-96f69043"),l=l(),Z(),l),Se=m(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Ne=m(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Ae=m(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Te=m(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Ue=m(()=>r("span",{style:{color:"red"}},"*",-1)),Ce=m(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),Me=m(()=>r("span",{style:{color:"red"}},"*",-1)),je=m(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),qe=m(()=>r("span",{style:{color:"red"}},"*",-1)),Re=m(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),Be=m(()=>r("span",{style:{color:"red"}},"*",-1)),He=m(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),Oe=m(()=>r("span",{style:{color:"red"}},"*",-1)),Le=m(()=>r("span",{class:"subtitle-1 text-center"},"Nama Pemohon: ",-1)),ze=m(()=>r("span",{style:{color:"red"}},"*",-1)),Ge=m(()=>r("span",{class:"subtitle-1 text-center"},"Jumlah Plafon: ",-1)),Ee=m(()=>r("span",{style:{color:"red"}},"*",-1)),We=m(()=>r("span",{class:"subtitle-1 text-center"},"Jenis Usaha: ",-1)),Je=m(()=>r("span",{style:{color:"red"}},"*",-1)),Ke=m(()=>r("span",{class:"subtitle-1 text-center"},"Deskripsi Usaha: ",-1)),Ye=m(()=>r("span",{style:{color:"red"}},"*",-1)),Qe=m(()=>r("span",{class:"subtitle-1 text-center"},"Hasil Survei: ",-1));function Xe(l,s,i,g,a,o){const u=W("phase"),I=W("EasyDataTable");return d(),T("div",null,[t(re,{"model-value":a.overlay,class:"align-center justify-center"},{default:e(()=>[t(te,{color:"blue-lighten-3",indeterminate:"",size:41,width:5}),c(" Loading... ")]),_:1},8,["model-value"]),t(v,null,{default:e(()=>[t(U,{class:"text-2xl font-weight-bold d-flex justify-left"},{default:e(()=>[c(" Credit "+_(a.dataFile.phase),1)]),_:1}),t(b,null,{default:e(()=>[t(oe,{"model-value":a.stepperModel,mobile:a.isMobile},{default:e(()=>[parseInt(a.dataFile.plafon)>25e6?(d(),h(J,{key:0},{default:e(()=>[t(x,{title:"Phase 1",value:"1",complete:a.dataFile.phase>1},null,8,["complete"]),t(C),t(x,{title:"Phase 2",value:"2",complete:a.dataFile.phase>2},null,8,["complete"]),t(C),t(x,{title:"Phase 3",value:"3",complete:a.dataFile.phase>3},null,8,["complete"]),a.isShowPhase4?(d(),h(C,{key:0})):p("",!0),a.isShowPhase4?(d(),h(x,{key:1,title:"Phase 4",value:"4",complete:a.dataFile.phase>4},null,8,["complete"])):p("",!0),a.isShowPhase5?(d(),h(C,{key:2})):p("",!0),a.isShowPhase5?(d(),h(x,{key:3,title:"Approved",value:"5"})):p("",!0)]),_:1})):(d(),h(J,{key:1},{default:e(()=>[t(x,{title:"Phase 1",value:"1",complete:a.dataFile.phase>1},null,8,["complete"]),t(C),t(x,{title:"Phase 2",value:"2",complete:a.dataFile.phase>2},null,8,["complete"]),t(C),t(x,{title:"Phase 3",value:"3",complete:a.dataFile.phase>3},null,8,["complete"]),a.isShowPhase5?(d(),h(C,{key:0})):p("",!0),a.isShowPhase5?(d(),h(x,{key:1,title:"Approved",value:"5"})):p("",!0)]),_:1})),t(ne,null,{default:e(()=>[a.userData&&a.userData.position.role.isPhase1Access==1?(d(),h(V,{key:0,value:"1"},{default:e(()=>[t(u,{dataFile:a.dataFile,userData:a.userData,"insert-note":o.insertNote,"change-approval":o.changeApproval,"format-date":o.formatDate,"open-modal":o.openModal,"delete-attachment":o.deleteAttachment,"delete-note":o.deleteNote,"get-detail-file":o.getDetailFile,step:o.step,"file-id":o.formatFileId(a.fileId),"user-access":a.userAccess,"reset-note":o.resetNote,"data-note":a.dataNote,"update-data-note":a.updateDataNote,"note-phase1":a.notePhase1,"note-phase2":a.notePhase2,"note-phase3":a.notePhase3,"note-phase4":a.notePhase4,"modal-note":o.modalNote},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note"])]),_:1})):(d(),h(V,{key:1,value:"1"},{default:e(()=>[Se]),_:1})),a.userData&&a.userData.position.role.isPhase2Access==1?(d(),h(V,{key:2,value:"2"},{default:e(()=>[t(u,{dataFile:a.dataFile,userData:a.userData,"insert-note":o.insertNote,"change-approval":o.changeApproval,"format-date":o.formatDate,"open-modal":o.openModal,"delete-attachment":o.deleteAttachment,"delete-note":o.deleteNote,"get-detail-file":o.getDetailFile,step:o.step,"file-id":o.formatFileId(a.fileId),"user-access":a.userAccess,"reset-note":o.resetNote,"data-note":a.dataNote,"update-data-note":a.updateDataNote,"note-phase1":a.notePhase1,"note-phase2":a.notePhase2,"note-phase3":a.notePhase3,"note-phase4":a.notePhase4,"modal-note":o.modalNote},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note"])]),_:1})):(d(),h(V,{key:3,value:"2"},{default:e(()=>[Ne]),_:1})),a.userData&&a.userData.position.role.isPhase3Access==1?(d(),h(V,{key:4,value:"3"},{default:e(()=>[t(u,{dataFile:a.dataFile,userData:a.userData,"insert-note":o.insertNote,"change-approval":o.changeApproval,"format-date":o.formatDate,"open-modal":o.openModal,"delete-attachment":o.deleteAttachment,"delete-note":o.deleteNote,"get-detail-file":o.getDetailFile,step:o.step,"file-id":o.formatFileId(a.fileId),"user-access":a.userAccess,"reset-note":o.resetNote,"data-note":a.dataNote,"update-data-note":a.updateDataNote,"note-phase1":a.notePhase1,"note-phase2":a.notePhase2,"note-phase3":a.notePhase3,"note-phase4":a.notePhase4,"modal-note":o.modalNote},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note"])]),_:1})):(d(),h(V,{key:5,value:"3"},{default:e(()=>[Ae]),_:1})),a.userData&&a.userData.position.role.isPhase4Access==1?(d(),h(V,{key:6,value:"4"},{default:e(()=>[t(u,{dataFile:a.dataFile,userData:a.userData,"insert-note":o.insertNote,"change-approval":o.changeApproval,"format-date":o.formatDate,"open-modal":o.openModal,"delete-attachment":o.deleteAttachment,"delete-note":o.deleteNote,"get-detail-file":o.getDetailFile,step:o.step,"file-id":o.formatFileId(a.fileId),"user-access":a.userAccess,"reset-note":o.resetNote,"data-note":a.dataNote,"update-data-note":a.updateDataNote,"note-phase1":a.notePhase1,"note-phase2":a.notePhase2,"note-phase3":a.notePhase3,"note-phase4":a.notePhase4,"modal-note":o.modalNote},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note"])]),_:1})):(d(),h(V,{key:7,value:"4"},{default:e(()=>[Te]),_:1})),t(V,{value:"5"},{default:e(()=>[t(u,{dataFile:a.dataFile,userData:a.userData,"insert-note":o.insertNote,"change-approval":o.changeApproval,"format-date":o.formatDate,"open-modal":o.openModal,"delete-attachment":o.deleteAttachment,"delete-note":o.deleteNote,"get-detail-file":o.getDetailFile,step:o.step,"file-id":o.formatFileId(a.fileId),"user-access":a.userAccess,"reset-note":o.resetNote,"data-note":a.dataNote,"update-data-note":a.updateDataNote,"note-phase1":a.notePhase1,"note-phase2":a.notePhase2,"note-phase3":a.notePhase3,"note-phase4":a.notePhase4,"modal-note":o.modalNote},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note"])]),_:1})]),_:1})]),_:1},8,["model-value","mobile"])]),_:1})]),_:1}),t(A,{modelValue:a.insertAttch,"onUpdate:modelValue":s[5]||(s[5]=n=>a.insertAttch=n),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:e(()=>[t(v,null,{title:e(()=>[c(" Tambah Data ")]),text:e(()=>[t(B,{onSubmit:R(o.insertAttachment,["prevent"])},{default:e(()=>[t(w,null,{default:e(()=>[t(f,{md:"12",cols:"12"},{default:e(()=>[Ue,Ce,t(q,{class:"my-3",modelValue:a.attachFile.name,"onUpdate:modelValue":s[0]||(s[0]=n=>a.attachFile.name=n),autofocus:"",rules:[a.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(f,{md:"12",cols:"12"},{default:e(()=>[Me,je,t(Y,{class:"my-3",accept:"image/jpeg,image/png",placeholder:"Pick an image",rules:[a.rules.required],onChange:s[1]||(s[1]=n=>o.handleFileChange(n))},null,8,["rules"])]),_:1}),a.dataFile.phase==2?(d(),h(f,{key:0,md:"12",cols:"12"},{default:e(()=>[t(Q,{label:"Apakah Termasuk File Rahasia ? (SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:a.attachFile.isSecret,"onUpdate:modelValue":s[2]||(s[2]=n=>a.attachFile.isSecret=n),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):p("",!0),t(f,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(D,{type:"submit",disabled:(a.attachFile.name&&a.attachFile.path)==null},{default:e(()=>[c(" Simpan ")]),_:1},8,["disabled"]),r("button",{type:"button",class:"btn btn-blue",onClick:s[3]||(s[3]=n=>o.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:e(()=>[t(G,{modelValue:a.uploadProgress,"onUpdate:modelValue":s[4]||(s[4]=n=>a.uploadProgress=n),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(A,{modelValue:a.updateAttch,"onUpdate:modelValue":s[11]||(s[11]=n=>a.updateAttch=n),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:e(()=>[t(v,null,{title:e(()=>[c(" Edit Data ")]),text:e(()=>[t(B,{onSubmit:R(o.editAttachment,["prevent"])},{default:e(()=>[t(w,null,{default:e(()=>[t(f,{md:"12",cols:"12"},{default:e(()=>[qe,Re,t(q,{class:"my-3",modelValue:a.attachFile.name,"onUpdate:modelValue":s[6]||(s[6]=n=>a.attachFile.name=n),autofocus:"",rules:[a.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(f,{md:"12",cols:"12"},{default:e(()=>[Be,He,t(Y,{class:"my-3",accept:"image/jpeg,image/png",placeholder:"Pick an image",rules:[a.rules.required],onChange:s[7]||(s[7]=n=>o.handleFileChange(n))},null,8,["rules"])]),_:1}),a.dataFile.phase==2?(d(),h(f,{key:0,md:"12",cols:"12"},{default:e(()=>[t(Q,{label:"Apakah Termasuk File Rahasia ? (SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:a.attachFile.isSecret,"onUpdate:modelValue":s[8]||(s[8]=n=>a.attachFile.isSecret=n),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):p("",!0),t(f,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(D,{type:"submit"},{default:e(()=>[c(" Update ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:s[9]||(s[9]=n=>o.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:e(()=>[t(G,{modelValue:a.uploadProgress,"onUpdate:modelValue":s[10]||(s[10]=n=>a.uploadProgress=n),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(A,{modelValue:a.isUpdateGeneralInfo,"onUpdate:modelValue":s[18]||(s[18]=n=>a.isUpdateGeneralInfo=n),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:e(()=>[t(v,null,{title:e(()=>[c(" Edit Informasi Umum ")]),text:e(()=>[t(B,{onSubmit:R(o.updateGeneralInfo,["prevent"])},{default:e(()=>[t(w,null,{default:e(()=>[t(f,{md:"12",cols:"12"},{default:e(()=>[Oe,Le,t(q,{class:"my-3",modelValue:a.generalInfo.name,"onUpdate:modelValue":s[12]||(s[12]=n=>a.generalInfo.name=n),autofocus:"",rules:[a.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(f,{md:"12",cols:"12"},{default:e(()=>[ze,Ge,t(q,{class:"my-3",modelValue:a.generalInfo.plafon,"onUpdate:modelValue":s[13]||(s[13]=n=>a.generalInfo.plafon=n),type:"text",onInput:o.formatInputPlafon},null,8,["modelValue","onInput"])]),_:1}),t(f,{md:"12",cols:"12"},{default:e(()=>[Ee,We,t(q,{class:"my-3",modelValue:a.generalInfo.type_bussiness,"onUpdate:modelValue":s[14]||(s[14]=n=>a.generalInfo.type_bussiness=n),rules:[a.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(f,{md:"12",cols:"12"},{default:e(()=>[Je,Ke,t(q,{class:"my-3",modelValue:a.generalInfo.desc_bussiness,"onUpdate:modelValue":s[15]||(s[15]=n=>a.generalInfo.desc_bussiness=n),rules:[a.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(f,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(D,{type:"submit"},{default:e(()=>[c(" Update ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:s[16]||(s[16]=n=>o.closeModal(4))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:e(()=>[t(G,{modelValue:a.uploadProgress,"onUpdate:modelValue":s[17]||(s[17]=n=>a.uploadProgress=n),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(A,{modelValue:a.isUpdateNote,"onUpdate:modelValue":s[20]||(s[20]=n=>a.isUpdateNote=n),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:e(()=>[t(v,null,{title:e(()=>[c(" Update Note ")]),text:e(()=>[t(B,{onSubmit:R(o.updateNote,["prevent"])},{default:e(()=>[t(w,{align:"center",justify:"center"},{default:e(()=>[t(f,{md:"10",cols:"10"},{default:e(()=>[t(E,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:a.updateDataNote.note,"onUpdate:modelValue":s[19]||(s[19]=n=>a.updateDataNote.note=n),rows:"2"},null,8,["modelValue"])]),_:1}),t(f,{md:"2",cols:"2"},{default:e(()=>[t(D,{density:"compact",icon:"mdi-note-plus",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),t(A,{modelValue:a.isDataPhase3,"onUpdate:modelValue":s[23]||(s[23]=n=>a.isDataPhase3=n),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:e(()=>[t(v,null,{title:e(()=>[c(" Hasil Survey ")]),text:e(()=>[t(B,{onSubmit:R(o.updatePhase3,["prevent"])},{default:e(()=>[t(w,null,{default:e(()=>[t(f,{md:"12",cols:"12"},{default:e(()=>[Ye,Qe,t(E,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:a.dataPhase3.surveyResult,"onUpdate:modelValue":s[21]||(s[21]=n=>a.dataPhase3.surveyResult=n),rows:"3"},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(D,{type:"submit"},{default:e(()=>[c("Update")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:s[22]||(s[22]=n=>o.closeModal(5))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),t(A,{modelValue:a.isShowTimers,"onUpdate:modelValue":s[24]||(s[24]=n=>a.isShowTimers=n),width:"auto",transition:"dialog-top-transition"},{default:e(()=>[t(v,null,{title:e(()=>[c(" Data Waktu ")]),text:e(()=>[t(I,{headers:a.timerHeaders,items:a.dataFile.phase_times},{"item-timeDiff":e(n=>[c(_(o.calculateTimeDiff(n.startTime,n.endTime)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),t(A,{modelValue:a.isShowHistory,"onUpdate:modelValue":s[25]||(s[25]=n=>a.isShowHistory=n),width:"auto",transition:"dialog-top-transition"},{default:e(()=>[t(v,null,{title:e(()=>[c(" Data Riwayat ")]),text:e(()=>[t(I,{"show-index":"",headers:a.historyHeaders,items:a.dataFile.file_activities},{"item-created_at":e(n=>[c(_(o.formatDate(n.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),t(A,{modelValue:a.isShowApprovals,"onUpdate:modelValue":s[26]||(s[26]=n=>a.isShowApprovals=n),width:"auto",transition:"dialog-top-transition"},{default:e(()=>[t(v,null,{title:e(()=>[c(" Riwayat Persetujuan ")]),text:e(()=>[t(I,{headers:a.approvalHeaders,items:a.dataFile.approvals},{"item-approved":e(n=>[n.approved==1?(d(),h(S,{key:0,color:"success"},{default:e(()=>[c(" Disetujui ")]),_:1})):(d(),h(S,{key:1,color:"error"},{default:e(()=>[c(" Belum disetujui ")]),_:1}))]),"item-created_at":e(n=>[c(_(o.formatDate(n.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"])])}const yt=$(Ve,[["render",Xe],["__scopeId","data-v-96f69043"]]);export{yt as default};
