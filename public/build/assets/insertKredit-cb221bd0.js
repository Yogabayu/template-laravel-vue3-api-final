import{m as F}from"./axios-379d51f3.js";import{_ as I,o as r,i as m,w as i,a as n,f as k,d as b,V as d,c as _,t as P,h as u,e as N,b as l,a4 as x}from"./main-d83eedbe.js";import{V as w}from"./VDialog-362fb62c.js";import{V as v}from"./VForm-039f3173.js";import{V as S}from"./VRow-f12ecd4d.js";import{V as g}from"./VSelect-0e0a4054.js";import{V as h}from"./VTextField-2f19e46c.js";import{V as f}from"./VFileInput-d56b7830.js";import{V as y}from"./VCheckbox-e135b8c0.js";import{V as L,a as V}from"./VRadioGroup-e4661886.js";import{d as K}from"./VMenu-7c054a22.js";import{V as C}from"./VCard-9ee5cc3f.js";const j={name:"InsertModal",props:{modelValue:Boolean,orderList:{type:Array,required:!0},statusCreditList:{type:Array,required:!0},closeModal:{type:Function,required:!0},getAllFiles:{type:Function,required:!1}},inject:["loading"],emits:["update:modelValue","insert"],data(){return{statusNIK:!1,cekNIKLoading:!1,noteSLIK:"NIK Sudah pernah di lakukan pengecekan SLIK (status Reject SLIK) dalam kurun waktu kurang dari 6 bulan, silahkan kontak tim Kredit analis.",dataForm:{id:null,name:"",plafon:null,type:null,type_bussiness:null,desc_bussiness:null,nik_pemohon:null,nik_pasangan:null,name_pasangan:null,nik_jaminan:null,address:null,no_hp:null,order_source:null,status_kredit:null,file1:null,hasFile2:!1,file2:null,hasFile3:!1,file3:null,file4:null,file5:null,hasFile7:!1,file7:null,hasFile8:!1,file8:null,hasFile9:!1,file9:null,hasFile10:!1,file10:null,hasFile11:!1,file11:null,file12:null},uploadProgress:0,selectedPhoto:null,typeCreditList:[{value:1,title:"Reguler"},{value:2,title:"Restruktur"},{value:3,title:"Pensiunan"}]}},methods:{async cekNIK(){try{this.noteSLIK="NIK Sudah pernah di lakukan pengecekan SLIK (status Reject SLIK) dalam kurun waktu kurang dari 6 bulan, silahkan kontak tim Kredit analis.",this.cekNIKLoading=!0;const a=this.dataForm.nik_pemohon;a==null&&(this.cekNIKLoading=!1,this.statusNIK=!1);const e=await F.get(`/user/cekNIK/${a}`);e.status===200?e.data.data==0?(this.cekNIKLoading=!1,this.statusNIK=!0):(e.data.data&&e.data.data.reasonRejected&&(this.noteSLIK=this.noteSLIK+" Keterangan: "+e.data.data.reasonRejected),this.cekNIKLoading=!1,this.statusNIK=!1):(this.noteSLIK="NIK Sudah pernah di lakukan pengecekan SLIK (status Reject SLIK) dalam kurun waktu kurang dari 6 bulan, silahkan kontak tim Kredit analis.",this.cekNIKLoading=!1,this.statusNIK=!1)}catch(a){this.noteSLIK="NIK Sudah pernah di lakukan pengecekan SLIK (status Reject SLIK) dalam kurun waktu kurang dari 6 bulan, silahkan kontak tim Kredit analis.",this.statusNIK=!1,this.loading.hide(),this.uploadProgress=null,this.closeModal(1),this.getAllFiles(),this.$showToast("error","Sorry",a.response.data.message)}},async insertData(){try{this.loading.show();const a=new FormData;a.append("name",this.dataForm.name),a.append("nik_pemohon",this.dataForm.nik_pemohon),a.append("address",this.dataForm.address),a.append("type",this.dataForm.type),a.append("no_hp",this.dataForm.no_hp),a.append("order_source",this.dataForm.order_source),a.append("status_kredit",this.dataForm.status_kredit),a.append("plafon",this.dataForm.plafon.replace(/\D/g,"")),a.append("type_bussiness",this.dataForm.type_bussiness),a.append("desc_bussiness",this.dataForm.desc_bussiness),this.dataForm.file2!=null&&(a.append("nik_pasangan",this.dataForm.nik_pasangan),a.append("name_pasangan",this.dataForm.name_pasangan)),this.dataForm.file3!=null&&a.append("nik_jaminan",this.dataForm.nik_jaminan);for(let c=1;c<=12;c++){if(c===6)continue;let t="file"+c,o="noteFile"+c,s="hasFile"+c;this.dataForm.hasOwnProperty(s)&&this.dataForm[s]||this.dataForm[t]?this.dataForm[t]&&(a.append(t,this.dataForm[t]),a.append(o,this.dataForm[o])):this.dataForm[t]&&a.append(t,this.dataForm[t])}a.append("_method","POST");const e={onUploadProgress:c=>{try{this.uploadProgress=Math.round(c.loaded*100/c.total)}catch(t){console.error("Error calculating progress:",t)}},headers:{"Content-Type":"multipart/form-data"}},p=await F.post("/user/credit",a,e);p.status===200?(this.loading.hide(),this.closeModal(1),this.getAllFiles(),this.uploadProgress=null,this.$showToast("success","Success",p.data.message)):(this.loading.hide(),this.uploadProgress=null,this.getAllFiles(),this.$showToast("error","Sorry",p.data.message))}catch(a){this.loading.hide(),this.uploadProgress=null,this.closeModal(1),this.getAllFiles(),this.$showToast("error","Sorry",a.response.data.message)}},handleFileChange(a,e){const p=a.target.files[0];p&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(p.type)?(this.dataForm[e]=p,e=="file1"?this.dataForm.noteFile1="KTP Pemohon":e=="file2"?this.dataForm.noteFile2="KTP Pasangan":e=="file3"?this.dataForm.noteFile3="KTP Atas Nama Jaminan":e=="file4"?this.dataForm.noteFile4="Kartu Keluarga":e=="file5"?this.dataForm.noteFile5="Buku Nikah":e=="file7"?this.dataForm.noteFile7="Jaminan SHM":e=="file8"?this.dataForm.noteFile8="Jaminan BPKB":e=="file9"?this.dataForm.noteFile9="Foto Detail Mesin":e=="file10"?this.dataForm.noteFile10="Foto Kunjungan":e=="file11"?this.dataForm.noteFile11="Foto WhatsApp":e=="file12"&&(this.dataForm.noteFile12="Form Permohonan SLIK")):(this.loading.hide(),this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, dan PDF, WORD yang diizinkan."),a.target.value=null)},resetFile(a){this.dataForm[a]=null},formatInputIn(a){let e=a.target.value;e=e.replace(/\D/g,""),e=e.replace(/\B(?=(\d{3})+(?!\d))/g,","),a.target.value=e},formatNumber(a){return a?a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):""}},computed:{rules(){return{required:a=>!!a||"Field ini harus diisi."}},formattedPlafon:{get(){return this.formatNumber(this.dataForm.plafon)},set(a){this.dataForm.plafon=a.replace(/\D/g,"")}},formattedMaxPlafon:{get(){return this.formatNumber(this.dataForm.plafon)},set(a){this.dataForm.plafon=a.replace(/\D/g,"")}}}},U=l("span",{style:{color:"red"}},"*",-1),q=l("span",{class:"subtitle-1 text-center"},"Pilih Jenis Kredit: ",-1),T=l("span",{style:{color:"red"}},"*",-1),A=l("span",{class:"subtitle-1 text-center"},"Nama Pemohon: ",-1),D=l("span",{style:{color:"red"}},"*",-1),B=l("span",{class:"subtitle-1 text-center"},"Jumlah Plafon: ",-1),R=l("span",{style:{color:"red"}},"*",-1),M=l("span",{class:"subtitle-1 text-center"},"NIK Pemohon: ",-1),J={key:0,class:"subtitle-1 text-center",style:{color:"red"}},W={key:1,class:"subtitle-1 text-center",style:{color:"red"}},G=l("span",{style:{color:"red"}},"*",-1),E=l("span",{class:"subtitle-1 text-center"},"Alamat Pemohon: ",-1),H=l("span",{style:{color:"red"}},"*",-1),O=l("span",{class:"subtitle-1 text-center"},"No. HP Pemohon: ",-1),z=l("span",{style:{color:"red"}},"*",-1),Q=l("span",{class:"subtitle-1 text-center"},"KTP Pemohon : ",-1),X=l("span",{class:"subtitle-1 text-center"},"Nama Pasangan / Pendamping : ",-1),Y=l("span",{class:"subtitle-1 text-center"},"NIK Pasangan / Pendamping : ",-1),Z=l("span",{class:"subtitle-1 text-center"},"KTP Pasangan / Pendamping Pemohon : ",-1),$=l("span",{class:"subtitle-1 text-center"},"Buku Nikah:",-1),ee=l("span",{style:{color:"red"}},"*",-1),te=l("span",{class:"subtitle-1 text-center"},"Kartu Keluarga : ",-1),se=l("span",{style:{color:"red"}},"*",-1),ae=l("span",{class:"subtitle-1 text-center"},"Pilih sumber order: ",-1),le=l("span",{style:{color:"red"}},"*",-1),oe=l("span",{class:"subtitle-1 text-center"},"Pilih status order: ",-1),ne=l("span",{style:{color:"red"}},"*",-1),ie=l("span",{class:"subtitle-1 text-center"},"Pilih Jenis Bukti Kunjungan : ",-1),re=l("span",{style:{color:"red"}},"*",-1),de=l("span",{class:"subtitle-1 text-center"},"Foto Kunjungan :",-1),ue=l("span",{style:{color:"red"}},"*",-1),me=l("span",{class:"subtitle-1 text-center"},"Foto WhatsApp :",-1),pe=l("span",{style:{color:"red"}},"*",-1),ce=l("span",{class:"subtitle-1 text-center"},"KTP atas nama Jaminan : ",-1),he=l("span",{style:{color:"red"}},"*",-1),fe=l("span",{class:"subtitle-1 text-center"},"NIK Pemilik Jaminan: ",-1),ge=l("span",{style:{color:"red"}},"*",-1),Fe=l("span",{class:"subtitle-1 text-center"},"Jenis Usaha: ",-1),ke=l("span",{style:{color:"red"}},"*",-1),_e=l("span",{class:"subtitle-1 text-center"},"Deskripsi Usaha: ",-1),ye=l("span",{style:{color:"red"}},"*",-1),Ve=l("span",{class:"subtitle-1 text-center"},"Form Permohonan SLIK : ",-1);function Ke(a,e,p,c,t,o){return r(),m(w,{"model-value":p.modelValue,"onUpdate:modelValue":e[29]||(e[29]=s=>a.$emit("update:modelValue",s)),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:i(()=>[n(C,null,{title:i(()=>[k("Tambah Data")]),text:i(()=>[n(v,{onSubmit:b(o.insertData,["prevent"])},{default:i(()=>[n(S,null,{default:i(()=>[n(d,{md:"12",cols:"12"},{default:i(()=>[U,q,n(g,{items:t.typeCreditList,autofocus:"",modelValue:t.dataForm.type,"onUpdate:modelValue":e[0]||(e[0]=s=>t.dataForm.type=s),"prepend-icon":"mdi-help-rhombus"},null,8,["items","modelValue"])]),_:1}),n(d,{md:"12",cols:"12"},{default:i(()=>[T,A,n(h,{class:"my-3",modelValue:t.dataForm.name,"onUpdate:modelValue":e[1]||(e[1]=s=>t.dataForm.name=s),rules:[o.rules.required]},null,8,["modelValue","rules"])]),_:1}),n(d,{md:"12",cols:"12"},{default:i(()=>[D,B,n(h,{class:"my-3",modelValue:o.formattedPlafon,"onUpdate:modelValue":e[2]||(e[2]=s=>o.formattedPlafon=s),type:"text",onInput:o.formatInputIn},null,8,["modelValue","onInput"])]),_:1}),n(d,{md:"12",cols:"12"},{default:i(()=>[R,M,n(h,{class:"my-3",modelValue:t.dataForm.nik_pemohon,"onUpdate:modelValue":e[3]||(e[3]=s=>t.dataForm.nik_pemohon=s),type:"number",rules:[o.rules.required],onInput:e[4]||(e[4]=s=>o.cekNIK())},null,8,["modelValue","rules"]),!t.statusNIK&&!t.cekNIKLoading&&t.dataForm.nik_pemohon?(r(),_("span",J,P(t.noteSLIK),1)):u("",!0),t.cekNIKLoading?(r(),_("span",W," Sistem melakukan pengecekan NIK ...... ")):u("",!0)]),_:1}),t.statusNIK?(r(),m(d,{key:0,md:"12",cols:"12"},{default:i(()=>[G,E,n(h,{class:"my-3",modelValue:t.dataForm.address,"onUpdate:modelValue":e[5]||(e[5]=s=>t.dataForm.address=s),rules:[o.rules.required]},null,8,["modelValue","rules"])]),_:1})):u("",!0),t.statusNIK?(r(),m(d,{key:1,md:"12",cols:"12"},{default:i(()=>[H,O,n(h,{class:"my-3",modelValue:t.dataForm.no_hp,"onUpdate:modelValue":e[6]||(e[6]=s=>t.dataForm.no_hp=s),rules:[o.rules.required]},null,8,["modelValue","rules"])]),_:1})):u("",!0),t.statusNIK?(r(),m(d,{key:2,md:"12",cols:"12"},{default:i(()=>[z,Q,n(f,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[o.rules.required],onChange:e[7]||(e[7]=s=>o.handleFileChange(s,"file1"))},null,8,["rules"])]),_:1})):u("",!0),t.statusNIK?(r(),m(d,{key:3,md:"12",cols:"12"},{default:i(()=>[X,n(h,{class:"my-3",type:"text",modelValue:t.dataForm.name_pasangan,"onUpdate:modelValue":e[8]||(e[8]=s=>t.dataForm.name_pasangan=s)},null,8,["modelValue"])]),_:1})):u("",!0),t.statusNIK?(r(),m(d,{key:4,md:"12",cols:"12"},{default:i(()=>[Y,n(h,{class:"my-3",type:"number",modelValue:t.dataForm.nik_pasangan,"onUpdate:modelValue":e[9]||(e[9]=s=>t.dataForm.nik_pasangan=s)},null,8,["modelValue"])]),_:1})):u("",!0),t.statusNIK?(r(),m(d,{key:5,md:"12",cols:"12"},{default:i(()=>[Z,n(f,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[o.rules.required],onChange:e[10]||(e[10]=s=>o.handleFileChange(s,"file2"))},null,8,["rules"])]),_:1})):u("",!0),t.statusNIK?(r(),m(d,{key:6,cols:"12",md:"12"},{default:i(()=>[n(y,{modelValue:t.dataForm.hasFile2,"onUpdate:modelValue":e[11]||(e[11]=s=>t.dataForm.hasFile2=s),label:"Apakah pemohon sudah menikah?",onChange:e[12]||(e[12]=s=>o.resetFile("file5"))},null,8,["modelValue"])]),_:1})):u("",!0),t.dataForm.hasFile2&&t.statusNIK?(r(),m(d,{key:7,md:"12",cols:"12"},{default:i(()=>[$,n(f,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[o.rules.required],onChange:e[13]||(e[13]=s=>{o.handleFileChange(s,"file5"),o.resetFile("file7"),o.resetFile("file8")})},null,8,["rules"])]),_:1})):u("",!0),t.statusNIK?(r(),m(d,{key:8,md:"12",cols:"12"},{default:i(()=>[ee,te,n(f,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[o.rules.required],onChange:e[14]||(e[14]=s=>o.handleFileChange(s,"file4"))},null,8,["rules"])]),_:1})):u("",!0),t.statusNIK?(r(),m(d,{key:9,md:"12",cols:"12"},{default:i(()=>[se,ae,n(g,{items:p.orderList,autofocus:"",modelValue:t.dataForm.order_source,"onUpdate:modelValue":e[15]||(e[15]=s=>t.dataForm.order_source=s),"prepend-icon":"mdi-help-rhombus"},null,8,["items","modelValue"])]),_:1})):u("",!0),t.statusNIK?(r(),m(d,{key:10,md:"12",cols:"12"},{default:i(()=>[le,oe,n(g,{items:p.statusCreditList,autofocus:"",modelValue:t.dataForm.status_kredit,"onUpdate:modelValue":e[16]||(e[16]=s=>t.dataForm.status_kredit=s),"prepend-icon":"mdi-help-rhombus"},null,8,["items","modelValue"])]),_:1})):u("",!0),t.statusNIK?(r(),m(d,{key:11,md:"12",cols:"12"},{default:i(()=>[ne,ie,n(L,{modelValue:t.selectedPhoto,"onUpdate:modelValue":e[17]||(e[17]=s=>t.selectedPhoto=s),mandatory:!0,row:""},{default:i(()=>[n(V,{label:"Foto Kunjungan",value:"fotoKunjungan"}),n(V,{label:"Foto WhatsApp",value:"fotoWhatsApp"})]),_:1},8,["modelValue"])]),_:1})):u("",!0),t.selectedPhoto==="fotoKunjungan"&&t.statusNIK?(r(),m(d,{key:12,md:"12",cols:"12"},{default:i(()=>[re,de,n(f,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[o.rules.required],onChange:e[18]||(e[18]=s=>{o.handleFileChange(s,"file10"),o.resetFile("file11")})},null,8,["rules"])]),_:1})):u("",!0),t.selectedPhoto==="fotoWhatsApp"&&t.statusNIK?(r(),m(d,{key:13,md:"12",cols:"12"},{default:i(()=>[ue,me,n(f,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[o.rules.required],onChange:e[19]||(e[19]=s=>{o.handleFileChange(s,"file11"),o.resetFile("file10")})},null,8,["rules"])]),_:1})):u("",!0),t.statusNIK?(r(),m(K,{key:14,thickness:5})):u("",!0),t.statusNIK?(r(),m(d,{key:15,cols:"12",md:"12"},{default:i(()=>[n(y,{modelValue:t.dataForm.hasFile3,"onUpdate:modelValue":e[20]||(e[20]=s=>t.dataForm.hasFile3=s),label:"Apakah agunan bukan atas nama pemohon?",onChange:e[21]||(e[21]=s=>(o.resetFile("file3"),t.dataForm.nik_jaminan=null))},null,8,["modelValue"])]),_:1})):u("",!0),t.dataForm.hasFile3&&t.statusNIK?(r(),m(d,{key:16,md:"12",cols:"12"},{default:i(()=>[pe,ce,n(f,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[o.rules.required],onChange:e[22]||(e[22]=s=>o.handleFileChange(s,"file3"))},null,8,["rules"])]),_:1})):u("",!0),t.dataForm.hasFile3&&t.statusNIK?(r(),m(d,{key:17,md:"12",cols:"12"},{default:i(()=>[he,fe,n(h,{class:"my-3",type:"number",modelValue:t.dataForm.nik_jaminan,"onUpdate:modelValue":e[23]||(e[23]=s=>t.dataForm.nik_jaminan=s),rules:[o.rules.required]},null,8,["modelValue","rules"])]),_:1})):u("",!0),t.statusNIK?(r(),m(K,{key:18,thickness:5})):u("",!0),t.statusNIK?(r(),m(d,{key:19,md:"12",cols:"12"},{default:i(()=>[ge,Fe,n(h,{class:"my-3",modelValue:t.dataForm.type_bussiness,"onUpdate:modelValue":e[24]||(e[24]=s=>t.dataForm.type_bussiness=s),rules:[o.rules.required]},null,8,["modelValue","rules"])]),_:1})):u("",!0),t.statusNIK?(r(),m(d,{key:20,md:"12",cols:"12"},{default:i(()=>[ke,_e,n(h,{class:"my-3",modelValue:t.dataForm.desc_bussiness,"onUpdate:modelValue":e[25]||(e[25]=s=>t.dataForm.desc_bussiness=s),rules:[o.rules.required]},null,8,["modelValue","rules"])]),_:1})):u("",!0),t.statusNIK?(r(),m(d,{key:21,md:"12",cols:"12"},{default:i(()=>[ye,Ve,n(f,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[o.rules.required],onChange:e[26]||(e[26]=s=>o.handleFileChange(s,"file12"))},null,8,["rules"])]),_:1})):u("",!0),n(d,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:i(()=>[n(N,{type:"submit",disabled:t.dataForm.name==null||t.dataForm.plafon==null||t.dataForm.type_bussiness==null||t.dataForm.desc_bussiness==null||t.dataForm.order_source==null||t.dataForm.status_kredit==null||t.dataForm.file1==null||t.dataForm.file4==null||t.dataForm.file10==null&&t.dataForm.file11==null||t.dataForm.file12==null},{default:i(()=>[k(" Simpan ")]),_:1},8,["disabled"]),l("button",{type:"button",class:"btn btn-blue",onClick:e[27]||(e[27]=s=>p.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:i(()=>[n(x,{modelValue:t.uploadProgress,"onUpdate:modelValue":e[28]||(e[28]=s=>t.uploadProgress=s),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["model-value"])}const qe=I(j,[["render",Ke]]);export{qe as I};
