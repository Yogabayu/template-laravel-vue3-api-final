import{m as u}from"./axios-379d51f3.js";import{l as c}from"./arthaya-5f3e6501.js";import{_ as f,o as g,c as h,a as s,w as t,b as i,d as w,V as d,e as _,f as b}from"./main-d83eedbe.js";import{V,a as x,b as m}from"./VCard-9ee5cc3f.js";import{V as k}from"./VForm-039f3173.js";import{V as y}from"./VRow-f12ecd4d.js";import{V as p}from"./VTextField-2f19e46c.js";import"./VAvatar-f18de323.js";import"./VImg-7edfe0df.js";import"./VInput-9df3fa5a.js";import"./index-b8f9da96.js";import"./forwardRefs-8348545e.js";const v={data(){return{userData:null,userToken:null,form:{nik:null,password:"",remember:!1},isPasswordVisible:!1,logo:c}},inject:["loading"],methods:{saveUserDataAndToken(o){localStorage.setItem("userData",JSON.stringify(o.user)),localStorage.setItem("userToken",o.token.token)},forgotAlert(){alert("Silahkan Hubungi Administrator")},async login(){try{this.loading.show();const o=navigator.userAgent,e=await u.post("/login",{nik:this.form.nik,password:this.form.password,device:o});if(e.status===200)this.saveUserDataAndToken(e.data),e.data.user.position.name=="administrator"?await this.$router.push("/dashboard"):await this.$router.push("/user-dashboard"),this.$showToast("success","Yeay","Selamat anda Berhasill login, mengarahkan ke dashboard.....");else{this.loading.hide();const n=e&&e.data&&e.data.message?e.data.message:"Gagal login. Silakan coba lagi.";this.$showToast("error","Sorry",n)}}catch(o){this.loading.hide();const e=o.response&&o.response.data&&o.response.data.message?o.response.data.message:"Gagal login. Silakan coba lagi.";this.$showToast("error","Sorry",e)}}}},T={class:"auth-wrapper d-flex align-center justify-center pa-4"},S={class:"d-flex"},A=["innerHTML"],P=i("h5",{class:"text-h5 mb-1"},"Welcome 👋🏻",-1),C=i("p",{class:"mb-0"},"Please sign-in to your account",-1),B={class:"d-flex align-center justify-space-between flex-wrap mt-1 mb-4"};function I(o,e,n,M,a,l){return g(),h("div",T,[s(V,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:t(()=>[s(x,{class:"justify-center"},{prepend:t(()=>[i("div",S,[i("div",{class:"d-flex text-primary w-64 h-32",innerHTML:a.logo},null,8,A)])]),_:1}),s(m,{class:"pt-2"},{default:t(()=>[P,C]),_:1}),s(m,null,{default:t(()=>[s(k,{onSubmit:w(l.login,["prevent"])},{default:t(()=>[s(y,null,{default:t(()=>[s(d,{cols:"12"},{default:t(()=>[s(p,{modelValue:a.form.nik,"onUpdate:modelValue":e[0]||(e[0]=r=>a.form.nik=r),autofocus:"",placeholder:"008xxxxx",label:"NIK",type:"number"},null,8,["modelValue"])]),_:1}),s(d,{cols:"12"},{default:t(()=>[s(p,{modelValue:a.form.password,"onUpdate:modelValue":e[1]||(e[1]=r=>a.form.password=r),label:"Password",placeholder:"············",type:a.isPasswordVisible?"text":"password","append-inner-icon":a.isPasswordVisible?"bx-hide":"bx-show","onClick:appendInner":e[2]||(e[2]=r=>a.isPasswordVisible=!a.isPasswordVisible)},null,8,["modelValue","type","append-inner-icon"]),i("div",B,[i("a",{href:"#",class:"text-primary ms-2 mb-1 mt-2",onClick:e[3]||(e[3]=(...r)=>l.forgotAlert&&l.forgotAlert(...r))}," Forgot Password? ")]),s(_,{block:"",type:"submit"},{default:t(()=>[b(" Login ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})])}const O=f(v,[["render",I]]);export{O as default};
