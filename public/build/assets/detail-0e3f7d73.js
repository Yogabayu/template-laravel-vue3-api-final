import{m as O}from"./axios-379d51f3.js";import{_ as me,o as d,i as h,w as l,a as e,V as c,e as k,O as v,j as F,f as p,c as D,G as se,t as _,b as r,h as m,E as ue,H as B,I as fe,J as ge,d as J,a4 as Z,r as he,P as ft,Q as gt,R as kt,S as _t,T as yt,p as Ue,U as Se,W as He,l as oe,X as vt,z as Fe,B as Ge,Y as At,Z as bt,$ as St,a0 as Ft,a1 as Pt,a2 as xt,aC as Dt}from"./main-fb55873b.js";import{V as I}from"./VRow-4b825e9e.js";import{V as De,a as Ne,b as It,c as wt,d as Vt,e as ye,f as Ct,g as te}from"./VStepper-64254748.js";import{V as A,b as P,c as re,e as Ye}from"./VCard-36ed899b.js";import{V as T}from"./VTooltip-51b9aa47.js";import{d as X,a as Me,b as S,c as G,V as Xe,u as Tt,t as Ke}from"./VMenu-234a1d5c.js";import{V as W}from"./VForm-40db3f8d.js";import{V as w,m as Ut}from"./VTextField-2f4246b4.js";import{b as le,c as q}from"./VWindowItem-9debceb3.js";import{V as ee}from"./VFileInput-c044d611.js";import{V as E,m as Kt,u as Nt,a as Mt,b as jt}from"./VSelect-5a725ba3.js";import{V as L}from"./VDialog-76657430.js";import{V as Pe}from"./VSpacer-b081e200.js";import{V as xe}from"./VChip-41aa7e64.js";import{V as Qe}from"./VAlert-ca1e01a2.js";import{V as Ot}from"./VContainer-5be2905f.js";import{m as Rt,u as qt}from"./filter-fb389a68.js";import{u as Lt}from"./VInput-87c8c540.js";import{f as Et}from"./forwardRefs-8348545e.js";import"./VImg-241f5ca8.js";import"./VAvatar-21d2dc50.js";import"./index-90ca1e08.js";import"./dialog-transition-aac6746b.js";const zt={name:"AttachmentCard1",inject:["loading"],props:{data:{type:Object,required:!0},fileId:{type:Number,required:!0},filePath:{type:String,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},openModal:{type:Function,required:!0},phase:{type:Number,required:!0}},data(){return{userAccessPhase1:null}},methods:{canViewFileA(t){return t.path=="null"&&t.link==null?!1:parseInt(t.isSecret)?!!(this.userAccessPhase1&&parseInt(this.userAccessPhase1.isSecret)):!!(t.path||t.link)},getFileUrlA(t){return t.path!="null"?`${this.filePath}/${this.fileId}/${t.path}`:t.link},canViewFile(t){return t.path!=="null"&&(!t.isSecret||this.userAccessPhase1&&parseInt(this.userAccessPhase1.isSecret))},canEditFile(t){return this.userAccessPhase1&&parseInt(this.userAccessPhase1.canUpdateData)&&this.phase<2},canDeleteFile(t){return this.userAccessPhase1&&parseInt(this.userAccessPhase1.canDeleteData)&&this.phase<2},viewFile(t){const a=t.isSecret?this.dataFile.id:this.fileId;window.open(`${this.filePath}/${a}/${t.path}`)}},mounted(){this.userAccessPhase1=this.userAccess[1]}},Bt=t=>(fe("data-v-17f4d221"),t=t(),ge(),t),Ht=Bt(()=>r("span",{class:"text-subtitle-1 font-weight-bold ml-2"},"Phase 1 (Pooling) 📄",-1)),Gt={class:"text-subtitle-2 font-weight-bold"},Jt={key:0,class:"text-caption text-grey-darken-1"},Wt={class:"d-flex"};function Yt(t,a,n,f,s,o){return d(),h(A,null,{default:l(()=>[e(P,{class:"py-1 header-color"},{default:l(()=>[e(I,{align:"center","no-gutters":""},{default:l(()=>[e(c,{cols:"auto",class:"mr-auto"},{default:l(()=>[Ht]),_:1}),e(c,{cols:"auto"},{default:l(()=>[e(De,{"max-width":"400"},{activator:l(({props:i})=>[e(k,v({icon:""},i,{color:"on-primary",variant:"text"}),{default:l(()=>[e(F,{color:"white"},{default:l(()=>[p("mdi-help-circle-outline")]),_:1})]),_:2},1040)]),default:l(()=>[e(A,null,{default:l(()=>[e(P,{class:"text-h6 py-2 px-4"},{default:l(()=>[p(" Penjelasan Phase 1: Pooling ")]),_:1}),e(P,{class:"py-2 px-4"},{default:l(()=>[p(" Tahap ini meliputi pengumpulan dan verifikasi berkas kredit nasabah. Proses ini dilaksanakan setelah Account Officer (AO) melakukan survei lapangan. Dokumentasi yang terkumpul akan digunakan untuk analisis SLIK (Sistem Layanan Informasi Keuangan) guna menilai kelayakan kredit. ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(d(!0),D(B,null,se(n.data,(i,b)=>(d(),D("div",{key:b,class:"pa-1"},[e(I,{"no-gutters":"",align:"center",class:ue(parseInt(i.isSecret)?"bg-grey-lighten-4":"")},{default:l(()=>[e(c,{cols:"auto",class:"mr-2"},{default:l(()=>[e(F,{color:parseInt(i.isApprove)?"success":"error",size:"small"},{default:l(()=>[p(_(parseInt(i.isApprove)?"mdi-check-circle":"mdi-close-circle"),1)]),_:2},1032,["color"])]),_:2},1024),e(c,null,{default:l(()=>[r("div",Gt,_(i.name),1),i.note?(d(),D("div",Jt,_(i.note),1)):m("",!0)]),_:2},1024),e(c,{cols:"auto"},{default:l(()=>[r("div",Wt,[o.canViewFileA(i)?(d(),h(T,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-link-external",size:"small",color:"primary",variant:"text",class:"mr-2",href:o.getFileUrlA(i),target:"_blank",rel:"noopener noreferrer"}),null,16,["href"])]),_:2},1024)):m("",!0),s.userAccessPhase1&&parseInt(s.userAccessPhase1.canUpdateData)&&n.phase<2?(d(),h(T,{key:1,location:"top",text:"Edit File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-edit",size:"small",color:"info",variant:"text",class:"mr-2",onClick:R=>n.openModal(2,i)}),null,16,["onClick"])]),_:2},1024)):m("",!0),s.userAccessPhase1&&parseInt(s.userAccessPhase1.canDeleteData)&&n.phase<2?(d(),h(T,{key:2,location:"top",text:"Hapus File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-trash",size:"small",color:"error",variant:"text",onClick:R=>n.deleteAttachment(i.id)}),null,16,["onClick"])]),_:2},1024)):m("",!0)])]),_:2},1024)]),_:2},1032,["class"]),b<n.data.length-1?(d(),h(X,{key:0,class:"mt-3"})):m("",!0)]))),128))]),_:1})}const Xt=me(zt,[["render",Yt],["__scopeId","data-v-17f4d221"]]);const Qt={props:{data:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},phase:{type:Number,required:!0}},watch:{selectedOption(t){t==="file"?this.formDetailSlik.link=null:t==="link"&&(this.formDetailSlik.path=null)}},computed:{isSaveDisabled(){return(!this.formAnalytic.path||this.formAnalytic.path=="null")&&(!this.formAnalytic.link||this.formAnalytic.link==null)},isFormAppealDisabled(){return(!this.formAppeal.path||this.formAppeal.path=="null")&&(!this.formAppeal.link||this.formAppeal.link==null)}},inject:["loading"],data(){return{userAccessPhase2:null,selectedOption:"",uploadProgress:null,rules:{required:t=>!!t||"Required"},isFormDetailSlik:!1,formDetailSlik:{id:null,name:null,note:null,path:null,link:null,file_id:this.fileId,isApprove:0,isSecret:0},isFormResumeSlik:!1,formResumeSlik:{id:null,name:null,path:null,note:null,link:null,file_id:this.fileId,isApprove:0,isSecret:0},isAppeal:!1,formAppeal:{id:null,file_id:this.fileId,phase:2,name:"File Banding",path:null,note:null,link:null,isApprove:0,isSecret:0},isAnalytic:!1,formAnalytic:{id:null,file_id:this.fileId,link:null,note:null,phase:2,name:"Analisa Awal Kredit AO",path:null,isApprove:0,isSecret:0}}},methods:{canViewFile(t){return parseInt(t.isSecret)?(t.path!=="null"||t.link!==null)&&this.userAccessPhase2&&parseInt(this.userAccessPhase2.isSecret)===1:t.path!=="null"||t.link!==null},canUploadFile(t){return t.path==="null"&&t.link===null&&this.userAccessPhase2&&parseInt(this.userAccessPhase2.canInsertData)===1},canAppealFile(t){let a=!1;return a=this.userAccessPhase2&&(parseInt(this.userAccessPhase2.canAppeal)==1||parseInt(this.userAccessPhase2.canApproveAppeal)==1),a},canEditFile(t){return this.userAccessPhase2&&parseInt(this.userAccessPhase2.canUpdateData)&&this.phase<3},canDeleteFile(t){return this.userAccessPhase2&&parseInt(this.userAccessPhase2.canDeleteData)&&this.phase<3},getFileUrl(t){return t.path!=="null"?`${this.filePath}/${this.fileId}/${t.path}`:t.link!==null?t.link:"#"},shouldDisplay(t){return!(t.name==="Analisa Awal Kredit AO"||t.name==="File Banding")},showAnalisaAwalCredit(){if(this.data.filter(a=>a.name.includes("SLIK")&&a.isApprove==1&&(a.path!="null"||a.link!=null)).length>0){let a=this.data.find(n=>n.name==="Analisa Awal Kredit AO");if(a!=null)return this.formAnalytic.id=a.id,this.formAnalytic.isApprove=parseInt(a.isApprove),this.formAnalytic.isSecret=parseInt(a.isSecret),this.formAnalytic.path=a.path,this.formAnalytic.link=a.link,!0}return!1},showFileBanding(){const t=this.data.filter(n=>n.name.includes("SLIK")&&n.isApprove==0&&(n.path!=="null"||n.link!==null)),a=this.data.filter(n=>n.name=="File Banding"&&(n.path!=="null"||n.link!==null));if(t.length>0||a.length>0){let n=this.data.find(f=>f.name==="File Banding");if(n!=null)return this.formAppeal.id=n.id,this.formAppeal.isApprove=parseInt(n.isApprove),this.formAppeal.isSecret=parseInt(n.isSecret),this.formAppeal.path=n.path,!0}return!1},handleFileChange(t){const a=t.target.files[0];a&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(a.type)?this.formDetailSlik.path=a:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),t.target.value=null)},handleAnalyticChange(t){const a=t.target.files[0];a&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(a.type)?this.formAnalytic.path=a:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),t.target.value=null)},handleAppealChange(t){const a=t.target.files[0];a&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(a.type)?this.formAppeal.path=a:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),t.target.value=null)},openModal(t,a=null){t==1?a.name=="Detail SLIK"?(this.selectedOption="",this.formDetailSlik.id=a.id,this.formDetailSlik.name=a.name,this.formDetailSlik.note=a.note,this.formDetailSlik.isSecret=parseInt(a.isSecret),this.formDetailSlik.isApprove=parseInt(a.isApprove),this.isFormDetailSlik=!0):a.name=="Resume SLIK"?(this.selectedOption="",this.formDetailSlik.id=a.id,this.formDetailSlik.name=a.name,this.formDetailSlik.note=a.note,this.formDetailSlik.isSecret=parseInt(a.isSecret),this.formDetailSlik.isApprove=parseInt(a.isApprove),this.isFormResumeSlik=!0):(this.formDetailSlik.id=a.id,this.formDetailSlik.name=a.name,this.formDetailSlik.note=a.note,this.formDetailSlik.isSecret=parseInt(a.isSecret),this.formDetailSlik.isApprove=parseInt(a.isApprove),this.isFormResumeSlik=!0):t==2?this.isAnalytic=!0:t==3&&(this.formAppeal.link=null,this.formAppeal.path=null,this.isAppeal=!0)},closeModal(t){t==1?(this.formDetailSlik.id=null,this.formDetailSlik.name=null,this.formDetailSlik.path=null,this.formDetailSlik.link=null,this.formDetailSlik.isSecret=0,this.formDetailSlik.isApprove=0,this.isFormDetailSlik=!1):t==2?(this.formDetailSlik.id=null,this.formDetailSlik.name=null,this.formDetailSlik.path=null,this.formDetailSlik.link=null,this.formDetailSlik.isSecret=0,this.formDetailSlik.isApprove=0,this.isFormResumeSlik=!1):t==3?(this.formAnalytic.id=null,this.formAnalytic.isSecret=0,this.formAnalytic.isApprove=0,this.formAnalytic.path=null,this.formAnalytic.link=null,this.isAnalytic=!1):t==4&&(this.formAppeal.id=null,this.formAppeal.isSecret=0,this.formAppeal.isApprove=0,this.formAppeal.link=null,this.formAppeal.path=null,this.isAppeal=!1)},async insertSlik(){try{this.loading.show();const t=new FormData;t.append("name",this.formDetailSlik.name),this.formDetailSlik.note!=null&&t.append("note",this.formDetailSlik.note),this.formDetailSlik.path!=null?t.append("path",this.formDetailSlik.path):this.formDetailSlik.link!=null&&t.append("link",this.formDetailSlik.link),t.append("isSecret",this.formDetailSlik.isSecret),t.append("isApprove",this.formDetailSlik.isApprove),t.append("file_id",this.formDetailSlik.file_id),t.append("_method","PUT");const a={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},n=await O.post(`/user/edit-attach/${this.formDetailSlik.id}`,t,a);n.status===200?(this.loading.hide(),this.closeModal(1),this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.loading.hide(),this.closeModal(1),this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(t){this.loading.hide(),this.closeModal(1),this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}},async insertAnalytic(){try{this.loading.show();const t=new FormData;t.append("name",this.formAnalytic.name),t.append("note",this.formAnalytic.note),this.formAnalytic.path!="null"?t.append("path",this.formAnalytic.path):this.formAnalytic.link!=null&&t.append("link",this.formAnalytic.link),t.append("phase",this.formAnalytic.phase),t.append("isSecret",this.formAnalytic.isSecret),t.append("file_id",this.formAnalytic.file_id),t.append("isApprove",this.formAnalytic.isApprove),t.append("_method","PUT");const a={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},n=await O.post(`/user/edit-attach/${this.formAnalytic.id}`,t,a);n.status===200?(this.loading.hide(),this.closeModal(3),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.loading.hide(),this.closeModal(3),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(t){this.loading.hide(),this.closeModal(3),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}},async insertAppeal(){try{this.loading.show();const t=new FormData;t.append("name",this.formAppeal.name),t.append("note",this.formAppeal.note),this.formAppeal.path!=null&&this.formAppeal.path!=""?t.append("path",this.formAppeal.path):this.formAppeal.link!=null&&this.formAppeal.link!=""&&t.append("link",this.formAppeal.link),t.append("phase",this.formAppeal.phase),t.append("isSecret",this.formAppeal.isSecret),t.append("file_id",this.formAppeal.file_id),t.append("isApprove",this.formAppeal.isApprove),t.append("_method","PUT");const a={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},n=await O.post(`/user/edit-attach/${this.formAppeal.id}`,t,a);n.status===200?(this.loading.hide(),this.closeModal(4),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.loading.hide(),this.closeModal(4),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(t){this.loading.hide(),this.closeModal(4),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}}},mounted(){this.userAccessPhase2=this.userAccess[2]}},x=t=>(fe("data-v-6ec283c5"),t=t(),ge(),t),Zt=x(()=>r("span",{class:"text-subtitle-1 font-weight-bold ml-2"},"Phase 2 (SLIK) 📄",-1)),$t={class:"text-subtitle-2 font-weight-medium"},el={key:0,class:"text-caption text-grey-darken-1"},tl={class:"d-flex"},ll={key:0,class:"pa-1"},al={class:"text-subtitle-2 font-weight-medium"},sl={key:0,class:"text-caption text-grey-darken-1"},il={class:"d-flex"},nl={key:1,class:"pa-1"},ol={class:"text-subtitle-2 font-weight-medium"},rl={class:"d-flex"},ul=x(()=>r("span",{style:{color:"red"}},"*",-1)),dl=x(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),cl=x(()=>r("span",{class:"subtitle-1 text-center"},"Note: ",-1)),pl=x(()=>r("span",{style:{color:"red"}},"*",-1)),hl=x(()=>r("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1)),ml=x(()=>r("span",{style:{color:"red"}},"*",-1)),fl=x(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),gl=x(()=>r("span",{style:{color:"red"}},"*",-1)),kl=x(()=>r("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1)),_l=x(()=>r("span",{style:{color:"red"}},"*",-1)),yl=x(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),vl=x(()=>r("span",{style:{color:"red"}},"*",-1)),Al=x(()=>r("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1)),bl=x(()=>r("span",{style:{color:"red"}},"*",-1)),Sl=x(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),Fl=x(()=>r("span",{style:{color:"red"}},"*",-1)),Pl=x(()=>r("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1)),xl=x(()=>r("span",{style:{color:"red"}},"*",-1)),Dl=x(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),Il=x(()=>r("span",{style:{color:"red"}},"*",-1)),wl=x(()=>r("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1)),Vl=x(()=>r("span",{style:{color:"red"}},"*",-1)),Cl=x(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),Tl=x(()=>r("span",{style:{color:"red"}},"*",-1)),Ul=x(()=>r("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1)),Kl=x(()=>r("span",{style:{color:"red"}},"*",-1)),Nl=x(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),Ml=x(()=>r("span",{style:{color:"red"}},"*",-1)),jl=x(()=>r("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1)),Ol=x(()=>r("span",{style:{color:"red"}},"*",-1)),Rl=x(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),ql=x(()=>r("span",{style:{color:"red"}},"*",-1)),Ll=x(()=>r("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1));function El(t,a,n,f,s,o){return d(),D(B,null,[e(A,null,{default:l(()=>[e(P,{class:"py-1 header-color"},{default:l(()=>[e(I,{align:"center","no-gutters":""},{default:l(()=>[e(c,{cols:"auto",class:"mr-auto"},{default:l(()=>[Zt]),_:1}),e(c,{cols:"auto"},{default:l(()=>[e(De,{"max-width":"400"},{activator:l(({props:i})=>[e(k,v({icon:""},i,{color:"on-primary",variant:"text"}),{default:l(()=>[e(F,{color:"white"},{default:l(()=>[p("mdi-help-circle-outline")]),_:1})]),_:2},1040)]),default:l(()=>[e(A,null,{default:l(()=>[e(P,{class:"text-h6 py-2 px-4"},{default:l(()=>[p(" Penjelasan Phase SLIK ")]),_:1}),e(P,{class:"py-2 px-4"},{default:l(()=>[p(" Tahap ini melibatkan proses pengecekan riwayat kredit nasabah melalui Sistem Layanan Informasi Keuangan (SLIK). SLIK merupakan sistem yang dikelola oleh Otoritas Jasa Keuangan (OJK) untuk menyediakan informasi pinjaman debitur. Hasil analisis SLIK digunakan untuk menilai kelayakan kredit dan risiko nasabah berdasarkan catatan keuangan sebelumnya. ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(d(!0),D(B,null,se(n.data,(i,b)=>(d(),D("div",{key:b,class:"pa-1"},[o.shouldDisplay(i)?(d(),h(I,{key:0,"no-gutters":"",align:"center",class:ue(parseInt(i.isSecret)?"bg-grey-lighten-4":"")},{default:l(()=>[e(c,{cols:"auto",class:"mr-2"},{default:l(()=>[e(F,{color:parseInt(i.isApprove)?"success":"error",size:"small"},{default:l(()=>[p(_(parseInt(i.isApprove)?"mdi-check-circle":"mdi-close-circle"),1)]),_:2},1032,["color"])]),_:2},1024),e(c,null,{default:l(()=>[r("div",$t,_(i.name),1),i.note!=="null"?(d(),D("div",el,_(i.note),1)):m("",!0)]),_:2},1024),e(c,{cols:"auto"},{default:l(()=>[r("div",tl,[o.canViewFile(i)?(d(),h(T,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-link-external",size:"small",color:"primary",variant:"text",class:"mr-2",href:o.getFileUrl(i),target:"_blank",rel:"noopener noreferrer"}),null,16,["href"])]),_:2},1024)):m("",!0),o.canUploadFile(i)?(d(),h(T,{key:1,location:"top",text:"Upload File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-upload",size:"small",color:"primary",variant:"text",class:"mr-2",onClick:R=>o.openModal(1,i)}),null,16,["onClick"])]),_:2},1024)):m("",!0),o.canEditFile(i)?(d(),h(T,{key:2,location:"top",text:"Edit File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-edit",size:"small",color:"info",variant:"text",class:"mr-2",onClick:R=>o.openModal(1,i)}),null,16,["onClick"])]),_:2},1024)):m("",!0),o.canDeleteFile(i)?(d(),h(T,{key:3,location:"top",text:"Hapus File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-trash",size:"small",color:"error",variant:"text",onClick:R=>n.deleteAttachment(i.id)}),null,16,["onClick"])]),_:2},1024)):m("",!0)])]),_:2},1024),b<n.data.length-1?(d(),h(X,{key:0})):m("",!0)]),_:2},1032,["class"])):m("",!0)]))),128)),e(X,{thickness:7}),o.showAnalisaAwalCredit()?(d(),D("div",ll,[e(I,{"no-gutters":"",align:"center",class:ue(parseInt(s.formAnalytic.isSecret)?"bg-grey-lighten-4":"")},{default:l(()=>[e(c,{cols:"auto",class:"mr-2"},{default:l(()=>[e(F,{color:parseInt(s.formAnalytic.isApprove)?"success":"error",size:"small"},{default:l(()=>[p(_(parseInt(s.formAnalytic.isApprove)?"mdi-check-circle":"mdi-close-circle"),1)]),_:1},8,["color"])]),_:1}),e(c,null,{default:l(()=>[r("div",al,_(s.formAnalytic.name),1),s.formAnalytic.note!=null?(d(),D("div",sl,_(s.formAnalytic.note),1)):m("",!0)]),_:1}),e(c,{cols:"auto"},{default:l(()=>[r("div",il,[o.canViewFile(s.formAnalytic)?(d(),h(T,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:i})=>[e(k,v(i,{icon:"bx-link-external",size:"small",color:"primary",variant:"text",class:"mr-2",href:o.getFileUrl(s.formAnalytic),target:"_blank",rel:"noopener noreferrer"}),null,16,["href"])]),_:1})):m("",!0),o.canAppealFile(s.formAnalytic)?(d(),h(T,{key:1,location:"top",text:"Upload File / Link"},{activator:l(({props:i})=>[e(k,v(i,{icon:"bx-upload",size:"small",color:"primary",variant:"text",class:"mr-2",onClick:a[0]||(a[0]=b=>o.openModal(2,s.formAnalytic))}),null,16)]),_:1})):m("",!0),o.canAppealFile(s.formAnalytic)?(d(),h(T,{key:2,location:"top",text:"Edit File"},{activator:l(({props:i})=>[e(k,v(i,{icon:"bx-edit",size:"small",color:"info",variant:"text",class:"mr-2",onClick:a[1]||(a[1]=b=>o.openModal(2,s.formAnalytic))}),null,16)]),_:1})):m("",!0)])]),_:1})]),_:1},8,["class"])])):m("",!0),e(X),o.showFileBanding()?(d(),D("div",nl,[e(I,{"no-gutters":"",align:"center",class:ue(parseInt(s.formAppeal.isSecret)?"bg-grey-lighten-4":"")},{default:l(()=>[e(c,{cols:"auto",class:"mr-2"},{default:l(()=>[e(F,{color:parseInt(s.formAppeal.isApprove)?"success":"error",size:"small"},{default:l(()=>[p(_(parseInt(s.formAppeal.isApprove)?"mdi-check-circle":"mdi-close-circle"),1)]),_:1},8,["color"])]),_:1}),e(c,null,{default:l(()=>[r("div",ol,_(s.formAppeal.name),1)]),_:1}),e(c,{cols:"auto"},{default:l(()=>[r("div",rl,[o.canViewFile(s.formAppeal)?(d(),h(T,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:i})=>[e(k,v(i,{icon:"bx-link-external",size:"small",color:"primary",variant:"text",class:"mr-2",href:o.getFileUrl(s.formAppeal),target:"_blank",rel:"noopener noreferrer"}),null,16,["href"])]),_:1})):m("",!0),o.canAppealFile(s.formAppeal)?(d(),h(T,{key:1,location:"top",text:"Upload File / Link"},{activator:l(({props:i})=>[e(k,v(i,{icon:"bx-upload",size:"small",color:"primary",variant:"text",class:"mr-2",onClick:a[2]||(a[2]=b=>o.openModal(3))}),null,16)]),_:1})):m("",!0),o.canAppealFile(s.formAppeal)?(d(),h(T,{key:2,location:"top",text:"Edit File"},{activator:l(({props:i})=>[e(k,v(i,{icon:"bx-edit",size:"small",color:"info",variant:"text",class:"mr-2",onClick:a[3]||(a[3]=b=>o.openModal(3))}),null,16)]),_:1})):m("",!0)])]),_:1})]),_:1},8,["class"])])):m("",!0)]),_:1}),e(L,{modelValue:s.isFormDetailSlik,"onUpdate:modelValue":a[13]||(a[13]=i=>s.isFormDetailSlik=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Attachment ")]),text:l(()=>[e(W,{onSubmit:J(o.insertSlik,["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(c,{md:"12",cols:"12"},{default:l(()=>[ul,dl,e(w,{class:"my-3",modelValue:s.formDetailSlik.name,"onUpdate:modelValue":a[4]||(a[4]=i=>s.formDetailSlik.name=i),autofocus:"",disabled:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[cl,e(w,{class:"my-3",modelValue:s.formDetailSlik.note,"onUpdate:modelValue":a[5]||(a[5]=i=>s.formDetailSlik.note=i),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[pl,hl,e(le,{modelValue:s.selectedOption,"onUpdate:modelValue":a[6]||(a[6]=i=>s.selectedOption=i),mandatory:!0,row:""},{default:l(()=>[e(q,{label:"File",value:"file"}),e(q,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[ml,fl,e(ee,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:a[7]||(a[7]=i=>{o.handleFileChange(i),s.formDetailSlik.link=null})},null,8,["rules"])]),_:1})):m("",!0),s.selectedOption==="link"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[gl,kl,e(w,{class:"my-3",modelValue:s.formDetailSlik.link,"onUpdate:modelValue":a[8]||(a[8]=i=>s.formDetailSlik.link=i),type:"link",hint:"Pastikan menggunakan https://",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1})):m("",!0),e(c,{md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formDetailSlik.isSecret,"onUpdate:modelValue":a[9]||(a[9]=i=>s.formDetailSlik.isSecret=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:s.formDetailSlik.isApprove,"onUpdate:modelValue":a[10]||(a[10]=i=>s.formDetailSlik.isApprove=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(k,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[11]||(a[11]=i=>o.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(Z,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[12]||(a[12]=i=>s.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:s.isFormResumeSlik,"onUpdate:modelValue":a[22]||(a[22]=i=>s.isFormResumeSlik=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Attachment ")]),text:l(()=>[e(W,{onSubmit:J(o.insertSlik,["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(c,{md:"12",cols:"12"},{default:l(()=>[_l,yl,e(w,{class:"my-3",modelValue:s.formDetailSlik.name,"onUpdate:modelValue":a[14]||(a[14]=i=>s.formDetailSlik.name=i),autofocus:"",disabled:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[vl,Al,e(le,{modelValue:s.selectedOption,"onUpdate:modelValue":a[15]||(a[15]=i=>s.selectedOption=i),mandatory:!0,row:""},{default:l(()=>[e(q,{label:"File",value:"file"}),e(q,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[bl,Sl,e(ee,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:a[16]||(a[16]=i=>{o.handleFileChange(i),s.formDetailSlik.link=null})},null,8,["rules"])]),_:1})):m("",!0),s.selectedOption==="link"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[Fl,Pl,e(w,{class:"my-3",modelValue:s.formDetailSlik.link,"onUpdate:modelValue":a[17]||(a[17]=i=>s.formDetailSlik.link=i),type:"link",hint:"Pastikan menggunakan https://",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1})):m("",!0),e(c,{md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formDetailSlik.isSecret,"onUpdate:modelValue":a[18]||(a[18]=i=>s.formDetailSlik.isSecret=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:s.formDetailSlik.isApprove,"onUpdate:modelValue":a[19]||(a[19]=i=>s.formDetailSlik.isApprove=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(k,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[20]||(a[20]=i=>o.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(Z,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[21]||(a[21]=i=>s.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:s.isAnalytic,"onUpdate:modelValue":a[30]||(a[30]=i=>s.isAnalytic=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Analisis AO ")]),text:l(()=>[e(W,{onSubmit:J(o.insertAnalytic,["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(c,{md:"12",cols:"12"},{default:l(()=>[xl,Dl,e(w,{class:"my-3",modelValue:s.formAnalytic.name,"onUpdate:modelValue":a[23]||(a[23]=i=>s.formAnalytic.name=i),autofocus:"",disabled:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[Il,wl,e(le,{modelValue:s.selectedOption,"onUpdate:modelValue":a[24]||(a[24]=i=>s.selectedOption=i),mandatory:!0,row:""},{default:l(()=>[e(q,{label:"File",value:"file"}),e(q,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[Vl,Cl,e(ee,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:a[25]||(a[25]=i=>{o.handleAnalyticChange(i),s.formAnalytic.link=null})},null,8,["rules"])]),_:1})):m("",!0),s.selectedOption==="link"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[Tl,Ul,e(w,{class:"my-3",modelValue:s.formAnalytic.link,"onUpdate:modelValue":a[26]||(a[26]=i=>s.formAnalytic.link=i),type:"link",hint:"Pastikan menggunakan https://",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1})):m("",!0),e(c,{md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:s.formAnalytic.isApprove,"onUpdate:modelValue":a[27]||(a[27]=i=>s.formAnalytic.isApprove=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(k,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[28]||(a[28]=i=>o.closeModal(3))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(Z,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[29]||(a[29]=i=>s.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:s.isAppeal,"onUpdate:modelValue":a[39]||(a[39]=i=>s.isAppeal=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Banding AO ")]),text:l(()=>[e(W,{onSubmit:J(o.insertAppeal,["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(c,{md:"12",cols:"12"},{default:l(()=>[Kl,Nl,e(w,{class:"my-3",modelValue:s.formAppeal.name,"onUpdate:modelValue":a[31]||(a[31]=i=>s.formAppeal.name=i),autofocus:"",disabled:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[Ml,jl,e(le,{modelValue:s.selectedOption,"onUpdate:modelValue":a[32]||(a[32]=i=>s.selectedOption=i),mandatory:!0,row:""},{default:l(()=>[e(q,{label:"File",value:"file"}),e(q,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[Ol,Rl,e(ee,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:a[33]||(a[33]=i=>{o.handleAppealChange(i),s.formAppeal.link=null})},null,8,["rules"])]),_:1})):m("",!0),s.selectedOption==="link"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[ql,Ll,e(w,{class:"my-3",modelValue:s.formAppeal.link,"onUpdate:modelValue":a[34]||(a[34]=i=>s.formAppeal.link=i),type:"link",hint:"Pastikan menggunakan https://",rules:[s.rules.required],onChange:a[35]||(a[35]=i=>s.formAppeal.path=null)},null,8,["modelValue","rules"])]),_:1})):m("",!0),s.userAccessPhase2&&parseInt(s.userAccessPhase2.canApproveAppeal)==1?(d(),h(c,{key:2,md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:s.formAppeal.isApprove,"onUpdate:modelValue":a[36]||(a[36]=i=>s.formAppeal.isApprove=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):m("",!0),e(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(k,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[37]||(a[37]=i=>o.closeModal(4))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(Z,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[38]||(a[38]=i=>s.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const zl=me(Qt,[["render",El],["__scopeId","data-v-6ec283c5"]]);const Bl={name:"AttachmentCard3",props:{data:{type:Object,required:!0},submission:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},phase:{type:Number,required:!0}},watch:{selectedOption(t){t==="file"?this.formAnalisaKredit.link=null:t==="link"&&(this.formAnalisaKredit.path=null)}},computed:{sortedSubmission(){return this.submission.slice().sort((t,a)=>t.type===2&&a.type!==2?-1:t.type!==2&&a.type===2?1:0)}},inject:["loading"],data(){return{userAccessPhase3:null,selectedOption:"",uploadProgress:null,rules:{required:t=>!!t||"Required"},isAnalisaKredit:!1,formAnalisaKredit:{id:null,name:"Analisa Kredit",file_id:this.fileId,path:"null",link:null,isApprove:0,isSecret:0},isSubmission:!1,isUpdateSubmission:!1,formSubmission:{id:null,file_id:null,phase:null,name:null,path:null,link:null,note:null,type:null}}},methods:{canViewFile(t){return parseInt(t.isSecret)?(t.path!=="null"||t.link!==null)&&this.userAccessPhase3&&parseInt(this.userAccessPhase3.isSecret)===1:t.path!=="null"||t.link!==null},canUploadFile(t){return t.path==="null"&&t.link===null&&this.userAccessPhase3&&parseInt(this.userAccessPhase3.canInsertData)==1&&this.phase!=6},canEditFile(t){return this.phase<5&&this.userAccessPhase3&&parseInt(this.userAccessPhase3.canUpdateData)==1&&this.phase!=6},canDeleteFile(t){return this.phase<5&&this.userAccessPhase3&&parseInt(this.userAccessPhase3.canDeleteData)==1&&this.phase!=6},getFileUrl(t){return t.path!=="null"?`${this.filePath}/${this.fileId}/${t.path}`:t.link!==null?t.link:"#"},openModal(t,a=null){t==1?(this.formAnalisaKredit.id=a.id,this.formAnalisaKredit.name=a.name,this.formAnalisaKredit.link=a.link,this.formAnalisaKredit.path=a.path,this.formAnalisaKredit.isSecret=parseInt(a.isSecret),this.formAnalisaKredit.isApprove=parseInt(a.isApprove),this.isAnalisaKredit=!0):t==2?(this.formSubmission.file_id=this.fileId,this.formSubmission.phase=3,this.isSubmission=!0):t==3&&(this.formSubmission.id=a.id,this.formSubmission.file_id=this.fileId,this.formSubmission.phase=3,this.formSubmission.name=a.name,this.formSubmission.type=a.type,this.isUpdateSubmission=!0)},closeModal(t){t==1?(this.formAnalisaKredit.id=null,this.formAnalisaKredit.isSecret=0,this.formAnalisaKredit.isApprove=0,this.selectedOption="",this.isAnalisaKredit=!1):t==2?(this.formSubmission.id=null,this.formSubmission.file_id=null,this.formSubmission.phase=null,this.formSubmission.name=null,this.formSubmission.path=null,this.formSubmission.link=null,this.formSubmission.note=null,this.formSubmission.type=null,this.selectedOption="",this.isSubmission=!1):t==3&&(this.formSubmission.id=null,this.formSubmission.file_id=null,this.formSubmission.phase=null,this.formSubmission.name=null,this.formSubmission.path=null,this.formSubmission.link=null,this.formSubmission.note=null,this.formSubmission.type=null,this.selectedOption="",this.isUpdateSubmission=!1)},handleFileChange(t,a,n){const f=t.target.files[0];f&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(f.type)?a[n]=f:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),t.target.value=null)},async insertAnalisa(){try{this.loading.show();const t=new FormData;t.append("name",this.formAnalisaKredit.name),t.append("isSecret",this.formAnalisaKredit.isSecret),t.append("isApprove",this.formAnalisaKredit.isApprove),t.append("file_id",this.formAnalisaKredit.file_id),this.formAnalisaKredit.path!="null"&&this.formAnalisaKredit.path!=null?t.append("path",this.formAnalisaKredit.path):this.formAnalisaKredit.link!=null&&t.append("link",this.formAnalisaKredit.link),t.append("_method","PUT");const a={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},n=await O.post(`/user/edit-attach/${this.formAnalisaKredit.id}`,t,a);n.status===200?(this.loading.hide(),this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.loading.hide(),this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(t){this.loading.hide(),this.uploadProgress=null,this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}},async insertSubmission(){try{if(this.loading.show(),this.formSubmission.link==null&&this.formSubmission.path==null){this.isSubmission=!1,this.$showToast("error","Error","File / Link harus diisi"),this.loading.hide();return}const t=new FormData;t.append("file_id",this.formSubmission.file_id),t.append("name",this.formSubmission.name),t.append("type",this.formSubmission.type),t.append("phase",this.formSubmission.phase),this.formSubmission.path!=null&&this.formSubmission.path!=null?t.append("path",this.formSubmission.path):this.formSubmission.link!=null&&t.append("link",this.formSubmission.link),t.append("_method","POST");const a={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},n=await O.post("/user/file-submission",t,a);n.status===200?(this.loading.hide(),this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.loading.hide(),this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(t){this.loading.hide(),this.uploadProgress=null,this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}},async deleteSubmission(t){try{if(!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;this.loading.show();const n=await O.delete(`/user/file-submission/${t}`);n.status===200?(this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",n.data.message)):(this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("error","Sorry","Terjadi Kesalahan Silahkan Coba Lagi"))}catch(a){this.loading.hide(),this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},async updateSubmission(){try{this.loading.show();const t=new FormData;t.append("file_id",this.formSubmission.file_id),t.append("name",this.formSubmission.name),t.append("type",this.formSubmission.type),t.append("phase",this.formSubmission.phase),this.formSubmission.path!=null&&this.formSubmission.path!=null?t.append("path",this.formSubmission.path):this.formSubmission.link!=null&&t.append("link",this.formSubmission.link),t.append("_method","PUT");const a={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},n=await O.post(`/user/file-submission/${this.formSubmission.id}`,t,a);n.status===200?(this.loading.hide(),this.closeModal(3),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.loading.hide(),this.closeModal(3),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(t){this.loading.hide(),this.uploadProgress=null,this.closeModal(3),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}}},mounted(){this.userAccessPhase3=this.userAccess[3]}},K=t=>(fe("data-v-c8fcb3fa"),t=t(),ge(),t),Hl=K(()=>r("span",{class:"text-subtitle-1 font-weight-bold ml-2"},"Phase 3 (Analisa Kredit) 📄",-1)),Gl={class:"text-subtitle-2 font-weight-medium"},Jl={key:0,class:"text-caption text-grey-darken-1"},Wl={class:"d-flex"},Yl=K(()=>r("span",{class:"text-subtitle-1 font-weight-bold ml-2"},"Dokumen Penunjang Kredit / Jaminan 📄",-1)),Xl={key:0},Ql={class:"text-subtitle-2 font-weight-medium"},Zl={key:0,class:"text-caption text-grey-darken-1"},$l={key:1,class:"text-caption text-grey-darken-1"},ea={class:"d-flex"},ta=K(()=>r("span",{style:{color:"red"}},"*",-1)),la=K(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),aa=K(()=>r("span",{style:{color:"red"}},"*",-1)),sa=K(()=>r("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1)),ia=K(()=>r("span",{style:{color:"red"}},"*",-1)),na=K(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),oa=K(()=>r("span",{style:{color:"red"}},"*",-1)),ra=K(()=>r("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1)),ua=K(()=>r("span",{style:{color:"red"}},"*",-1)),da=K(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),ca=K(()=>r("span",{style:{color:"red"}},"*",-1)),pa=K(()=>r("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1)),ha=K(()=>r("span",{style:{color:"red"}},"*",-1)),ma=K(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),fa=K(()=>r("span",{style:{color:"red"}},"*",-1)),ga=K(()=>r("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1)),ka=K(()=>r("span",{style:{color:"red"}},"*",-1)),_a=K(()=>r("span",{class:"subtitle-1 text-center"},"Pilih Jenis Dokumen : ",-1)),ya=K(()=>r("span",{style:{color:"red"}},"*",-1)),va=K(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),Aa=K(()=>r("span",{style:{color:"red"}},"*",-1)),ba=K(()=>r("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1)),Sa=K(()=>r("span",{style:{color:"red"}},"*",-1)),Fa=K(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),Pa=K(()=>r("span",{style:{color:"red"}},"*",-1)),xa=K(()=>r("span",{class:"subtitle-1 text-center"}," Upload Link: ",-1)),Da=K(()=>r("span",{style:{color:"red"}},"*",-1)),Ia=K(()=>r("span",{class:"subtitle-1 text-center"},"Pilih Jenis Dokumen : ",-1));function wa(t,a,n,f,s,o){return d(),D(B,null,[e(A,null,{default:l(()=>[e(P,{class:"py-1 header-color"},{default:l(()=>[e(I,{align:"center","no-gutters":""},{default:l(()=>[e(c,{cols:"auto",class:"mr-auto"},{default:l(()=>[Hl]),_:1}),e(c,{cols:"auto"},{default:l(()=>[e(De,{"max-width":"400"},{activator:l(({props:i})=>[e(k,v({icon:""},i,{color:"on-primary",variant:"text"}),{default:l(()=>[e(F,{color:"white"},{default:l(()=>[p("mdi-help-circle-outline")]),_:1})]),_:2},1040)]),default:l(()=>[e(A,null,{default:l(()=>[e(P,{class:"text-h6 py-2 px-4"},{default:l(()=>[p(" Penjelasan Phase Analisa Kredit ")]),_:1}),e(P,{class:"py-2 px-4"},{default:l(()=>[p(" Tahap ini merupakan proses evaluasi mendalam terhadap kelayakan nasabah untuk menerima kredit. Analisa kredit mencakup penilaian aspek 5C: Character (karakter), Capacity (kapasitas), Capital (modal), Collateral (jaminan), dan Condition (kondisi). Tim analis kredit akan mengevaluasi data finansial, riwayat kredit, dan informasi lainnya untuk menentukan tingkat risiko dan kemampuan nasabah dalam memenuhi kewajiban kreditnya. ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(d(!0),D(B,null,se(n.data,(i,b)=>(d(),D("div",{key:b,class:"pa-1"},[e(I,{"no-gutters":"",align:"center",class:ue(parseInt(i.isSecret)?"bg-grey-lighten-4":"")},{default:l(()=>[e(c,{cols:"auto",class:"mr-2"},{default:l(()=>[e(F,{color:parseInt(i.isApprove)?"success":"error",size:"small"},{default:l(()=>[p(_(parseInt(i.isApprove)?"mdi-check-circle":"mdi-close-circle"),1)]),_:2},1032,["color"]),e(F,{icon:"mdi-file",size:"small",class:"ml-1"})]),_:2},1024),e(c,null,{default:l(()=>[r("div",Gl,_(i.name),1),i.note!=="null"?(d(),D("div",Jl,_(i.note),1)):m("",!0)]),_:2},1024),e(c,{cols:"auto"},{default:l(()=>[r("div",Wl,[o.canViewFile(i)?(d(),h(T,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-link-external",size:"small",color:"primary",variant:"text",class:"mr-2",href:o.getFileUrl(i),target:"_blank",rel:"noopener noreferrer"}),null,16,["href"])]),_:2},1024)):m("",!0),o.canUploadFile(i)?(d(),h(T,{key:1,location:"top",text:"Upload File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-upload",size:"small",color:"primary",variant:"text",class:"mr-2",onClick:R=>o.openModal(1,i)}),null,16,["onClick"])]),_:2},1024)):m("",!0),o.canEditFile(i)?(d(),h(T,{key:2,location:"top",text:"Edit File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-edit",size:"small",color:"info",variant:"text",class:"mr-2",onClick:R=>o.openModal(1,i)}),null,16,["onClick"])]),_:2},1024)):m("",!0),o.canDeleteFile(i)?(d(),h(T,{key:3,location:"top",text:"Hapus File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-trash",size:"small",color:"error",variant:"text",onClick:R=>n.deleteAttachment(i.id)}),null,16,["onClick"])]),_:2},1024)):m("",!0)])]),_:2},1024)]),_:2},1032,["class"]),b<n.data.length-1?(d(),h(X,{key:0,class:"mt-3"})):m("",!0)]))),128))]),_:1}),e(A,{class:"mt-2"},{default:l(()=>[e(P,{class:"py-1 header-color"},{default:l(()=>[e(I,{align:"center","no-gutters":""},{default:l(()=>[e(c,{cols:"auto",class:"mr-auto"},{default:l(()=>[Yl]),_:1}),e(c,{cols:"auto"},{default:l(()=>[r("span",null,[e(k,{color:"primary",size:"x-small",class:"my-3 mx-3",onClick:a[0]||(a[0]=i=>o.openModal(2))},{default:l(()=>[p(" Tambah Data Lain ")]),_:1})])]),_:1})]),_:1})]),_:1}),n.submission.length==0?(d(),D("div",Xl,[e(Me,null,{default:l(()=>[e(S,null,{default:l(()=>[p("Belum ada file")]),_:1})]),_:1})])):m("",!0),o.sortedSubmission.length>0?(d(!0),D(B,{key:1},se(o.sortedSubmission,(i,b)=>(d(),D("div",{key:b},[e(I,{"no-gutters":"",align:"center",class:"pa-2"},{default:l(()=>[e(c,{cols:"auto",class:"mr-2"},{default:l(()=>[e(F,{color:"success",size:"small",icon:"mdi-check-circle"})]),_:1}),e(c,null,{default:l(()=>[r("div",Ql,_(i.name),1),i.type==1?(d(),D("div",Zl,"Dokumen Penunjang Analisa ")):m("",!0),i.type==2?(d(),D("div",$l,"Dokumen Jaminan ")):m("",!0)]),_:2},1024),e(c,{cols:"auto"},{default:l(()=>[r("div",ea,[i.path!=null?(d(),h(T,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-link-external",size:"small",color:"primary",variant:"text",class:"mr-2",href:`${n.filePath}/${n.fileId}/${i.path}`,target:"_blank",rel:"noopener noreferrer"}),null,16,["href"])]),_:2},1024)):(d(),h(T,{key:1,location:"top",text:"Lihat File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-link-external",size:"small",color:"primary",variant:"text",class:"mr-2",href:`${i.link}`,target:"_blank",rel:"noopener noreferrer"}),null,16,["href"])]),_:2},1024)),n.phase<5?(d(),h(T,{key:2,location:"top",text:"Edit File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-edit",size:"small",color:"info",variant:"text",class:"mr-2",onClick:R=>o.openModal(3,i)}),null,16,["onClick"])]),_:2},1024)):m("",!0),n.phase<5?(d(),h(T,{key:3,location:"top",text:"Hapus File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-trash",size:"small",color:"error",variant:"text",onClick:R=>o.deleteSubmission(i.id)}),null,16,["onClick"])]),_:2},1024)):m("",!0)])]),_:2},1024)]),_:2},1024)]))),128)):m("",!0)]),_:1}),e(L,{modelValue:s.isAnalisaKredit,"onUpdate:modelValue":a[9]||(a[9]=i=>s.isAnalisaKredit=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Attachment ")]),text:l(()=>[e(W,{onSubmit:J(o.insertAnalisa,["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(c,{md:"12",cols:"12"},{default:l(()=>[ta,la,e(w,{class:"my-3",modelValue:s.formAnalisaKredit.name,"onUpdate:modelValue":a[1]||(a[1]=i=>s.formAnalisaKredit.name=i),autofocus:"",disabled:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[aa,sa,e(le,{modelValue:s.selectedOption,"onUpdate:modelValue":a[2]||(a[2]=i=>s.selectedOption=i),mandatory:!0,row:""},{default:l(()=>[e(q,{label:"File",value:"file"}),e(q,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[ia,na,e(ee,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:a[3]||(a[3]=i=>{o.handleFileChange(i,this.formAnalisaKredit,"path"),s.formAnalisaKredit.link=null})},null,8,["rules"])]),_:1})):m("",!0),s.selectedOption==="link"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[oa,ra,e(w,{class:"my-3",modelValue:s.formAnalisaKredit.link,"onUpdate:modelValue":a[4]||(a[4]=i=>s.formAnalisaKredit.link=i),type:"link",hint:"Pastikan menggunakan https://",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1})):m("",!0),e(c,{md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formAnalisaKredit.isSecret,"onUpdate:modelValue":a[5]||(a[5]=i=>s.formAnalisaKredit.isSecret=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:s.formAnalisaKredit.isApprove,"onUpdate:modelValue":a[6]||(a[6]=i=>s.formAnalisaKredit.isApprove=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(k,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[7]||(a[7]=i=>o.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(Z,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[8]||(a[8]=i=>s.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:s.isSubmission,"onUpdate:modelValue":a[17]||(a[17]=i=>s.isSubmission=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Tambah Data ")]),text:l(()=>[e(W,{onSubmit:J(o.insertSubmission,["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(c,{md:"12",cols:"12"},{default:l(()=>[ua,da,e(w,{class:"my-3",modelValue:s.formSubmission.name,"onUpdate:modelValue":a[10]||(a[10]=i=>s.formSubmission.name=i),autofocus:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[ca,pa,e(le,{modelValue:s.selectedOption,"onUpdate:modelValue":a[11]||(a[11]=i=>s.selectedOption=i),mandatory:!0,row:""},{default:l(()=>[e(q,{label:"File",value:"file"}),e(q,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[ha,ma,e(ee,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:a[12]||(a[12]=i=>{o.handleFileChange(i,this.formSubmission,"path"),s.formSubmission.link=null})},null,8,["rules"])]),_:1})):m("",!0),s.selectedOption==="link"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[fa,ga,e(w,{class:"my-3",modelValue:s.formSubmission.link,"onUpdate:modelValue":a[13]||(a[13]=i=>s.formSubmission.link=i),type:"link",hint:"Pastikan menggunakan https://",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1})):m("",!0),e(c,{md:"12",cols:"12"},{default:l(()=>[ka,_a,e(le,{modelValue:s.formSubmission.type,"onUpdate:modelValue":a[14]||(a[14]=i=>s.formSubmission.type=i),mandatory:!0,row:""},{default:l(()=>[e(q,{label:"Dokumen Penunjang Analisa",value:"1"}),e(q,{label:"Dokumen Jaminan",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(k,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[15]||(a[15]=i=>o.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(Z,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[16]||(a[16]=i=>s.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:s.isUpdateSubmission,"onUpdate:modelValue":a[25]||(a[25]=i=>s.isUpdateSubmission=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Update Data ")]),text:l(()=>[e(W,{onSubmit:J(o.updateSubmission,["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(c,{md:"12",cols:"12"},{default:l(()=>[ya,va,e(w,{class:"my-3",modelValue:s.formSubmission.name,"onUpdate:modelValue":a[18]||(a[18]=i=>s.formSubmission.name=i),autofocus:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[Aa,ba,e(le,{modelValue:s.selectedOption,"onUpdate:modelValue":a[19]||(a[19]=i=>s.selectedOption=i),mandatory:!0,row:""},{default:l(()=>[e(q,{label:"File",value:"file"}),e(q,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[Sa,Fa,e(ee,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:a[20]||(a[20]=i=>{o.handleFileChange(i,this.formSubmission,"path"),s.formSubmission.link=null})},null,8,["rules"])]),_:1})):m("",!0),s.selectedOption==="link"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[Pa,xa,e(w,{class:"my-3",modelValue:s.formSubmission.link,"onUpdate:modelValue":a[21]||(a[21]=i=>s.formSubmission.link=i),type:"link",hint:"Pastikan menggunakan https://",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1})):m("",!0),e(c,{md:"12",cols:"12"},{default:l(()=>[Da,Ia,e(le,{modelValue:s.formSubmission.type,"onUpdate:modelValue":a[22]||(a[22]=i=>s.formSubmission.type=i),mandatory:!0,row:""},{default:l(()=>[e(q,{label:"Dokumen Penunjang Kredit",value:1}),e(q,{label:"Dokumen Jaminan",value:2})]),_:1},8,["modelValue"])]),_:1}),e(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(k,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[23]||(a[23]=i=>o.closeModal(3))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(Z,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[24]||(a[24]=i=>s.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const Je=me(Bl,[["render",wa],["__scopeId","data-v-c8fcb3fa"]]);const Va={name:"AttachmentCard4",props:{data:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},phase:{type:Number,required:!0}},watch:{selectedOption(t){t==="file"?this.formAnalisaKredit.link=null:t==="link"&&(this.formAnalisaKredit.path=null)}},data(){return{showDesktopDialog:!1,userAccessPhase4:null,selectedOption:"",uploadProgress:null,rules:{required:t=>!!t||"Required"},isKomite:!1,formKomite:{id:null,name:"Analisa Kredit",file_id:this.fileId,path:"null",link:null,isApprove:0,isSecret:0}}},methods:{canViewFile(t){return parseInt(t.isSecret)?(t.path!=="null"||t.link!==null)&&this.userAccessPhase4&&parseInt(this.userAccessPhase4.isSecret)===1:t.path!=="null"||t.link!==null},canUploadFile(t){return this.phase<5&&t.path==="null"&&t.link===null&&this.userAccessPhase4&&parseInt(this.userAccessPhase4.canInsertData)==1},canEditFile(t){return this.phase<5&&(t.path!="null"||t.link!=null)&&this.userAccessPhase4&&parseInt(this.userAccessPhase4.canUpdateData)==1&&this.phase!=6},canDeleteFile(t){return this.phase<5&&this.userAccessPhase4&&parseInt(this.userAccessPhase4.canDeleteData)==1&&this.phase!=6},getFileUrl(t){return t.path!=="null"?`${this.filePath}/${this.fileId}/${t.path}`:t.link!==null?t.link:"#"},toSignature(t){if(t.path=="null"&&t.link==null){this.$showToast("info","Perhatian","File harus di upload terlebih dahulu");return}if((()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1||window.innerWidth<=800)()){this.$showToast("info","Perhatian","Disarankan menggunakan komputer untuk tampilan dan pengalaman terbaik");return}this.$router.push(`/u-pdfeditor/${t.id}`)},openModal(t,a=null){t==1&&(this.formKomite.id=a.id,this.formKomite.name=a.name,this.formKomite.isSecret=parseInt(a.isSecret),this.formKomite.isApprove=parseInt(a.isApprove),this.isKomite=!0)},closeModal(t){t==1&&(this.formKomite.id=null,this.formKomite.isSecret=0,this.formKomite.isApprove=0,this.isKomite=!1)},handleFileChange(t){const a=t.target.files[0];a&&["application/pdf"].includes(a.type)?this.formKomite.path=a:(this.isKomite=!1,this.$showToast("error","Error","Hanya file PDF yang diizinkan."),t.target.value=null)},async insertKomite(){try{this.loading.show();const t=new FormData;t.append("name",this.formKomite.name),t.append("isSecret",this.formKomite.isSecret),t.append("isApprove",this.formKomite.isApprove),t.append("file_id",this.formKomite.file_id),this.formKomite.path!="null"&&this.formKomite.path!=null?t.append("path",this.formKomite.path):this.formKomite.link!=null&&t.append("link",this.formKomite.link),t.append("_method","PUT");const a={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},n=await O.post(`/user/edit-attach/${this.formKomite.id}`,t,a);n.status===200?(this.loading.hide(),this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.loading.hide(),this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(t){this.loading.hide(),this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}}},inject:["loading"],mounted(){this.userAccessPhase4=this.userAccess[4]}},ve=t=>(fe("data-v-a0b428be"),t=t(),ge(),t),Ca=ve(()=>r("span",{class:"text-subtitle-1 font-weight-bold ml-2"},"Phase 4 (KOMITE) 📄",-1)),Ta=ve(()=>r("span",null,[p("Tutorial tanda tangan file ( "),r("a",{href:"https://file.yogabayuap.com/index.php/s/6YSRSgcEwaeRAip",target:"_blank"},"disini"),p(" )")],-1)),Ua={class:"text-subtitle-2 font-weight-medium"},Ka={key:0,class:"text-caption text-grey-darken-1"},Na={class:"d-flex"},Ma=ve(()=>r("span",{style:{color:"red"}},"*",-1)),ja=ve(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),Oa=ve(()=>r("span",{style:{color:"red"}},"*",-1)),Ra=ve(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1));function qa(t,a,n,f,s,o){return d(),D(B,null,[e(A,null,{default:l(()=>[e(P,{class:"py-1 header-color"},{default:l(()=>[e(I,{align:"center","no-gutters":""},{default:l(()=>[e(c,{cols:"auto",class:"mr-auto"},{default:l(()=>[Ca]),_:1}),e(c,{cols:"auto"},{default:l(()=>[e(De,{"max-width":"400"},{activator:l(({props:i})=>[e(k,v({icon:""},i,{color:"on-primary",variant:"text"}),{default:l(()=>[e(F,{color:"white"},{default:l(()=>[p("mdi-help-circle-outline")]),_:1})]),_:2},1040)]),default:l(()=>[e(A,null,{default:l(()=>[e(P,{class:"text-h6 py-2 px-4"},{default:l(()=>[p(" Penjelasan Phase Komite ")]),_:1}),e(P,{class:"py-2 px-4"},{default:l(()=>[p(" Tahap ini merupakan proses pengambilan keputusan akhir terkait pengajuan kredit. Komite Kredit akan memberikan keputusan apakah pengajuan kredit disetujui, ditolak, atau memerlukan informasi tambahan. Keputusan diambil berdasarkan pertimbangan risiko, kebijakan kredit bank, dan potensi keuntungan. Komite juga dapat memberikan rekomendasi terkait syarat dan ketentuan kredit jika disetujui. ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),Ta]),_:1}),(d(!0),D(B,null,se(n.data,(i,b)=>(d(),D("div",{key:b,class:"pa-1"},[e(I,{"no-gutters":"",align:"center",class:ue(parseInt(i.isSecret)?"bg-grey-lighten-4":"")},{default:l(()=>[e(c,{cols:"auto",class:"mr-2"},{default:l(()=>[e(F,{color:parseInt(i.isApprove)?"success":"error",size:"small"},{default:l(()=>[p(_(parseInt(i.isApprove)?"mdi-check-circle":"mdi-close-circle"),1)]),_:2},1032,["color"])]),_:2},1024),e(c,null,{default:l(()=>[r("div",Ua,_(i.name),1),i.note!=="null"?(d(),D("div",Ka,_(i.note),1)):m("",!0)]),_:2},1024),e(c,{cols:"auto"},{default:l(()=>[r("div",Na,[o.canViewFile(i)?(d(),h(T,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-link-external",size:"small",color:"primary",variant:"text",class:"mr-2",href:o.getFileUrl(i),target:"_blank",rel:"noopener noreferrer"}),null,16,["href"])]),_:2},1024)):m("",!0),o.canUploadFile(i)?(d(),h(T,{key:1,location:"top",text:"Upload File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-upload",size:"small",color:"primary",variant:"text",class:"mr-2",onClick:R=>o.openModal(1,i)}),null,16,["onClick"])]),_:2},1024)):m("",!0),o.canEditFile(i)?(d(),h(T,{key:2,location:"top",text:"Edit File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-edit",size:"small",color:"info",variant:"text",class:"mr-2",onClick:R=>o.openModal(1,i)}),null,16,["onClick"])]),_:2},1024)):m("",!0),s.userAccessPhase4&&parseInt(s.userAccessPhase4.canApprove)&&n.phase<5?(d(),h(T,{key:3,location:"top",text:"Tanda Tangan File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-pen",size:"small",color:"info",variant:"text",class:"mr-2",onClick:R=>o.toSignature(i)}),null,16,["onClick"])]),_:2},1024)):m("",!0),o.canDeleteFile(i)?(d(),h(T,{key:4,location:"top",text:"Hapus File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-trash",size:"small",color:"error",variant:"text",onClick:R=>n.deleteAttachment(i.id)}),null,16,["onClick"])]),_:2},1024)):m("",!0)])]),_:2},1024)]),_:2},1032,["class"]),b<n.data.length-1?(d(),h(X,{key:0,class:"mt-3"})):m("",!0)]))),128))]),_:1}),e(L,{modelValue:s.isKomite,"onUpdate:modelValue":a[6]||(a[6]=i=>s.isKomite=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Attachment ")]),text:l(()=>[e(W,{onSubmit:J(o.insertKomite,["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(c,{md:"12",cols:"12"},{default:l(()=>[Ma,ja,e(w,{class:"my-3",modelValue:s.formKomite.name,"onUpdate:modelValue":a[0]||(a[0]=i=>s.formKomite.name=i),autofocus:"",disabled:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[Oa,Ra,e(ee,{class:"my-3",accept:"application/pdf",placeholder:"Pick an image",rules:[s.rules.required],onChange:a[1]||(a[1]=i=>o.handleFileChange(i))},null,8,["rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formKomite.isSecret,"onUpdate:modelValue":a[2]||(a[2]=i=>s.formKomite.isSecret=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(X,{thickness:5,class:"border-opacity-75",color:"info"}),e(c,{md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Anda menyetujui file ini ? (ubah jika semua sudah menandatangani)",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:s.formKomite.isApprove,"onUpdate:modelValue":a[3]||(a[3]=i=>s.formKomite.isApprove=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(k,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[4]||(a[4]=i=>o.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(Z,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[5]||(a[5]=i=>s.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:s.showDesktopDialog,"onUpdate:modelValue":a[7]||(a[7]=i=>s.showDesktopDialog=i),"max-width":"400"},{default:l(()=>[e(A,null,{default:l(()=>[e(re,{class:"headline"},{default:l(()=>[p("Perhatian")]),_:1}),e(P,null,{default:l(()=>[p(" Maaf, fitur ini hanya dapat digunakan pada komputer desktop untuk pengalaman terbaik. ")]),_:1}),e(Ye,null,{default:l(()=>[e(Pe),e(k,{color:"primary",text:"",onClick:t.closeDesktopDialog},{default:l(()=>[p("OK")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const We=me(Va,[["render",qa],["__scopeId","data-v-a0b428be"]]);const La={name:"AttachmentOperation",props:{data:{type:Object,required:!0},filePath:{type:String,required:!0},fileId:{type:Number,required:!0},userAccess:{type:Object,required:!0},deleteAttachment:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},phase:{type:Number,required:!0}},inject:["loading"],data(){return{userAccessPhase5:null,uploadProgress:null,rules:{required:t=>!!t||"Required"},isSp3k:!1,formsp3k:{id:null,name:"SP3K",file_id:this.fileId,path:null,isApprove:0,isSecret:0}}},methods:{canViewFile(t){return parseInt(t.isSecret)?(t.path!=="null"||t.link!==null)&&this.userAccessPhase5&&parseInt(this.userAccessPhase5.isSecret)===1:t.path!=="null"||t.link!==null},canUploadFile(t){return this.phase<6&&t.path==="null"&&t.link===null&&this.userAccessPhase5&&parseInt(this.userAccessPhase5.canInsertData)==1},canEditFile(t){return this.phase<6&&this.userAccessPhase5&&parseInt(this.userAccessPhase5.canUpdateData)==1&&this.phase!=6},canDeleteFile(t){return this.phase<6&&this.userAccessPhase5&&parseInt(this.userAccessPhase5.canDeleteData)==1&&this.phase!=6},getFileUrl(t){return t.path!=="null"?`${this.filePath}/${this.fileId}/${t.path}`:t.link!==null?t.link:"#"},openModal(t,a=null){t==1&&(this.formsp3k.id=a.id,this.formsp3k.name=a.name,this.formsp3k.isSecret=parseInt(a.isSecret),this.formsp3k.isApprove=parseInt(a.isApprove),this.isSp3k=!0)},closeModal(t){t==1&&(this.formsp3k.id=null,this.formsp3k.isSecret=0,this.formsp3k.path=null,this.formsp3k.isApprove=0,this.isSp3k=!1)},handleFileChange(t){const a=t.target.files[0];a&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(a.type)?this.formsp3k.path=a:(this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, dan DOCX yang diizinkan."),t.target.value=null)},async insertSpk3k(){try{this.loading.show();const t=new FormData;t.append("name",this.formsp3k.name),t.append("path",this.formsp3k.path),t.append("isSecret",this.formsp3k.isSecret),t.append("isApprove",this.formsp3k.isApprove),t.append("file_id",this.formsp3k.file_id),t.append("_method","PUT");const a={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},n=await O.post(`/user/edit-attach/${this.formsp3k.id}`,t,a);n.status===200?(this.loading.hide(),this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.loading.hide(),this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(t){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}}},mounted(){this.userAccessPhase5=this.userAccess[5]}},Ie=t=>(fe("data-v-3778ecd2"),t=t(),ge(),t),Ea=Ie(()=>r("span",{class:"text-subtitle-1 font-weight-bold ml-2"},"Phase Operation 📄",-1)),za={class:"text-subtitle-2 font-weight-medium"},Ba={key:0,class:"text-caption text-grey-darken-1"},Ha={class:"d-flex"},Ga=Ie(()=>r("span",{style:{color:"red"}},"*",-1)),Ja=Ie(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),Wa=Ie(()=>r("span",{style:{color:"red"}},"*",-1)),Ya=Ie(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1));function Xa(t,a,n,f,s,o){return d(),D(B,null,[e(A,null,{default:l(()=>[e(P,{class:"py-1 header-color"},{default:l(()=>[e(I,{align:"center","no-gutters":""},{default:l(()=>[e(c,{cols:"auto",class:"mr-auto"},{default:l(()=>[Ea]),_:1}),e(c,{cols:"auto"},{default:l(()=>[e(De,{"max-width":"400"},{activator:l(({props:i})=>[e(k,v({icon:""},i,{color:"on-primary",variant:"text"}),{default:l(()=>[e(F,{color:"white"},{default:l(()=>[p("mdi-help-circle-outline")]),_:1})]),_:2},1040)]),default:l(()=>[e(A,null,{default:l(()=>[e(P,{class:"text-h6 py-2 px-4"},{default:l(()=>[p(" Penjelasan Phase Operation ")]),_:1}),e(P,{class:"py-2 px-4"},{default:l(()=>[p(" Tahap Operation merupakan fase implementasi dan pengelolaan kredit setelah disetujui. Tujuan utama tahap ini adalah memastikan kredit berjalan sesuai dengan ketentuan yang disepakati dan meminimalkan risiko operasional. ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(d(!0),D(B,null,se(n.data,(i,b)=>(d(),D("div",{key:b,class:"pa-1"},[e(I,{"no-gutters":"",align:"center",class:ue(parseInt(i.isSecret)?"bg-grey-lighten-4":"")},{default:l(()=>[e(c,{cols:"auto",class:"mr-2"},{default:l(()=>[e(F,{color:parseInt(i.isApprove)?"success":"error",size:"small"},{default:l(()=>[p(_(parseInt(i.isApprove)?"mdi-check-circle":"mdi-close-circle"),1)]),_:2},1032,["color"])]),_:2},1024),e(c,null,{default:l(()=>[r("div",za,_(i.name),1),i.note!=="null"?(d(),D("div",Ba,_(i.note),1)):m("",!0)]),_:2},1024),e(c,{cols:"auto"},{default:l(()=>[r("div",Ha,[o.canViewFile(i)?(d(),h(T,{key:0,location:"top",text:"Lihat File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-link-external",size:"small",color:"primary",variant:"text",class:"mr-2",href:o.getFileUrl(i),target:"_blank",rel:"noopener noreferrer"}),null,16,["href"])]),_:2},1024)):m("",!0),o.canUploadFile(i)?(d(),h(T,{key:1,location:"top",text:"Upload File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-upload",size:"small",color:"primary",variant:"text",class:"mr-2",onClick:R=>o.openModal(1,i)}),null,16,["onClick"])]),_:2},1024)):m("",!0),o.canEditFile(i)?(d(),h(T,{key:2,location:"top",text:"Edit File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-edit",size:"small",color:"info",variant:"text",class:"mr-2",onClick:R=>o.openModal(1,i)}),null,16,["onClick"])]),_:2},1024)):m("",!0),s.userAccessPhase5&&parseInt(s.userAccessPhase5.canApprove)&&n.phase<5?(d(),h(T,{key:3,location:"top",text:"Tanda Tangan File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-pen",size:"small",color:"info",variant:"text",class:"mr-2",onClick:R=>t.toSignature(i)}),null,16,["onClick"])]),_:2},1024)):m("",!0),o.canDeleteFile(i)?(d(),h(T,{key:4,location:"top",text:"Hapus File"},{activator:l(({props:u})=>[e(k,v(u,{icon:"bx-trash",size:"small",color:"error",variant:"text",onClick:R=>n.deleteAttachment(i.id)}),null,16,["onClick"])]),_:2},1024)):m("",!0)])]),_:2},1024)]),_:2},1032,["class"]),b<n.data.length-1?(d(),h(X,{key:0,class:"mt-3"})):m("",!0)]))),128))]),_:1}),e(L,{modelValue:s.isSp3k,"onUpdate:modelValue":a[6]||(a[6]=i=>s.isSp3k=i),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Attachment ")]),text:l(()=>[e(W,{onSubmit:J(o.insertSpk3k,["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(c,{md:"12",cols:"12"},{default:l(()=>[Ga,Ja,e(w,{class:"my-3",modelValue:s.formsp3k.name,"onUpdate:modelValue":a[0]||(a[0]=i=>s.formsp3k.name=i),autofocus:"",disabled:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[Wa,Ya,e(ee,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:a[1]||(a[1]=i=>o.handleFileChange(i))},null,8,["rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.formsp3k.isSecret,"onUpdate:modelValue":a[2]||(a[2]=i=>s.formsp3k.isSecret=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:s.formsp3k.isApprove,"onUpdate:modelValue":a[3]||(a[3]=i=>s.formsp3k.isApprove=i),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(k,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[4]||(a[4]=i=>o.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(Z,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[5]||(a[5]=i=>s.uploadProgress=i),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const Qa=me(La,[["render",Xa],["__scopeId","data-v-3778ecd2"]]);const Za={components:{AttachmentCard1:Xt,AttachmentCard2:zl,AttachmentCard3:Je,attachmentCard3:Je,AttachmentCard4:We,attachmentCard4:We,attachmentOperation:Qa},name:"Phase",props:{phase1Attachments:{type:Object,required:!0},phase2Attachments:{type:Object,required:!0},phase3Attachments:{type:Object,required:!0},phase4Attachments:{type:Object,required:!0},phase5Attachments:{type:Object,required:!0},userAccess:{type:Object,required:!0},dataFile:{type:Object,required:!0},userData:{type:Object,required:!0},dataNote:{type:Object,required:!0},updateDataNote:{type:Object,required:!0},insertNote:{type:Function,required:!0},changeApproval:{type:Function,required:!0},formatDate:{type:Function,required:!0},openModal:{type:Function,required:!0},deleteAttachment:{type:Function,required:!0},deleteNote:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},step:{type:Function,required:!0},fileId:{type:String,required:!0},resetNote:{type:Function,required:!0},notePhase1:{type:Object,required:!0},notePhase2:{type:Object,required:!0},notePhase3:{type:Object,required:!0},notePhase4:{type:Object,required:!0},modalNote:{type:Function,required:!0},submissions:{type:Object,required:!0}},inject:["loading"],data(){return{userAccessNow:null,userAccessPhase1:null,filePath:this.$filePath,isUpdateNote:!1,currentPage:1,itemsPerPage:10,otherButtons:[{id:6,name:"Data Durasi Waktu"},{id:7,name:"Data Aktivitas"},{id:8,name:"Data Riwayat Persetujuan"},{id:10,name:"Data Riwayat Dokumen"}]}},computed:{paginatedNotes(){const t=(this.currentPage-1)*this.itemsPerPage,a=t+this.itemsPerPage;return this.dataFile.notes.slice(t,a)},isAccountOfficer(){return["Account Officer","AO","ao","account officer","Account Officer Executive","account officer executive","Account Officer / Executive AO","AO / RO"].includes(this.userData.position.name)}},methods:{getStatusColor(t){return{1:"success",2:"warning",3:"error",4:"error"}[t]||"default"},getStatusText(t){return{1:"Approved",2:"Pending",3:"Rejected",4:"Cancel by debitur"}[t]||"Unknown"},async generateReport(t){try{this.loading.show();const a=await O.get(`/user/generatereport/${t}`,{responseType:"blob"});if(a.status==200){this.loading.hide();const n=window.URL.createObjectURL(new Blob([a.data])),f=document.createElement("a");f.href=n,f.setAttribute("download",`${this.dataFile.name}.pdf`),document.body.appendChild(f),f.click(),document.body.removeChild(f),this.$showToast("success","Berhasil","File berhasil diunduh")}else this.loading.hide(),this.$showToast("error","Error","Gagal mengunduh file")}catch(a){console.log(a),this.loading.hide(),this.$showToast("error","Error","Terjadi kesalahan saat mengunduh file")}},onPageChange(t){this.currentPage=t},formatInput(t){return t=t.replace(/\D/g,""),t=t.replace(/\B(?=(\d{3})+(?!\d))/g,","),t}},mounted(){this.userAccessNow=this.userAccess[this.dataFile.phase],this.userAccessPhase1=this.userAccess[1]}},Ae=t=>(fe("data-v-657e91d8"),t=t(),ge(),t),$a=Ae(()=>r("span",null,"Detail",-1)),es=Ae(()=>r("span",null,"Alasan Ditolak : ",-1)),ts=Ae(()=>r("span",null,"Informasi Umum ℹ️",-1)),ls=Ae(()=>r("span",null,"Dokumen Pendukung 📄",-1)),as={class:"mb-5"},ss={class:"mb-5"},is={class:"mb-5"},ns={class:"mb-5"},os={class:"mb-5"},rs={class:"d-flex flex-wrap justify-center"},us={class:"chip-text"},ds={class:"button-text"},cs=Ae(()=>r("span",null,"Catatan 📃",-1)),ps={class:"comment-content"},hs={class:"pl-2"},ms=Ae(()=>r("p",{class:"text-center"},"Tidak ada catatan",-1));function fs(t,a,n,f,s,o){const i=he("AttachmentCard1"),b=he("AttachmentCard2"),u=he("attachmentCard3"),R=he("attachmentCard4"),we=he("attachmentOperation");return d(),h(A,{color:"backgroundCard","min-width":"100%",class:"v-card-custom"},{default:l(()=>[e(re,{class:"text-2xl font-weight-bold d-flex flex-column align-center"},{default:l(()=>[$a,e(xe,{color:o.getStatusColor(n.dataFile.isApproved),onClick:a[0]||(a[0]=V=>!o.isAccountOfficer&&n.openModal(9)),class:ue({"mt-2":!0,clickable:!o.isAccountOfficer}),small:""},{default:l(()=>[p(_(o.getStatusText(n.dataFile.isApproved)),1)]),_:1},8,["color","class"])]),_:1}),n.dataFile&&parseInt(n.dataFile.phase)==6?(d(),h(P,{key:0,class:"text-2xl font-weight-bold d-flex flex-column align-center"},{default:l(()=>[e(k,{color:"primary",onClick:a[1]||(a[1]=V=>o.generateReport(n.fileId)),size:"x-small"},{default:l(()=>[p(" Generate Laporan ")]),_:1})]),_:1})):m("",!0),n.dataFile.reasonRejected!=null?(d(),h(P,{key:1},{default:l(()=>[e(Qe,{type:"error",border:"left",class:"mt-2 mb-0"},{default:l(()=>[es,r("strong",null,_(n.dataFile&&n.dataFile.reasonRejected),1)]),_:1})]),_:1})):m("",!0),e(P,null,{default:l(()=>[e(Ot,{fluid:""},{default:l(()=>[e(I,null,{default:l(()=>[e(c,{cols:"12",md:"6"},{default:l(()=>[e(A,{class:"mb-5"},{default:l(()=>[e(re,null,{default:l(()=>[e(I,{class:"pa-2"},{default:l(()=>[ts,e(Pe),parseInt(n.dataFile.phase)<5&&(s.userAccessPhase1&&parseInt(s.userAccessPhase1.canUpdateData)==1||s.userAccessNow&&parseInt(s.userAccessNow.canUpdateData)==1)?(d(),h(k,{key:0,color:"primary",size:"x-small",class:"mt-2",onClick:a[2]||(a[2]=V=>n.openModal(4))},{default:l(()=>[p(" Edit Data ")]),_:1})):m("",!0)]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(Me,{density:"compact",lines:"two"},{default:l(()=>[e(S,null,{default:l(()=>[e(G,null,{default:l(()=>[e(F,{icon:"mdi-arrow-right-drop-circle-outline",size:"small"}),p(" Nama AO/RO ")]),_:1}),e(S,null,{default:l(()=>[r("strong",null,_(n.dataFile.user.name),1)]),_:1})]),_:1}),e(S,null,{default:l(()=>[e(G,null,{default:l(()=>[e(F,{icon:"mdi-arrow-right-drop-circle-outline",size:"small"}),p(" Nama Pemohon ")]),_:1}),e(S,null,{default:l(()=>[r("strong",null,_(n.dataFile.name),1)]),_:1})]),_:1}),e(S,null,{default:l(()=>[e(G,null,{default:l(()=>[e(F,{icon:"mdi-arrow-right-drop-circle-outline",size:"small"}),p(" NIK Pemohon ")]),_:1}),e(S,null,{default:l(()=>[r("strong",null,_(n.dataFile.nik_pemohon),1)]),_:1})]),_:1}),e(S,null,{default:l(()=>[e(G,null,{default:l(()=>[e(F,{icon:"mdi-arrow-right-drop-circle-outline",size:"small"}),p(" Alamat Pemohon ")]),_:1}),e(S,null,{default:l(()=>[r("strong",null,_(n.dataFile.address),1)]),_:1})]),_:1}),e(S,null,{default:l(()=>[e(G,null,{default:l(()=>[e(F,{icon:"mdi-arrow-right-drop-circle-outline",size:"small"}),p(" No. HP Pemohon")]),_:1}),e(S,null,{default:l(()=>[r("strong",null,_(n.dataFile.no_hp),1)]),_:1})]),_:1}),e(S,null,{default:l(()=>[e(G,null,{default:l(()=>[e(F,{icon:"mdi-arrow-right-drop-circle-outline",size:"small"}),p(" Jumlah Plafon")]),_:1}),e(S,null,{default:l(()=>[r("strong",null," Rp "+_(o.formatInput(n.dataFile.plafon)),1)]),_:1})]),_:1}),n.dataFile.nik_pasangan?(d(),h(S,{key:0},{default:l(()=>[e(G,null,{default:l(()=>[e(F,{icon:"mdi-arrow-right-drop-circle-outline",size:"small"}),p(" NIK Pasangan")]),_:1}),e(S,null,{default:l(()=>[r("strong",null,_(n.dataFile.nik_pasangan),1)]),_:1})]),_:1})):m("",!0),n.dataFile.nik_pasangan?(d(),h(S,{key:1},{default:l(()=>[e(G,null,{default:l(()=>[e(F,{icon:"mdi-arrow-right-drop-circle-outline",size:"small"}),p(" Nama Pasangan")]),_:1}),e(S,null,{default:l(()=>[r("strong",null,_(n.dataFile.name_pasangan??"-"),1)]),_:1})]),_:1})):m("",!0),n.dataFile.nik_jaminan?(d(),h(S,{key:2},{default:l(()=>[e(G,null,{default:l(()=>[e(F,{icon:"mdi-arrow-right-drop-circle-outline",size:"small"}),p(" NIK atas nama Jaminan")]),_:1}),e(S,null,{default:l(()=>[r("strong",null,_(n.dataFile.nik_jaminan),1)]),_:1})]),_:1})):m("",!0),e(S,null,{default:l(()=>[e(G,null,{default:l(()=>[e(F,{icon:"mdi-arrow-right-drop-circle-outline",size:"small"}),p(" Jenis Usaha")]),_:1}),e(S,null,{default:l(()=>[r("strong",null,_(n.dataFile.type_bussiness),1)]),_:1})]),_:1}),e(S,null,{default:l(()=>[e(G,null,{default:l(()=>[e(F,{icon:"mdi-arrow-right-drop-circle-outline",size:"small"}),p(" Deskripsi Usaha")]),_:1}),e(S,null,{default:l(()=>[r("strong",null,_(n.dataFile.desc_bussiness),1)]),_:1})]),_:1}),n.dataFile.order_source?(d(),h(S,{key:3},{default:l(()=>[e(G,null,{default:l(()=>[e(F,{icon:"mdi-arrow-right-drop-circle-outline",size:"small"}),p(" Sumber Order")]),_:1}),e(S,null,{default:l(()=>[r("strong",null,_(n.dataFile.order_source),1)]),_:1})]),_:1})):m("",!0),n.dataFile.status_kredit?(d(),h(S,{key:4},{default:l(()=>[e(G,null,{default:l(()=>[e(F,{icon:"mdi-arrow-right-drop-circle-outline",size:"small"}),p(" Status Kredit")]),_:1}),e(S,null,{default:l(()=>[r("strong",null,_(n.dataFile.status_kredit),1)]),_:1})]),_:1})):m("",!0),n.dataFile.type?(d(),h(S,{key:5},{default:l(()=>[e(G,null,{default:l(()=>[e(F,{icon:"mdi-arrow-right-drop-circle-outline",size:"small"}),p(" Jenis Kredit")]),_:1}),e(S,null,{default:l(()=>[r("strong",null,_(n.dataFile.type==1?"Reguler":"Restruktur"),1)]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(c,{cols:"12",md:"6"},{default:l(()=>[e(A,null,{default:l(()=>[e(re,null,{default:l(()=>[e(I,{class:"pa-2 mb-1"},{default:l(()=>[ls,e(Pe),e(k,{color:"primary",size:"x-small",class:"mt-2",onClick:a[3]||(a[3]=V=>n.openModal(1))},{default:l(()=>[p(" Tambah Data Lain ")]),_:1})]),_:1})]),_:1}),e(P,null,{default:l(()=>[r("div",as,[e(i,{data:n.phase1Attachments,fileId:parseInt(n.dataFile.id),filePath:s.filePath,userAccess:n.userAccess,deleteAttachment:n.deleteAttachment,openModal:n.openModal,phase:parseInt(n.dataFile.phase)},null,8,["data","fileId","filePath","userAccess","deleteAttachment","openModal","phase"])]),r("div",ss,[parseInt(n.dataFile.phase)>1?(d(),h(b,{key:0,data:n.phase2Attachments,fileId:parseInt(n.dataFile.id),filePath:s.filePath,userAccess:n.userAccess,deleteAttachment:n.deleteAttachment,getDetailFile:n.getDetailFile,phase:parseInt(n.dataFile.phase)},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile","phase"])):m("",!0)]),r("div",is,[parseInt(n.dataFile.phase)>2?(d(),h(u,{key:0,data:n.phase3Attachments,fileId:parseInt(n.dataFile.id),filePath:s.filePath,userAccess:n.userAccess,deleteAttachment:n.deleteAttachment,getDetailFile:n.getDetailFile,submission:n.submissions,phase:parseInt(n.dataFile.phase)},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile","submission","phase"])):m("",!0)]),r("div",ns,[parseInt(n.dataFile.phase)>3?(d(),h(R,{key:0,data:n.phase4Attachments,fileId:parseInt(n.dataFile.id),filePath:s.filePath,userAccess:n.userAccess,deleteAttachment:n.deleteAttachment,getDetailFile:n.getDetailFile,phase:parseInt(n.dataFile.phase)},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile","phase"])):m("",!0)]),r("div",os,[parseInt(n.dataFile.phase)>4?(d(),h(we,{key:0,data:n.phase5Attachments,fileId:parseInt(n.dataFile.id),filePath:s.filePath,userAccess:n.userAccess,deleteAttachment:n.deleteAttachment,getDetailFile:n.getDetailFile,phase:parseInt(n.dataFile.phase)},null,8,["data","fileId","filePath","userAccess","deleteAttachment","getDetailFile","phase"])):m("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n.dataFile&&parseInt(n.dataFile.phase)<6?(d(),h(P,{key:2,class:"pa-4"},{default:l(()=>[e(A,null,{default:l(()=>[n.dataFile&&(parseInt(n.dataFile.phase)===2||parseInt(n.dataFile.phase)===3)?(d(),h(P,{key:0,class:"d-flex justify-center text-center pa-3 font-weight-bold"},{default:l(()=>[p(" Status Approval Phase ✅ (khusus SLIK dan Survei hanya perlu 1 approval) ")]),_:1})):(d(),h(P,{key:1,class:"d-flex justify-center text-center pa-3 font-weight-bold"},{default:l(()=>[p(" Status Approval Phase ✅ ")]),_:1})),e(P,{class:"pa-3"},{default:l(()=>[r("div",rs,[(d(!0),D(B,null,se(n.dataFile.approvals,(V,j)=>(d(),D(B,{key:j},[n.dataFile.phase==V.phase?(d(),h(xe,{key:0,class:"ma-2 pa-2",color:V.approved==1?"success":"error",onClick:N=>n.changeApproval(V.id)},{default:l(()=>[r("span",us,_(V.user.name)+" - "+_(V.user.position.name),1)]),_:2},1032,["color","onClick"])):m("",!0)],64))),128))])]),_:1})]),_:1})]),_:1})):m("",!0),e(P,null,{default:l(()=>[e(A,{outlined:"",class:"p-2"},{default:l(()=>[e(re,{class:"d-flex justify-center"},{default:l(()=>[p(" Lain - lain 🔹 ")]),_:1}),e(P,{class:"d-flex flex-wrap justify-center"},{default:l(()=>[(d(!0),D(B,null,se(s.otherButtons,(V,j)=>(d(),h(k,{key:j,variant:"outlined",class:"ma-2 mobile-btn",onClick:N=>n.openModal(V.id)},{default:l(()=>[r("span",ds,_(V.name),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(X),e(P,null,{default:l(()=>[e(A,{outlined:"",class:"py-2 px-4"},{default:l(()=>[e(re,null,{default:l(()=>[cs]),_:1}),e(P,null,{default:l(()=>[e(W,{onSubmit:J(n.insertNote,["prevent"])},{default:l(()=>[e(Ne,{outlined:"",rows:"2",placeholder:"Tambahkan catatan disini",modelValue:n.dataNote.note,"onUpdate:modelValue":a[4]||(a[4]=V=>n.dataNote.note=V)},null,8,["modelValue"]),e(k,{color:"primary",type:"submit",block:"",class:"mt-2"},{default:l(()=>[e(F,null,{default:l(()=>[p("mdi-note-plus")]),_:1}),p(" Tambah Catatan ")]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1}),e(A,{outlined:"",class:"my-4"},{default:l(()=>[e(P,{class:"d-flex justify-center text-center pa-3 font-weight-bold"},{default:l(()=>[p(" Catatan ")]),_:1}),e(X,{class:"border-opacity-100"}),o.paginatedNotes.length>0?(d(),h(P,{key:0},{default:l(()=>[(d(!0),D(B,null,se(o.paginatedNotes,(V,j)=>(d(),D("div",{key:j,class:"user-comment"},[r("div",ps,[r("p",hs,_(V.note),1),e(I,{class:"justify-space-between align-center py-2 px-2"},{default:l(()=>[r("small",null,[r("strong",null,_(V.user.name)+" - "+_(V.user.position.name),1)]),p(" -- "),r("small",null,_(n.formatDate(V.created_at)),1),e(Pe),n.userData.id==V.user_id?(d(),h(Xe,{key:0,transition:"scale-transition",bottom:"",left:""},{activator:l(({props:N})=>[e(k,v({icon:""},N,{variant:"text"}),{default:l(()=>[e(F,null,{default:l(()=>[p("mdi-dots-vertical")]),_:1})]),_:2},1040)]),default:l(()=>[e(Me,null,{default:l(()=>[e(S,{color:"primary",onClick:N=>n.openModal(3,V)},{default:l(()=>[e(S,null,{default:l(()=>[e(F,null,{default:l(()=>[p("mdi-pencil")]),_:1})]),_:1}),e(G,null,{default:l(()=>[p("Edit")]),_:1})]),_:2},1032,["onClick"]),e(S,{color:"error",onClick:N=>n.deleteNote(V.id)},{default:l(()=>[e(S,null,{default:l(()=>[e(F,null,{default:l(()=>[p("mdi-delete")]),_:1})]),_:1}),e(G,null,{default:l(()=>[p("Hapus")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):m("",!0)]),_:2},1024)])]))),128)),e(It,{modelValue:s.currentPage,"onUpdate:modelValue":a[5]||(a[5]=V=>s.currentPage=V),length:Math.ceil(n.dataFile.notes.length/s.itemsPerPage),onInput:o.onPageChange},null,8,["modelValue","length","onInput"])]),_:1})):(d(),h(P,{key:1},{default:l(()=>[ms]),_:1}))]),_:1})]),_:1}),s.userAccessNow&&parseInt(s.userAccessNow.canApprove)&&parseInt(n.dataFile.isApproved)!=3&&parseInt(n.dataFile.isApproved)!=4?(d(),h(Ye,{key:3},{default:l(()=>[e(c,{class:"d-flex justify-space-beetwen"},{default:l(()=>[n.dataFile&&parseInt(n.dataFile.phase)>1?(d(),h(k,{key:0,color:"info",text:"Prev Phase",variant:"tonal",onClick:a[6]||(a[6]=V=>n.step(n.fileId,"-"))})):m("",!0),e(Pe),n.dataFile&&parseInt(n.dataFile.phase)<5?(d(),h(k,{key:1,color:"info",text:"Next Phase",variant:"tonal",onClick:a[7]||(a[7]=V=>n.step(n.fileId,"next"))})):m("",!0),n.dataFile&&parseInt(n.dataFile.phase)==5?(d(),h(k,{key:2,color:"success",text:"Setujui",variant:"tonal",onClick:a[8]||(a[8]=V=>n.step(n.fileId,"next"))})):m("",!0)]),_:1})]),_:1})):m("",!0)]),_:1})}const gs=me(Za,[["render",fs],["__scopeId","data-v-657e91d8"]]),ks={components:{phase:gs},data(){return{dataLoaded:!1,selectedOption:"",overlay:!1,isMobile:!1,userData:null,userAccess:{},fileId:this.$route.params.fileId,isShowPhase4:!1,isShowPhase5:!1,isShowTimers:!1,isShowHistory:!1,isShowApprovals:!1,isChangeStatusCredit:!1,isShowAttachment:!1,statusCreditList:[{value:"FRESH",title:"FRESH"},{value:"REPEAT ORDER",title:"REPEAT ORDER"},{value:"TOPUP",title:"TOPUP"}],nameFileList:[{value:"KTP Pemohon",title:"KTP Pemohon"},{value:"Kartu Keluarga",title:"Kartu Keluarga"},{value:"Jaminan SHM",title:"Jaminan SHM"},{value:"Foto Kunjungan",title:"Foto Kunjungan"},{value:"Foto WhatsApp",title:"Foto WhatsApp"},{value:"Buku Nikah",title:"Buku Nikah"},{value:"SHM",title:"Jaminan SHM"},{value:"BPKB",title:"Jaminan BPKB"},{value:"Form Permohonan SLIK",title:"Form Permohonan SLIK"},{value:"KTP Pasangan",title:"KTP Pasangan"},{value:"KTP Atas Nama Jaminan",title:"KTP Atas Nama Jaminan"},{value:"Resume SLIK",title:"Resume SLIK"},{value:"Detail SLIK",title:"Detail SLIK"},{value:"Detail SLIK Pasangan",title:"Detail SLIK Pasangan"},{value:"Detail SLIK Atas Nama jaminan",title:"Detail SLIK Atas Nama jaminan"},{value:"File Banding",title:"File Banding"},{value:"Analisa Awal Kredit AO",title:"Analisa Awal Kredit AO"},{value:"Analisa Kredit",title:"Analisa Kredit"},{value:"Lembar Pengesahan",title:"Lembar Pengesahan"},{value:"Rekomendasi Kepatuhan",title:"Rekomendasi Kepatuhan"},{value:"SP3K",title:"SP3K"},{value:"Notaris",title:"Notaris"},{value:"Lain-lain",title:"Lain-lain"}],changeStatus:{id:null,status:null,reasonRejected:null},stepperModel:0,isUpdateGeneralInfo:!1,generalInfo:{id:null,name:null,type_bussiness:null,desc_bussiness:null,order_source:null,status_kredit:null,plafon:null,type:null,nik_pemohon:null,name_pasangan:null,nik_pasangan:null,nik_jaminan:null,address:null,no_hp:null},dataFile:{id:this.$route.params.fileId,user_id:null,phase:1,name:"",type_bussiness:"",desc_bussiness:"",order_source:"",status_kredit:"",nik_pemohon:null,name_pasangan:null,nik_pasangan:null,nik_jaminan:null,address:null,no_hp:null,plafon:"0",type:null,surveyResult:"-",otsResult:"-",cekLingResult:"-",verTelResult:"-",creditScoring:"-",attachments:[],notes:[],approvals:[],phase_times:[],file_activities:[],reasonRejected:""},filePath:this.$filePath,timerHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Waktu Mulai",value:"startTime",sortable:!0},{text:"Waktu Selesai",value:"endTime",sortable:!0},{text:"Rentang Waktu",value:"timeDiff",sortable:!0}],attachmentHeaders:[{text:"Nama",value:"name",sortable:!0},{text:"Phase",value:"phase",sortable:!0},{text:"Waktu",value:"startTime",sortable:!0}],historyHeaders:[{text:"User",value:"user.name",sortable:!0},{text:"Aktivitas",value:"activity",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],approvalHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Nama",value:"user.name",sortable:!0},{text:"Status",value:"approved",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],isUpdateNote:!1,dataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},updateDataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},phaseNote:[],notesByPhase:{},isModalPhase:!1,insertAttch:!1,updateAttch:!1,rules:{required:t=>!!t||"Required"},uploadProgress:null,attachFile:{id:null,file_id:this.$route.params.fileId,phase:null,name:null,path:null,note:null,link:null,isSecret:0,isApprove:1},typeCreditList:[{value:1,title:"Reguler"},{value:2,title:"Restruktur"}],orderList:[{value:"AO SENDIRI",title:"AO SENDIRI"},{value:"C. SERVIS / KANTOR",title:"C. SERVIS / KANTOR"},{value:"NASABAH",title:"NASABAH"},{value:"CROSS SALING DIVISI",title:"CROSS SALING DIVISI"},{value:"AGEN MGM / LAINNYA",title:"AGEN MGM / LAINNYA"},{value:"WEBSITE / WA / SOSMED",title:"WEBSITE / WA/ SOSMED"},{value:"TEAM BUSSINES",title:"TEAM BUSSINES"},{value:"PROGRAM KKB NEW",title:"PROGRAM KKB NEW"},{value:"PROGRAM KKB SECOND",title:"PROGRAM KKB SECOND"},{value:"CENTRO",title:"CENTRO"}],notePhase1:[],notePhase2:[],notePhase3:[],notePhase4:[],currentPage:1,itemsPerPage:10,isDataPhase3:!1,dataPhase3:{surveyResult:""},attachments:[],fileSubmissions:[],dataAttachPhase1:[],dataAttachPhase2:[],dataAttachPhase3:[],dataAttachPhase4:[],dataAttachPhase5:[]}},computed:{isFormValid(){const t=this.attachFile.name&&(this.attachFile.path||this.attachFile.link);return this.attachFile&&this.attachFile.name&&this.attachFile.name.value=="Lain-lain"?t&&this.attachFile.note:t},paginatedNotes(){const t=(this.currentPage-1)*this.itemsPerPage,a=t+this.itemsPerPage;return this.dataFile.notes.slice(t,a)}},inject:["loading"],methods:{back(){this.$router.go(-1)},async updateStatusCredit(){try{this.loading.show();const t=new FormData;if(t.append("id",this.fileId),t.append("status",this.changeStatus.status),this.changeStatus.status=="3"||this.changeStatus.status=="4"){if(this.changeStatus.reasonRejected==null){this.loading.hide(),this.closeModal(9),this.$showToast("error","Sorry","Alasan Penolakan wajib diisi");return}t.append("reasonRejected",this.changeStatus.reasonRejected)}const a=await O.post("/user/change-status",t);a.status===200?(this.loading.hide(),this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.closeModal(9),this.$showToast("success","Success",a.data.message)):(this.loading.hide(),this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.closeModal(9),this.$showToast("error","Sorry",a.data.message))}catch(t){this.loading.hide(),this.closeModal(9),this.$showToast("error","Sorry",t.response.data.message)}},calculateTimeDiff(t,a){let n=new Date(t),s=(a?new Date(a):new Date).valueOf()-n.valueOf(),o=Math.floor(s/1e3/60),i=Math.floor(o/60),b=o%60;return`${i} jam ${b} menit`},formatFileId(t){return Array.isArray(t)?t.join(", "):t},async updatePhase3(){try{this.loading.show();const t=new FormData;t.append("surveyResult",this.dataPhase3.surveyResult),t.append("_method","PUT");const a=await O.post(`/user/survey-credit/${this.fileId}`,t);a.status===200?(this.loading.hide(),this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("success","Success",a.data.message)):(this.loading.hide(),this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("error","Sorry",a.data.message))}catch(t){this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}},onPageChange(t){this.currentPage=t},formatInputPlafon(t){let a=t.target.value;a=a.replace(/\D/g,""),a=a.replace(/\B(?=(\d{3})+(?!\d))/g,","),t.target.value=a},formatDate(t){return new Date(t).toLocaleString("id-ID")},resetNote(){this.dataNote={file_id:this.$route.params.fileId,user_id:null,phase:null,note:null,isRead:null}},checkMobile(){this.isMobile=window.innerWidth<728},formatInput(t){return t=t.replace(/\D/g,""),t=t.replace(/\B(?=(\d{3})+(?!\d))/g,","),t},async step(t,a){try{if(a=="next"){if(this.dataFile.phase===3&&this.fileSubmissions.length===0){if(!window.confirm("Tidak ada file Pendukung yang diajukan. Apakah Anda yakin melanjutkan ke tahap selanjutnya?"))return}else if(!window.confirm("Apakah Anda yakin melanjutkan ke tahap selanjutnya"))return;this.loading.show();const n=new FormData;n.append("id",t),n.append("type",a),n.append("_method","POST");const f=await O.post("/user/change-phase-approve",n);f.status===200?(this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("success","Success",f.data.message)):(this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",f.data.data.message))}else{if(!window.confirm("Apakah Anda yakin Kembali ke phase sebelumnya"))return;this.loading.show();const f=new FormData;f.append("id",t),f.append("type",a),f.append("_method","POST");const s=await O.post("/user/change-phase-approve",f);s.status===200?(this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("success","Success",s.data.message)):(this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.data.message))}}catch(n){this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.response.data.message)}},async getDetailFile(t){try{this.loading.show();const a=await O.get(`/user/credit/${t}`);if(a.status===200){this.dataFile=a.data.data.file,this.attachments=this.dataFile.attachments.filter(n=>n.path&&n.path!=="null"||n.link&&n.link!=="null"),this.fileSubmissions=this.dataFile.filesubmissions,this.userAccess=a.data.data.userAccess,this.dataAttachPhase1=a.data.data.file.attachments.filter(n=>n.phase==1),this.dataAttachPhase2=a.data.data.file.attachments.filter(n=>n.phase==2),this.dataAttachPhase3=a.data.data.file.attachments.filter(n=>n.phase==3),this.dataAttachPhase4=a.data.data.file.attachments.filter(n=>n.phase==4),this.dataAttachPhase5=a.data.data.file.attachments.filter(n=>n.phase==5),this.dataFile.phase=parseInt(this.dataFile.phase),this.isShowPhase4=!(parseInt(this.dataFile.plafon)<25e6),this.dataFile.phase==5&&(this.isShowPhase5=!0),parseInt(this.dataFile.phase)==5?this.stepperModel=parseInt(this.dataFile.phase)-1:this.stepperModel=parseInt(this.dataFile.phase)-1,this.generalInfo.id=this.dataFile.id,this.generalInfo.name=this.dataFile.name,this.generalInfo.type_bussiness=this.dataFile.type_bussiness,this.generalInfo.desc_bussiness=this.dataFile.desc_bussiness,this.generalInfo.order_source=this.dataFile.order_source,this.generalInfo.status_kredit=this.dataFile.status_kredit,this.generalInfo.plafon=this.dataFile.plafon,this.generalInfo.type=this.dataFile.type,this.generalInfo.nik_pemohon=this.dataFile.nik_pemohon,this.generalInfo.name_pasangan=this.dataFile.name_pasangan,this.generalInfo.nik_pasangan=this.dataFile.nik_pasangan,this.generalInfo.nik_jaminan=this.dataFile.nik_jaminan,this.generalInfo.address=this.dataFile.address,this.generalInfo.no_hp=this.dataFile.no_hp;for(let n=0;n<5;n++)this.separateNotesByPhase(this.dataFile,n);this.dataLoaded=!0,this.loading.hide()}else this.$showToast("error","Sorry",a.data.data.message),this.loading.hide()}catch(a){this.loading.hide(),this.$showToast("error","Sorry",a.response.data.message)}},getUserData(){const t=localStorage.getItem("userData");t&&(this.userData=JSON.parse(t))},openModal(t,a=null){t==1?this.insertAttch=!0:t==2?(this.attachFile.id=a.id,this.attachFile.file_id=a.file_id,this.attachFile.name=a.name,this.attachFile.isSecret=parseInt(a.isSecret),this.attachFile.isApprove=parseInt(a.isApprove),this.attachFile.link=a.link,this.updateAttch=!0):t==3?(this.updateDataNote.id=a.id,this.updateDataNote.file_id=a.file_id,this.updateDataNote.note=a.note,this.isUpdateNote=!0):t==4?this.isUpdateGeneralInfo=!0:t==5?(this.dataPhase3.surveyResult=this.dataFile.surveyResult,this.isDataPhase3=!0):t==6?this.isShowTimers=!0:t==7?this.isShowHistory=!0:t==8?this.isShowApprovals=!0:t==9?this.isChangeStatusCredit=!0:t==10&&(this.isShowAttachment=!0)},closeModal(t){t===1?(this.resetAttch(),this.insertAttch=!1):t===2?(this.resetAttch(),this.updateAttch=!1):t===3?(this.resetNote(),this.updateNote=!1):t==4?this.isUpdateGeneralInfo=!1:t==5?(this.dataPhase3.surveyResult="",this.isDataPhase3=!1):t==9&&(this.isChangeStatusCredit=!1,this.changeStatus.id=null,this.changeStatus.status=null,this.changeStatus.reasonRejected=null)},async updateGeneralInfo(){try{this.loading.show();const t=new FormData;t.append("name",this.generalInfo.name),t.append("plafon",this.generalInfo.plafon.replace(/\D/g,"")),t.append("type",this.generalInfo.type),t.append("type_bussiness",this.generalInfo.type_bussiness),t.append("desc_bussiness",this.generalInfo.desc_bussiness),t.append("order_source",this.generalInfo.order_source),t.append("status_kredit",this.generalInfo.status_kredit),this.generalInfo.nik_pemohon!=""&&t.append("nik_pemohon",this.generalInfo.nik_pemohon),this.generalInfo.nik_pasangan!=""&&this.generalInfo.nik_pasangan!=null&&this.generalInfo.nik_pasangan!="null"&&this.generalInfo.nik_pasangan!="-"&&(t.append("nik_pasangan",this.generalInfo.nik_pasangan),t.append("name_pasangan",this.generalInfo.name_pasangan??null)),this.generalInfo.nik_jaminan!=""&&this.generalInfo.nik_jaminan!=null&&this.generalInfo.nik_jaminan!="null"&&this.generalInfo.nik_jaminan!="-"&&t.append("nik_jaminan",this.generalInfo.nik_jaminan),this.generalInfo.address!=""&&t.append("address",this.generalInfo.address),this.generalInfo.no_hp!=""&&t.append("no_hp",this.generalInfo.no_hp),t.append("_method","PUT");const a=await O.post(`/user/edit-general-info/${this.generalInfo.id}`,t);a.status===200?(this.loading.hide(),this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("success","Success",a.data.message)):(this.loading.hide(),this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("error","Sorry",a.data.message))}catch(t){this.isUpdateGeneralInfo=!1,this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}},async insertNote(){try{if(this.loading.show(),this.dataNote.note==null){this.$showToast("error","Sorry","Note cannot be empty"),this.loading.hide();return}const t=new FormData;t.append("file_id",this.dataNote.file_id),t.append("note",this.dataNote.note),t.append("_method","POST");const a=await O.post("/user/note",t);a.status===200?(this.resetNote(),this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("success","Success",a.data.message)):(this.resetNote(),this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.data.message))}catch(t){this.resetNote(),this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}},async updateNote(){try{this.loading.show();const t=new FormData;t.append("file_id",this.updateDataNote.file_id),t.append("note",this.updateDataNote.note),t.append("_method","PUT");const a=await O.post(`/user/note/${this.updateDataNote.id}`,t);a.status===200?(this.loading.hide(),this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("success","Success",a.data.message)):(this.loading.hide(),this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("error","Sorry",a.data.message))}catch(t){this.isUpdateNote=!1,this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}},async deleteNote(t){try{if(this.loading.show(),!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;const n=await O.delete(`/user/note/${t}`);n.status===200?(this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",n.data.message)):(this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(a){this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},separateNotesByPhase(t,a){t.notes.forEach(n=>{if(n.phase==a)switch(a){case 1:this.notePhase1.push(n);break;case 2:this.notePhase2.push(n);break;case 3:this.notePhase3.push(n);break;case 4:this.notePhase4.push(n);break;default:console.log("Invalid phase")}})},modalNote(){this.isModalPhase=!this.isModalPhase},async changeApproval(t){try{this.loading.show();const a=await O.get(`/user/change-phase-approve/${t}`);a.status===200?(this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",a.data.message)):(this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.data.message))}catch(a){this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},handleFileChange(t){const a=t.target.files[0];a&&["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(a.type)?this.attachFile.path=a:(this.closeModal(1),this.closeModal(2),this.$showToast("error","Error","Hanya file JPG, JPEG, PNG, PDF, DOC, DOCX, XLS, dan XLSX yang diizinkan."),t.target.value=null)},resetAttch(){this.attachFile={id:null,file_id:this.$route.params.fileId,name:null,path:null,note:null,link:null,isSecret:!1}},async insertAttachment(){try{this.loading.show();const t=new FormData;t.append("file_id",this.attachFile.file_id),t.append("phase",this.dataFile.phase),t.append("name",this.attachFile.name.value),this.attachFile.path!=null&&t.append("path",this.attachFile.path),this.attachFile.link!=null&&t.append("link",this.attachFile.link),this.attachFile.note!=null&&t.append("note",this.attachFile.note),t.append("isApprove",this.attachFile.isApprove),this.dataFile.phase>=2&&(this.attachFile.isSecret===!1?t.append("isSecret","0"):t.append("isSecret",String(this.attachFile.isSecret))),t.append("_method","POST");const a={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},n=await O.post("/user/add-attach",t,a);n.status===200?(this.loading.hide(),this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.loading.hide(),this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(t){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}},async editAttachment(){try{this.loading.show();const t=new FormData;t.append("file_id",this.attachFile.file_id),t.append("name",this.attachFile.name),t.append("path",this.attachFile.path),t.append("phase",this.dataFile.phase),t.append("isApprove",this.attachFile.isApprove),this.attachFile.path!=null&&t.append("path",this.attachFile.path),t.append("isSecret",this.attachFile.isSecret),t.append("_method","PUT");const a={onUploadProgress:f=>{try{this.uploadProgress=Math.round(f.loaded*100/f.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},n=await O.post(`/user/edit-attach/${this.attachFile.id}`,t,a);n.status===200?(this.loading.hide(),this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",n.data.message)):(this.loading.hide(),this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",n.data.message))}catch(t){this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",t.response.data.message)}},async deleteAttachment(t){try{if(!window.confirm("Apakah Anda yakin ingin menghapus data ? Data akan terhapus secara permanen."))return;this.loading.show();const n=await O.delete(`/user/delete-attach/${t}`);n.status===200?(this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("success","Berhasill",n.data.message)):(this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("error","Sorry","Terjadi Kesalahan Silahkan Coba Lagi"))}catch{this.loading.hide(),this.getDetailFile(this.fileId),this.$showToast("error","Sorry","Terjadi Kesalahan Silahkan Coba Lagi")}}},async mounted(){try{this.loading.show(),await Promise.all([this.checkMobile(),this.getUserData(),this.getDetailFile(this.fileId)])}catch(t){console.error("Error in mounted:",t)}finally{this.loading.hide()}}};function _s(t,a,n){if(a==null)return t;if(Array.isArray(a))throw new Error("Multiple matches is not implemented");return typeof a=="number"&&~a?e(B,null,[e("span",{class:"v-combobox__unmask"},[t.substr(0,a)]),e("span",{class:"v-combobox__mask"},[t.substr(a,n)]),e("span",{class:"v-combobox__unmask"},[t.substr(a+n)])]):t}const ys=ft({autoSelectFirst:{type:[Boolean,String]},delimiters:Array,...Rt({filterKeys:["title"]}),...Kt({hideNoData:!0,returnObject:!0}),...gt(Ut({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...kt({transition:!1})},"VCombobox"),vs=_t()({name:"VCombobox",props:ys(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:search":t=>!0,"update:menu":t=>!0},setup(t,a){var Ee;let{emit:n,slots:f}=a;const{t:s}=yt(),o=Ue(),i=Se(!1),b=Se(!0),u=Se(!1),R=Ue(),we=Ue(),V=He(t,"menu"),j=oe({get:()=>V.value,set:g=>{var U;V.value&&!g&&((U=R.value)!=null&&U.ΨopenChildren)||(V.value=g)}}),N=Se(-1);let je=!1;const Ze=oe(()=>{var g;return(g=o.value)==null?void 0:g.color}),qe=oe(()=>j.value?t.closeText:t.openText),{items:Le,transformIn:$e,transformOut:et}=Tt(t),{textColorClasses:tt,textColorStyles:lt}=vt(Ze),M=He(t,"modelValue",[],g=>$e(xt(g)),g=>{const U=et(g);return t.multiple?U:U[0]??null}),ke=Lt(),_e=Se(t.multiple?"":((Ee=M.value[0])==null?void 0:Ee.title)??""),H=oe({get:()=>_e.value,set:g=>{var U;if(_e.value=g??"",t.multiple||(M.value=[Ke(t,g)]),g&&t.multiple&&((U=t.delimiters)!=null&&U.length)){const z=g.split(new RegExp(`(?:${t.delimiters.join("|")})+`));z.length>1&&(z.forEach($=>{$=$.trim(),$&&ne(Ke(t,$))}),_e.value="")}g||(N.value=-1),b.value=!g}});Fe(_e,g=>{je?Ge(()=>je=!1):i.value&&!j.value&&(j.value=!0),n("update:search",g)}),Fe(M,g=>{var U;t.multiple||(_e.value=((U=g[0])==null?void 0:U.title)??"")});const{filteredItems:be,getMatches:at}=qt(t,Le,()=>b.value?"":H.value),ie=oe(()=>t.hideSelected?be.value.filter(g=>!M.value.some(U=>U.value===g.value)):be.value),st=oe(()=>M.value.map(g=>g.value)),Ve=oe(()=>{var U;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&H.value===((U=ie.value[0])==null?void 0:U.title))&&ie.value.length>0&&!b.value&&!u.value}),Oe=oe(()=>t.hideNoData&&!Le.value.length||t.readonly||(ke==null?void 0:ke.isReadonly.value)),Re=Ue(),{onListScroll:it,onListKeydown:nt}=Nt(Re,o);function ot(g){je=!0,t.openOnClear&&(j.value=!0)}function rt(){Oe.value||(j.value=!0)}function ut(g){Oe.value||(i.value&&(g.preventDefault(),g.stopPropagation()),j.value=!j.value)}function dt(g){var $;if(Dt(g)||t.readonly||ke!=null&&ke.isReadonly.value)return;const U=o.value.selectionStart,z=M.value.length;if((N.value>-1||["Enter","ArrowDown","ArrowUp"].includes(g.key))&&g.preventDefault(),["Enter","ArrowDown"].includes(g.key)&&(j.value=!0),["Escape"].includes(g.key)&&(j.value=!1),["Enter","Escape","Tab"].includes(g.key)&&(Ve.value&&["Enter","Tab"].includes(g.key)&&ne(be.value[0]),b.value=!0),g.key==="ArrowDown"&&Ve.value&&(($=Re.value)==null||$.focus("next")),!!t.multiple){if(["Backspace","Delete"].includes(g.key)){if(N.value<0){g.key==="Backspace"&&!H.value&&(N.value=z-1);return}const C=N.value,Y=M.value[N.value];Y&&!Y.props.disabled&&ne(Y),N.value=C>=z-1?z-2:C}if(g.key==="ArrowLeft"){if(N.value<0&&U>0)return;const C=N.value>-1?N.value-1:z-1;M.value[C]?N.value=C:(N.value=-1,o.value.setSelectionRange(H.value.length,H.value.length))}if(g.key==="ArrowRight"){if(N.value<0)return;const C=N.value+1;M.value[C]?N.value=C:(N.value=-1,o.value.setSelectionRange(0,0))}g.key==="Enter"&&H.value&&(ne(Ke(t,H.value)),H.value="")}}function ct(){var g;i.value&&(b.value=!0,(g=o.value)==null||g.focus())}function ne(g){if(t.multiple){const U=M.value.findIndex(z=>t.valueComparator(z.value,g.value));if(U===-1)M.value=[...M.value,g];else{const z=[...M.value];z.splice(U,1),M.value=z}H.value=""}else M.value=[g],_e.value=g.title,Ge(()=>{j.value=!1,b.value=!0})}function pt(g){i.value=!0,setTimeout(()=>{u.value=!0})}function ht(g){u.value=!1}function mt(g){(g==null||g===""&&!t.multiple)&&(M.value=[])}return Fe(be,g=>{!g.length&&t.hideNoData&&(j.value=!1)}),Fe(i,(g,U)=>{g||g===U||(N.value=-1,j.value=!1,Ve.value&&!u.value&&!M.value.some(z=>{let{value:$}=z;return $===ie.value[0].value})?ne(ie.value[0]):t.multiple&&H.value&&(M.value=[...M.value,Ke(t,H.value)],H.value=""))}),Fe(j,()=>{if(!t.hideSelected&&j.value&&M.value.length){const g=ie.value.findIndex(U=>M.value.some(z=>t.valueComparator(z.value,U.value)));At&&window.requestAnimationFrame(()=>{var U;g>=0&&((U=we.value)==null||U.scrollToIndex(g))})}}),bt(()=>{const g=!!(t.chips||f.chip),U=!!(!t.hideNoData||ie.value.length||f["prepend-item"]||f["append-item"]||f["no-data"]),z=M.value.length>0,$=w.filterProps(t);return e(w,v({ref:o},$,{modelValue:H.value,"onUpdate:modelValue":[C=>H.value=C,mt],focused:i.value,"onUpdate:focused":C=>i.value=C,validationValue:M.externalValue,counterValue:t.multiple?M.value.length:H.value.length,dirty:z,class:["v-combobox",{"v-combobox--active-menu":j.value,"v-combobox--chips":!!t.chips,"v-combobox--selection-slot":!!f.selection,"v-combobox--selecting-index":N.value>-1,[`v-combobox--${t.multiple?"multiple":"single"}`]:!0},t.class],style:t.style,readonly:t.readonly,placeholder:z?void 0:t.placeholder,"onClick:clear":ot,"onMousedown:control":rt,onKeydown:dt}),{...f,default:()=>e(B,null,[e(Xe,v({ref:R,modelValue:j.value,"onUpdate:modelValue":C=>j.value=C,activator:"parent",contentClass:"v-combobox__content",disabled:Oe.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterLeave:ct},t.menuProps),{default:()=>[U&&e(Me,{ref:Re,selected:st.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:C=>C.preventDefault(),onKeydown:nt,onFocusin:pt,onFocusout:ht,onScrollPassive:it,tabindex:"-1",color:t.itemColor??t.color},{default:()=>{var C,Y,ae;return[(C=f["prepend-item"])==null?void 0:C.call(f),!ie.value.length&&!t.hideNoData&&(((Y=f["no-data"])==null?void 0:Y.call(f))??e(S,{title:s(t.noDataText)},null)),e(Mt,{ref:we,renderless:!0,items:ie.value},{default:de=>{var Be;let{item:Q,index:ce,itemRef:pe}=de;const ze=v(Q.props,{ref:pe,key:ce,active:Ve.value&&ce===0?!0:void 0,onClick:()=>ne(Q)});return((Be=f.item)==null?void 0:Be.call(f,{item:Q,index:ce,props:ze}))??e(S,ze,{prepend:Ce=>{let{isSelected:Te}=Ce;return e(B,null,[t.multiple&&!t.hideSelected?e(jt,{key:Q.value,modelValue:Te,ripple:!1,tabindex:"-1"},null):void 0,Q.props.prependIcon&&e(F,{icon:Q.props.prependIcon},null)])},title:()=>{var Ce,Te;return b.value?Q.title:_s(Q.title,(Ce=at(Q))==null?void 0:Ce.title,((Te=H.value)==null?void 0:Te.length)??0)}})}}),(ae=f["append-item"])==null?void 0:ae.call(f)]}})]}),M.value.map((C,Y)=>{function ae(pe){pe.stopPropagation(),pe.preventDefault(),ne(C)}const de={"onClick:close":ae,onMousedown(pe){pe.preventDefault(),pe.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Q=g?!!f.chip:!!f.selection,ce=Q?St(g?f.chip({item:C,index:Y,props:de}):f.selection({item:C,index:Y})):void 0;if(!(Q&&!ce))return e("div",{key:C.value,class:["v-combobox__selection",Y===N.value&&["v-combobox__selection--selected",tt.value]],style:Y===N.value?lt.value:{}},[g?f.chip?e(Ft,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:C.title}}},{default:()=>[ce]}):e(xe,v({key:"chip",closable:t.closableChips,size:"small",text:C.title,disabled:C.props.disabled},de),null):ce??e("span",{class:"v-combobox__selection-text"},[C.title,t.multiple&&Y<M.value.length-1&&e("span",{class:"v-combobox__selection-comma"},[p(",")])])])})]),"append-inner":function(){var de;for(var C=arguments.length,Y=new Array(C),ae=0;ae<C;ae++)Y[ae]=arguments[ae];return e(B,null,[(de=f["append-inner"])==null?void 0:de.call(f,...Y),(!t.hideNoData||t.items.length)&&t.menuIcon?e(F,{class:"v-combobox__menu-icon",icon:t.menuIcon,onMousedown:ut,onClick:Pt,"aria-label":s(qe.value),title:s(qe.value)},null):void 0])}})}),Et({isFocused:i,isPristine:b,menu:j,search:H,selectionIndex:N,filteredItems:be,select:ne},o)}}),y=t=>(fe("data-v-b9e2a1b6"),t=t(),ge(),t),As=y(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),bs=y(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Ss=y(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Fs=y(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Ps=y(()=>r("span",{style:{color:"red"}},"*",-1)),xs=y(()=>r("span",{class:"subtitle-1 text-center"},"Note: ",-1)),Ds=y(()=>r("span",{style:{color:"red"}},"*",-1)),Is=y(()=>r("span",{class:"subtitle-1 text-center"},"Pilih Salah Satu : ",-1)),ws=y(()=>r("span",{style:{color:"red"}},"*",-1)),Vs=y(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),Cs=y(()=>r("span",{style:{color:"red"}},"*",-1)),Ts=y(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),Us=y(()=>r("span",{style:{color:"red"}},"*",-1)),Ks=y(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),Ns=y(()=>r("span",{style:{color:"red"}},"*",-1)),Ms=y(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),js=y(()=>r("span",{style:{color:"red"}},"*",-1)),Os=y(()=>r("span",{class:"subtitle-1 text-center"},"Pilih Jenis Kredit: ",-1)),Rs=y(()=>r("span",{style:{color:"red"}},"*",-1)),qs=y(()=>r("span",{class:"subtitle-1 text-center"},"Nama Pemohon: ",-1)),Ls=y(()=>r("span",{style:{color:"red"}},"*",-1)),Es=y(()=>r("span",{class:"subtitle-1 text-center"},"Jumlah Plafon: ",-1)),zs=y(()=>r("span",{style:{color:"red"}},"*",-1)),Bs=y(()=>r("span",{class:"subtitle-1 text-center"},"Jenis Usaha: ",-1)),Hs=y(()=>r("span",{style:{color:"red"}},"*",-1)),Gs=y(()=>r("span",{class:"subtitle-1 text-center"},"Deskripsi Usaha: ",-1)),Js=y(()=>r("span",{style:{color:"red"}},"*",-1)),Ws=y(()=>r("span",{class:"subtitle-1 text-center"},"Pilih sumber order: ",-1)),Ys=y(()=>r("span",{style:{color:"red"}},"*",-1)),Xs=y(()=>r("span",{class:"subtitle-1 text-center"},"Pilih status kredit: ",-1)),Qs=y(()=>r("span",{style:{color:"red"}},"*",-1)),Zs=y(()=>r("span",{class:"subtitle-1 text-center"},"NIK Pemohon: ",-1)),$s=y(()=>r("span",{style:{color:"red"}},"*",-1)),ei=y(()=>r("span",{class:"subtitle-1 text-center"},"Alamat Pemohon: ",-1)),ti=y(()=>r("span",{class:"subtitle-1 text-center"},"NIK Pasangan (kosongkan jika tidak ada): ",-1)),li=y(()=>r("span",{class:"subtitle-1 text-center"},"Nama Pasangan (kosongkan jika tidak ada): ",-1)),ai=y(()=>r("span",{class:"subtitle-1 text-center"},"NIK Pemilik Jaminan (kosongkan jika tidak ada): ",-1)),si=y(()=>r("span",{style:{color:"red"}},"*",-1)),ii=y(()=>r("span",{class:"subtitle-1 text-center"},"No. HP: ",-1)),ni=y(()=>r("span",{style:{color:"red"}},"*",-1)),oi=y(()=>r("span",{class:"subtitle-1 text-center"},"Hasil Survei: ",-1)),ri=y(()=>r("span",{style:{color:"red"}},"*",-1)),ui=y(()=>r("span",{class:"subtitle-1 text-center"},"Alasan: ",-1));function di(t,a,n,f,s,o){const i=he("phase"),b=he("EasyDataTable");return d(),D("div",null,[s.dataLoaded?(d(),h(A,{key:0},{default:l(()=>[e(k,{"prepend-icon":"mdi-arrow-left",variant:"text",class:"mt-2",onClick:o.back},{default:l(()=>[p(" Kembali ")]),_:1},8,["onClick"]),e(re,{class:"text-2xl font-weight-bold d-flex justify-left"},{default:l(()=>[p(" Detail Kredit ")]),_:1}),e(P,null,{default:l(()=>[e(wt,{"model-value":s.stepperModel,mobile:s.isMobile},{default:l(()=>[e(Vt,null,{default:l(()=>[e(ye,{title:"Phase 1 (Pooling)",value:"1",complete:s.stepperModel>1},null,8,["complete"]),e(X),e(ye,{title:"Phase 2 (SLIK)",value:"2",complete:s.stepperModel>2},null,8,["complete"]),e(X),e(ye,{title:"Phase 3 (Survei)",value:"3",complete:s.stepperModel>3},null,8,["complete"]),e(X),e(ye,{title:"Phase 4 (Komite)",value:"4",complete:s.stepperModel>4},null,8,["complete"]),e(X),e(ye,{title:"Operation",value:"5",complete:s.stepperModel>5},null,8,["complete"]),e(X),e(ye,{title:"Pencairan",value:"6",complete:s.stepperModel>6},null,8,["complete"])]),_:1}),e(Ct,null,{default:l(()=>[s.userData&&s.userData.position.role.isPhase1Access==1?(d(),h(te,{key:0,value:"1"},{default:l(()=>[e(i,{dataFile:s.dataFile,userData:s.userData,"insert-note":o.insertNote,"change-approval":o.changeApproval,"format-date":o.formatDate,"open-modal":o.openModal,"delete-attachment":o.deleteAttachment,"delete-note":o.deleteNote,"get-detail-file":o.getDetailFile,step:o.step,"file-id":o.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":o.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":o.modalNote,phase1Attachments:s.dataAttachPhase1,phase2Attachments:s.dataAttachPhase2,phase3Attachments:s.dataAttachPhase3,phase4Attachments:s.dataAttachPhase4,phase5Attachments:s.dataAttachPhase5,submissions:s.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1})):(d(),h(te,{key:1,value:"1"},{default:l(()=>[As]),_:1})),s.userData&&s.userData.position.role.isPhase2Access==1?(d(),h(te,{key:2,value:"2"},{default:l(()=>[e(i,{dataFile:s.dataFile,userData:s.userData,"insert-note":o.insertNote,"change-approval":o.changeApproval,"format-date":o.formatDate,"open-modal":o.openModal,"delete-attachment":o.deleteAttachment,"delete-note":o.deleteNote,"get-detail-file":o.getDetailFile,step:o.step,"file-id":o.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":o.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":o.modalNote,phase1Attachments:s.dataAttachPhase1,phase2Attachments:s.dataAttachPhase2,phase3Attachments:s.dataAttachPhase3,phase4Attachments:s.dataAttachPhase4,phase5Attachments:s.dataAttachPhase5,submissions:s.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1})):(d(),h(te,{key:3,value:"2"},{default:l(()=>[bs]),_:1})),s.userData&&s.userData.position.role.isPhase3Access==1?(d(),h(te,{key:4,value:"3"},{default:l(()=>[e(i,{dataFile:s.dataFile,userData:s.userData,"insert-note":o.insertNote,"change-approval":o.changeApproval,"format-date":o.formatDate,"open-modal":o.openModal,"delete-attachment":o.deleteAttachment,"delete-note":o.deleteNote,"get-detail-file":o.getDetailFile,step:o.step,"file-id":o.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":o.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":o.modalNote,phase1Attachments:s.dataAttachPhase1,phase2Attachments:s.dataAttachPhase2,phase3Attachments:s.dataAttachPhase3,phase4Attachments:s.dataAttachPhase4,phase5Attachments:s.dataAttachPhase5,submissions:s.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1})):(d(),h(te,{key:5,value:"3"},{default:l(()=>[Ss]),_:1})),s.userData&&s.userData.position.role.isPhase4Access==1?(d(),h(te,{key:6,value:"4"},{default:l(()=>[e(i,{dataFile:s.dataFile,userData:s.userData,"insert-note":o.insertNote,"change-approval":o.changeApproval,"format-date":o.formatDate,"open-modal":o.openModal,"delete-attachment":o.deleteAttachment,"delete-note":o.deleteNote,"get-detail-file":o.getDetailFile,step:o.step,"file-id":o.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":o.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":o.modalNote,phase1Attachments:s.dataAttachPhase1,phase2Attachments:s.dataAttachPhase2,phase3Attachments:s.dataAttachPhase3,phase4Attachments:s.dataAttachPhase4,phase5Attachments:s.dataAttachPhase5,submissions:s.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1})):(d(),h(te,{key:7,value:"4"},{default:l(()=>[Fs]),_:1})),e(te,{value:"5"},{default:l(()=>[e(i,{dataFile:s.dataFile,userData:s.userData,"insert-note":o.insertNote,"change-approval":o.changeApproval,"format-date":o.formatDate,"open-modal":o.openModal,"delete-attachment":o.deleteAttachment,"delete-note":o.deleteNote,"get-detail-file":o.getDetailFile,step:o.step,"file-id":o.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":o.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":o.modalNote,phase1Attachments:s.dataAttachPhase1,phase2Attachments:s.dataAttachPhase2,phase3Attachments:s.dataAttachPhase3,phase4Attachments:s.dataAttachPhase4,phase5Attachments:s.dataAttachPhase5,submissions:s.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1}),e(te,{value:"6"},{default:l(()=>[e(i,{dataFile:s.dataFile,userData:s.userData,"insert-note":o.insertNote,"change-approval":o.changeApproval,"format-date":o.formatDate,"open-modal":o.openModal,"delete-attachment":o.deleteAttachment,"delete-note":o.deleteNote,"get-detail-file":o.getDetailFile,step:o.step,"file-id":o.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":o.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":o.modalNote,phase1Attachments:s.dataAttachPhase1,phase2Attachments:s.dataAttachPhase2,phase3Attachments:s.dataAttachPhase3,phase4Attachments:s.dataAttachPhase4,phase5Attachments:s.dataAttachPhase5,submissions:s.fileSubmissions},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note","phase1Attachments","phase2Attachments","phase3Attachments","phase4Attachments","phase5Attachments","submissions"])]),_:1})]),_:1})]),_:1},8,["model-value","mobile"])]),_:1})]),_:1})):(d(),h(A,{key:1},{default:l(()=>[e(re,{class:"text-2xl font-weight-bold d-flex justify-left"},{default:l(()=>[p(" Mempersiapkan data..... ")]),_:1})]),_:1})),e(L,{modelValue:s.insertAttch,"onUpdate:modelValue":a[9]||(a[9]=u=>s.insertAttch=u),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Tambah Data ")]),text:l(()=>[e(W,{onSubmit:J(o.insertAttachment,["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(c,{md:"12",cols:"12"},{default:l(()=>[e(vs,{label:"Pilih Tipe File",items:s.nameFileList,modelValue:s.attachFile.name,"onUpdate:modelValue":a[0]||(a[0]=u=>s.attachFile.name=u)},null,8,["items","modelValue"])]),_:1}),s.attachFile&&s.attachFile.name&&s.attachFile.name.value=="Lain-lain"?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[Ps,xs,e(w,{class:"my-3",modelValue:s.attachFile.note,"onUpdate:modelValue":a[1]||(a[1]=u=>s.attachFile.note=u),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1})):m("",!0),e(c,{md:"12",cols:"12"},{default:l(()=>[Ds,Is,e(le,{modelValue:s.selectedOption,"onUpdate:modelValue":a[2]||(a[2]=u=>s.selectedOption=u),mandatory:!0,row:""},{default:l(()=>[e(q,{label:"File",value:"file"}),e(q,{label:"Link",value:"link"})]),_:1},8,["modelValue"])]),_:1}),s.selectedOption==="file"?(d(),h(c,{key:1,md:"12",cols:"12"},{default:l(()=>[ws,Vs,e(ee,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:a[3]||(a[3]=u=>o.handleFileChange(u))},null,8,["rules"])]),_:1})):m("",!0),s.selectedOption==="link"?(d(),h(c,{key:2,md:"12",cols:"12"},{default:l(()=>[Cs,Ts,e(w,{class:"my-3",modelValue:s.attachFile.link,"onUpdate:modelValue":a[4]||(a[4]=u=>s.attachFile.link=u),autofocus:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1})):m("",!0),s.dataFile.phase>=2?(d(),h(c,{key:3,md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Termasuk File Rahasia ? (Detail SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.attachFile.isSecret,"onUpdate:modelValue":a[5]||(a[5]=u=>s.attachFile.isSecret=u),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):m("",!0),e(c,{md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:s.attachFile.isApprove,"onUpdate:modelValue":a[6]||(a[6]=u=>s.attachFile.isApprove=u),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(k,{type:"submit",disabled:!o.isFormValid},{default:l(()=>[p(" Simpan ")]),_:1},8,["disabled"]),r("button",{type:"button",class:"btn btn-blue",onClick:a[7]||(a[7]=u=>o.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(Z,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[8]||(a[8]=u=>s.uploadProgress=u),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:s.updateAttch,"onUpdate:modelValue":a[16]||(a[16]=u=>s.updateAttch=u),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Edit Data ")]),text:l(()=>[e(W,{onSubmit:J(o.editAttachment,["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(c,{md:"12",cols:"12"},{default:l(()=>[Us,Ks,e(w,{class:"my-3",modelValue:s.attachFile.name,"onUpdate:modelValue":a[10]||(a[10]=u=>s.attachFile.name=u),autofocus:"",rules:[s.rules.required],disabled:""},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[Ns,Ms,e(ee,{class:"my-3",accept:"image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",placeholder:"Pick an image",rules:[s.rules.required],onChange:a[11]||(a[11]=u=>o.handleFileChange(u))},null,8,["rules"])]),_:1}),s.dataFile.phase==2?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Termasuk File Rahasia ? (SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.attachFile.isSecret,"onUpdate:modelValue":a[12]||(a[12]=u=>s.attachFile.isSecret=u),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):m("",!0),e(c,{md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Apakah Anda menyetujui file ini ?",items:[{value:1,title:"Setuju"},{value:0,title:"Tidak Setuju"}],modelValue:s.attachFile.isApprove,"onUpdate:modelValue":a[13]||(a[13]=u=>s.attachFile.isApprove=u),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(k,{type:"submit"},{default:l(()=>[p(" Update ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[14]||(a[14]=u=>o.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(Z,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[15]||(a[15]=u=>s.uploadProgress=u),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:s.isUpdateGeneralInfo,"onUpdate:modelValue":a[32]||(a[32]=u=>s.isUpdateGeneralInfo=u),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Edit Informasi Umum ")]),text:l(()=>[e(W,{onSubmit:J(o.updateGeneralInfo,["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(c,{md:"12",cols:"12"},{default:l(()=>[js,Os,e(E,{items:s.typeCreditList,autofocus:"",modelValue:s.generalInfo.type,"onUpdate:modelValue":a[17]||(a[17]=u=>s.generalInfo.type=u),"prepend-icon":"mdi-help-rhombus"},null,8,["items","modelValue"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[Rs,qs,e(w,{class:"my-3",modelValue:s.generalInfo.name,"onUpdate:modelValue":a[18]||(a[18]=u=>s.generalInfo.name=u),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[Ls,Es,e(w,{class:"my-3",modelValue:s.generalInfo.plafon,"onUpdate:modelValue":a[19]||(a[19]=u=>s.generalInfo.plafon=u),type:"text",onInput:o.formatInputPlafon},null,8,["modelValue","onInput"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[zs,Bs,e(w,{class:"my-3",modelValue:s.generalInfo.type_bussiness,"onUpdate:modelValue":a[20]||(a[20]=u=>s.generalInfo.type_bussiness=u),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[Hs,Gs,e(w,{class:"my-3",modelValue:s.generalInfo.desc_bussiness,"onUpdate:modelValue":a[21]||(a[21]=u=>s.generalInfo.desc_bussiness=u),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[Js,Ws,e(E,{items:s.orderList,modelValue:s.generalInfo.order_source,"onUpdate:modelValue":a[22]||(a[22]=u=>s.generalInfo.order_source=u),"prepend-icon":"mdi-help-rhombus"},null,8,["items","modelValue"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[Ys,Xs,e(E,{items:s.statusCreditList,modelValue:s.generalInfo.status_kredit,"onUpdate:modelValue":a[23]||(a[23]=u=>s.generalInfo.status_kredit=u),"prepend-icon":"mdi-help-rhombus"},null,8,["items","modelValue"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[Qs,Zs,e(w,{type:"number",class:"my-3",modelValue:s.generalInfo.nik_pemohon,"onUpdate:modelValue":a[24]||(a[24]=u=>s.generalInfo.nik_pemohon=u),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[$s,ei,e(w,{class:"my-3",modelValue:s.generalInfo.address,"onUpdate:modelValue":a[25]||(a[25]=u=>s.generalInfo.address=u),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[ti,e(w,{type:"number",class:"my-3",modelValue:s.generalInfo.nik_pasangan,"onUpdate:modelValue":a[26]||(a[26]=u=>s.generalInfo.nik_pasangan=u),hint:"kosongkan jika tidak ada"},null,8,["modelValue"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[li,e(w,{type:"text",class:"my-3",modelValue:s.generalInfo.name_pasangan,"onUpdate:modelValue":a[27]||(a[27]=u=>s.generalInfo.name_pasangan=u),hint:"kosongkan jika tidak ada"},null,8,["modelValue"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[ai,e(w,{type:"number",class:"my-3",modelValue:s.generalInfo.nik_jaminan,"onUpdate:modelValue":a[28]||(a[28]=u=>s.generalInfo.nik_jaminan=u),hint:"kosongkan jika tidak ada"},null,8,["modelValue"])]),_:1}),e(c,{md:"12",cols:"12"},{default:l(()=>[si,ii,e(w,{class:"my-3",modelValue:s.generalInfo.no_hp,"onUpdate:modelValue":a[29]||(a[29]=u=>s.generalInfo.no_hp=u),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(k,{type:"submit"},{default:l(()=>[p(" Update ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[30]||(a[30]=u=>o.closeModal(4))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:l(()=>[e(Z,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[31]||(a[31]=u=>s.uploadProgress=u),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:s.isUpdateNote,"onUpdate:modelValue":a[34]||(a[34]=u=>s.isUpdateNote=u),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Update Note ")]),text:l(()=>[e(W,{onSubmit:J(o.updateNote,["prevent"])},{default:l(()=>[e(I,{align:"center",justify:"center"},{default:l(()=>[e(c,{md:"10",cols:"10"},{default:l(()=>[e(Ne,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:s.updateDataNote.note,"onUpdate:modelValue":a[33]||(a[33]=u=>s.updateDataNote.note=u),rows:"2"},null,8,["modelValue"])]),_:1}),e(c,{md:"2",cols:"2"},{default:l(()=>[e(k,{density:"compact",icon:"mdi-note-plus",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:s.isDataPhase3,"onUpdate:modelValue":a[37]||(a[37]=u=>s.isDataPhase3=u),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Hasil Survey ")]),text:l(()=>[e(W,{onSubmit:J(o.updatePhase3,["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(c,{md:"12",cols:"12"},{default:l(()=>[ni,oi,e(Ne,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:s.dataPhase3.surveyResult,"onUpdate:modelValue":a[35]||(a[35]=u=>s.dataPhase3.surveyResult=u),rows:"3"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(k,{type:"submit"},{default:l(()=>[p("Update")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[36]||(a[36]=u=>o.closeModal(5))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:s.isShowTimers,"onUpdate:modelValue":a[38]||(a[38]=u=>s.isShowTimers=u),width:"auto",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Waktu ")]),text:l(()=>[e(b,{headers:s.timerHeaders,items:s.dataFile.phase_times},{"item-timeDiff":l(u=>[p(_(o.calculateTimeDiff(u.startTime,u.endTime)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:s.isShowAttachment,"onUpdate:modelValue":a[39]||(a[39]=u=>s.isShowAttachment=u),width:"auto",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Waktu ")]),text:l(()=>[e(b,{headers:s.attachmentHeaders,items:s.attachments},null,8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:s.isShowHistory,"onUpdate:modelValue":a[40]||(a[40]=u=>s.isShowHistory=u),width:"auto",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Data Riwayat ")]),text:l(()=>[e(b,{"show-index":"",headers:s.historyHeaders,items:s.dataFile.file_activities},{"item-created_at":l(u=>[p(_(o.formatDate(u.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:s.isShowApprovals,"onUpdate:modelValue":a[41]||(a[41]=u=>s.isShowApprovals=u),width:"auto",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Riwayat Persetujuan ")]),text:l(()=>[e(b,{headers:s.approvalHeaders,items:s.dataFile.approvals},{"item-approved":l(u=>[parseInt(u.approved)==1?(d(),h(xe,{key:0,color:"success"},{default:l(()=>[p(" Disetujui ")]),_:1})):(d(),h(xe,{key:1,color:"error"},{default:l(()=>[p(" Belum disetujui ")]),_:1}))]),"item-created_at":l(u=>[p(_(o.formatDate(u.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:s.isChangeStatusCredit,"onUpdate:modelValue":a[45]||(a[45]=u=>s.isChangeStatusCredit=u),width:"auto",transition:"dialog-top-transition"},{default:l(()=>[e(A,null,{title:l(()=>[p(" Ubah Status Kredit ")]),text:l(()=>[e(Qe,{text:"Merubah status data lewat fitur ini dapat menyebabkan ketidaksesuaian alur proses. Harap pastikan data yang diubah sesuai dengan kebutuhan. Jika ada kesalahan, silahkan hubungi Admin. Terima kasih",title:"Perhatian",type:"warning",class:"mb-2"}),e(W,{onSubmit:J(o.updateStatusCredit,["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(c,{md:"12",cols:"12"},{default:l(()=>[e(E,{label:"Ubah Status File",items:[{value:1,title:"Approved"},{value:2,title:"Pending"},{value:3,title:"Rejected"},{value:4,title:"Cancel by Debitur"}],modelValue:s.changeStatus.status,"onUpdate:modelValue":a[42]||(a[42]=u=>s.changeStatus.status=u)},null,8,["modelValue"])]),_:1}),s.changeStatus.status==3||s.changeStatus.status==4?(d(),h(c,{key:0,md:"12",cols:"12"},{default:l(()=>[ri,ui,e(Ne,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:s.changeStatus.reasonRejected,"onUpdate:modelValue":a[43]||(a[43]=u=>s.changeStatus.reasonRejected=u),rows:"2"},null,8,["modelValue"])]),_:1})):m("",!0),e(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(k,{type:"submit"},{default:l(()=>[p(" Simpan ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[44]||(a[44]=u=>o.closeModal(9))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}const Ni=me(ks,[["render",di],["__scopeId","data-v-b9e2a1b6"]]);export{Ni as default};
