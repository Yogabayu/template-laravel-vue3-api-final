import{m as b}from"./index-3332bfc4.js";import{o as u,h as c,w as e,a as t,e as h,f as m,b as r,V as D,i as y,t as v,c as A,F as z,K as U,a1 as $,G as R,d as j,H as Q,I as X,r as W,E as ee,a0 as G}from"./main-bc6d9099.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import{V as _,e as T,c as I,d as f,b as P,g as te}from"./VRow-5d532629.js";import{V,a as ae}from"./VChip-9401b143.js";import{a as k,b as x,c as F,V as se}from"./VMenu-7b36de85.js";import{V as C}from"./VTooltip-6bf396e7.js";import{V as H}from"./VDivider-68eb02f4.js";import{V as q,a as M}from"./VTextField-888f8212.js";import{V as E,a as le,b as ie,c as oe,d as B,e as ne,f as S}from"./VStepper-9d2b39ea.js";import{V as J}from"./VSpacer-edae3b72.js";import{V as re}from"./VOverlay-eee3be00.js";import{V as N}from"./VDialog-3f465cdc.js";import{b as K}from"./VWindowItem-1a693459.js";import{V as Y}from"./VSelect-75c93d4a.js";import"./VGrid-d53fe361.js";import"./VImg-76dba1f8.js";import"./dialog-transition-fe6d6bfb.js";import"./VCheckboxBtn-e9e86d7b.js";const de={name:"Phase",props:{userAccess:{type:Object,required:!0},dataFile:{type:Object,required:!0},userData:{type:Object,required:!0},dataNote:{type:Object,required:!0},updateDataNote:{type:Object,required:!0},insertNote:{type:Function,required:!0},changeApproval:{type:Function,required:!0},formatDate:{type:Function,required:!0},openModal:{type:Function,required:!0},deleteAttachment:{type:Function,required:!0},deleteNote:{type:Function,required:!0},getDetailFile:{type:Function,required:!0},step:{type:Function,required:!0},fileId:{type:String,required:!0},resetNote:{type:Function,required:!0},notePhase1:{type:Object,required:!0},notePhase2:{type:Object,required:!0},notePhase3:{type:Object,required:!0},notePhase4:{type:Object,required:!0},modalNote:{type:Function,required:!0}},data(){return{filePath:this.$filePath,isUpdateNote:!1,currentPage:1,itemsPerPage:10}},computed:{paginatedNotes(){const l=(this.currentPage-1)*this.itemsPerPage,a=l+this.itemsPerPage;return this.dataFile.notes.slice(l,a)}},methods:{onPageChange(l){this.currentPage=l},formatInput(l){return l=l.replace(/\D/g,""),l=l.replace(/\B(?=(\d{3})+(?!\d))/g,","),l}}},O=l=>(Q("data-v-ee921d75"),l=l(),X(),l),ue=O(()=>r("span",null,"Informasi Umum â„¹ï¸",-1)),he=O(()=>r("span",null,"Dokumen Pendukung ðŸ“„",-1)),ce={class:"operation-wrapper"},fe={class:"d-flex justify-space-between"},me=["href"],pe=["onClick"],ge=["onClick"],ye={class:"operation-wrapper"},_e={class:"d-flex justify-space-between"},ve=["href"],Fe=["onClick"],De=["onClick"],be=O(()=>r("span",null,"Survey Lapangan â„¹ï¸",-1)),Pe={key:0},we=O(()=>r("span",null,"Catatan ðŸ“ƒ",-1)),Ie={class:"comment-content"};function xe(l,a,i,g,s,n){return u(),c(_,{color:"backgroundCard"},{default:e(()=>[t(T,{class:"text-2xl font-weight-bold d-flex justify-center"},{default:e(()=>[h(" Detail "),i.dataFile.isApproved==1?(u(),c(V,{key:0,color:"success"},{default:e(()=>[h("Approved")]),_:1})):m("",!0),i.dataFile.isApproved==2?(u(),c(V,{key:1,color:"warning"},{default:e(()=>[h("Pending")]),_:1})):m("",!0),i.dataFile.isApproved==3?(u(),c(V,{key:2,color:"error"},{default:e(()=>[h("Rejected")]),_:1})):m("",!0)]),_:1}),t(P,null,{default:e(()=>[t(_,{class:"mb-5"},{default:e(()=>[t(T,null,{default:e(()=>[t(I,{class:"d-flex justify-space-between"},{default:e(()=>[t(f,{cols:"12",sm:"6",md:"8"},{default:e(()=>[ue]),_:1}),i.userAccess&&i.userAccess.canInsertData?(u(),c(f,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:e(()=>[r("span",null,[t(D,{color:"primary",size:"small",class:"my-3 mx-3",onClick:a[0]||(a[0]=d=>i.openModal(4))},{default:e(()=>[h(" Edit Data ")]),_:1})])]),_:1})):m("",!0)]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(k,{density:"compact"},{default:e(()=>[t(x,null,{prepend:e(()=>[t(y,{icon:"mdi-person"})]),default:e(()=>[t(F,null,{default:e(()=>[h(" Nama Pemohon")]),_:1}),t(F,null,{default:e(()=>[r("strong",null,v(i.dataFile.name),1)]),_:1})]),_:1}),t(k,{density:"compact"},{default:e(()=>[t(x,null,{prepend:e(()=>[t(y,{icon:"mdi-cash"})]),default:e(()=>[t(F,null,{default:e(()=>[h(" Jumlah Plafon")]),_:1}),t(F,null,{default:e(()=>[r("strong",null," Rp "+v(n.formatInput(i.dataFile.plafon)),1)]),_:1})]),_:1})]),_:1}),t(k,{density:"compact"},{default:e(()=>[t(x,null,{prepend:e(()=>[t(y,{icon:"mdi-office-building"})]),default:e(()=>[t(F,null,{default:e(()=>[h(" Jenis Usaha")]),_:1}),t(F,null,{default:e(()=>[r("strong",null,v(i.dataFile.type_bussiness),1)]),_:1})]),_:1})]),_:1}),t(k,{density:"compact"},{default:e(()=>[t(x,null,{prepend:e(()=>[t(y,{icon:"mdi-office-building"})]),default:e(()=>[t(F,null,{default:e(()=>[h(" Deskripsi Usaha")]),_:1}),t(F,null,{default:e(()=>[r("strong",null,v(i.dataFile.desc_bussiness),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(T,null,{default:e(()=>[t(I,{class:"d-flex justify-space-between"},{default:e(()=>[t(f,{cols:"12",sm:"6",md:"8"},{default:e(()=>[he]),_:1}),i.userAccess&&i.userAccess.canInsertData?(u(),c(f,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:e(()=>[r("span",null,[t(D,{color:"primary",size:"small",class:"my-3 mx-3",onClick:a[1]||(a[1]=d=>i.openModal(1))},{default:e(()=>[h(" Tambah Data Lain ")]),_:1})])]),_:1})):m("",!0)]),_:1})]),_:1}),t(P,null,{default:e(()=>[(u(!0),A(R,null,z(i.dataFile.attachments,(d,w)=>(u(),A("div",{key:w},[d.path!=null&&!d.isSecret?(u(),c(k,{key:0,density:"compact"},{default:e(()=>[t(x,null,{prepend:e(()=>[t(y,{icon:"mdi-file"})]),append:e(()=>[r("div",ce,[r("div",fe,[t(C,{location:"top",text:"Lihat File"},{activator:e(({props:o})=>[r("a",U(o,{href:s.filePath+"/"+i.dataFile.id+"/"+d.path,target:"_blank",rel:"noopener noreferrer"}),[r("button",null,[t(y,{size:"20",icon:"bx-link-external",color:"blue"})])],16,me)]),_:2},1024),i.userData.id==i.dataFile.user_id||i.userAccess&&i.userAccess.canInsertData?(u(),c(C,{key:0,location:"top",text:"Edit File"},{activator:e(({props:o})=>[r("button",U(o,{onClick:L=>i.openModal(2,d)}),[t(y,{size:"20",icon:"bx-edit",color:"blue"})],16,pe)]),_:2},1024)):m("",!0),i.userData.id==i.dataFile.user_id||i.userAccess&&i.userAccess.canInsertData?(u(),c(C,{key:1,location:"top",text:"Hapus File"},{activator:e(({props:o})=>[r("button",U(o,{onClick:L=>i.deleteAttachment(d.id)}),[t(y,{size:"20",icon:"bx-trash",color:"red"})],16,ge)]),_:2},1024)):m("",!0)])])]),default:e(()=>[t(F,null,{default:e(()=>[h(v(d.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(u(),c(k,{key:1,density:"compact"},{default:e(()=>[t(x,null,$({prepend:e(()=>[t(y,{icon:"mdi-file"})]),default:e(()=>[t(F,null,{default:e(()=>[h(v(d.name),1)]),_:2},1024)]),_:2},[i.userAccess&&i.userAccess.isSecret?{name:"append",fn:e(()=>[r("div",ye,[r("div",_e,[t(C,{location:"top",text:"Lihat File"},{activator:e(({props:o})=>[r("a",U(o,{href:s.filePath+"/"+i.dataFile.id+"/"+d.path,target:"_blank",rel:"noopener noreferrer"}),[r("button",null,[t(y,{size:"20",icon:"bx-link-external",color:"blue"})])],16,ve)]),_:2},1024),i.userData.id==i.dataFile.user_id||i.userAccess&&i.userAccess.canInsertData?(u(),c(C,{key:0,location:"top",text:"Edit File"},{activator:e(({props:o})=>[r("button",U(o,{onClick:L=>i.openModal(2,d)}),[t(y,{size:"20",icon:"bx-edit",color:"blue"})],16,Fe)]),_:2},1024)):m("",!0),i.userData.id==i.dataFile.user_id||i.userAccess&&i.userAccess.canInsertData?(u(),c(C,{key:1,location:"top",text:"Hapus File"},{activator:e(({props:o})=>[r("button",U(o,{onClick:L=>i.deleteAttachment(d.id)}),[t(y,{size:"20",icon:"bx-trash",color:"red"})],16,De)]),_:2},1024)):m("",!0)])])]),key:"0"}:void 0]),1024)]),_:2},1024))]))),128))]),_:1})]),_:1})]),_:1}),i.dataFile.phase>2?(u(),c(P,{key:0},{default:e(()=>[t(_,{class:"mb-5"},{default:e(()=>[t(T,null,{default:e(()=>[t(I,{class:"d-flex justify-space-between"},{default:e(()=>[t(f,{cols:"12",sm:"6",md:"8"},{default:e(()=>[be]),_:1}),i.userAccess&&i.userAccess.canInsertData?(u(),c(f,{key:0,cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"},{default:e(()=>[r("span",null,[t(D,{color:"primary",size:"small",class:"my-3 mx-3",onClick:a[2]||(a[2]=d=>i.openModal(5))},{default:e(()=>[h(" Edit Data ")]),_:1})])]),_:1})):m("",!0)]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(k,{density:"compact"},{default:e(()=>[t(x,null,{prepend:e(()=>[t(y,{icon:"mdi-note-text-outline"})]),default:e(()=>[t(F,null,{default:e(()=>[h(" Hasil Survei")]),_:1}),t(F,null,{default:e(()=>[r("strong",null,v(i.dataFile.surveyResult),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):m("",!0),t(P,null,{default:e(()=>[t(_,null,{default:e(()=>[t(T,null,{default:e(()=>[h(" Status Verifikasi âœ… ")]),_:1}),t(P,null,{default:e(()=>[i.dataFile&&i.dataFile.approvals&&i.dataFile.approvals.length?(u(),A("div",Pe,[(u(!0),A(R,null,z(i.dataFile.approvals,(d,w)=>(u(),A(R,{key:w},[i.dataFile.phase==d.phase?(u(),c(V,{key:0,color:d.approved==1?"success":"error",class:"mr-2",onClick:o=>i.changeApproval(d.id)},{default:e(()=>[h(v(d.user.name),1)]),_:2},1032,["color","onClick"])):m("",!0)],64))),128))])):m("",!0)]),_:1})]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(_,null,{default:e(()=>[t(T,null,{default:e(()=>[h(" Lain - lain ðŸ”¹ ")]),_:1}),t(P,null,{default:e(()=>[r("div",null,[t(ae,null,{default:e(()=>[t(V,{color:"success",onClick:a[3]||(a[3]=d=>i.openModal(6))},{default:e(()=>[h(" Data Durasi Waktu ")]),_:1}),t(V,{color:"success",onClick:a[4]||(a[4]=d=>i.openModal(7))},{default:e(()=>[h(" Data Riwayat File")]),_:1}),t(V,{color:"success",onClick:a[5]||(a[5]=d=>i.openModal(8))},{default:e(()=>[h(" Data Riwayat Persetujuan")]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),t(H),t(P,null,{default:e(()=>[t(_,null,{default:e(()=>[t(T,null,{default:e(()=>[t(I,{class:"d-flex justify-space-between"},{default:e(()=>[t(f,{cols:"12",sm:"6",md:"8"},{default:e(()=>[we]),_:1}),t(f,{cols:"12",sm:"6",md:"4",class:"text-sm-right text-md-right"})]),_:1}),t(q,{onSubmit:j(i.insertNote,["prevent"])},{default:e(()=>[t(I,{align:"center",justify:"center"},{default:e(()=>[t(f,{cols:"12",sm:"8",md:"10"},{default:e(()=>[t(E,{outlined:"",rows:"2",placeholder:"Tambahkan catatan disini",modelValue:i.dataNote.note,"onUpdate:modelValue":a[6]||(a[6]=d=>i.dataNote.note=d)},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",sm:"4",md:"2"},{default:e(()=>[t(D,{color:"primary",icon:"",type:"submit"},{default:e(()=>[t(y,null,{default:e(()=>[h("mdi-note-plus")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),t(P,null,{default:e(()=>[r("div",null,[(u(!0),A(R,null,z(n.paginatedNotes,(d,w)=>(u(),A("div",{key:w,class:"user-comment"},[r("div",Ie,[r("p",null,v(d.note),1),t(I,{class:"justify-space-between mx-2 mb-2"},{default:e(()=>[r("small",null,[r("strong",null,v(d.user.name)+" - "+v(d.user.position.name),1)]),r("small",null,v(i.formatDate(d.created_at)),1)]),_:2},1024)]),i.userData.id==d.user_id?(u(),c(se,{key:0,transition:"scale-transition"},{activator:e(({props:o})=>[t(y,U(o,{class:"ellipsis-icon"}),{default:e(()=>[h("mdi-dots-vertical")]),_:2},1040)]),default:e(()=>[t(k,null,{default:e(()=>[t(x,{color:"primary",onClick:o=>i.openModal(3,d)},{prepend:e(()=>[t(y,{icon:"mdi-edit"})]),default:e(()=>[t(F,null,{default:e(()=>[h(" edit")]),_:1})]),_:2},1032,["onClick"]),t(x,{color:"primary",onClick:o=>i.deleteNote(d.id)},{prepend:e(()=>[t(y,{icon:"mdi-trash"})]),default:e(()=>[t(F,null,{default:e(()=>[h(" hapus")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):m("",!0)]))),128)),t(le,{modelValue:s.currentPage,"onUpdate:modelValue":a[7]||(a[7]=d=>s.currentPage=d),length:Math.ceil(i.dataFile.notes.length/s.itemsPerPage),onInput:n.onPageChange},null,8,["modelValue","length","onInput"])])]),_:1})]),_:1})]),_:1}),t(te,null,{default:e(()=>[i.dataFile.plafon>25e6?(u(),c(f,{key:0,class:"d-flex justify-space-beetwen"},{default:e(()=>[i.dataFile&&i.dataFile.phase>1?(u(),c(D,{key:0,color:"info",text:"Prev",variant:"tonal",onClick:a[8]||(a[8]=d=>i.step(i.fileId,"-"))})):m("",!0),t(J),i.dataFile&&i.dataFile.phase<4?(u(),c(D,{key:1,color:"info",text:"Next",variant:"tonal",onClick:a[9]||(a[9]=d=>i.step(i.fileId,"next"))})):m("",!0)]),_:1})):(u(),c(f,{key:1,class:"d-flex justify-space-beetwen"},{default:e(()=>[i.dataFile&&i.dataFile.phase>1?(u(),c(D,{key:0,color:"info",text:"Prev",variant:"tonal",onClick:a[10]||(a[10]=d=>i.step(i.fileId,"-"))})):m("",!0),t(J),i.dataFile&&i.dataFile.phase<4?(u(),c(D,{key:1,color:"info",text:"Finish",variant:"tonal",onClick:a[11]||(a[11]=d=>i.step(i.fileId,"next"))})):m("",!0)]),_:1}))]),_:1})]),_:1})}const Ve=Z(de,[["render",xe],["__scopeId","data-v-ee921d75"]]),ke={components:{phase:Ve},data(){return{overlay:!1,isMobile:!1,userData:null,userAccess:null,fileId:this.$route.params.fileId,isShowPhase4:!1,isShowTimers:!1,isShowHistory:!1,isShowApprovals:!1,isUpdateGeneralInfo:!1,generalInfo:{id:null,name:"",type_bussiness:"",desc_bussiness:"",plafon:"0"},dataFile:{id:null,user_id:null,phase:1,name:"",type_bussiness:"",desc_bussiness:"",plafon:"0",surveyResult:"-",otsResult:"-",cekLingResult:"-",verTelResult:"-",creditScoring:"-",attachments:[],notes:[],approvals:[],phase_times:[],file_activities:[]},filePath:this.$filePath,timerHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Waktu Mulai",value:"startTime",sortable:!0},{text:"Waktu Selesai",value:"endTime",sortable:!0},{text:"Rentang Waktu",value:"timeDiff",sortable:!0}],historyHeaders:[{text:"User",value:"user.name",sortable:!0},{text:"Aktivitas",value:"activity",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],approvalHeaders:[{text:"Phase",value:"phase",sortable:!0},{text:"Nama",value:"user.name",sortable:!0},{text:"Status",value:"approved",sortable:!0},{text:"Tanggal",value:"created_at",sortable:!0}],isUpdateNote:!1,dataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},updateDataNote:{file_id:this.$route.params.fileId,note:null,isRead:null},phaseNote:[],notesByPhase:{},isModalPhase:!1,insertAttch:!1,updateAttch:!1,rules:{required:l=>!!l||"Required"},uploadProgress:null,attachFile:{id:null,file_id:this.$route.params.fileId,name:null,path:null,note:null,isSecret:!1},notePhase1:[],notePhase2:[],notePhase3:[],notePhase4:[],currentPage:1,itemsPerPage:10,isDataPhase3:!1,dataPhase3:{surveyResult:""}}},computed:{paginatedNotes(){const l=(this.currentPage-1)*this.itemsPerPage,a=l+this.itemsPerPage;return this.dataFile.notes.slice(l,a)}},methods:{calculateTimeDiff(l,a){let i=new Date(l),s=(a?new Date(a):new Date).valueOf()-i.valueOf(),n=Math.floor(s/1e3/60),d=Math.floor(n/60),w=n%60;return`${d} jam ${w} menit`},formatFileId(l){return Array.isArray(l)?l.join(", "):l},async updatePhase3(){try{const l=new FormData;l.append("surveyResult",this.dataPhase3.surveyResult),l.append("_method","PUT");const a=await b.post(`/survey-credit/${this.fileId}`,l);a.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("success","Success",a.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isDataPhase3=!1,this.$showToast("error","Sorry",a.data.message))}catch(l){this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},onPageChange(l){this.currentPage=l},formatInputPlafon(l){let a=l.target.value;a=a.replace(/\D/g,""),a=a.replace(/\B(?=(\d{3})+(?!\d))/g,","),l.target.value=a},formatDate(l){return new Date(l).toLocaleString("id-ID")},resetNote(){this.dataNote={file_id:this.$route.params.fileId,user_id:null,phase:null,note:null,isRead:null}},checkMobile(){this.isMobile=window.innerWidth<728},formatInput(l){return l=l.replace(/\D/g,""),l=l.replace(/\B(?=(\d{3})+(?!\d))/g,","),l},async step(l,a){try{if(a=="next"){if(!window.confirm("Apakah Anda yakin melanjutkan ke tahap selanjutnya"))return;this.overlay=!0;const g=new FormData;g.append("id",l),g.append("type",a),g.append("_method","POST");const s=await b.post("/change-phase-approve",g);s.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",s.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.data.data.message))}else{if(!window.confirm("Apakah Anda yakin Kembali ke phase sebelumnya"))return;this.overlay=!0;const g=new FormData;g.append("id",l),g.append("type",a),g.append("_method","POST");const s=await b.post("/change-phase-approve",g);s.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",s.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",s.data.message))}}catch(i){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.response.data.message)}},async getDetailFile(l){try{this.overlay=!0;const a=await b.get(`/credit/${l}`);if(a.status===200){this.dataFile=a.data.data.file,this.userAccess=a.data.data.userAccess,this.isShowPhase4=!(parseInt(this.dataFile.plafon)<25e6),this.generalInfo.id=this.dataFile.id,this.generalInfo.name=this.dataFile.name,this.generalInfo.type_bussiness=this.dataFile.type_bussiness,this.generalInfo.desc_bussiness=this.dataFile.desc_bussiness,this.generalInfo.plafon=this.dataFile.plafon;for(let i=0;i<5;i++)this.separateNotesByPhase(this.dataFile,i);this.overlay=!1}else this.$showToast("error","Sorry",a.data.data.message),this.overlay=!1}catch(a){this.$showToast("error","Sorry",a.response.data.message),this.overlay=!1}},getUserData(){const l=localStorage.getItem("userData");l&&(this.userData=JSON.parse(l))},openModal(l,a=null){l==1?this.insertAttch=!0:l==2?(this.attachFile.id=a.id,this.attachFile.file_id=a.file_id,this.attachFile.name=a.name,this.updateAttch=!0):l==3?(this.updateDataNote.id=a.id,this.updateDataNote.file_id=a.file_id,this.updateDataNote.note=a.note,this.isUpdateNote=!0):l==4?this.isUpdateGeneralInfo=!0:l==5?(this.dataPhase3.surveyResult=this.dataFile.surveyResult,this.isDataPhase3=!0):l==6?this.isShowTimers=!0:l==7?this.isShowHistory=!0:l==8&&(this.isShowApprovals=!0)},closeModal(l){l===1?(this.resetAttch(),this.insertAttch=!1):l===2?this.updateAttch=!1:l===3?(this.resetNote(),this.updateNote=!1):l==4?this.isUpdateGeneralInfo=!1:l==5&&(this.dataPhase3.surveyResult="",this.isDataPhase3=!1)},async updateGeneralInfo(){try{this.overlay=!0;const l=new FormData;l.append("name",this.generalInfo.name),l.append("plafon",this.generalInfo.plafon.replace(/\D/g,"")),l.append("type_bussiness",this.generalInfo.type_bussiness),l.append("desc_bussiness",this.generalInfo.desc_bussiness),l.append("_method","PUT");const a=await b.post(`/edit-general-info/${this.generalInfo.id}`,l);a.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("success","Success",a.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateGeneralInfo=!1,this.$showToast("error","Sorry",a.data.message))}catch(l){this.isUpdateGeneralInfo=!1,this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},async insertNote(){try{if(this.overlay=!0,this.dataNote.note==null){this.$showToast("error","Sorry","Note cannot be empty"),this.overlay=!1;return}const l=new FormData;l.append("file_id",this.dataNote.file_id),l.append("note",this.dataNote.note),l.append("_method","POST");const a=await b.post("/note",l);a.status===200?(this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Success",a.data.message)):(this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.data.message))}catch(l){this.resetNote(),this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},async updateNote(){try{this.overlay=!0;const l=new FormData;l.append("file_id",this.updateDataNote.file_id),l.append("note",this.updateDataNote.note),l.append("_method","PUT");const a=await b.post(`/note/${this.updateDataNote.id}`,l);a.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("success","Success",a.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.isUpdateNote=!1,this.$showToast("error","Sorry",a.data.message))}catch(l){this.isUpdateNote=!1,this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},async deleteNote(l){try{if(this.overlay=!0,!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;const i=await b.delete(`/note/${l}`);i.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasil",i.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(a){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},separateNotesByPhase(l,a){l.notes.forEach(i=>{if(i.phase==a)switch(a){case 1:this.notePhase1.push(i);break;case 2:this.notePhase2.push(i);break;case 3:this.notePhase3.push(i);break;case 4:this.notePhase4.push(i);break;default:console.log("Invalid phase")}})},modalNote(){this.isModalPhase=!this.isModalPhase,console.log(this.isModalPhase)},async changeApproval(l){try{this.overlay=!0;const a=await b.get(`/change-phase-approve/${l}`);a.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasil",a.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.data.message))}catch(a){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}},handleFileChange(l){const a=l.target.files[0];a&&["image/jpeg","image/png"].includes(a.type)?this.attachFile.path=a:(this.$showToast("error","Error","Hanya file JPG, JPEG, dan PNG yang diizinkan."),l.target.value=null)},resetAttch(){this.attachFile={id:null,file_id:this.$route.params.fileId,name:null,path:null,note:null,isSecret:!1}},async insertAttachment(){try{this.overlay=!0;const l=new FormData;l.append("file_id",this.attachFile.file_id),l.append("name",this.attachFile.name),l.append("path",this.attachFile.path),this.dataFile.phase==2&&l.append("isSecret",this.attachFile.isSecret),l.append("_method","POST");const a={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},i=await b.post("/add-attach",l,a);i.status===200?(this.overlay=!1,this.closeModal(1),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(1),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(l){this.closeModal(1),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},async editAttachment(){try{this.overlay=!0;const l=new FormData;l.append("file_id",this.attachFile.file_id),l.append("name",this.attachFile.name),this.attachFile.path!=null&&l.append("path",this.attachFile.path),this.dataFile.phase==2&&l.append("isSecret",this.attachFile.isSecret),l.append("_method","PUT");const a={onUploadProgress:g=>{try{this.uploadProgress=Math.round(g.loaded*100/g.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},i=await b.post(`/edit-attach/${this.attachFile.id}`,l,a);i.status===200?(this.overlay=!1,this.closeModal(2),this.getDetailFile(this.fileId),this.uploadProgress=null,this.$showToast("success","Success",i.data.message)):(this.overlay=!1,this.closeModal(2),this.uploadProgress=null,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(l){this.closeModal(2),this.getDetailFile(this.fileId),this.$showToast("error","Sorry",l.response.data.message)}},async deleteAttachment(l){try{if(this.overlay=!0,!window.confirm("Apakah Anda yakin ingin menghapus data? Data akan terhapus secara permanen."))return;const i=await b.delete(`/delete-attach/${l}`);i.status===200?(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("success","Berhasil",i.data.message)):(this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",i.data.message))}catch(a){this.overlay=!1,this.getDetailFile(this.fileId),this.$showToast("error","Sorry",a.response.data.message)}}},mounted(){this.checkMobile(),this.getUserData(),this.getDetailFile(this.fileId)}};const p=l=>(Q("data-v-fa0c08ed"),l=l(),X(),l),Se=p(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Ne=p(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Ae=p(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Te=p(()=>r("div",{style:{color:"red","font-size":"20px","text-align":"center",padding:"10px"}}," Anda Dilarang melihat Phase ini ",-1)),Ue=p(()=>r("span",{style:{color:"red"}},"*",-1)),Ce=p(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),Me=p(()=>r("span",{style:{color:"red"}},"*",-1)),je=p(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),qe=p(()=>r("span",{style:{color:"red"}},"*",-1)),Re=p(()=>r("span",{class:"subtitle-1 text-center"},"Keterangan File: ",-1)),Be=p(()=>r("span",{style:{color:"red"}},"*",-1)),He=p(()=>r("span",{class:"subtitle-1 text-center"}," Upload File: ",-1)),Oe=p(()=>r("span",{style:{color:"red"}},"*",-1)),Le=p(()=>r("span",{class:"subtitle-1 text-center"},"Nama Pemohon: ",-1)),ze=p(()=>r("span",{style:{color:"red"}},"*",-1)),Ge=p(()=>r("span",{class:"subtitle-1 text-center"},"Jumlah Plafon: ",-1)),Ee=p(()=>r("span",{style:{color:"red"}},"*",-1)),We=p(()=>r("span",{class:"subtitle-1 text-center"},"Jenis Usaha: ",-1)),Je=p(()=>r("span",{style:{color:"red"}},"*",-1)),Ke=p(()=>r("span",{class:"subtitle-1 text-center"},"Deskripsi Usaha: ",-1)),Ye=p(()=>r("span",{style:{color:"red"}},"*",-1)),Qe=p(()=>r("span",{class:"subtitle-1 text-center"},"Hasil Survei: ",-1));function Xe(l,a,i,g,s,n){const d=W("phase"),w=W("EasyDataTable");return u(),A("div",null,[t(re,{"model-value":s.overlay,class:"align-center justify-center"},{default:e(()=>[t(ee,{color:"blue-lighten-3",indeterminate:"",size:41,width:5}),h(" Loading... ")]),_:1},8,["model-value"]),t(_,null,{default:e(()=>[t(T,{class:"text-2xl font-weight-bold d-flex justify-left"},{default:e(()=>[h(" Credit ")]),_:1}),t(P,null,{default:e(()=>[t(ie,{"model-value":s.dataFile.phase-1,mobile:s.isMobile},{default:e(()=>[t(oe,null,{default:e(()=>[t(B,{title:"Phase 1",value:"1",complete:s.dataFile.phase>1},null,8,["complete"]),t(H),t(B,{title:"Phase 2",value:"2",complete:s.dataFile.phase>2},null,8,["complete"]),t(H),t(B,{title:"Phase 3",value:"3",complete:s.dataFile.phase>3},null,8,["complete"]),s.isShowPhase4?(u(),c(H,{key:0})):m("",!0),s.isShowPhase4?(u(),c(B,{key:1,title:"Phase 4",value:"4",complete:s.dataFile.phase>4},null,8,["complete"])):m("",!0)]),_:1}),t(ne,null,{default:e(()=>[s.userData&&s.userData.position.role.isPhase1Access==1?(u(),c(S,{key:0,value:"1"},{default:e(()=>[t(d,{dataFile:s.dataFile,userData:s.userData,"insert-note":n.insertNote,"change-approval":n.changeApproval,"format-date":n.formatDate,"open-modal":n.openModal,"delete-attachment":n.deleteAttachment,"delete-note":n.deleteNote,"get-detail-file":n.getDetailFile,step:n.step,"file-id":n.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":n.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":n.modalNote},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note"])]),_:1})):(u(),c(S,{key:1,value:"1"},{default:e(()=>[Se]),_:1})),s.userData&&s.userData.position.role.isPhase2Access==1?(u(),c(S,{key:2,value:"2"},{default:e(()=>[t(d,{dataFile:s.dataFile,userData:s.userData,"insert-note":n.insertNote,"change-approval":n.changeApproval,"format-date":n.formatDate,"open-modal":n.openModal,"delete-attachment":n.deleteAttachment,"delete-note":n.deleteNote,"get-detail-file":n.getDetailFile,step:n.step,"file-id":n.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":n.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":n.modalNote},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note"])]),_:1})):(u(),c(S,{key:3,value:"2"},{default:e(()=>[Ne]),_:1})),s.userData&&s.userData.position.role.isPhase3Access==1?(u(),c(S,{key:4,value:"3"},{default:e(()=>[t(d,{dataFile:s.dataFile,userData:s.userData,"insert-note":n.insertNote,"change-approval":n.changeApproval,"format-date":n.formatDate,"open-modal":n.openModal,"delete-attachment":n.deleteAttachment,"delete-note":n.deleteNote,"get-detail-file":n.getDetailFile,step:n.step,"file-id":n.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":n.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":n.modalNote},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note"])]),_:1})):(u(),c(S,{key:5,value:"3"},{default:e(()=>[Ae]),_:1})),s.userData&&s.userData.position.role.isPhase4Access==1?(u(),c(S,{key:6,value:"4"},{default:e(()=>[t(d,{dataFile:s.dataFile,userData:s.userData,"insert-note":n.insertNote,"change-approval":n.changeApproval,"format-date":n.formatDate,"open-modal":n.openModal,"delete-attachment":n.deleteAttachment,"delete-note":n.deleteNote,"get-detail-file":n.getDetailFile,step:n.step,"file-id":n.formatFileId(s.fileId),"user-access":s.userAccess,"reset-note":n.resetNote,"data-note":s.dataNote,"update-data-note":s.updateDataNote,"note-phase1":s.notePhase1,"note-phase2":s.notePhase2,"note-phase3":s.notePhase3,"note-phase4":s.notePhase4,"modal-note":n.modalNote},null,8,["dataFile","userData","insert-note","change-approval","format-date","open-modal","delete-attachment","delete-note","get-detail-file","step","file-id","user-access","reset-note","data-note","update-data-note","note-phase1","note-phase2","note-phase3","note-phase4","modal-note"])]),_:1})):(u(),c(S,{key:7,value:"4"},{default:e(()=>[Te]),_:1}))]),_:1})]),_:1},8,["model-value","mobile"])]),_:1})]),_:1}),t(N,{modelValue:s.insertAttch,"onUpdate:modelValue":a[5]||(a[5]=o=>s.insertAttch=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:e(()=>[t(_,null,{title:e(()=>[h(" Tambah Data ")]),text:e(()=>[t(q,{onSubmit:j(n.insertAttachment,["prevent"])},{default:e(()=>[t(I,null,{default:e(()=>[t(f,{md:"12",cols:"12"},{default:e(()=>[Ue,Ce,t(M,{class:"my-3",modelValue:s.attachFile.name,"onUpdate:modelValue":a[0]||(a[0]=o=>s.attachFile.name=o),autofocus:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(f,{md:"12",cols:"12"},{default:e(()=>[Me,je,t(K,{class:"my-3",accept:"image/jpeg,image/png",placeholder:"Pick an image",rules:[s.rules.required],onChange:a[1]||(a[1]=o=>n.handleFileChange(o))},null,8,["rules"])]),_:1}),s.dataFile.phase==2?(u(),c(f,{key:0,md:"12",cols:"12"},{default:e(()=>[t(Y,{label:"Apakah Termasuk File Rahasia ? (SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.attachFile.isSecret,"onUpdate:modelValue":a[2]||(a[2]=o=>s.attachFile.isSecret=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):m("",!0),t(f,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(D,{type:"submit",disabled:(s.attachFile.name&&s.attachFile.path)==null},{default:e(()=>[h(" Simpan ")]),_:1},8,["disabled"]),r("button",{type:"button",class:"btn btn-blue",onClick:a[3]||(a[3]=o=>n.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:e(()=>[t(G,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[4]||(a[4]=o=>s.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:s.updateAttch,"onUpdate:modelValue":a[11]||(a[11]=o=>s.updateAttch=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:e(()=>[t(_,null,{title:e(()=>[h(" Edit Data ")]),text:e(()=>[t(q,{onSubmit:j(n.editAttachment,["prevent"])},{default:e(()=>[t(I,null,{default:e(()=>[t(f,{md:"12",cols:"12"},{default:e(()=>[qe,Re,t(M,{class:"my-3",modelValue:s.attachFile.name,"onUpdate:modelValue":a[6]||(a[6]=o=>s.attachFile.name=o),autofocus:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(f,{md:"12",cols:"12"},{default:e(()=>[Be,He,t(K,{class:"my-3",accept:"image/jpeg,image/png",placeholder:"Pick an image",rules:[s.rules.required],onChange:a[7]||(a[7]=o=>n.handleFileChange(o))},null,8,["rules"])]),_:1}),s.dataFile.phase==2?(u(),c(f,{key:0,md:"12",cols:"12"},{default:e(()=>[t(Y,{label:"Apakah Termasuk File Rahasia ? (SLIK, dll)",items:[{value:1,title:"Ya"},{value:0,title:"Tidak"}],modelValue:s.attachFile.isSecret,"onUpdate:modelValue":a[8]||(a[8]=o=>s.attachFile.isSecret=o),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1})):m("",!0),t(f,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(D,{type:"submit"},{default:e(()=>[h(" Update ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[9]||(a[9]=o=>n.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:e(()=>[t(G,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[10]||(a[10]=o=>s.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:s.isUpdateGeneralInfo,"onUpdate:modelValue":a[18]||(a[18]=o=>s.isUpdateGeneralInfo=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:e(()=>[t(_,null,{title:e(()=>[h(" Edit Informasi Umum ")]),text:e(()=>[t(q,{onSubmit:j(n.updateGeneralInfo,["prevent"])},{default:e(()=>[t(I,null,{default:e(()=>[t(f,{md:"12",cols:"12"},{default:e(()=>[Oe,Le,t(M,{class:"my-3",modelValue:s.generalInfo.name,"onUpdate:modelValue":a[12]||(a[12]=o=>s.generalInfo.name=o),autofocus:"",rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(f,{md:"12",cols:"12"},{default:e(()=>[ze,Ge,t(M,{class:"my-3",modelValue:s.generalInfo.plafon,"onUpdate:modelValue":a[13]||(a[13]=o=>s.generalInfo.plafon=o),type:"text",onInput:n.formatInputPlafon},null,8,["modelValue","onInput"])]),_:1}),t(f,{md:"12",cols:"12"},{default:e(()=>[Ee,We,t(M,{class:"my-3",modelValue:s.generalInfo.type_bussiness,"onUpdate:modelValue":a[14]||(a[14]=o=>s.generalInfo.type_bussiness=o),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(f,{md:"12",cols:"12"},{default:e(()=>[Je,Ke,t(M,{class:"my-3",modelValue:s.generalInfo.desc_bussiness,"onUpdate:modelValue":a[15]||(a[15]=o=>s.generalInfo.desc_bussiness=o),rules:[s.rules.required]},null,8,["modelValue","rules"])]),_:1}),t(f,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(D,{type:"submit"},{default:e(()=>[h(" Update ")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[16]||(a[16]=o=>n.closeModal(4))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:e(()=>[t(G,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[17]||(a[17]=o=>s.uploadProgress=o),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:s.isUpdateNote,"onUpdate:modelValue":a[20]||(a[20]=o=>s.isUpdateNote=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:e(()=>[t(_,null,{title:e(()=>[h(" Update Note ")]),text:e(()=>[t(q,{onSubmit:j(n.updateNote,["prevent"])},{default:e(()=>[t(I,{align:"center",justify:"center"},{default:e(()=>[t(f,{md:"10",cols:"10"},{default:e(()=>[t(E,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:s.updateDataNote.note,"onUpdate:modelValue":a[19]||(a[19]=o=>s.updateDataNote.note=o),rows:"2"},null,8,["modelValue"])]),_:1}),t(f,{md:"2",cols:"2"},{default:e(()=>[t(D,{density:"compact",icon:"mdi-note-plus",type:"submit"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:s.isDataPhase3,"onUpdate:modelValue":a[23]||(a[23]=o=>s.isDataPhase3=o),width:"auto",persistent:"",transition:"dialog-top-transition"},{default:e(()=>[t(_,null,{title:e(()=>[h(" Hasil Survey ")]),text:e(()=>[t(q,{onSubmit:j(n.updatePhase3,["prevent"])},{default:e(()=>[t(I,null,{default:e(()=>[t(f,{md:"12",cols:"12"},{default:e(()=>[Ye,Qe,t(E,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:s.dataPhase3.surveyResult,"onUpdate:modelValue":a[21]||(a[21]=o=>s.dataPhase3.surveyResult=o),rows:"3"},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(D,{type:"submit"},{default:e(()=>[h("Update")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[22]||(a[22]=o=>n.closeModal(5))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:s.isShowTimers,"onUpdate:modelValue":a[24]||(a[24]=o=>s.isShowTimers=o),width:"auto",transition:"dialog-top-transition"},{default:e(()=>[t(_,null,{title:e(()=>[h(" Data Waktu ")]),text:e(()=>[t(w,{headers:s.timerHeaders,items:s.dataFile.phase_times},{"item-timeDiff":e(o=>[h(v(n.calculateTimeDiff(o.startTime,o.endTime)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:s.isShowHistory,"onUpdate:modelValue":a[25]||(a[25]=o=>s.isShowHistory=o),width:"auto",transition:"dialog-top-transition"},{default:e(()=>[t(_,null,{title:e(()=>[h(" Data Riwayat ")]),text:e(()=>[t(w,{"show-index":"",headers:s.historyHeaders,items:s.dataFile.file_activities},{"item-created_at":e(o=>[h(v(n.formatDate(o.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:s.isShowApprovals,"onUpdate:modelValue":a[26]||(a[26]=o=>s.isShowApprovals=o),width:"auto",transition:"dialog-top-transition"},{default:e(()=>[t(_,null,{title:e(()=>[h(" Riwayat Persetujuan ")]),text:e(()=>[t(w,{headers:s.approvalHeaders,items:s.dataFile.approvals},{"item-approved":e(o=>[o.approved==1?(u(),c(V,{key:0,color:"success"},{default:e(()=>[h(" Disetujui ")]),_:1})):(u(),c(V,{key:1,color:"error"},{default:e(()=>[h(" Belum disetujui ")]),_:1}))]),"item-created_at":e(o=>[h(v(n.formatDate(o.created_at)),1)]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"])])}const yt=Z(ke,[["render",Xe],["__scopeId","data-v-fa0c08ed"]]);export{yt as default};
